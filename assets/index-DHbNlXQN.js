var T_=Object.defineProperty;var Sf=t=>{throw TypeError(t)};var E_=(t,e,n)=>e in t?T_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var N=(t,e,n)=>E_(t,typeof e!="symbol"?e+"":e,n),k_=(t,e,n)=>e.has(t)||Sf("Cannot "+n);var wf=(t,e,n)=>e.has(t)?Sf("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);var So=(t,e,n)=>(k_(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function I_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $g={exports:{}},qa={},Gg={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bs=Symbol.for("react.element"),A_=Symbol.for("react.portal"),M_=Symbol.for("react.fragment"),N_=Symbol.for("react.strict_mode"),P_=Symbol.for("react.profiler"),R_=Symbol.for("react.provider"),D_=Symbol.for("react.context"),L_=Symbol.for("react.forward_ref"),F_=Symbol.for("react.suspense"),z_=Symbol.for("react.memo"),U_=Symbol.for("react.lazy"),bf=Symbol.iterator;function O_(t){return t===null||typeof t!="object"?null:(t=bf&&t[bf]||t["@@iterator"],typeof t=="function"?t:null)}var qg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jg=Object.assign,Wg={};function mo(t,e,n){this.props=t,this.context=e,this.refs=Wg,this.updater=n||qg}mo.prototype.isReactComponent={};mo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jg(){}Jg.prototype=mo.prototype;function Lu(t,e,n){this.props=t,this.context=e,this.refs=Wg,this.updater=n||qg}var Fu=Lu.prototype=new Jg;Fu.constructor=Lu;jg(Fu,mo.prototype);Fu.isPureReactComponent=!0;var Cf=Array.isArray,Yg=Object.prototype.hasOwnProperty,zu={current:null},Kg={key:!0,ref:!0,__self:!0,__source:!0};function Qg(t,e,n){var i,o={},s=null,r=null;if(e!=null)for(i in e.ref!==void 0&&(r=e.ref),e.key!==void 0&&(s=""+e.key),e)Yg.call(e,i)&&!Kg.hasOwnProperty(i)&&(o[i]=e[i]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)o[i]===void 0&&(o[i]=a[i]);return{$$typeof:Bs,type:t,key:s,ref:r,props:o,_owner:zu.current}}function V_(t,e){return{$$typeof:Bs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Uu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bs}function B_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Tf=/\/+/g;function bl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?B_(""+t.key):e.toString(36)}function Dr(t,e,n,i,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var r=!1;if(t===null)r=!0;else switch(s){case"string":case"number":r=!0;break;case"object":switch(t.$$typeof){case Bs:case A_:r=!0}}if(r)return r=t,o=o(r),t=i===""?"."+bl(r,0):i,Cf(o)?(n="",t!=null&&(n=t.replace(Tf,"$&/")+"/"),Dr(o,e,n,"",function(c){return c})):o!=null&&(Uu(o)&&(o=V_(o,n+(!o.key||r&&r.key===o.key?"":(""+o.key).replace(Tf,"$&/")+"/")+t)),e.push(o)),1;if(r=0,i=i===""?".":i+":",Cf(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+bl(s,a);r+=Dr(s,e,n,l,o)}else if(l=O_(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+bl(s,a++),r+=Dr(s,e,n,l,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return r}function Xs(t,e,n){if(t==null)return t;var i=[],o=0;return Dr(t,i,"","",function(s){return e.call(n,s,o++)}),i}function H_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ye={current:null},Lr={transition:null},$_={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:Lr,ReactCurrentOwner:zu};function Xg(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:Xs,forEach:function(t,e,n){Xs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xs(t,function(){e++}),e},toArray:function(t){return Xs(t,function(e){return e})||[]},only:function(t){if(!Uu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Q.Component=mo;Q.Fragment=M_;Q.Profiler=P_;Q.PureComponent=Lu;Q.StrictMode=N_;Q.Suspense=F_;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$_;Q.act=Xg;Q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=jg({},t.props),o=t.key,s=t.ref,r=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,r=zu.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Yg.call(e,l)&&!Kg.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Bs,type:t.type,key:o,ref:s,props:i,_owner:r}};Q.createContext=function(t){return t={$$typeof:D_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:R_,_context:t},t.Consumer=t};Q.createElement=Qg;Q.createFactory=function(t){var e=Qg.bind(null,t);return e.type=t,e};Q.createRef=function(){return{current:null}};Q.forwardRef=function(t){return{$$typeof:L_,render:t}};Q.isValidElement=Uu;Q.lazy=function(t){return{$$typeof:U_,_payload:{_status:-1,_result:t},_init:H_}};Q.memo=function(t,e){return{$$typeof:z_,type:t,compare:e===void 0?null:e}};Q.startTransition=function(t){var e=Lr.transition;Lr.transition={};try{t()}finally{Lr.transition=e}};Q.unstable_act=Xg;Q.useCallback=function(t,e){return Ye.current.useCallback(t,e)};Q.useContext=function(t){return Ye.current.useContext(t)};Q.useDebugValue=function(){};Q.useDeferredValue=function(t){return Ye.current.useDeferredValue(t)};Q.useEffect=function(t,e){return Ye.current.useEffect(t,e)};Q.useId=function(){return Ye.current.useId()};Q.useImperativeHandle=function(t,e,n){return Ye.current.useImperativeHandle(t,e,n)};Q.useInsertionEffect=function(t,e){return Ye.current.useInsertionEffect(t,e)};Q.useLayoutEffect=function(t,e){return Ye.current.useLayoutEffect(t,e)};Q.useMemo=function(t,e){return Ye.current.useMemo(t,e)};Q.useReducer=function(t,e,n){return Ye.current.useReducer(t,e,n)};Q.useRef=function(t){return Ye.current.useRef(t)};Q.useState=function(t){return Ye.current.useState(t)};Q.useSyncExternalStore=function(t,e,n){return Ye.current.useSyncExternalStore(t,e,n)};Q.useTransition=function(){return Ye.current.useTransition()};Q.version="18.3.1";Gg.exports=Q;var je=Gg.exports;const O=I_(je);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_=je,q_=Symbol.for("react.element"),j_=Symbol.for("react.fragment"),W_=Object.prototype.hasOwnProperty,J_=G_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y_={key:!0,ref:!0,__self:!0,__source:!0};function Zg(t,e,n){var i,o={},s=null,r=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(r=e.ref);for(i in e)W_.call(e,i)&&!Y_.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:q_,type:t,key:s,ref:r,props:o,_owner:J_.current}}qa.Fragment=j_;qa.jsx=Zg;qa.jsxs=Zg;$g.exports=qa;var m=$g.exports,dc={},e0={exports:{}},ft={},t0={exports:{}},n0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,F){var z=M.length;M.push(F);e:for(;0<z;){var G=z-1>>>1,H=M[G];if(0<o(H,F))M[G]=F,M[z]=H,z=G;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var F=M[0],z=M.pop();if(z!==F){M[0]=z;e:for(var G=0,H=M.length,J=H>>>1;G<J;){var re=2*(G+1)-1,st=M[re],fe=re+1,Qe=M[fe];if(0>o(st,z))fe<H&&0>o(Qe,st)?(M[G]=Qe,M[fe]=z,G=fe):(M[G]=st,M[re]=z,G=re);else if(fe<H&&0>o(Qe,z))M[G]=Qe,M[fe]=z,G=fe;else break e}}return F}function o(M,F){var z=M.sortIndex-F.sortIndex;return z!==0?z:M.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var r=Date,a=r.now();t.unstable_now=function(){return r.now()-a}}var l=[],c=[],u=1,h=null,p=3,g=!1,x=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var F=n(c);F!==null;){if(F.callback===null)i(c);else if(F.startTime<=M)i(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function b(M){if(y=!1,w(M),!x)if(n(l)!==null)x=!0,$(C);else{var F=n(c);F!==null&&D(b,F.startTime-M)}}function C(M,F){x=!1,y&&(y=!1,v(k),k=-1),g=!0;var z=p;try{for(w(F),h=n(l);h!==null&&(!(h.expirationTime>F)||M&&!L());){var G=h.callback;if(typeof G=="function"){h.callback=null,p=h.priorityLevel;var H=G(h.expirationTime<=F);F=t.unstable_now(),typeof H=="function"?h.callback=H:h===n(l)&&i(l),w(F)}else i(l);h=n(l)}if(h!==null)var J=!0;else{var re=n(c);re!==null&&D(b,re.startTime-F),J=!1}return J}finally{h=null,p=z,g=!1}}var T=!1,E=null,k=-1,A=5,I=-1;function L(){return!(t.unstable_now()-I<A)}function B(){if(E!==null){var M=t.unstable_now();I=M;var F=!0;try{F=E(!0,M)}finally{F?P():(T=!1,E=null)}}else T=!1}var P;if(typeof S=="function")P=function(){S(B)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,j=Y.port2;Y.port1.onmessage=B,P=function(){j.postMessage(null)}}else P=function(){_(B,0)};function $(M){E=M,T||(T=!0,P())}function D(M,F){k=_(function(){M(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,$(C))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var z=p;p=F;try{return M()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,F){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var z=p;p=M;try{return F()}finally{p=z}},t.unstable_scheduleCallback=function(M,F,z){var G=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?G+z:G):z=G,M){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=z+H,M={id:u++,callback:F,priorityLevel:M,startTime:z,expirationTime:H,sortIndex:-1},z>G?(M.sortIndex=z,e(c,M),n(l)===null&&M===n(c)&&(y?(v(k),k=-1):y=!0,D(b,z-G))):(M.sortIndex=H,e(l,M),x||g||(x=!0,$(C))),M},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(M){var F=p;return function(){var z=p;p=F;try{return M.apply(this,arguments)}finally{p=z}}}})(n0);t0.exports=n0;var K_=t0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_=je,dt=K_;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i0=new Set,gs={};function Ei(t,e){oo(t,e),oo(t+"Capture",e)}function oo(t,e){for(gs[t]=e,t=0;t<e.length;t++)i0.add(e[t])}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fc=Object.prototype.hasOwnProperty,X_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ef={},kf={};function Z_(t){return fc.call(kf,t)?!0:fc.call(Ef,t)?!1:X_.test(t)?kf[t]=!0:(Ef[t]=!0,!1)}function eS(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tS(t,e,n,i){if(e===null||typeof e>"u"||eS(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ke(t,e,n,i,o,s,r){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=r}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Re[t]=new Ke(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Re[e]=new Ke(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Re[t]=new Ke(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Re[t]=new Ke(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Re[t]=new Ke(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Re[t]=new Ke(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Re[t]=new Ke(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Re[t]=new Ke(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Re[t]=new Ke(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ou=/[\-:]([a-z])/g;function Vu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ou,Vu);Re[e]=new Ke(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ou,Vu);Re[e]=new Ke(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ou,Vu);Re[e]=new Ke(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Re[t]=new Ke(t,1,!1,t.toLowerCase(),null,!1,!1)});Re.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Re[t]=new Ke(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bu(t,e,n,i){var o=Re.hasOwnProperty(e)?Re[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tS(e,n,o,i)&&(n=null),i||o===null?Z_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,i=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var xn=Q_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zs=Symbol.for("react.element"),Di=Symbol.for("react.portal"),Li=Symbol.for("react.fragment"),Hu=Symbol.for("react.strict_mode"),hc=Symbol.for("react.profiler"),o0=Symbol.for("react.provider"),s0=Symbol.for("react.context"),$u=Symbol.for("react.forward_ref"),pc=Symbol.for("react.suspense"),mc=Symbol.for("react.suspense_list"),Gu=Symbol.for("react.memo"),Cn=Symbol.for("react.lazy"),r0=Symbol.for("react.offscreen"),If=Symbol.iterator;function wo(t){return t===null||typeof t!="object"?null:(t=If&&t[If]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,Cl;function Vo(t){if(Cl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cl=e&&e[1]||""}return`
`+Cl+t}var Tl=!1;function El(t,e){if(!t||Tl)return"";Tl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=i.stack.split(`
`),r=o.length-1,a=s.length-1;1<=r&&0<=a&&o[r]!==s[a];)a--;for(;1<=r&&0<=a;r--,a--)if(o[r]!==s[a]){if(r!==1||a!==1)do if(r--,a--,0>a||o[r]!==s[a]){var l=`
`+o[r].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=r&&0<=a);break}}}finally{Tl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vo(t):""}function nS(t){switch(t.tag){case 5:return Vo(t.type);case 16:return Vo("Lazy");case 13:return Vo("Suspense");case 19:return Vo("SuspenseList");case 0:case 2:case 15:return t=El(t.type,!1),t;case 11:return t=El(t.type.render,!1),t;case 1:return t=El(t.type,!0),t;default:return""}}function gc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Li:return"Fragment";case Di:return"Portal";case hc:return"Profiler";case Hu:return"StrictMode";case pc:return"Suspense";case mc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case s0:return(t.displayName||"Context")+".Consumer";case o0:return(t._context.displayName||"Context")+".Provider";case $u:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gu:return e=t.displayName||null,e!==null?e:gc(t.type)||"Memo";case Cn:e=t._payload,t=t._init;try{return gc(t(e))}catch{}}return null}function iS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gc(e);case 8:return e===Hu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function a0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oS(t){var e=a0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(r){i=""+r,s.call(this,r)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(r){i=""+r},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function er(t){t._valueTracker||(t._valueTracker=oS(t))}function l0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=a0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ea(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xc(t,e){var n=e.checked;return ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Af(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Gn(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function c0(t,e){e=e.checked,e!=null&&Bu(t,"checked",e,!1)}function vc(t,e){c0(t,e);var n=Gn(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yc(t,e.type,n):e.hasOwnProperty("defaultValue")&&yc(t,e.type,Gn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yc(t,e,n){(e!=="number"||ea(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bo=Array.isArray;function Ji(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Gn(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function _c(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Nf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(Bo(n)){if(1<n.length)throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gn(n)}}function u0(t,e){var n=Gn(e.value),i=Gn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Pf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function d0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?d0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tr,f0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tr=tr||document.createElement("div"),tr.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sS=["Webkit","ms","Moz","O"];Object.keys(Qo).forEach(function(t){sS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qo[e]=Qo[t]})});function h0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qo.hasOwnProperty(t)&&Qo[t]?(""+e).trim():e+"px"}function p0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=h0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,o):t[n]=o}}var rS=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wc(t,e){if(e){if(rS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function bc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cc=null;function qu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tc=null,Yi=null,Ki=null;function Rf(t){if(t=Gs(t)){if(typeof Tc!="function")throw Error(R(280));var e=t.stateNode;e&&(e=Ka(e),Tc(t.stateNode,t.type,e))}}function m0(t){Yi?Ki?Ki.push(t):Ki=[t]:Yi=t}function g0(){if(Yi){var t=Yi,e=Ki;if(Ki=Yi=null,Rf(t),e)for(t=0;t<e.length;t++)Rf(e[t])}}function x0(t,e){return t(e)}function v0(){}var kl=!1;function y0(t,e,n){if(kl)return t(e,n);kl=!0;try{return x0(t,e,n)}finally{kl=!1,(Yi!==null||Ki!==null)&&(v0(),g0())}}function vs(t,e){var n=t.stateNode;if(n===null)return null;var i=Ka(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var Ec=!1;if(dn)try{var bo={};Object.defineProperty(bo,"passive",{get:function(){Ec=!0}}),window.addEventListener("test",bo,bo),window.removeEventListener("test",bo,bo)}catch{Ec=!1}function aS(t,e,n,i,o,s,r,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Xo=!1,ta=null,na=!1,kc=null,lS={onError:function(t){Xo=!0,ta=t}};function cS(t,e,n,i,o,s,r,a,l){Xo=!1,ta=null,aS.apply(lS,arguments)}function uS(t,e,n,i,o,s,r,a,l){if(cS.apply(this,arguments),Xo){if(Xo){var c=ta;Xo=!1,ta=null}else throw Error(R(198));na||(na=!0,kc=c)}}function ki(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Df(t){if(ki(t)!==t)throw Error(R(188))}function dS(t){var e=t.alternate;if(!e){if(e=ki(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Df(o),t;if(s===i)return Df(o),e;s=s.sibling}throw Error(R(188))}if(n.return!==i.return)n=o,i=s;else{for(var r=!1,a=o.child;a;){if(a===n){r=!0,n=o,i=s;break}if(a===i){r=!0,i=o,n=s;break}a=a.sibling}if(!r){for(a=s.child;a;){if(a===n){r=!0,n=s,i=o;break}if(a===i){r=!0,i=s,n=o;break}a=a.sibling}if(!r)throw Error(R(189))}}if(n.alternate!==i)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function S0(t){return t=dS(t),t!==null?w0(t):null}function w0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=w0(t);if(e!==null)return e;t=t.sibling}return null}var b0=dt.unstable_scheduleCallback,Lf=dt.unstable_cancelCallback,fS=dt.unstable_shouldYield,hS=dt.unstable_requestPaint,Se=dt.unstable_now,pS=dt.unstable_getCurrentPriorityLevel,ju=dt.unstable_ImmediatePriority,C0=dt.unstable_UserBlockingPriority,ia=dt.unstable_NormalPriority,mS=dt.unstable_LowPriority,T0=dt.unstable_IdlePriority,ja=null,jt=null;function gS(t){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(ja,t,void 0,(t.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:yS,xS=Math.log,vS=Math.LN2;function yS(t){return t>>>=0,t===0?32:31-(xS(t)/vS|0)|0}var nr=64,ir=4194304;function Ho(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oa(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,s=t.pingedLanes,r=n&268435455;if(r!==0){var a=r&~o;a!==0?i=Ho(a):(s&=r,s!==0&&(i=Ho(s)))}else r=n&~o,r!==0?i=Ho(r):s!==0&&(i=Ho(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Nt(e),o=1<<n,i|=t[n],e&=~o;return i}function _S(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SS(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var r=31-Nt(s),a=1<<r,l=o[r];l===-1?(!(a&n)||a&i)&&(o[r]=_S(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ic(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function E0(){var t=nr;return nr<<=1,!(nr&4194240)&&(nr=64),t}function Il(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nt(e),t[e]=n}function wS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Nt(n),s=1<<o;e[o]=0,i[o]=-1,t[o]=-1,n&=~s}}function Wu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Nt(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}var oe=0;function k0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var I0,Ju,A0,M0,N0,Ac=!1,or=[],Ln=null,Fn=null,zn=null,ys=new Map,_s=new Map,En=[],bS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ff(t,e){switch(t){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":ys.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_s.delete(e.pointerId)}}function Co(t,e,n,i,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},e!==null&&(e=Gs(e),e!==null&&Ju(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function CS(t,e,n,i,o){switch(e){case"focusin":return Ln=Co(Ln,t,e,n,i,o),!0;case"dragenter":return Fn=Co(Fn,t,e,n,i,o),!0;case"mouseover":return zn=Co(zn,t,e,n,i,o),!0;case"pointerover":var s=o.pointerId;return ys.set(s,Co(ys.get(s)||null,t,e,n,i,o)),!0;case"gotpointercapture":return s=o.pointerId,_s.set(s,Co(_s.get(s)||null,t,e,n,i,o)),!0}return!1}function P0(t){var e=ci(t.target);if(e!==null){var n=ki(e);if(n!==null){if(e=n.tag,e===13){if(e=_0(n),e!==null){t.blockedOn=e,N0(t.priority,function(){A0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Cc=i,n.target.dispatchEvent(i),Cc=null}else return e=Gs(n),e!==null&&Ju(e),t.blockedOn=n,!1;e.shift()}return!0}function zf(t,e,n){Fr(t)&&n.delete(e)}function TS(){Ac=!1,Ln!==null&&Fr(Ln)&&(Ln=null),Fn!==null&&Fr(Fn)&&(Fn=null),zn!==null&&Fr(zn)&&(zn=null),ys.forEach(zf),_s.forEach(zf)}function To(t,e){t.blockedOn===e&&(t.blockedOn=null,Ac||(Ac=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,TS)))}function Ss(t){function e(o){return To(o,t)}if(0<or.length){To(or[0],t);for(var n=1;n<or.length;n++){var i=or[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ln!==null&&To(Ln,t),Fn!==null&&To(Fn,t),zn!==null&&To(zn,t),ys.forEach(e),_s.forEach(e),n=0;n<En.length;n++)i=En[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<En.length&&(n=En[0],n.blockedOn===null);)P0(n),n.blockedOn===null&&En.shift()}var Qi=xn.ReactCurrentBatchConfig,sa=!0;function ES(t,e,n,i){var o=oe,s=Qi.transition;Qi.transition=null;try{oe=1,Yu(t,e,n,i)}finally{oe=o,Qi.transition=s}}function kS(t,e,n,i){var o=oe,s=Qi.transition;Qi.transition=null;try{oe=4,Yu(t,e,n,i)}finally{oe=o,Qi.transition=s}}function Yu(t,e,n,i){if(sa){var o=Mc(t,e,n,i);if(o===null)Ul(t,e,i,ra,n),Ff(t,i);else if(CS(o,t,e,n,i))i.stopPropagation();else if(Ff(t,i),e&4&&-1<bS.indexOf(t)){for(;o!==null;){var s=Gs(o);if(s!==null&&I0(s),s=Mc(t,e,n,i),s===null&&Ul(t,e,i,ra,n),s===o)break;o=s}o!==null&&i.stopPropagation()}else Ul(t,e,i,null,n)}}var ra=null;function Mc(t,e,n,i){if(ra=null,t=qu(i),t=ci(t),t!==null)if(e=ki(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ra=t,null}function R0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pS()){case ju:return 1;case C0:return 4;case ia:case mS:return 16;case T0:return 536870912;default:return 16}default:return 16}}var In=null,Ku=null,zr=null;function D0(){if(zr)return zr;var t,e=Ku,n=e.length,i,o="value"in In?In.value:In.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var r=n-t;for(i=1;i<=r&&e[n-i]===o[s-i];i++);return zr=o.slice(t,1<i?1-i:void 0)}function Ur(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sr(){return!0}function Uf(){return!1}function ht(t){function e(n,i,o,s,r){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sr:Uf,this.isPropagationStopped=Uf,this}return ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),e}var go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qu=ht(go),$s=ve({},go,{view:0,detail:0}),IS=ht($s),Al,Ml,Eo,Wa=ve({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Eo&&(Eo&&t.type==="mousemove"?(Al=t.screenX-Eo.screenX,Ml=t.screenY-Eo.screenY):Ml=Al=0,Eo=t),Al)},movementY:function(t){return"movementY"in t?t.movementY:Ml}}),Of=ht(Wa),AS=ve({},Wa,{dataTransfer:0}),MS=ht(AS),NS=ve({},$s,{relatedTarget:0}),Nl=ht(NS),PS=ve({},go,{animationName:0,elapsedTime:0,pseudoElement:0}),RS=ht(PS),DS=ve({},go,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),LS=ht(DS),FS=ve({},go,{data:0}),Vf=ht(FS),zS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},US={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OS[t])?!!e[t]:!1}function Xu(){return VS}var BS=ve({},$s,{key:function(t){if(t.key){var e=zS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ur(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?US[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xu,charCode:function(t){return t.type==="keypress"?Ur(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ur(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HS=ht(BS),$S=ve({},Wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bf=ht($S),GS=ve({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xu}),qS=ht(GS),jS=ve({},go,{propertyName:0,elapsedTime:0,pseudoElement:0}),WS=ht(jS),JS=ve({},Wa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YS=ht(JS),KS=[9,13,27,32],Zu=dn&&"CompositionEvent"in window,Zo=null;dn&&"documentMode"in document&&(Zo=document.documentMode);var QS=dn&&"TextEvent"in window&&!Zo,L0=dn&&(!Zu||Zo&&8<Zo&&11>=Zo),Hf=" ",$f=!1;function F0(t,e){switch(t){case"keyup":return KS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fi=!1;function XS(t,e){switch(t){case"compositionend":return z0(e);case"keypress":return e.which!==32?null:($f=!0,Hf);case"textInput":return t=e.data,t===Hf&&$f?null:t;default:return null}}function ZS(t,e){if(Fi)return t==="compositionend"||!Zu&&F0(t,e)?(t=D0(),zr=Ku=In=null,Fi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return L0&&e.locale!=="ko"?null:e.data;default:return null}}var ew={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ew[t.type]:e==="textarea"}function U0(t,e,n,i){m0(i),e=aa(e,"onChange"),0<e.length&&(n=new Qu("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var es=null,ws=null;function tw(t){Y0(t,0)}function Ja(t){var e=Oi(t);if(l0(e))return t}function nw(t,e){if(t==="change")return e}var O0=!1;if(dn){var Pl;if(dn){var Rl="oninput"in document;if(!Rl){var qf=document.createElement("div");qf.setAttribute("oninput","return;"),Rl=typeof qf.oninput=="function"}Pl=Rl}else Pl=!1;O0=Pl&&(!document.documentMode||9<document.documentMode)}function jf(){es&&(es.detachEvent("onpropertychange",V0),ws=es=null)}function V0(t){if(t.propertyName==="value"&&Ja(ws)){var e=[];U0(e,ws,t,qu(t)),y0(tw,e)}}function iw(t,e,n){t==="focusin"?(jf(),es=e,ws=n,es.attachEvent("onpropertychange",V0)):t==="focusout"&&jf()}function ow(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ja(ws)}function sw(t,e){if(t==="click")return Ja(e)}function rw(t,e){if(t==="input"||t==="change")return Ja(e)}function aw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ft=typeof Object.is=="function"?Object.is:aw;function bs(t,e){if(Ft(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!fc.call(e,o)||!Ft(t[o],e[o]))return!1}return!0}function Wf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jf(t,e){var n=Wf(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wf(n)}}function B0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?B0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function H0(){for(var t=window,e=ea();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ea(t.document)}return e}function ed(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lw(t){var e=H0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&B0(n.ownerDocument.documentElement,n)){if(i!==null&&ed(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(i.start,o);i=i.end===void 0?s:Math.min(i.end,o),!t.extend&&s>i&&(o=i,i=s,s=o),o=Jf(n,s);var r=Jf(n,i);o&&r&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==r.node||t.focusOffset!==r.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(r.node,r.offset)):(e.setEnd(r.node,r.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cw=dn&&"documentMode"in document&&11>=document.documentMode,zi=null,Nc=null,ts=null,Pc=!1;function Yf(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pc||zi==null||zi!==ea(i)||(i=zi,"selectionStart"in i&&ed(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ts&&bs(ts,i)||(ts=i,i=aa(Nc,"onSelect"),0<i.length&&(e=new Qu("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=zi)))}function rr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ui={animationend:rr("Animation","AnimationEnd"),animationiteration:rr("Animation","AnimationIteration"),animationstart:rr("Animation","AnimationStart"),transitionend:rr("Transition","TransitionEnd")},Dl={},$0={};dn&&($0=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function Ya(t){if(Dl[t])return Dl[t];if(!Ui[t])return t;var e=Ui[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $0)return Dl[t]=e[n];return t}var G0=Ya("animationend"),q0=Ya("animationiteration"),j0=Ya("animationstart"),W0=Ya("transitionend"),J0=new Map,Kf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jn(t,e){J0.set(t,e),Ei(e,[t])}for(var Ll=0;Ll<Kf.length;Ll++){var Fl=Kf[Ll],uw=Fl.toLowerCase(),dw=Fl[0].toUpperCase()+Fl.slice(1);Jn(uw,"on"+dw)}Jn(G0,"onAnimationEnd");Jn(q0,"onAnimationIteration");Jn(j0,"onAnimationStart");Jn("dblclick","onDoubleClick");Jn("focusin","onFocus");Jn("focusout","onBlur");Jn(W0,"onTransitionEnd");oo("onMouseEnter",["mouseout","mouseover"]);oo("onMouseLeave",["mouseout","mouseover"]);oo("onPointerEnter",["pointerout","pointerover"]);oo("onPointerLeave",["pointerout","pointerover"]);Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fw=new Set("cancel close invalid load scroll toggle".split(" ").concat($o));function Qf(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,uS(i,e,void 0,t),t.currentTarget=null}function Y0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var r=i.length-1;0<=r;r--){var a=i[r],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;Qf(o,a,c),s=l}else for(r=0;r<i.length;r++){if(a=i[r],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;Qf(o,a,c),s=l}}}if(na)throw t=kc,na=!1,kc=null,t}function ce(t,e){var n=e[zc];n===void 0&&(n=e[zc]=new Set);var i=t+"__bubble";n.has(i)||(K0(e,t,2,!1),n.add(i))}function zl(t,e,n){var i=0;e&&(i|=4),K0(n,t,i,e)}var ar="_reactListening"+Math.random().toString(36).slice(2);function Cs(t){if(!t[ar]){t[ar]=!0,i0.forEach(function(n){n!=="selectionchange"&&(fw.has(n)||zl(n,!1,t),zl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ar]||(e[ar]=!0,zl("selectionchange",!1,e))}}function K0(t,e,n,i){switch(R0(e)){case 1:var o=ES;break;case 4:o=kS;break;default:o=Yu}n=o.bind(null,e,n,t),o=void 0,!Ec||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Ul(t,e,n,i,o){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var a=i.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(r===4)for(r=i.return;r!==null;){var l=r.tag;if((l===3||l===4)&&(l=r.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;r=r.return}for(;a!==null;){if(r=ci(a),r===null)return;if(l=r.tag,l===5||l===6){i=s=r;continue e}a=a.parentNode}}i=i.return}y0(function(){var c=s,u=qu(n),h=[];e:{var p=J0.get(t);if(p!==void 0){var g=Qu,x=t;switch(t){case"keypress":if(Ur(n)===0)break e;case"keydown":case"keyup":g=HS;break;case"focusin":x="focus",g=Nl;break;case"focusout":x="blur",g=Nl;break;case"beforeblur":case"afterblur":g=Nl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Of;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=MS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=qS;break;case G0:case q0:case j0:g=RS;break;case W0:g=WS;break;case"scroll":g=IS;break;case"wheel":g=YS;break;case"copy":case"cut":case"paste":g=LS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Bf}var y=(e&4)!==0,_=!y&&t==="scroll",v=y?p!==null?p+"Capture":null:p;y=[];for(var S=c,w;S!==null;){w=S;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,v!==null&&(b=vs(S,v),b!=null&&y.push(Ts(S,b,w)))),_)break;S=S.return}0<y.length&&(p=new g(p,x,null,n,u),h.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Cc&&(x=n.relatedTarget||n.fromElement)&&(ci(x)||x[fn]))break e;if((g||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=c,x=x?ci(x):null,x!==null&&(_=ki(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=c),g!==x)){if(y=Of,b="onMouseLeave",v="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(y=Bf,b="onPointerLeave",v="onPointerEnter",S="pointer"),_=g==null?p:Oi(g),w=x==null?p:Oi(x),p=new y(b,S+"leave",g,n,u),p.target=_,p.relatedTarget=w,b=null,ci(u)===c&&(y=new y(v,S+"enter",x,n,u),y.target=w,y.relatedTarget=_,b=y),_=b,g&&x)t:{for(y=g,v=x,S=0,w=y;w;w=Mi(w))S++;for(w=0,b=v;b;b=Mi(b))w++;for(;0<S-w;)y=Mi(y),S--;for(;0<w-S;)v=Mi(v),w--;for(;S--;){if(y===v||v!==null&&y===v.alternate)break t;y=Mi(y),v=Mi(v)}y=null}else y=null;g!==null&&Xf(h,p,g,y,!1),x!==null&&_!==null&&Xf(h,_,x,y,!0)}}e:{if(p=c?Oi(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var C=nw;else if(Gf(p))if(O0)C=rw;else{C=ow;var T=iw}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=sw);if(C&&(C=C(t,c))){U0(h,C,n,u);break e}T&&T(t,p,c),t==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&yc(p,"number",p.value)}switch(T=c?Oi(c):window,t){case"focusin":(Gf(T)||T.contentEditable==="true")&&(zi=T,Nc=c,ts=null);break;case"focusout":ts=Nc=zi=null;break;case"mousedown":Pc=!0;break;case"contextmenu":case"mouseup":case"dragend":Pc=!1,Yf(h,n,u);break;case"selectionchange":if(cw)break;case"keydown":case"keyup":Yf(h,n,u)}var E;if(Zu)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Fi?F0(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(L0&&n.locale!=="ko"&&(Fi||k!=="onCompositionStart"?k==="onCompositionEnd"&&Fi&&(E=D0()):(In=u,Ku="value"in In?In.value:In.textContent,Fi=!0)),T=aa(c,k),0<T.length&&(k=new Vf(k,t,null,n,u),h.push({event:k,listeners:T}),E?k.data=E:(E=z0(n),E!==null&&(k.data=E)))),(E=QS?XS(t,n):ZS(t,n))&&(c=aa(c,"onBeforeInput"),0<c.length&&(u=new Vf("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=E))}Y0(h,e)})}function Ts(t,e,n){return{instance:t,listener:e,currentTarget:n}}function aa(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=vs(t,n),s!=null&&i.unshift(Ts(t,s,o)),s=vs(t,e),s!=null&&i.push(Ts(t,s,o))),t=t.return}return i}function Mi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xf(t,e,n,i,o){for(var s=e._reactName,r=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,o?(l=vs(n,s),l!=null&&r.unshift(Ts(n,l,a))):o||(l=vs(n,s),l!=null&&r.push(Ts(n,l,a)))),n=n.return}r.length!==0&&t.push({event:e,listeners:r})}var hw=/\r\n?/g,pw=/\u0000|\uFFFD/g;function Zf(t){return(typeof t=="string"?t:""+t).replace(hw,`
`).replace(pw,"")}function lr(t,e,n){if(e=Zf(e),Zf(t)!==e&&n)throw Error(R(425))}function la(){}var Rc=null,Dc=null;function Lc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fc=typeof setTimeout=="function"?setTimeout:void 0,mw=typeof clearTimeout=="function"?clearTimeout:void 0,eh=typeof Promise=="function"?Promise:void 0,gw=typeof queueMicrotask=="function"?queueMicrotask:typeof eh<"u"?function(t){return eh.resolve(null).then(t).catch(xw)}:Fc;function xw(t){setTimeout(function(){throw t})}function Ol(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){t.removeChild(o),Ss(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);Ss(e)}function Un(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function th(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xo=Math.random().toString(36).slice(2),$t="__reactFiber$"+xo,Es="__reactProps$"+xo,fn="__reactContainer$"+xo,zc="__reactEvents$"+xo,vw="__reactListeners$"+xo,yw="__reactHandles$"+xo;function ci(t){var e=t[$t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fn]||n[$t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=th(t);t!==null;){if(n=t[$t])return n;t=th(t)}return e}t=n,n=t.parentNode}return null}function Gs(t){return t=t[$t]||t[fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Oi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function Ka(t){return t[Es]||null}var Uc=[],Vi=-1;function Yn(t){return{current:t}}function ue(t){0>Vi||(t.current=Uc[Vi],Uc[Vi]=null,Vi--)}function le(t,e){Vi++,Uc[Vi]=t.current,t.current=e}var qn={},He=Yn(qn),nt=Yn(!1),xi=qn;function so(t,e){var n=t.type.contextTypes;if(!n)return qn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function it(t){return t=t.childContextTypes,t!=null}function ca(){ue(nt),ue(He)}function nh(t,e,n){if(He.current!==qn)throw Error(R(168));le(He,e),le(nt,n)}function Q0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(R(108,iS(t)||"Unknown",o));return ve({},n,i)}function ua(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qn,xi=He.current,le(He,t),le(nt,nt.current),!0}function ih(t,e,n){var i=t.stateNode;if(!i)throw Error(R(169));n?(t=Q0(t,e,xi),i.__reactInternalMemoizedMergedChildContext=t,ue(nt),ue(He),le(He,t)):ue(nt),le(nt,n)}var en=null,Qa=!1,Vl=!1;function X0(t){en===null?en=[t]:en.push(t)}function _w(t){Qa=!0,X0(t)}function Kn(){if(!Vl&&en!==null){Vl=!0;var t=0,e=oe;try{var n=en;for(oe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}en=null,Qa=!1}catch(o){throw en!==null&&(en=en.slice(t+1)),b0(ju,Kn),o}finally{oe=e,Vl=!1}}return null}var Bi=[],Hi=0,da=null,fa=0,gt=[],xt=0,vi=null,nn=1,on="";function oi(t,e){Bi[Hi++]=fa,Bi[Hi++]=da,da=t,fa=e}function Z0(t,e,n){gt[xt++]=nn,gt[xt++]=on,gt[xt++]=vi,vi=t;var i=nn;t=on;var o=32-Nt(i)-1;i&=~(1<<o),n+=1;var s=32-Nt(e)+o;if(30<s){var r=o-o%5;s=(i&(1<<r)-1).toString(32),i>>=r,o-=r,nn=1<<32-Nt(e)+o|n<<o|i,on=s+t}else nn=1<<s|n<<o|i,on=t}function td(t){t.return!==null&&(oi(t,1),Z0(t,1,0))}function nd(t){for(;t===da;)da=Bi[--Hi],Bi[Hi]=null,fa=Bi[--Hi],Bi[Hi]=null;for(;t===vi;)vi=gt[--xt],gt[xt]=null,on=gt[--xt],gt[xt]=null,nn=gt[--xt],gt[xt]=null}var ut=null,ct=null,he=!1,It=null;function ex(t,e){var n=vt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function oh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ut=t,ct=Un(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ut=t,ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vi!==null?{id:nn,overflow:on}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ut=t,ct=null,!0):!1;default:return!1}}function Oc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vc(t){if(he){var e=ct;if(e){var n=e;if(!oh(t,e)){if(Oc(t))throw Error(R(418));e=Un(n.nextSibling);var i=ut;e&&oh(t,e)?ex(i,n):(t.flags=t.flags&-4097|2,he=!1,ut=t)}}else{if(Oc(t))throw Error(R(418));t.flags=t.flags&-4097|2,he=!1,ut=t}}}function sh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ut=t}function cr(t){if(t!==ut)return!1;if(!he)return sh(t),he=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lc(t.type,t.memoizedProps)),e&&(e=ct)){if(Oc(t))throw tx(),Error(R(418));for(;e;)ex(t,e),e=Un(e.nextSibling)}if(sh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ct=Un(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ct=null}}else ct=ut?Un(t.stateNode.nextSibling):null;return!0}function tx(){for(var t=ct;t;)t=Un(t.nextSibling)}function ro(){ct=ut=null,he=!1}function id(t){It===null?It=[t]:It.push(t)}var Sw=xn.ReactCurrentBatchConfig;function ko(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var i=n.stateNode}if(!i)throw Error(R(147,t));var o=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(r){var a=o.refs;r===null?delete a[s]:a[s]=r},e._stringRef=s,e)}if(typeof t!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,t))}return t}function ur(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rh(t){var e=t._init;return e(t._payload)}function nx(t){function e(v,S){if(t){var w=v.deletions;w===null?(v.deletions=[S],v.flags|=16):w.push(S)}}function n(v,S){if(!t)return null;for(;S!==null;)e(v,S),S=S.sibling;return null}function i(v,S){for(v=new Map;S!==null;)S.key!==null?v.set(S.key,S):v.set(S.index,S),S=S.sibling;return v}function o(v,S){return v=Hn(v,S),v.index=0,v.sibling=null,v}function s(v,S,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<S?(v.flags|=2,S):w):(v.flags|=2,S)):(v.flags|=1048576,S)}function r(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,S,w,b){return S===null||S.tag!==6?(S=Wl(w,v.mode,b),S.return=v,S):(S=o(S,w),S.return=v,S)}function l(v,S,w,b){var C=w.type;return C===Li?u(v,S,w.props.children,b,w.key):S!==null&&(S.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Cn&&rh(C)===S.type)?(b=o(S,w.props),b.ref=ko(v,S,w),b.return=v,b):(b=qr(w.type,w.key,w.props,null,v.mode,b),b.ref=ko(v,S,w),b.return=v,b)}function c(v,S,w,b){return S===null||S.tag!==4||S.stateNode.containerInfo!==w.containerInfo||S.stateNode.implementation!==w.implementation?(S=Jl(w,v.mode,b),S.return=v,S):(S=o(S,w.children||[]),S.return=v,S)}function u(v,S,w,b,C){return S===null||S.tag!==7?(S=pi(w,v.mode,b,C),S.return=v,S):(S=o(S,w),S.return=v,S)}function h(v,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Wl(""+S,v.mode,w),S.return=v,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zs:return w=qr(S.type,S.key,S.props,null,v.mode,w),w.ref=ko(v,null,S),w.return=v,w;case Di:return S=Jl(S,v.mode,w),S.return=v,S;case Cn:var b=S._init;return h(v,b(S._payload),w)}if(Bo(S)||wo(S))return S=pi(S,v.mode,w,null),S.return=v,S;ur(v,S)}return null}function p(v,S,w,b){var C=S!==null?S.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:a(v,S,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zs:return w.key===C?l(v,S,w,b):null;case Di:return w.key===C?c(v,S,w,b):null;case Cn:return C=w._init,p(v,S,C(w._payload),b)}if(Bo(w)||wo(w))return C!==null?null:u(v,S,w,b,null);ur(v,w)}return null}function g(v,S,w,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(w)||null,a(S,v,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zs:return v=v.get(b.key===null?w:b.key)||null,l(S,v,b,C);case Di:return v=v.get(b.key===null?w:b.key)||null,c(S,v,b,C);case Cn:var T=b._init;return g(v,S,w,T(b._payload),C)}if(Bo(b)||wo(b))return v=v.get(w)||null,u(S,v,b,C,null);ur(S,b)}return null}function x(v,S,w,b){for(var C=null,T=null,E=S,k=S=0,A=null;E!==null&&k<w.length;k++){E.index>k?(A=E,E=null):A=E.sibling;var I=p(v,E,w[k],b);if(I===null){E===null&&(E=A);break}t&&E&&I.alternate===null&&e(v,E),S=s(I,S,k),T===null?C=I:T.sibling=I,T=I,E=A}if(k===w.length)return n(v,E),he&&oi(v,k),C;if(E===null){for(;k<w.length;k++)E=h(v,w[k],b),E!==null&&(S=s(E,S,k),T===null?C=E:T.sibling=E,T=E);return he&&oi(v,k),C}for(E=i(v,E);k<w.length;k++)A=g(E,v,k,w[k],b),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?k:A.key),S=s(A,S,k),T===null?C=A:T.sibling=A,T=A);return t&&E.forEach(function(L){return e(v,L)}),he&&oi(v,k),C}function y(v,S,w,b){var C=wo(w);if(typeof C!="function")throw Error(R(150));if(w=C.call(w),w==null)throw Error(R(151));for(var T=C=null,E=S,k=S=0,A=null,I=w.next();E!==null&&!I.done;k++,I=w.next()){E.index>k?(A=E,E=null):A=E.sibling;var L=p(v,E,I.value,b);if(L===null){E===null&&(E=A);break}t&&E&&L.alternate===null&&e(v,E),S=s(L,S,k),T===null?C=L:T.sibling=L,T=L,E=A}if(I.done)return n(v,E),he&&oi(v,k),C;if(E===null){for(;!I.done;k++,I=w.next())I=h(v,I.value,b),I!==null&&(S=s(I,S,k),T===null?C=I:T.sibling=I,T=I);return he&&oi(v,k),C}for(E=i(v,E);!I.done;k++,I=w.next())I=g(E,v,k,I.value,b),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?k:I.key),S=s(I,S,k),T===null?C=I:T.sibling=I,T=I);return t&&E.forEach(function(B){return e(v,B)}),he&&oi(v,k),C}function _(v,S,w,b){if(typeof w=="object"&&w!==null&&w.type===Li&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Zs:e:{for(var C=w.key,T=S;T!==null;){if(T.key===C){if(C=w.type,C===Li){if(T.tag===7){n(v,T.sibling),S=o(T,w.props.children),S.return=v,v=S;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Cn&&rh(C)===T.type){n(v,T.sibling),S=o(T,w.props),S.ref=ko(v,T,w),S.return=v,v=S;break e}n(v,T);break}else e(v,T);T=T.sibling}w.type===Li?(S=pi(w.props.children,v.mode,b,w.key),S.return=v,v=S):(b=qr(w.type,w.key,w.props,null,v.mode,b),b.ref=ko(v,S,w),b.return=v,v=b)}return r(v);case Di:e:{for(T=w.key;S!==null;){if(S.key===T)if(S.tag===4&&S.stateNode.containerInfo===w.containerInfo&&S.stateNode.implementation===w.implementation){n(v,S.sibling),S=o(S,w.children||[]),S.return=v,v=S;break e}else{n(v,S);break}else e(v,S);S=S.sibling}S=Jl(w,v.mode,b),S.return=v,v=S}return r(v);case Cn:return T=w._init,_(v,S,T(w._payload),b)}if(Bo(w))return x(v,S,w,b);if(wo(w))return y(v,S,w,b);ur(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,S!==null&&S.tag===6?(n(v,S.sibling),S=o(S,w),S.return=v,v=S):(n(v,S),S=Wl(w,v.mode,b),S.return=v,v=S),r(v)):n(v,S)}return _}var ao=nx(!0),ix=nx(!1),ha=Yn(null),pa=null,$i=null,od=null;function sd(){od=$i=pa=null}function rd(t){var e=ha.current;ue(ha),t._currentValue=e}function Bc(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Xi(t,e){pa=t,od=$i=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tt=!0),t.firstContext=null)}function St(t){var e=t._currentValue;if(od!==t)if(t={context:t,memoizedValue:e,next:null},$i===null){if(pa===null)throw Error(R(308));$i=t,pa.dependencies={lanes:0,firstContext:t}}else $i=$i.next=t;return e}var ui=null;function ad(t){ui===null?ui=[t]:ui.push(t)}function ox(t,e,n,i){var o=e.interleaved;return o===null?(n.next=n,ad(e)):(n.next=o.next,o.next=n),e.interleaved=n,hn(t,i)}function hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tn=!1;function ld(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function On(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Z&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,hn(t,n)}return o=i.interleaved,o===null?(e.next=e,ad(i)):(e.next=o.next,o.next=e),i.interleaved=e,hn(t,n)}function Or(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Wu(t,n)}}function ah(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var r={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=r:s=s.next=r,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ma(t,e,n,i){var o=t.updateQueue;Tn=!1;var s=o.firstBaseUpdate,r=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,r===null?s=c:r.next=c,r=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==r&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=o.baseState;r=0,u=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((i&p)===p){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,y=a;switch(p=e,g=n,y.tag){case 1:if(x=y.payload,typeof x=="function"){h=x.call(g,h,p);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,p=typeof x=="function"?x.call(g,h,p):x,p==null)break e;h=ve({},h,p);break e;case 2:Tn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=o.effects,p===null?o.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=h):u=u.next=g,r|=p;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;p=a,a=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);if(u===null&&(l=h),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,e=o.shared.interleaved,e!==null){o=e;do r|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);_i|=r,t.lanes=r,t.memoizedState=h}}function lh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(R(191,o));o.call(i)}}}var qs={},Wt=Yn(qs),ks=Yn(qs),Is=Yn(qs);function di(t){if(t===qs)throw Error(R(174));return t}function cd(t,e){switch(le(Is,e),le(ks,t),le(Wt,qs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sc(e,t)}ue(Wt),le(Wt,e)}function lo(){ue(Wt),ue(ks),ue(Is)}function rx(t){di(Is.current);var e=di(Wt.current),n=Sc(e,t.type);e!==n&&(le(ks,t),le(Wt,n))}function ud(t){ks.current===t&&(ue(Wt),ue(ks))}var ge=Yn(0);function ga(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bl=[];function dd(){for(var t=0;t<Bl.length;t++)Bl[t]._workInProgressVersionPrimary=null;Bl.length=0}var Vr=xn.ReactCurrentDispatcher,Hl=xn.ReactCurrentBatchConfig,yi=0,xe=null,Ce=null,ke=null,xa=!1,ns=!1,As=0,ww=0;function De(){throw Error(R(321))}function fd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ft(t[n],e[n]))return!1;return!0}function hd(t,e,n,i,o,s){if(yi=s,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vr.current=t===null||t.memoizedState===null?Ew:kw,t=n(i,o),ns){s=0;do{if(ns=!1,As=0,25<=s)throw Error(R(301));s+=1,ke=Ce=null,e.updateQueue=null,Vr.current=Iw,t=n(i,o)}while(ns)}if(Vr.current=va,e=Ce!==null&&Ce.next!==null,yi=0,ke=Ce=xe=null,xa=!1,e)throw Error(R(300));return t}function pd(){var t=As!==0;return As=0,t}function Bt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?xe.memoizedState=ke=t:ke=ke.next=t,ke}function wt(){if(Ce===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Ce.next;var e=ke===null?xe.memoizedState:ke.next;if(e!==null)ke=e,Ce=t;else{if(t===null)throw Error(R(310));Ce=t,t={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},ke===null?xe.memoizedState=ke=t:ke=ke.next=t}return ke}function Ms(t,e){return typeof e=="function"?e(t):e}function $l(t){var e=wt(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var i=Ce,o=i.baseQueue,s=n.pending;if(s!==null){if(o!==null){var r=o.next;o.next=s.next,s.next=r}i.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,i=i.baseState;var a=r=null,l=null,c=s;do{var u=c.lane;if((yi&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,r=i):l=l.next=h,xe.lanes|=u,_i|=u}c=c.next}while(c!==null&&c!==s);l===null?r=i:l.next=a,Ft(i,e.memoizedState)||(tt=!0),e.memoizedState=i,e.baseState=r,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){o=t;do s=o.lane,xe.lanes|=s,_i|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gl(t){var e=wt(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var r=o=o.next;do s=t(s,r.action),r=r.next;while(r!==o);Ft(s,e.memoizedState)||(tt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function ax(){}function lx(t,e){var n=xe,i=wt(),o=e(),s=!Ft(i.memoizedState,o);if(s&&(i.memoizedState=o,tt=!0),i=i.queue,md(dx.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||ke!==null&&ke.memoizedState.tag&1){if(n.flags|=2048,Ns(9,ux.bind(null,n,i,o,e),void 0,null),Ae===null)throw Error(R(349));yi&30||cx(n,e,o)}return o}function cx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ux(t,e,n,i){e.value=n,e.getSnapshot=i,fx(e)&&hx(t)}function dx(t,e,n){return n(function(){fx(e)&&hx(t)})}function fx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ft(t,n)}catch{return!0}}function hx(t){var e=hn(t,1);e!==null&&Pt(e,t,1,-1)}function ch(t){var e=Bt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:t},e.queue=t,t=t.dispatch=Tw.bind(null,xe,t),[e.memoizedState,t]}function Ns(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function px(){return wt().memoizedState}function Br(t,e,n,i){var o=Bt();xe.flags|=t,o.memoizedState=Ns(1|e,n,void 0,i===void 0?null:i)}function Xa(t,e,n,i){var o=wt();i=i===void 0?null:i;var s=void 0;if(Ce!==null){var r=Ce.memoizedState;if(s=r.destroy,i!==null&&fd(i,r.deps)){o.memoizedState=Ns(e,n,s,i);return}}xe.flags|=t,o.memoizedState=Ns(1|e,n,s,i)}function uh(t,e){return Br(8390656,8,t,e)}function md(t,e){return Xa(2048,8,t,e)}function mx(t,e){return Xa(4,2,t,e)}function gx(t,e){return Xa(4,4,t,e)}function xx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vx(t,e,n){return n=n!=null?n.concat([t]):null,Xa(4,4,xx.bind(null,e,t),n)}function gd(){}function yx(t,e){var n=wt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fd(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function _x(t,e){var n=wt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fd(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Sx(t,e,n){return yi&21?(Ft(n,e)||(n=E0(),xe.lanes|=n,_i|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tt=!0),t.memoizedState=n)}function bw(t,e){var n=oe;oe=n!==0&&4>n?n:4,t(!0);var i=Hl.transition;Hl.transition={};try{t(!1),e()}finally{oe=n,Hl.transition=i}}function wx(){return wt().memoizedState}function Cw(t,e,n){var i=Bn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},bx(t))Cx(e,n);else if(n=ox(t,e,n,i),n!==null){var o=We();Pt(n,t,i,o),Tx(n,e,i)}}function Tw(t,e,n){var i=Bn(t),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(bx(t))Cx(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var r=e.lastRenderedState,a=s(r,n);if(o.hasEagerState=!0,o.eagerState=a,Ft(a,r)){var l=e.interleaved;l===null?(o.next=o,ad(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}n=ox(t,e,o,i),n!==null&&(o=We(),Pt(n,t,i,o),Tx(n,e,i))}}function bx(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function Cx(t,e){ns=xa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Tx(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Wu(t,n)}}var va={readContext:St,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},Ew={readContext:St,useCallback:function(t,e){return Bt().memoizedState=[t,e===void 0?null:e],t},useContext:St,useEffect:uh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Br(4194308,4,xx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Br(4194308,4,t,e)},useInsertionEffect:function(t,e){return Br(4,2,t,e)},useMemo:function(t,e){var n=Bt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Bt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Cw.bind(null,xe,t),[i.memoizedState,t]},useRef:function(t){var e=Bt();return t={current:t},e.memoizedState=t},useState:ch,useDebugValue:gd,useDeferredValue:function(t){return Bt().memoizedState=t},useTransition:function(){var t=ch(!1),e=t[0];return t=bw.bind(null,t[1]),Bt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=xe,o=Bt();if(he){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),Ae===null)throw Error(R(349));yi&30||cx(i,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,uh(dx.bind(null,i,s,t),[t]),i.flags|=2048,Ns(9,ux.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Bt(),e=Ae.identifierPrefix;if(he){var n=on,i=nn;n=(i&~(1<<32-Nt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=As++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ww++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kw={readContext:St,useCallback:yx,useContext:St,useEffect:md,useImperativeHandle:vx,useInsertionEffect:mx,useLayoutEffect:gx,useMemo:_x,useReducer:$l,useRef:px,useState:function(){return $l(Ms)},useDebugValue:gd,useDeferredValue:function(t){var e=wt();return Sx(e,Ce.memoizedState,t)},useTransition:function(){var t=$l(Ms)[0],e=wt().memoizedState;return[t,e]},useMutableSource:ax,useSyncExternalStore:lx,useId:wx,unstable_isNewReconciler:!1},Iw={readContext:St,useCallback:yx,useContext:St,useEffect:md,useImperativeHandle:vx,useInsertionEffect:mx,useLayoutEffect:gx,useMemo:_x,useReducer:Gl,useRef:px,useState:function(){return Gl(Ms)},useDebugValue:gd,useDeferredValue:function(t){var e=wt();return Ce===null?e.memoizedState=t:Sx(e,Ce.memoizedState,t)},useTransition:function(){var t=Gl(Ms)[0],e=wt().memoizedState;return[t,e]},useMutableSource:ax,useSyncExternalStore:lx,useId:wx,unstable_isNewReconciler:!1};function Et(t,e){if(t&&t.defaultProps){e=ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hc(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Za={isMounted:function(t){return(t=t._reactInternals)?ki(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=We(),o=Bn(t),s=cn(i,o);s.payload=e,n!=null&&(s.callback=n),e=On(t,s,o),e!==null&&(Pt(e,t,o,i),Or(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=We(),o=Bn(t),s=cn(i,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=On(t,s,o),e!==null&&(Pt(e,t,o,i),Or(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=We(),i=Bn(t),o=cn(n,i);o.tag=2,e!=null&&(o.callback=e),e=On(t,o,i),e!==null&&(Pt(e,t,i,n),Or(e,t,i))}};function dh(t,e,n,i,o,s,r){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,r):e.prototype&&e.prototype.isPureReactComponent?!bs(n,i)||!bs(o,s):!0}function Ex(t,e,n){var i=!1,o=qn,s=e.contextType;return typeof s=="object"&&s!==null?s=St(s):(o=it(e)?xi:He.current,i=e.contextTypes,s=(i=i!=null)?so(t,o):qn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Za,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function fh(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Za.enqueueReplaceState(e,e.state,null)}function $c(t,e,n,i){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},ld(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=St(s):(s=it(e)?xi:He.current,o.context=so(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Hc(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Za.enqueueReplaceState(o,o.state,null),ma(t,n,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function co(t,e){try{var n="",i=e;do n+=nS(i),i=i.return;while(i);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function ql(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Aw=typeof WeakMap=="function"?WeakMap:Map;function kx(t,e,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){_a||(_a=!0,eu=i),Gc(t,e)},n}function Ix(t,e,n){n=cn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;n.payload=function(){return i(o)},n.callback=function(){Gc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Gc(t,e),typeof i!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var r=e.stack;this.componentDidCatch(e.value,{componentStack:r!==null?r:""})}),n}function hh(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Aw;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(o.add(n),t=$w.bind(null,t,e,n),e.then(t,t))}function ph(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mh(t,e,n,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cn(-1,1),e.tag=2,On(n,e,1))),n.lanes|=1),t)}var Mw=xn.ReactCurrentOwner,tt=!1;function qe(t,e,n,i){e.child=t===null?ix(e,null,n,i):ao(e,t.child,n,i)}function gh(t,e,n,i,o){n=n.render;var s=e.ref;return Xi(e,o),i=hd(t,e,n,i,s,o),n=pd(),t!==null&&!tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,pn(t,e,o)):(he&&n&&td(e),e.flags|=1,qe(t,e,i,o),e.child)}function xh(t,e,n,i,o){if(t===null){var s=n.type;return typeof s=="function"&&!Cd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ax(t,e,s,i,o)):(t=qr(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var r=s.memoizedProps;if(n=n.compare,n=n!==null?n:bs,n(r,i)&&t.ref===e.ref)return pn(t,e,o)}return e.flags|=1,t=Hn(s,i),t.ref=e.ref,t.return=e,e.child=t}function Ax(t,e,n,i,o){if(t!==null){var s=t.memoizedProps;if(bs(s,i)&&t.ref===e.ref)if(tt=!1,e.pendingProps=i=s,(t.lanes&o)!==0)t.flags&131072&&(tt=!0);else return e.lanes=t.lanes,pn(t,e,o)}return qc(t,e,n,i,o)}function Mx(t,e,n){var i=e.pendingProps,o=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(qi,at),at|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,le(qi,at),at|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,le(qi,at),at|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,le(qi,at),at|=i;return qe(t,e,o,n),e.child}function Nx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qc(t,e,n,i,o){var s=it(n)?xi:He.current;return s=so(e,s),Xi(e,o),n=hd(t,e,n,i,s,o),i=pd(),t!==null&&!tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,pn(t,e,o)):(he&&i&&td(e),e.flags|=1,qe(t,e,n,o),e.child)}function vh(t,e,n,i,o){if(it(n)){var s=!0;ua(e)}else s=!1;if(Xi(e,o),e.stateNode===null)Hr(t,e),Ex(e,n,i),$c(e,n,i,o),i=!0;else if(t===null){var r=e.stateNode,a=e.memoizedProps;r.props=a;var l=r.context,c=n.contextType;typeof c=="object"&&c!==null?c=St(c):(c=it(n)?xi:He.current,c=so(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof r.getSnapshotBeforeUpdate=="function";h||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==i||l!==c)&&fh(e,r,i,c),Tn=!1;var p=e.memoizedState;r.state=p,ma(e,i,r,o),l=e.memoizedState,a!==i||p!==l||nt.current||Tn?(typeof u=="function"&&(Hc(e,n,u,i),l=e.memoizedState),(a=Tn||dh(e,n,a,i,p,l,c))?(h||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),r.props=i,r.state=l,r.context=c,i=a):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,sx(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Et(e.type,a),r.props=c,h=e.pendingProps,p=r.context,l=n.contextType,typeof l=="object"&&l!==null?l=St(l):(l=it(n)?xi:He.current,l=so(e,l));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==h||p!==l)&&fh(e,r,i,l),Tn=!1,p=e.memoizedState,r.state=p,ma(e,i,r,o);var x=e.memoizedState;a!==h||p!==x||nt.current||Tn?(typeof g=="function"&&(Hc(e,n,g,i),x=e.memoizedState),(c=Tn||dh(e,n,c,i,p,x,l)||!1)?(u||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,x,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,x,l)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=x),r.props=i,r.state=x,r.context=l,i=c):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return jc(t,e,n,i,s,o)}function jc(t,e,n,i,o,s){Nx(t,e);var r=(e.flags&128)!==0;if(!i&&!r)return o&&ih(e,n,!1),pn(t,e,s);i=e.stateNode,Mw.current=e;var a=r&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&r?(e.child=ao(e,t.child,null,s),e.child=ao(e,null,a,s)):qe(t,e,a,s),e.memoizedState=i.state,o&&ih(e,n,!0),e.child}function Px(t){var e=t.stateNode;e.pendingContext?nh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nh(t,e.context,!1),cd(t,e.containerInfo)}function yh(t,e,n,i,o){return ro(),id(o),e.flags|=256,qe(t,e,n,i),e.child}var Wc={dehydrated:null,treeContext:null,retryLane:0};function Jc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rx(t,e,n){var i=e.pendingProps,o=ge.current,s=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),le(ge,o&1),t===null)return Vc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(r=i.children,t=i.fallback,s?(i=e.mode,s=e.child,r={mode:"hidden",children:r},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=r):s=nl(r,i,0,null),t=pi(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Jc(n),e.memoizedState=Wc,t):xd(e,r));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return Nw(t,e,r,i,a,o,n);if(s){s=i.fallback,r=e.mode,o=t.child,a=o.sibling;var l={mode:"hidden",children:i.children};return!(r&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Hn(o,l),i.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=Hn(a,s):(s=pi(s,r,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,r=t.child.memoizedState,r=r===null?Jc(n):{baseLanes:r.baseLanes|n,cachePool:null,transitions:r.transitions},s.memoizedState=r,s.childLanes=t.childLanes&~n,e.memoizedState=Wc,i}return s=t.child,t=s.sibling,i=Hn(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function xd(t,e){return e=nl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dr(t,e,n,i){return i!==null&&id(i),ao(e,t.child,null,n),t=xd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Nw(t,e,n,i,o,s,r){if(n)return e.flags&256?(e.flags&=-257,i=ql(Error(R(422))),dr(t,e,r,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,o=e.mode,i=nl({mode:"visible",children:i.children},o,0,null),s=pi(s,o,r,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&ao(e,t.child,null,r),e.child.memoizedState=Jc(r),e.memoizedState=Wc,s);if(!(e.mode&1))return dr(t,e,r,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(R(419)),i=ql(s,i,void 0),dr(t,e,r,i)}if(a=(r&t.childLanes)!==0,tt||a){if(i=Ae,i!==null){switch(r&-r){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|r)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,hn(t,o),Pt(i,t,o,-1))}return bd(),i=ql(Error(R(421))),dr(t,e,r,i)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=Gw.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,ct=Un(o.nextSibling),ut=e,he=!0,It=null,t!==null&&(gt[xt++]=nn,gt[xt++]=on,gt[xt++]=vi,nn=t.id,on=t.overflow,vi=e),e=xd(e,i.children),e.flags|=4096,e)}function _h(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Bc(t.return,e,n)}function jl(t,e,n,i,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=o)}function Dx(t,e,n){var i=e.pendingProps,o=i.revealOrder,s=i.tail;if(qe(t,e,i.children,n),i=ge.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_h(t,n,e);else if(t.tag===19)_h(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(le(ge,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&ga(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),jl(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&ga(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}jl(e,!0,n,null,s);break;case"together":jl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hr(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_i|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=Hn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Pw(t,e,n){switch(e.tag){case 3:Px(e),ro();break;case 5:rx(e);break;case 1:it(e.type)&&ua(e);break;case 4:cd(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;le(ha,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(le(ge,ge.current&1),e.flags|=128,null):n&e.child.childLanes?Rx(t,e,n):(le(ge,ge.current&1),t=pn(t,e,n),t!==null?t.sibling:null);le(ge,ge.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Dx(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),le(ge,ge.current),i)break;return null;case 22:case 23:return e.lanes=0,Mx(t,e,n)}return pn(t,e,n)}var Lx,Yc,Fx,zx;Lx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yc=function(){};Fx=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,di(Wt.current);var s=null;switch(n){case"input":o=xc(t,o),i=xc(t,i),s=[];break;case"select":o=ve({},o,{value:void 0}),i=ve({},i,{value:void 0}),s=[];break;case"textarea":o=_c(t,o),i=_c(t,i),s=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=la)}wc(n,i);var r;n=null;for(c in o)if(!i.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(r in a)a.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(gs.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=o!=null?o[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(r in a)!a.hasOwnProperty(r)||l&&l.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in l)l.hasOwnProperty(r)&&a[r]!==l[r]&&(n||(n={}),n[r]=l[r])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(gs.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ce("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};zx=function(t,e,n,i){n!==i&&(e.flags|=4)};function Io(t,e){if(!he)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Le(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Rw(t,e,n){var i=e.pendingProps;switch(nd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(e),null;case 1:return it(e.type)&&ca(),Le(e),null;case 3:return i=e.stateNode,lo(),ue(nt),ue(He),dd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(cr(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,It!==null&&(iu(It),It=null))),Yc(t,e),Le(e),null;case 5:ud(e);var o=di(Is.current);if(n=e.type,t!==null&&e.stateNode!=null)Fx(t,e,n,i,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(R(166));return Le(e),null}if(t=di(Wt.current),cr(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[$t]=e,i[Es]=s,t=(e.mode&1)!==0,n){case"dialog":ce("cancel",i),ce("close",i);break;case"iframe":case"object":case"embed":ce("load",i);break;case"video":case"audio":for(o=0;o<$o.length;o++)ce($o[o],i);break;case"source":ce("error",i);break;case"img":case"image":case"link":ce("error",i),ce("load",i);break;case"details":ce("toggle",i);break;case"input":Af(i,s),ce("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},ce("invalid",i);break;case"textarea":Nf(i,s),ce("invalid",i)}wc(n,s),o=null;for(var r in s)if(s.hasOwnProperty(r)){var a=s[r];r==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&lr(i.textContent,a,t),o=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&lr(i.textContent,a,t),o=["children",""+a]):gs.hasOwnProperty(r)&&a!=null&&r==="onScroll"&&ce("scroll",i)}switch(n){case"input":er(i),Mf(i,s,!0);break;case"textarea":er(i),Pf(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=la)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{r=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=d0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=r.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=r.createElement(n,{is:i.is}):(t=r.createElement(n),n==="select"&&(r=t,i.multiple?r.multiple=!0:i.size&&(r.size=i.size))):t=r.createElementNS(t,n),t[$t]=e,t[Es]=i,Lx(t,e,!1,!1),e.stateNode=t;e:{switch(r=bc(n,i),n){case"dialog":ce("cancel",t),ce("close",t),o=i;break;case"iframe":case"object":case"embed":ce("load",t),o=i;break;case"video":case"audio":for(o=0;o<$o.length;o++)ce($o[o],t);o=i;break;case"source":ce("error",t),o=i;break;case"img":case"image":case"link":ce("error",t),ce("load",t),o=i;break;case"details":ce("toggle",t),o=i;break;case"input":Af(t,i),o=xc(t,i),ce("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=ve({},i,{value:void 0}),ce("invalid",t);break;case"textarea":Nf(t,i),o=_c(t,i),ce("invalid",t);break;default:o=i}wc(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?p0(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&f0(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&xs(t,l):typeof l=="number"&&xs(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gs.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ce("scroll",t):l!=null&&Bu(t,s,l,r))}switch(n){case"input":er(t),Mf(t,i,!1);break;case"textarea":er(t),Pf(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Gn(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Ji(t,!!i.multiple,s,!1):i.defaultValue!=null&&Ji(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=la)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Le(e),null;case 6:if(t&&e.stateNode!=null)zx(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(R(166));if(n=di(Is.current),di(Wt.current),cr(e)){if(i=e.stateNode,n=e.memoizedProps,i[$t]=e,(s=i.nodeValue!==n)&&(t=ut,t!==null))switch(t.tag){case 3:lr(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lr(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[$t]=e,e.stateNode=i}return Le(e),null;case 13:if(ue(ge),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(he&&ct!==null&&e.mode&1&&!(e.flags&128))tx(),ro(),e.flags|=98560,s=!1;else if(s=cr(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(R(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(R(317));s[$t]=e}else ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Le(e),s=!1}else It!==null&&(iu(It),It=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ge.current&1?Te===0&&(Te=3):bd())),e.updateQueue!==null&&(e.flags|=4),Le(e),null);case 4:return lo(),Yc(t,e),t===null&&Cs(e.stateNode.containerInfo),Le(e),null;case 10:return rd(e.type._context),Le(e),null;case 17:return it(e.type)&&ca(),Le(e),null;case 19:if(ue(ge),s=e.memoizedState,s===null)return Le(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)Io(s,!1);else{if(Te!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=ga(t),r!==null){for(e.flags|=128,Io(s,!1),i=r.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,r=s.alternate,r===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=r.childLanes,s.lanes=r.lanes,s.child=r.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=r.memoizedProps,s.memoizedState=r.memoizedState,s.updateQueue=r.updateQueue,s.type=r.type,t=r.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return le(ge,ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&Se()>uo&&(e.flags|=128,i=!0,Io(s,!1),e.lanes=4194304)}else{if(!i)if(t=ga(r),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Io(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!he)return Le(e),null}else 2*Se()-s.renderingStartTime>uo&&n!==1073741824&&(e.flags|=128,i=!0,Io(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(n=s.last,n!==null?n.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Se(),e.sibling=null,n=ge.current,le(ge,i?n&1|2:n&1),e):(Le(e),null);case 22:case 23:return wd(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?at&1073741824&&(Le(e),e.subtreeFlags&6&&(e.flags|=8192)):Le(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function Dw(t,e){switch(nd(e),e.tag){case 1:return it(e.type)&&ca(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return lo(),ue(nt),ue(He),dd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ud(e),null;case 13:if(ue(ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ue(ge),null;case 4:return lo(),null;case 10:return rd(e.type._context),null;case 22:case 23:return wd(),null;case 24:return null;default:return null}}var fr=!1,Ue=!1,Lw=typeof WeakSet=="function"?WeakSet:Set,V=null;function Gi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ye(t,e,i)}else n.current=null}function Kc(t,e,n){try{n()}catch(i){ye(t,e,i)}}var Sh=!1;function Fw(t,e){if(Rc=sa,t=H0(),ed(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var r=0,a=-1,l=-1,c=0,u=0,h=t,p=null;t:for(;;){for(var g;h!==n||o!==0&&h.nodeType!==3||(a=r+o),h!==s||i!==0&&h.nodeType!==3||(l=r+i),h.nodeType===3&&(r+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===t)break t;if(p===n&&++c===o&&(a=r),p===s&&++u===i&&(l=r),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dc={focusedElem:t,selectionRange:n},sa=!1,V=e;V!==null;)if(e=V,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,V=t;else for(;V!==null;){e=V;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,_=x.memoizedState,v=e.stateNode,S=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:Et(e.type,y),_);v.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(b){ye(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,V=t;break}V=e.return}return x=Sh,Sh=!1,x}function is(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&Kc(e,n,s)}o=o.next}while(o!==i)}}function el(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Qc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ux(t){var e=t.alternate;e!==null&&(t.alternate=null,Ux(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$t],delete e[Es],delete e[zc],delete e[vw],delete e[yw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ox(t){return t.tag===5||t.tag===3||t.tag===4}function wh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ox(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=la));else if(i!==4&&(t=t.child,t!==null))for(Xc(t,e,n),t=t.sibling;t!==null;)Xc(t,e,n),t=t.sibling}function Zc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Zc(t,e,n),t=t.sibling;t!==null;)Zc(t,e,n),t=t.sibling}var Ne=null,kt=!1;function wn(t,e,n){for(n=n.child;n!==null;)Vx(t,e,n),n=n.sibling}function Vx(t,e,n){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(ja,n)}catch{}switch(n.tag){case 5:Ue||Gi(n,e);case 6:var i=Ne,o=kt;Ne=null,wn(t,e,n),Ne=i,kt=o,Ne!==null&&(kt?(t=Ne,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ne.removeChild(n.stateNode));break;case 18:Ne!==null&&(kt?(t=Ne,n=n.stateNode,t.nodeType===8?Ol(t.parentNode,n):t.nodeType===1&&Ol(t,n),Ss(t)):Ol(Ne,n.stateNode));break;case 4:i=Ne,o=kt,Ne=n.stateNode.containerInfo,kt=!0,wn(t,e,n),Ne=i,kt=o;break;case 0:case 11:case 14:case 15:if(!Ue&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var s=o,r=s.destroy;s=s.tag,r!==void 0&&(s&2||s&4)&&Kc(n,e,r),o=o.next}while(o!==i)}wn(t,e,n);break;case 1:if(!Ue&&(Gi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){ye(n,e,a)}wn(t,e,n);break;case 21:wn(t,e,n);break;case 22:n.mode&1?(Ue=(i=Ue)||n.memoizedState!==null,wn(t,e,n),Ue=i):wn(t,e,n);break;default:wn(t,e,n)}}function bh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Lw),e.forEach(function(i){var o=qw.bind(null,t,i);n.has(i)||(n.add(i),i.then(o,o))})}}function Tt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var s=t,r=e,a=r;e:for(;a!==null;){switch(a.tag){case 5:Ne=a.stateNode,kt=!1;break e;case 3:Ne=a.stateNode.containerInfo,kt=!0;break e;case 4:Ne=a.stateNode.containerInfo,kt=!0;break e}a=a.return}if(Ne===null)throw Error(R(160));Vx(s,r,o),Ne=null,kt=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){ye(o,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Bx(e,t),e=e.sibling}function Bx(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tt(e,t),Ot(t),i&4){try{is(3,t,t.return),el(3,t)}catch(y){ye(t,t.return,y)}try{is(5,t,t.return)}catch(y){ye(t,t.return,y)}}break;case 1:Tt(e,t),Ot(t),i&512&&n!==null&&Gi(n,n.return);break;case 5:if(Tt(e,t),Ot(t),i&512&&n!==null&&Gi(n,n.return),t.flags&32){var o=t.stateNode;try{xs(o,"")}catch(y){ye(t,t.return,y)}}if(i&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,r=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&c0(o,s),bc(a,r);var c=bc(a,s);for(r=0;r<l.length;r+=2){var u=l[r],h=l[r+1];u==="style"?p0(o,h):u==="dangerouslySetInnerHTML"?f0(o,h):u==="children"?xs(o,h):Bu(o,u,h,c)}switch(a){case"input":vc(o,s);break;case"textarea":u0(o,s);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Ji(o,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ji(o,!!s.multiple,s.defaultValue,!0):Ji(o,!!s.multiple,s.multiple?[]:"",!1))}o[Es]=s}catch(y){ye(t,t.return,y)}}break;case 6:if(Tt(e,t),Ot(t),i&4){if(t.stateNode===null)throw Error(R(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(y){ye(t,t.return,y)}}break;case 3:if(Tt(e,t),Ot(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ss(e.containerInfo)}catch(y){ye(t,t.return,y)}break;case 4:Tt(e,t),Ot(t);break;case 13:Tt(e,t),Ot(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(_d=Se())),i&4&&bh(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ue=(c=Ue)||u,Tt(e,t),Ue=c):Tt(e,t),Ot(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(V=t,u=t.child;u!==null;){for(h=V=u;V!==null;){switch(p=V,g=p.child,p.tag){case 0:case 11:case 14:case 15:is(4,p,p.return);break;case 1:Gi(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(y){ye(i,n,y)}}break;case 5:Gi(p,p.return);break;case 22:if(p.memoizedState!==null){Th(h);continue}}g!==null?(g.return=p,V=g):Th(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{o=h.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,r=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=h0("display",r))}catch(y){ye(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){ye(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Tt(e,t),Ot(t),i&4&&bh(t);break;case 21:break;default:Tt(e,t),Ot(t)}}function Ot(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ox(n)){var i=n;break e}n=n.return}throw Error(R(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(xs(o,""),i.flags&=-33);var s=wh(t);Zc(t,s,o);break;case 3:case 4:var r=i.stateNode.containerInfo,a=wh(t);Xc(t,a,r);break;default:throw Error(R(161))}}catch(l){ye(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zw(t,e,n){V=t,Hx(t)}function Hx(t,e,n){for(var i=(t.mode&1)!==0;V!==null;){var o=V,s=o.child;if(o.tag===22&&i){var r=o.memoizedState!==null||fr;if(!r){var a=o.alternate,l=a!==null&&a.memoizedState!==null||Ue;a=fr;var c=Ue;if(fr=r,(Ue=l)&&!c)for(V=o;V!==null;)r=V,l=r.child,r.tag===22&&r.memoizedState!==null?Eh(o):l!==null?(l.return=r,V=l):Eh(o);for(;s!==null;)V=s,Hx(s),s=s.sibling;V=o,fr=a,Ue=c}Ch(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,V=s):Ch(t)}}function Ch(t){for(;V!==null;){var e=V;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ue||el(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ue)if(n===null)i.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Et(e.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&lh(e,s,i);break;case 3:var r=e.updateQueue;if(r!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}lh(e,r,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ss(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Ue||e.flags&512&&Qc(e)}catch(p){ye(e,e.return,p)}}if(e===t){V=null;break}if(n=e.sibling,n!==null){n.return=e.return,V=n;break}V=e.return}}function Th(t){for(;V!==null;){var e=V;if(e===t){V=null;break}var n=e.sibling;if(n!==null){n.return=e.return,V=n;break}V=e.return}}function Eh(t){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{el(4,e)}catch(l){ye(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(l){ye(e,o,l)}}var s=e.return;try{Qc(e)}catch(l){ye(e,s,l)}break;case 5:var r=e.return;try{Qc(e)}catch(l){ye(e,r,l)}}}catch(l){ye(e,e.return,l)}if(e===t){V=null;break}var a=e.sibling;if(a!==null){a.return=e.return,V=a;break}V=e.return}}var Uw=Math.ceil,ya=xn.ReactCurrentDispatcher,vd=xn.ReactCurrentOwner,yt=xn.ReactCurrentBatchConfig,Z=0,Ae=null,be=null,Pe=0,at=0,qi=Yn(0),Te=0,Ps=null,_i=0,tl=0,yd=0,os=null,Ze=null,_d=0,uo=1/0,Zt=null,_a=!1,eu=null,Vn=null,hr=!1,An=null,Sa=0,ss=0,tu=null,$r=-1,Gr=0;function We(){return Z&6?Se():$r!==-1?$r:$r=Se()}function Bn(t){return t.mode&1?Z&2&&Pe!==0?Pe&-Pe:Sw.transition!==null?(Gr===0&&(Gr=E0()),Gr):(t=oe,t!==0||(t=window.event,t=t===void 0?16:R0(t.type)),t):1}function Pt(t,e,n,i){if(50<ss)throw ss=0,tu=null,Error(R(185));Hs(t,n,i),(!(Z&2)||t!==Ae)&&(t===Ae&&(!(Z&2)&&(tl|=n),Te===4&&kn(t,Pe)),ot(t,i),n===1&&Z===0&&!(e.mode&1)&&(uo=Se()+500,Qa&&Kn()))}function ot(t,e){var n=t.callbackNode;SS(t,e);var i=oa(t,t===Ae?Pe:0);if(i===0)n!==null&&Lf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Lf(n),e===1)t.tag===0?_w(kh.bind(null,t)):X0(kh.bind(null,t)),gw(function(){!(Z&6)&&Kn()}),n=null;else{switch(k0(i)){case 1:n=ju;break;case 4:n=C0;break;case 16:n=ia;break;case 536870912:n=T0;break;default:n=ia}n=Kx(n,$x.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $x(t,e){if($r=-1,Gr=0,Z&6)throw Error(R(327));var n=t.callbackNode;if(Zi()&&t.callbackNode!==n)return null;var i=oa(t,t===Ae?Pe:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=wa(t,i);else{e=i;var o=Z;Z|=2;var s=qx();(Ae!==t||Pe!==e)&&(Zt=null,uo=Se()+500,hi(t,e));do try{Bw();break}catch(a){Gx(t,a)}while(!0);sd(),ya.current=s,Z=o,be!==null?e=0:(Ae=null,Pe=0,e=Te)}if(e!==0){if(e===2&&(o=Ic(t),o!==0&&(i=o,e=nu(t,o))),e===1)throw n=Ps,hi(t,0),kn(t,i),ot(t,Se()),n;if(e===6)kn(t,i);else{if(o=t.current.alternate,!(i&30)&&!Ow(o)&&(e=wa(t,i),e===2&&(s=Ic(t),s!==0&&(i=s,e=nu(t,s))),e===1))throw n=Ps,hi(t,0),kn(t,i),ot(t,Se()),n;switch(t.finishedWork=o,t.finishedLanes=i,e){case 0:case 1:throw Error(R(345));case 2:si(t,Ze,Zt);break;case 3:if(kn(t,i),(i&130023424)===i&&(e=_d+500-Se(),10<e)){if(oa(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){We(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Fc(si.bind(null,t,Ze,Zt),e);break}si(t,Ze,Zt);break;case 4:if(kn(t,i),(i&4194240)===i)break;for(e=t.eventTimes,o=-1;0<i;){var r=31-Nt(i);s=1<<r,r=e[r],r>o&&(o=r),i&=~s}if(i=o,i=Se()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Uw(i/1960))-i,10<i){t.timeoutHandle=Fc(si.bind(null,t,Ze,Zt),i);break}si(t,Ze,Zt);break;case 5:si(t,Ze,Zt);break;default:throw Error(R(329))}}}return ot(t,Se()),t.callbackNode===n?$x.bind(null,t):null}function nu(t,e){var n=os;return t.current.memoizedState.isDehydrated&&(hi(t,e).flags|=256),t=wa(t,e),t!==2&&(e=Ze,Ze=n,e!==null&&iu(e)),t}function iu(t){Ze===null?Ze=t:Ze.push.apply(Ze,t)}function Ow(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],s=o.getSnapshot;o=o.value;try{if(!Ft(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kn(t,e){for(e&=~yd,e&=~tl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nt(e),i=1<<n;t[n]=-1,e&=~i}}function kh(t){if(Z&6)throw Error(R(327));Zi();var e=oa(t,0);if(!(e&1))return ot(t,Se()),null;var n=wa(t,e);if(t.tag!==0&&n===2){var i=Ic(t);i!==0&&(e=i,n=nu(t,i))}if(n===1)throw n=Ps,hi(t,0),kn(t,e),ot(t,Se()),n;if(n===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,si(t,Ze,Zt),ot(t,Se()),null}function Sd(t,e){var n=Z;Z|=1;try{return t(e)}finally{Z=n,Z===0&&(uo=Se()+500,Qa&&Kn())}}function Si(t){An!==null&&An.tag===0&&!(Z&6)&&Zi();var e=Z;Z|=1;var n=yt.transition,i=oe;try{if(yt.transition=null,oe=1,t)return t()}finally{oe=i,yt.transition=n,Z=e,!(Z&6)&&Kn()}}function wd(){at=qi.current,ue(qi)}function hi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mw(n)),be!==null)for(n=be.return;n!==null;){var i=n;switch(nd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ca();break;case 3:lo(),ue(nt),ue(He),dd();break;case 5:ud(i);break;case 4:lo();break;case 13:ue(ge);break;case 19:ue(ge);break;case 10:rd(i.type._context);break;case 22:case 23:wd()}n=n.return}if(Ae=t,be=t=Hn(t.current,null),Pe=at=e,Te=0,Ps=null,yd=tl=_i=0,Ze=os=null,ui!==null){for(e=0;e<ui.length;e++)if(n=ui[e],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,s=n.pending;if(s!==null){var r=s.next;s.next=o,i.next=r}n.pending=i}ui=null}return t}function Gx(t,e){do{var n=be;try{if(sd(),Vr.current=va,xa){for(var i=xe.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}xa=!1}if(yi=0,ke=Ce=xe=null,ns=!1,As=0,vd.current=null,n===null||n.return===null){Te=1,Ps=e,be=null;break}e:{var s=t,r=n.return,a=n,l=e;if(e=Pe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=ph(r);if(g!==null){g.flags&=-257,mh(g,r,a,s,e),g.mode&1&&hh(s,c,e),e=g,l=c;var x=e.updateQueue;if(x===null){var y=new Set;y.add(l),e.updateQueue=y}else x.add(l);break e}else{if(!(e&1)){hh(s,c,e),bd();break e}l=Error(R(426))}}else if(he&&a.mode&1){var _=ph(r);if(_!==null){!(_.flags&65536)&&(_.flags|=256),mh(_,r,a,s,e),id(co(l,a));break e}}s=l=co(l,a),Te!==4&&(Te=2),os===null?os=[s]:os.push(s),s=r;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=kx(s,l,e);ah(s,v);break e;case 1:a=l;var S=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Vn===null||!Vn.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=Ix(s,a,e);ah(s,b);break e}}s=s.return}while(s!==null)}Wx(n)}catch(C){e=C,be===n&&n!==null&&(be=n=n.return);continue}break}while(!0)}function qx(){var t=ya.current;return ya.current=va,t===null?va:t}function bd(){(Te===0||Te===3||Te===2)&&(Te=4),Ae===null||!(_i&268435455)&&!(tl&268435455)||kn(Ae,Pe)}function wa(t,e){var n=Z;Z|=2;var i=qx();(Ae!==t||Pe!==e)&&(Zt=null,hi(t,e));do try{Vw();break}catch(o){Gx(t,o)}while(!0);if(sd(),Z=n,ya.current=i,be!==null)throw Error(R(261));return Ae=null,Pe=0,Te}function Vw(){for(;be!==null;)jx(be)}function Bw(){for(;be!==null&&!fS();)jx(be)}function jx(t){var e=Yx(t.alternate,t,at);t.memoizedProps=t.pendingProps,e===null?Wx(t):be=e,vd.current=null}function Wx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Dw(n,e),n!==null){n.flags&=32767,be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Te=6,be=null;return}}else if(n=Rw(n,e,at),n!==null){be=n;return}if(e=e.sibling,e!==null){be=e;return}be=e=t}while(e!==null);Te===0&&(Te=5)}function si(t,e,n){var i=oe,o=yt.transition;try{yt.transition=null,oe=1,Hw(t,e,n,i)}finally{yt.transition=o,oe=i}return null}function Hw(t,e,n,i){do Zi();while(An!==null);if(Z&6)throw Error(R(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(wS(t,s),t===Ae&&(be=Ae=null,Pe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hr||(hr=!0,Kx(ia,function(){return Zi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=yt.transition,yt.transition=null;var r=oe;oe=1;var a=Z;Z|=4,vd.current=null,Fw(t,n),Bx(n,t),lw(Dc),sa=!!Rc,Dc=Rc=null,t.current=n,zw(n),hS(),Z=a,oe=r,yt.transition=s}else t.current=n;if(hr&&(hr=!1,An=t,Sa=o),s=t.pendingLanes,s===0&&(Vn=null),gS(n.stateNode),ot(t,Se()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(_a)throw _a=!1,t=eu,eu=null,t;return Sa&1&&t.tag!==0&&Zi(),s=t.pendingLanes,s&1?t===tu?ss++:(ss=0,tu=t):ss=0,Kn(),null}function Zi(){if(An!==null){var t=k0(Sa),e=yt.transition,n=oe;try{if(yt.transition=null,oe=16>t?16:t,An===null)var i=!1;else{if(t=An,An=null,Sa=0,Z&6)throw Error(R(331));var o=Z;for(Z|=4,V=t.current;V!==null;){var s=V,r=s.child;if(V.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(V=c;V!==null;){var u=V;switch(u.tag){case 0:case 11:case 15:is(8,u,s)}var h=u.child;if(h!==null)h.return=u,V=h;else for(;V!==null;){u=V;var p=u.sibling,g=u.return;if(Ux(u),u===c){V=null;break}if(p!==null){p.return=g,V=p;break}V=g}}}var x=s.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}V=s}}if(s.subtreeFlags&2064&&r!==null)r.return=s,V=r;else e:for(;V!==null;){if(s=V,s.flags&2048)switch(s.tag){case 0:case 11:case 15:is(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,V=v;break e}V=s.return}}var S=t.current;for(V=S;V!==null;){r=V;var w=r.child;if(r.subtreeFlags&2064&&w!==null)w.return=r,V=w;else e:for(r=S;V!==null;){if(a=V,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:el(9,a)}}catch(C){ye(a,a.return,C)}if(a===r){V=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,V=b;break e}V=a.return}}if(Z=o,Kn(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(ja,t)}catch{}i=!0}return i}finally{oe=n,yt.transition=e}}return!1}function Ih(t,e,n){e=co(n,e),e=kx(t,e,1),t=On(t,e,1),e=We(),t!==null&&(Hs(t,1,e),ot(t,e))}function ye(t,e,n){if(t.tag===3)Ih(t,t,n);else for(;e!==null;){if(e.tag===3){Ih(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Vn===null||!Vn.has(i))){t=co(n,t),t=Ix(e,t,1),e=On(e,t,1),t=We(),e!==null&&(Hs(e,1,t),ot(e,t));break}}e=e.return}}function $w(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=We(),t.pingedLanes|=t.suspendedLanes&n,Ae===t&&(Pe&n)===n&&(Te===4||Te===3&&(Pe&130023424)===Pe&&500>Se()-_d?hi(t,0):yd|=n),ot(t,e)}function Jx(t,e){e===0&&(t.mode&1?(e=ir,ir<<=1,!(ir&130023424)&&(ir=4194304)):e=1);var n=We();t=hn(t,e),t!==null&&(Hs(t,e,n),ot(t,n))}function Gw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Jx(t,n)}function qw(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(R(314))}i!==null&&i.delete(e),Jx(t,n)}var Yx;Yx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nt.current)tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tt=!1,Pw(t,e,n);tt=!!(t.flags&131072)}else tt=!1,he&&e.flags&1048576&&Z0(e,fa,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Hr(t,e),t=e.pendingProps;var o=so(e,He.current);Xi(e,n),o=hd(null,e,i,t,o,n);var s=pd();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,it(i)?(s=!0,ua(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,ld(e),o.updater=Za,e.stateNode=o,o._reactInternals=e,$c(e,i,t,n),e=jc(null,e,i,!0,s,n)):(e.tag=0,he&&s&&td(e),qe(null,e,o,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Hr(t,e),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=Ww(i),t=Et(i,t),o){case 0:e=qc(null,e,i,t,n);break e;case 1:e=vh(null,e,i,t,n);break e;case 11:e=gh(null,e,i,t,n);break e;case 14:e=xh(null,e,i,Et(i.type,t),n);break e}throw Error(R(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Et(i,o),qc(t,e,i,o,n);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Et(i,o),vh(t,e,i,o,n);case 3:e:{if(Px(e),t===null)throw Error(R(387));i=e.pendingProps,s=e.memoizedState,o=s.element,sx(t,e),ma(e,i,null,n);var r=e.memoizedState;if(i=r.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:r.cache,pendingSuspenseBoundaries:r.pendingSuspenseBoundaries,transitions:r.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=co(Error(R(423)),e),e=yh(t,e,i,n,o);break e}else if(i!==o){o=co(Error(R(424)),e),e=yh(t,e,i,n,o);break e}else for(ct=Un(e.stateNode.containerInfo.firstChild),ut=e,he=!0,It=null,n=ix(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ro(),i===o){e=pn(t,e,n);break e}qe(t,e,i,n)}e=e.child}return e;case 5:return rx(e),t===null&&Vc(e),i=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,r=o.children,Lc(i,o)?r=null:s!==null&&Lc(i,s)&&(e.flags|=32),Nx(t,e),qe(t,e,r,n),e.child;case 6:return t===null&&Vc(e),null;case 13:return Rx(t,e,n);case 4:return cd(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ao(e,null,i,n):qe(t,e,i,n),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Et(i,o),gh(t,e,i,o,n);case 7:return qe(t,e,e.pendingProps,n),e.child;case 8:return qe(t,e,e.pendingProps.children,n),e.child;case 12:return qe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,s=e.memoizedProps,r=o.value,le(ha,i._currentValue),i._currentValue=r,s!==null)if(Ft(s.value,r)){if(s.children===o.children&&!nt.current){e=pn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){r=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=cn(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Bc(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)r=s.type===e.type?null:s.child;else if(s.tag===18){if(r=s.return,r===null)throw Error(R(341));r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),Bc(r,n,e),r=s.sibling}else r=s.child;if(r!==null)r.return=s;else for(r=s;r!==null;){if(r===e){r=null;break}if(s=r.sibling,s!==null){s.return=r.return,r=s;break}r=r.return}s=r}qe(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,Xi(e,n),o=St(o),i=i(o),e.flags|=1,qe(t,e,i,n),e.child;case 14:return i=e.type,o=Et(i,e.pendingProps),o=Et(i.type,o),xh(t,e,i,o,n);case 15:return Ax(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Et(i,o),Hr(t,e),e.tag=1,it(i)?(t=!0,ua(e)):t=!1,Xi(e,n),Ex(e,i,o),$c(e,i,o,n),jc(null,e,i,!0,t,n);case 19:return Dx(t,e,n);case 22:return Mx(t,e,n)}throw Error(R(156,e.tag))};function Kx(t,e){return b0(t,e)}function jw(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(t,e,n,i){return new jw(t,e,n,i)}function Cd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ww(t){if(typeof t=="function")return Cd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$u)return 11;if(t===Gu)return 14}return 2}function Hn(t,e){var n=t.alternate;return n===null?(n=vt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qr(t,e,n,i,o,s){var r=2;if(i=t,typeof t=="function")Cd(t)&&(r=1);else if(typeof t=="string")r=5;else e:switch(t){case Li:return pi(n.children,o,s,e);case Hu:r=8,o|=8;break;case hc:return t=vt(12,n,e,o|2),t.elementType=hc,t.lanes=s,t;case pc:return t=vt(13,n,e,o),t.elementType=pc,t.lanes=s,t;case mc:return t=vt(19,n,e,o),t.elementType=mc,t.lanes=s,t;case r0:return nl(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case o0:r=10;break e;case s0:r=9;break e;case $u:r=11;break e;case Gu:r=14;break e;case Cn:r=16,i=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=vt(r,n,e,o),e.elementType=t,e.type=i,e.lanes=s,e}function pi(t,e,n,i){return t=vt(7,t,i,e),t.lanes=n,t}function nl(t,e,n,i){return t=vt(22,t,i,e),t.elementType=r0,t.lanes=n,t.stateNode={isHidden:!1},t}function Wl(t,e,n){return t=vt(6,t,null,e),t.lanes=n,t}function Jl(t,e,n){return e=vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Jw(t,e,n,i,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Il(0),this.expirationTimes=Il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Il(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Td(t,e,n,i,o,s,r,a,l){return t=new Jw(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ld(s),t}function Yw(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Di,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Qx(t){if(!t)return qn;t=t._reactInternals;e:{if(ki(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(it(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var n=t.type;if(it(n))return Q0(t,n,e)}return e}function Xx(t,e,n,i,o,s,r,a,l){return t=Td(n,i,!0,t,o,s,r,a,l),t.context=Qx(null),n=t.current,i=We(),o=Bn(n),s=cn(i,o),s.callback=e??null,On(n,s,o),t.current.lanes=o,Hs(t,o,i),ot(t,i),t}function il(t,e,n,i){var o=e.current,s=We(),r=Bn(o);return n=Qx(n),e.context===null?e.context=n:e.pendingContext=n,e=cn(s,r),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=On(o,e,r),t!==null&&(Pt(t,o,r,s),Or(t,o,r)),r}function ba(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ah(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ed(t,e){Ah(t,e),(t=t.alternate)&&Ah(t,e)}function Kw(){return null}var Zx=typeof reportError=="function"?reportError:function(t){console.error(t)};function kd(t){this._internalRoot=t}ol.prototype.render=kd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));il(t,e,null,null)};ol.prototype.unmount=kd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Si(function(){il(null,t,null,null)}),e[fn]=null}};function ol(t){this._internalRoot=t}ol.prototype.unstable_scheduleHydration=function(t){if(t){var e=M0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<En.length&&e!==0&&e<En[n].priority;n++);En.splice(n,0,t),n===0&&P0(t)}};function Id(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mh(){}function Qw(t,e,n,i,o){if(o){if(typeof i=="function"){var s=i;i=function(){var c=ba(r);s.call(c)}}var r=Xx(e,i,t,0,null,!1,!1,"",Mh);return t._reactRootContainer=r,t[fn]=r.current,Cs(t.nodeType===8?t.parentNode:t),Si(),r}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var a=i;i=function(){var c=ba(l);a.call(c)}}var l=Td(t,0,!1,null,null,!1,!1,"",Mh);return t._reactRootContainer=l,t[fn]=l.current,Cs(t.nodeType===8?t.parentNode:t),Si(function(){il(e,l,n,i)}),l}function rl(t,e,n,i,o){var s=n._reactRootContainer;if(s){var r=s;if(typeof o=="function"){var a=o;o=function(){var l=ba(r);a.call(l)}}il(e,r,t,o)}else r=Qw(n,e,t,o,i);return ba(r)}I0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ho(e.pendingLanes);n!==0&&(Wu(e,n|1),ot(e,Se()),!(Z&6)&&(uo=Se()+500,Kn()))}break;case 13:Si(function(){var i=hn(t,1);if(i!==null){var o=We();Pt(i,t,1,o)}}),Ed(t,1)}};Ju=function(t){if(t.tag===13){var e=hn(t,134217728);if(e!==null){var n=We();Pt(e,t,134217728,n)}Ed(t,134217728)}};A0=function(t){if(t.tag===13){var e=Bn(t),n=hn(t,e);if(n!==null){var i=We();Pt(n,t,e,i)}Ed(t,e)}};M0=function(){return oe};N0=function(t,e){var n=oe;try{return oe=t,e()}finally{oe=n}};Tc=function(t,e,n){switch(e){case"input":if(vc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=Ka(i);if(!o)throw Error(R(90));l0(i),vc(i,o)}}}break;case"textarea":u0(t,n);break;case"select":e=n.value,e!=null&&Ji(t,!!n.multiple,e,!1)}};x0=Sd;v0=Si;var Xw={usingClientEntryPoint:!1,Events:[Gs,Oi,Ka,m0,g0,Sd]},Ao={findFiberByHostInstance:ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zw={bundleType:Ao.bundleType,version:Ao.version,rendererPackageName:Ao.rendererPackageName,rendererConfig:Ao.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=S0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ao.findFiberByHostInstance||Kw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pr.isDisabled&&pr.supportsFiber)try{ja=pr.inject(Zw),jt=pr}catch{}}ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xw;ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Id(e))throw Error(R(200));return Yw(t,e,null,n)};ft.createRoot=function(t,e){if(!Id(t))throw Error(R(299));var n=!1,i="",o=Zx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Td(t,1,!1,null,null,n,!1,i,o),t[fn]=e.current,Cs(t.nodeType===8?t.parentNode:t),new kd(e)};ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=S0(e),t=t===null?null:t.stateNode,t};ft.flushSync=function(t){return Si(t)};ft.hydrate=function(t,e,n){if(!sl(e))throw Error(R(200));return rl(null,t,e,!0,n)};ft.hydrateRoot=function(t,e,n){if(!Id(t))throw Error(R(405));var i=n!=null&&n.hydratedSources||null,o=!1,s="",r=Zx;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(r=n.onRecoverableError)),e=Xx(e,null,t,1,n??null,o,!1,s,r),t[fn]=e.current,Cs(t),i)for(t=0;t<i.length;t++)n=i[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new ol(e)};ft.render=function(t,e,n){if(!sl(e))throw Error(R(200));return rl(null,t,e,!1,n)};ft.unmountComponentAtNode=function(t){if(!sl(t))throw Error(R(40));return t._reactRootContainer?(Si(function(){rl(null,null,t,!1,function(){t._reactRootContainer=null,t[fn]=null})}),!0):!1};ft.unstable_batchedUpdates=Sd;ft.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!sl(n))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return rl(t,e,n,!1,i)};ft.version="18.3.1-next-f1338f8080-20240426";function ev(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ev)}catch(t){console.error(t)}}ev(),e0.exports=ft;var eb=e0.exports,Nh=eb;dc.createRoot=Nh.createRoot,dc.hydrateRoot=Nh.hydrateRoot;const Ad=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M12 22h6a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h6z"}),m.jsx("path",{d:"M12 2v4"}),m.jsx("path",{d:"M20 12v-2a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"})]}),Ca=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M12 5C12 5 12 5 12 5c-2.2 0-4 1.8-4 4v0c0 1.1.9 2 2 2h4c1.1 0 2-.9 2-2v0c0-2.2-1.8-4-4-4z"}),m.jsx("path",{d:"M12 11v11"}),m.jsx("path",{d:"M10 11H8c-1.1 0-2 .9-2 2v0c0 2.2 1.8 4 4 4h0"}),m.jsx("path",{d:"M14 11h2c1.1 0 2 .9 2 2v0c0 2.2-1.8 4-4 4h0"}),m.jsx("circle",{cx:"12",cy:"5",r:"2"})]}),Md=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M12 22c-3.3 0-6-2.7-6-6v-2a6 6 0 1 1 12 0v2c0 3.3-2.7 6-6 6z"}),m.jsx("path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),m.jsx("path",{d:"M12 4V2"}),m.jsx("path",{d:"M12 20v2"}),m.jsx("path",{d:"m4.9 4.9 1.4 1.4"}),m.jsx("path",{d:"m17.7 17.7 1.4 1.4"}),m.jsx("path",{d:"M2 12h2"}),m.jsx("path",{d:"M20 12h2"}),m.jsx("path",{d:"m4.9 19.1 1.4-1.4"}),m.jsx("path",{d:"m17.7 6.3 1.4-1.4"})]}),Nd=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M12 22c-3.3 0-6-2.7-6-6v-2a6 6 0 1 1 12 0v2c0 3.3-2.7 6-6 6z"}),m.jsx("path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),m.jsx("path",{d:"M12 4V2"}),m.jsx("path",{d:"M12 20v2"}),m.jsx("path",{d:"m4.9 4.9 1.4 1.4"}),m.jsx("path",{d:"m17.7 17.7 1.4 1.4"}),m.jsx("path",{d:"M2 12h2"}),m.jsx("path",{d:"M20 12h2"}),m.jsx("path",{d:"m4.9 19.1 1.4-1.4"}),m.jsx("path",{d:"m17.7 6.3 1.4-1.4"})]}),tv=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M12 22c-3.3 0-6-2.7-6-6v-2a6 6 0 1 1 12 0v2c0 3.3-2.7 6-6 6z"}),m.jsx("path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),m.jsx("path",{d:"M12 4V2"}),m.jsx("path",{d:"M12 20v2"}),m.jsx("path",{d:"m4.9 4.9 1.4 1.4"}),m.jsx("path",{d:"m17.7 17.7 1.4 1.4"}),m.jsx("path",{d:"M2 12h2"}),m.jsx("path",{d:"M20 12h2"}),m.jsx("path",{d:"m4.9 19.1 1.4-1.4"}),m.jsx("path",{d:"m17.7 6.3 1.4-1.4"})]}),un={sleep:{id:"sleep",title:"Analisi del Sonno",Icon:Ad,questions:[{text:"Quante ore dormi in media per notte?",phase:"Fase 2",options:[{text:"Meno di 5 ore",value:1},{text:"5-6 ore",value:2},{text:"7-8 ore",value:4},{text:"Pi di 8 ore",value:3}]},{text:"Ti svegli durante la notte?",phase:"Fase 1",options:[{text:"Spesso",value:1},{text:"A volte",value:2},{text:"Raramente",value:3},{text:"Mai",value:4}]},{text:"Come ti senti al risveglio?",phase:"Fase 2",options:[{text:"Stanco e non riposato",value:1},{text:"Leggermente stanco",value:2},{text:"Abbastanza riposato",value:3},{text:"Pieno di energie",value:4}]},{text:"Quanto tempo impieghi per addormentarti?",phase:"Fase 1",options:[{text:"Pi di 60 minuti",value:1},{text:"30-60 minuti",value:2},{text:"15-30 minuti",value:3},{text:"Meno di 15 minuti",value:4}]},{text:"Usi dispositivi elettronici (telefono, TV) prima di dormire?",phase:"Fase 1",options:[{text:"Sempre",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente o mai",value:4}]},{text:"La tua camera da letto  buia e silenziosa?",phase:"REM",options:[{text:"No,  luminosa e/o rumorosa",value:1},{text:"Abbastanza",value:2},{text:"S, per la maggior parte",value:3},{text:"S, completamente",value:4}]},{text:"Ti capita di russare o avere apnee notturne?",phase:"Fase 3-4",options:[{text:"S, mi  stato detto spesso",value:1},{text:"A volte",value:2},{text:"Non che io sappia",value:3},{text:"No, mai",value:4}]},{text:"Hai orari di sonno regolari (anche nel weekend)?",phase:"Fase 2",options:[{text:"No, molto irregolari",value:1},{text:"Abbastanza irregolari",value:2},{text:"Abbastanza regolari",value:3},{text:"S, molto regolari",value:4}]},{text:"Bevi caff o alcolici nelle ore serali?",phase:"REM",options:[{text:"S, regolarmente",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente o mai",value:4}]},{text:"Fai attivit fisica intensa poco prima di coricarti?",phase:"REM",options:[{text:"S, regolarmente",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente o mai",value:4}]},{text:"Ti senti assonnato durante il giorno?",phase:"Fase 2",options:[{text:"Molto, fatico a rimanere sveglio",value:1},{text:"Abbastanza",value:2},{text:"Un po'",value:3},{text:"Per niente",value:4}]},{text:"Fai sonnellini durante il giorno?",phase:"Fase 2",options:[{text:"S, lunghi e spesso",value:1},{text:"S, ma brevi (meno di 30 min)",value:3},{text:"Raramente",value:4},{text:"Quasi mai",value:2}]},{text:"La temperatura della tua camera  confortevole?",phase:"Fase 3-4",options:[{text:"No, troppo calda o troppo fredda",value:1},{text:"A volte s, a volte no",value:2},{text:"Generalmente s",value:3},{text:"S,  ideale",value:4}]},{text:"Il tuo materasso e cuscino sono comodi?",phase:"Fase 3-4",options:[{text:"No, per niente",value:1},{text:"Potrebbero essere migliori",value:2},{text:"S, abbastanza",value:3},{text:"S, molto comodi",value:4}]},{text:"Hai pensieri stressanti o ansiosi quando vai a letto?",phase:"Fase 1 / REM",options:[{text:"S, quasi ogni sera",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Ceni molto tardi o in modo pesante?",phase:"Fase 3-4",options:[{text:"S, quasi sempre",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente o mai",value:4}]},{text:"Ti alzi per andare in bagno durante la notte?",phase:"Fase 3-4",options:[{text:"Pi di due volte",value:1},{text:"Una o due volte",value:2},{text:"Raramente",value:3},{text:"Mai",value:4}]},{text:"Come giudicheresti la qualit generale del tuo sonno?",phase:"Fase 3-4",options:[{text:"Molto scarsa",value:1},{text:"Scarsa",value:2},{text:"Buona",value:3},{text:"Eccellente",value:4}]},{text:"Soffri di crampi o sindrome delle gambe senza riposo?",phase:"Fase 3-4",options:[{text:"S, frequentemente",value:1},{text:"A volte",value:2},{text:"Raramente",value:3},{text:"Mai",value:4}]},{text:"Assumi farmaci o integratori per dormire?",phase:"Fase 1 / REM",options:[{text:"S, regolarmente",value:1},{text:"Occasionalmente",value:2},{text:"Molto raramente",value:3},{text:"Mai",value:4}]}],results:[{scoreMin:20,scoreMax:40,title:"Qualit del sonno molto scarsa",summary:"Il tuo sonno sembra essere significativamente disturbato.  fondamentale indagare le cause e adottare strategie mirate per migliorare il riposo notturno."},{scoreMin:41,scoreMax:60,title:"Qualit del sonno migliorabile",summary:"Ci sono diversi aspetti del tuo sonno che possono essere migliorati. Piccoli cambiamenti nelle tue abitudini potrebbero fare una grande differenza."},{scoreMin:61,scoreMax:80,title:"Buona qualit del sonno",summary:"Hai delle buone abitudini di sonno, ma c' ancora margine per ottimizzare il tuo riposo e massimizzare i benefici per la tua salute."}],phaseRemedies:{"Fase 1":{description:"Sonno leggero, addormentamento e risvegli frequenti",remedies:["Melatonina","Camomilla","Papaver rhoeas"]},"Fase 2":{description:"Sonno leggero, stabilit e riposo percepito",remedies:["Melissa","Passiflora"]},"Fase 3-4":{description:"Sonno profondo, recupero fisico",remedies:["Valeriana","Luppolo","Ashwagandha"]},REM:{description:"Sonno REM, sogni e memoria",remedies:["Lavanda","Escolzia","Bacopa monnieri"]}}},fitness:{id:"fitness",title:"Analisi Fitness",Icon:Ca,questions:[{text:"Quante volte a settimana fai attivit fisica aerobica (corsa, nuoto, bici)?",options:[{text:"Mai",value:1},{text:"1-2 volte",value:2},{text:"3-4 volte",value:3},{text:"5 o pi volte",value:4}]},{text:"Quanto dura in media una tua sessione di allenamento?",options:[{text:"Meno di 20 minuti",value:1},{text:"20-40 minuti",value:2},{text:"40-60 minuti",value:3},{text:"Pi di 60 minuti",value:4}]},{text:"Includi esercizi di forza (pesi, corpo libero) nella tua routine?",options:[{text:"Mai",value:1},{text:"Raramente",value:2},{text:"1-2 volte a settimana",value:3},{text:"3 o pi volte a settimana",value:4}]},{text:"Come percepisci l'intensit del tuo allenamento tipico?",options:[{text:"Molto leggera",value:1},{text:"Leggera",value:2},{text:"Moderata",value:3},{text:"Intensa",value:4}]},{text:"Fai stretching o esercizi di flessibilit?",options:[{text:"Mai",value:1},{text:"Raramente",value:2},{text:"Dopo ogni allenamento",value:4},{text:"Alcune volte a settimana",value:3}]},{text:"Quanti passi fai in media al giorno?",options:[{text:"Meno di 3.000",value:1},{text:"3.000 - 6.000",value:2},{text:"6.000 - 10.000",value:3},{text:"Pi di 10.000",value:4}]},{text:"Passi la maggior parte della tua giornata seduto?",options:[{text:"S, quasi tutto il giorno",value:1},{text:"S, pi di met giornata",value:2},{text:"No, sono spesso in movimento",value:3},{text:"No, ho un lavoro molto attivo",value:4}]},{text:"Riesci a salire 3 piani di scale senza affanno eccessivo?",options:[{text:"No, con molta fatica",value:1},{text:"S, ma con un po' di affanno",value:2},{text:"S, abbastanza facilmente",value:3},{text:"S, senza problemi",value:4}]},{text:"Ti dedichi al riscaldamento prima dell'allenamento e al defaticamento dopo?",options:[{text:"Mai",value:1},{text:"Raramente",value:2},{text:"A volte",value:3},{text:"Sempre",value:4}]},{text:"Come ti senti dopo un'attivit fisica?",options:[{text:"Esausto e dolorante per giorni",value:1},{text:"Molto stanco",value:2},{text:"Piacevolmente stanco",value:3},{text:"Energizzato",value:4}]},{text:"Hai un obiettivo di fitness specifico (es. perdere peso, aumentare la massa muscolare)?",options:[{text:"No, nessuno",value:1},{text:"S, ma non lo seguo con costanza",value:2},{text:"S, e lo seguo abbastanza bene",value:3},{text:"S, e sono molto disciplinato",value:4}]},{text:"La tua routine di allenamento  varia?",options:[{text:"No, faccio sempre le stesse cose",value:1},{text:"Non molto, vario raramente",value:2},{text:"S, cerco di variare",value:3},{text:"S,  molto diversificata",value:4}]},{text:"Ti alleni da solo o in compagnia?",options:[{text:"Sempre da solo",value:2},{text:"Preferibilmente in compagnia",value:3},{text:"Dipende, entrambi",value:4},{text:"Non mi alleno",value:1}]},{text:"Quanto  importante l'attivit fisica nella tua vita?",options:[{text:"Per niente",value:1},{text:"Poco",value:2},{text:"Abbastanza",value:3},{text:"Molto",value:4}]},{text:"Hai mai avuto infortuni legati all'attivit fisica?",options:[{text:"S, e mi impedisce di allenarmi",value:1},{text:"S, pi di uno in passato",value:2},{text:"S, ma di lieve entit",value:3},{text:"No, mai",value:4}]},{text:"Come recuperi dopo l'allenamento (sonno, alimentazione)?",options:[{text:"Non ci presto attenzione",value:1},{text:"Potrei fare di pi",value:2},{text:"Ci sto attento",value:3},{text:"Il recupero  una mia priorit",value:4}]},{text:"Ascolti i segnali del tuo corpo (es. ti fermi se senti dolore)?",options:[{text:"No, tendo a ignorarli",value:1},{text:"Non sempre",value:2},{text:"Generalmente s",value:3},{text:"S, sempre",value:4}]},{text:"Ti idrati a sufficienza durante il giorno e l'allenamento?",options:[{text:"No, bevo molto poco",value:1},{text:"Potrei bere di pi",value:2},{text:"S, bevo regolarmente",value:3},{text:"S, sono molto attento all'idratazione",value:4}]},{text:"La tua motivazione ad allenarti  costante?",options:[{text:"No,  molto altalenante",value:1},{text:"A volte c', a volte no",value:2},{text:" abbastanza costante",value:3},{text:"S, sono molto motivato",value:4}]},{text:"Come giudichi il tuo attuale livello di forma fisica?",options:[{text:"Molto scarso",value:1},{text:"Scarsa",value:2},{text:"Buono",value:3},{text:"Eccellente",value:4}]}],results:[{scoreMin:20,scoreMax:40,title:"Livello di fitness da migliorare",summary:"La tua routine di attivit fisica sembra essere limitata. Incrementare gradualmente l'esercizio fisico porterebbe notevoli benefici alla tua salute generale."},{scoreMin:41,scoreMax:60,title:"Livello di fitness discreto",summary:"Hai una base di attivit fisica, ma c' un ampio margine di miglioramento. Aumentare la frequenza, la durata o l'intensit potrebbe essere il prossimo passo."},{scoreMin:61,scoreMax:80,title:"Buon livello di fitness",summary:"Sei una persona attiva e hai un buon livello di forma fisica. Continua cos e valuta di inserire nuove sfide per mantenere alta la motivazione."}]},stress:{id:"stress",title:"Analisi Ansia e Stress",Icon:Md,questions:[{text:"Con che frequenza ti senti nervoso o ansioso?",options:[{text:"Quasi ogni giorno",value:1},{text:"Pi della met dei giorni",value:2},{text:"Alcuni giorni",value:3},{text:"Raramente o mai",value:4}]},{text:"Riesci a controllare le tue preoccupazioni?",options:[{text:"No,  molto difficile",value:1},{text:"A volte, con sforzo",value:2},{text:"Generalmente s",value:3},{text:"S, facilmente",value:4}]},{text:"Ti capita di sentirti improvvisamente spaventato o in preda al panico?",options:[{text:"Spesso",value:1},{text:"A volte",value:2},{text:"Raramente",value:3},{text:"Mai",value:4}]},{text:"Hai difficolt a rilassarti?",options:[{text:"S, quasi sempre",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Ti senti irritabile o ti arrabbi facilmente?",options:[{text:"Molto spesso",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Hai difficolt di concentrazione?",options:[{text:"S, quasi sempre",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Soffri di mal di testa, mal di stomaco o tensioni muscolari inspiegabili?",options:[{text:"S, frequentemente",value:1},{text:"A volte",value:2},{text:"Raramente",value:3},{text:"Mai",value:4}]},{text:"Dedichi del tempo ad attivit che ti rilassano (hobby, meditazione, ecc.)?",options:[{text:"Mai",value:1},{text:"Raramente",value:2},{text:"A volte",value:3},{text:"Regolarmente",value:4}]},{text:"Ti senti sopraffatto dalle tue responsabilit?",options:[{text:"Quasi sempre",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Hai qualcuno con cui parlare apertamente dei tuoi problemi?",options:[{text:"No, nessuno",value:1},{text:"Poche persone",value:2},{text:"S, alcuni amici/familiari",value:3},{text:"S, una solida rete di supporto",value:4}]},{text:"Come gestisci le situazioni impreviste o i cambiamenti?",options:[{text:"Vado in panico",value:1},{text:"Con molta difficolt",value:2},{text:"Mi adatto, anche se con fatica",value:3},{text:"Con flessibilit",value:4}]},{text:"Ti senti ottimista riguardo al futuro?",options:[{text:"No, per niente",value:1},{text:"Poco",value:2},{text:"Abbastanza",value:3},{text:"S, molto",value:4}]},{text:"Hai problemi a prendere decisioni?",options:[{text:"S, anche per le piccole cose",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Ti senti stanco o senza energie anche senza sforzo fisico?",options:[{text:"Quasi sempre",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Il tuo appetito  cambiato a causa dello stress (mangi di pi o di meno)?",options:[{text:"S,  cambiato notevolmente",value:1},{text:"Un po'",value:2},{text:"Non che io abbia notato",value:3},{text:"No,  rimasto uguale",value:4}]},{text:"Riesci a dire 'no' quando ti vengono chieste troppe cose?",options:[{text:"No, mai",value:1},{text:"Raramente, mi sento in colpa",value:2},{text:"A volte, ma con difficolt",value:3},{text:"S, riesco a stabilire i miei limiti",value:4}]},{text:"Pensi in modo catastrofico, immaginando sempre il peggio?",options:[{text:"S,  il mio modo di pensare abituale",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Come giudichi la tua capacit di gestire lo stress?",options:[{text:"Molto bassa",value:1},{text:"Bassa",value:2},{text:"Discreta",value:3},{text:"Buona",value:4}]},{text:"Ti senti disconnesso dagli altri o isolato?",options:[{text:"S, molto spesso",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Hai perso interesse o piacere nelle attivit che prima ti piacevano?",options:[{text:"S, in quasi tutto",value:1},{text:"In molte cose",value:2},{text:"In alcune cose",value:3},{text:"No, per niente",value:4}]}],results:[{scoreMin:20,scoreMax:40,title:"Livello di stress e ansia elevato",summary:"I risultati indicano un livello significativo di stress e ansia. Potrebbe essere molto utile esplorare tecniche di gestione dello stress e, se necessario, consultare un professionista."},{scoreMin:41,scoreMax:60,title:"Livello di stress e ansia moderato",summary:"Sperimenti periodi di stress e ansia che influenzano il tuo benessere. Imparare nuove strategie di coping potrebbe aiutarti a gestire meglio queste situazioni."},{scoreMin:61,scoreMax:80,title:"Buona gestione dello stress",summary:"Sembra che tu abbia delle buone strategie per gestire lo stress e l'ansia. Continua a prenderti cura del tuo benessere mentale e a coltivare le tue risorse."}]},diet:{id:"diet",title:"Analisi Dietetica",Icon:Nd,questions:[{text:"Quante porzioni di frutta e verdura consumi al giorno?",options:[{text:"0-1",value:1},{text:"2-3",value:2},{text:"4-5",value:3},{text:"Pi di 5",value:4}]},{text:"Che tipo di carboidrati scegli prevalentemente?",options:[{text:"Raffinati (pane bianco, pasta, riso bianco)",value:1},{text:"Un mix di raffinati e integrali",value:2},{text:"Prevalentemente integrali",value:3},{text:"Integrali e legumi",value:4}]},{text:"Quante volte a settimana mangi pesce, specialmente quello azzurro?",options:[{text:"Mai",value:1},{text:"Meno di una volta",value:2},{text:"1-2 volte",value:4},{text:"Pi di 2 volte",value:3}]},{text:"Qual  la tua principale fonte di proteine?",options:[{text:"Carne rossa e processata",value:1},{text:"Carne bianca e formaggi",value:2},{text:"Un mix che include legumi e pesce",value:3},{text:"Prevalentemente fonti vegetali (legumi, tofu)",value:4}]},{text:"Consumi bevande zuccherate (bibite, succhi di frutta confezionati)?",options:[{text:"Ogni giorno",value:1},{text:"Diverse volte a settimana",value:2},{text:"Raramente",value:3},{text:"Mai",value:4}]},{text:"Quanti caff bevi al giorno?",options:[{text:"Pi di 4",value:1},{text:"3-4",value:2},{text:"1-2",value:3},{text:"Nessuno o decaffeinato",value:4}]},{text:"Fai regolarmente colazione?",options:[{text:"No, mai",value:1},{text:"A volte",value:2},{text:"S, ma con prodotti confezionati/zuccherati",value:3},{text:"S, una colazione equilibrata",value:4}]},{text:"Consumi cibi fritti o molto processati (fast food, snack confezionati)?",options:[{text:"Spesso, pi volte a settimana",value:1},{text:"Circa una volta a settimana",value:2},{text:"Un paio di volte al mese",value:3},{text:"Molto raramente o mai",value:4}]},{text:"Quanta acqua bevi al giorno?",options:[{text:"Meno di 1 litro",value:1},{text:"Circa 1 litro",value:2},{text:"1.5 - 2 litri",value:3},{text:"Pi di 2 litri",value:4}]},{text:"Soffri di gonfiore, pesantezza o altri disturbi digestivi dopo i pasti?",options:[{text:"S, molto spesso",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Quante volte a settimana consumi legumi (fagioli, lenticchie, ceci)?",options:[{text:"Mai",value:1},{text:"Meno di una volta",value:2},{text:"1-2 volte",value:3},{text:"3 o pi volte",value:4}]},{text:"Che tipo di grassi usi per cucinare?",options:[{text:"Burro, margarina, strutto",value:1},{text:"Oli di semi vari (girasole, mais)",value:2},{text:"Principalmente olio extra vergine d'oliva",value:4},{text:"Un mix, con prevalenza di olio EVO",value:3}]},{text:"Leggi le etichette nutrizionali dei prodotti che acquisti?",options:[{text:"No, mai",value:1},{text:"Raramente",value:2},{text:"A volte, per alcuni prodotti",value:3},{text:"S, quasi sempre",value:4}]},{text:"I tuoi pasti sono regolari o tendi a saltarli?",options:[{text:"Spesso salto i pasti",value:1},{text:"A volte ne salto uno",value:2},{text:"Cerco di essere regolare",value:3},{text:"Ho orari molto regolari",value:4}]},{text:"Mangi di fretta, magari in piedi o davanti a uno schermo?",options:[{text:"S, quasi sempre",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente, mi prendo il mio tempo",value:4}]},{text:"Consumi dolci, torte o biscotti?",options:[{text:"Ogni giorno",value:1},{text:"Diverse volte a settimana",value:2},{text:"Solo nel weekend o in occasioni speciali",value:3},{text:"Molto raramente",value:4}]},{text:"Includi frutta secca e semi nella tua dieta?",options:[{text:"No, mai",value:1},{text:"Raramente",value:2},{text:"Qualche volta a settimana",value:3},{text:"S, una piccola porzione quasi ogni giorno",value:4}]},{text:"Quante volte a settimana mangi carne rossa?",options:[{text:"Pi di 3 volte",value:1},{text:"2-3 volte",value:2},{text:"Una volta",value:3},{text:"Raramente o mai",value:4}]},{text:"Assumi integratori alimentari?",options:[{text:"S, diversi e senza consulto medico",value:1},{text:"S, su consiglio del medico/farmacista",value:4},{text:"A volte, quando mi sento stanco",value:2},{text:"No, mai",value:3}]},{text:"Come descriveresti la tua dieta nel complesso?",options:[{text:"Poco sana e sbilanciata",value:1},{text:"Potrebbe essere molto migliore",value:2},{text:"Abbastanza sana ed equilibrata",value:3},{text:"Molto sana e varia",value:4}]}],results:[{scoreMin:20,scoreMax:40,title:"Abitudini alimentari da rivedere",summary:"La tua dieta attuale presenta diverse aree di miglioramento. Potrebbe essere utile concentrarsi sull'introduzione di cibi pi freschi e nutrienti e sulla riduzione di quelli processati."},{scoreMin:41,scoreMax:60,title:"Abitudini alimentari discrete",summary:"Hai una buona base, ma ci sono alcuni aspetti della tua alimentazione che, se modificati, potrebbero portare a un maggiore benessere generale."},{scoreMin:61,scoreMax:80,title:"Buone abitudini alimentari",summary:"Segui una dieta generalmente sana ed equilibrata. Continua a fare scelte consapevoli per mantenere il tuo stato di salute ottimale."}]},microbiome:{id:"microbiome",title:"Analisi del Microbioma",Icon:tv,questions:[{text:"Quanta fibra assumi giornalmente (da frutta, verdura, legumi, cereali integrali)?",options:[{text:"Molto poca",value:1},{text:"Una quantit moderata",value:2},{text:"Una buona quantit",value:3},{text:"Molta, ad ogni pasto",value:4}]},{text:"Consumi cibi fermentati (yogurt con fermenti vivi, kefir, crauti, kombucha)?",options:[{text:"Mai",value:1},{text:"Raramente",value:2},{text:"Qualche volta a settimana",value:3},{text:"Quasi ogni giorno",value:4}]},{text:"La tua dieta  varia o tendi a mangiare sempre le stesse cose?",options:[{text:"Mangio sempre le stesse cose",value:1},{text:"Poco varia",value:2},{text:"Abbastanza varia",value:3},{text:"Molto varia, provo spesso nuovi alimenti",value:4}]},{text:"Hai fatto uso di antibiotici negli ultimi 6 mesi?",options:[{text:"S, per un lungo periodo o pi cicli",value:1},{text:"S, un ciclo breve",value:2},{text:"No",value:4},{text:"Non ricordo",value:3}]},{text:"La tua regolarit intestinale :",options:[{text:"Molto irregolare (stitichezza o diarrea frequenti)",value:1},{text:"A volte irregolare",value:2},{text:"Generalmente regolare",value:3},{text:"Molto regolare",value:4}]},{text:"Soffri di intolleranze o sensibilit alimentari (glutine, lattosio, ecc.)?",options:[{text:"S, a diversi alimenti",value:1},{text:"S, a uno o due alimenti",value:2},{text:"Sospetto di averne, ma non ho diagnosi",value:3},{text:"No, che io sappia",value:4}]},{text:"Consumi dolcificanti artificiali (aspartame, sucralosio)?",options:[{text:"S, quotidianamente",value:1},{text:"Spesso",value:2},{text:"Raramente",value:3},{text:"Mai",value:4}]},{text:"Includi nella tua dieta polifenoli (presenti in t verde, caff, cioccolato fondente, frutti di bosco)?",options:[{text:"Raramente o mai",value:1},{text:"A volte",value:2},{text:"Spesso",value:3},{text:"S, regolarmente",value:4}]},{text:"Il tuo livello di stress quotidiano :",options:[{text:"Molto alto",value:1},{text:"Alto",value:2},{text:"Moderato",value:3},{text:"Basso",value:4}]},{text:"Passi del tempo all'aria aperta o a contatto con la natura?",options:[{text:"Molto raramente",value:1},{text:"A volte, nel weekend",value:2},{text:"Abbastanza spesso",value:3},{text:"S, quotidianamente",value:4}]},{text:"Consumi aglio, cipolle, porri o asparagi (fonti di prebiotici)?",options:[{text:"Mai o quasi mai",value:1},{text:"Raramente",value:2},{text:"Qualche volta a settimana",value:3},{text:"Spesso",value:4}]},{text:"Hai animali domestici in casa?",options:[{text:"S",value:4},{text:"No",value:2},{text:"Ne ho avuti in passato",value:3},{text:"Non risponde",value:1}]},{text:"La tua nascita  avvenuta con parto naturale o cesareo?",options:[{text:"Cesareo",value:2},{text:"Naturale",value:4},{text:"Non lo so",value:3},{text:"Non risponde",value:1}]},{text:"Sei stato allattato al seno da bambino?",options:[{text:"No",value:2},{text:"S, per alcuni mesi",value:3},{text:"S, per pi di 6 mesi",value:4},{text:"Non lo so",value:1}]},{text:"Soffri di malattie infiammatorie croniche intestinali (es. Crohn, colite ulcerosa) o sindrome dell'intestino irritabile (IBS)?",options:[{text:"S, ho una diagnosi",value:1},{text:"Ho sintomi ma nessuna diagnosi",value:2},{text:"No",value:4},{text:"Non risponde",value:3}]},{text:"Fumi?",options:[{text:"S, regolarmente",value:1},{text:"Occasionalmente",value:2},{text:"Ho smesso da poco",value:3},{text:"No, non fumo",value:4}]},{text:"Bevi alcolici?",options:[{text:"Ogni giorno",value:1},{text:"Diverse volte a settimana",value:2},{text:"Solo occasionalmente (es. nel weekend)",value:3},{text:"Molto raramente o mai",value:4}]},{text:"Dormi un numero sufficiente di ore per notte?",options:[{text:"No, dormo poco e male",value:1},{text:"A volte non abbastanza",value:2},{text:"Generalmente s",value:3},{text:"S, dormo bene e a sufficienza",value:4}]},{text:"Fai attivit fisica regolarmente?",options:[{text:"No, sono sedentario",value:1},{text:"Raramente",value:2},{text:"Qualche volta a settimana",value:3},{text:"S, regolarmente",value:4}]},{text:"Soffri di allergie o malattie autoimmuni?",options:[{text:"S, pi di una",value:1},{text:"S, una",value:2},{text:"No",value:4},{text:"Non che io sappia",value:3}]}],results:[{scoreMin:20,scoreMax:40,title:"Microbioma potenzialmente in disbiosi",summary:"Diversi fattori nel tuo stile di vita potrebbero non supportare un microbioma sano. Potrebbe essere utile concentrarsi su una dieta pi varia e ricca di fibre e prebiotici."},{scoreMin:41,scoreMax:60,title:"Equilibrio del microbioma migliorabile",summary:"Ci sono buone basi, ma alcuni aspetti possono essere ottimizzati per favorire ulteriormente la salute del tuo intestino e, di conseguenza, di tutto l'organismo."},{scoreMin:61,scoreMax:80,title:"Buon supporto al microbioma",summary:"Il tuo stile di vita sembra essere generalmente favorevole a un microbioma sano ed equilibrato. Continua a prenderti cura del tuo intestino con scelte alimentari consapevoli."}]}},At=t=>m.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"m12 3-1.45 4.1-4.1-1.45L8 12l-5.55 1.45 4.1 1.45L12 21l1.45-4.1 4.1 1.45L16 12l5.55-1.45-4.1-1.45Z"})}),tb=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7"}),m.jsx("polyline",{points:"16 17 22 17 22 11"})]});function Oe(t,e){try{const n=localStorage.getItem(t);return n==="undefined"?e:n?JSON.parse(n):e}catch(n){return console.error(`Error parsing JSON from localStorage key "${t}":`,n),localStorage.removeItem(t),e}}const nb=({user:t,onNavigate:e})=>{const[n,i]=O.useState(null);if(O.useEffect(()=>{let l=[];for(const c of Object.keys(un)){const u=Oe(`assessmentHistory_${t.email}_${c}`,[]);if(u.length>0){const h=u[u.length-1];l.push({id:c,title:un[c].title.replace("Analisi ",""),score:h.score,Icon:un[c].Icon})}}l.length>0&&(l.sort((c,u)=>c.score-u.score),i(l[0]))},[t.email]),!n)return m.jsxs("div",{className:"bg-sky-600 text-white rounded-xl shadow-lg p-6 mb-8 animate-fade-in",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx(At,{className:"w-10 h-10 text-sky-300 flex-shrink-0"}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-bold",children:"Inizia il tuo percorso di benessere!"}),m.jsx("p",{className:"text-sky-200",children:"Completa il tuo primo test di autovalutazione per scoprire i tuoi punti di forza."})]})]}),m.jsx("button",{onClick:()=>e("assessments"),className:"mt-4 w-full bg-white text-sky-700 font-bold py-2 px-4 rounded-lg hover:bg-sky-100 transition-colors",children:"Inizia il primo test"})]});const{Icon:o,title:s,score:r,id:a}=n;return m.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8 animate-fade-in border border-slate-200",children:[m.jsx("h3",{className:"text-sm font-semibold text-slate-500 mb-2",children:"Focus Benessere"}),m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:m.jsx(tb,{className:"w-6 h-6 text-red-600"})}),m.jsxs("div",{className:"flex-grow",children:[m.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:["Area da Migliorare: ",s]}),m.jsxs("p",{className:"text-slate-600",children:["Il tuo ultimo punteggio  ",m.jsx("span",{className:"font-bold text-red-600",children:r}),". Concentrati su quest'area per migliorare il tuo benessere generale."]}),m.jsx("button",{onClick:()=>e("assessments"),className:"mt-3 text-sky-600 font-semibold hover:text-sky-800 transition-colors text-sm",children:"Vai ai test di valutazione "})]})]})]})},ib=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),m.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),ob=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M3 3v18h18"}),m.jsx("path",{d:"M7 12v5h12V8l-5 5-4-4Z"})]}),nv=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M12 21c4-4 6-10 6-14a6 6 0 0 0-12 0c0 4 2 10 6 14Z"}),m.jsx("path",{d:"M12 15v6"}),m.jsx("path",{d:"M8 12c-2-2.5-2.5-6-1-8 1.5-2 4-2.5 6-1"}),m.jsx("path",{d:"M16 12c2-2.5 2.5-6 1-8-1.5-2-4-2.5-6-1"})]}),iv=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"}),m.jsx("path",{d:"M16 2v4"}),m.jsx("path",{d:"M8 2v4"}),m.jsx("path",{d:"M3 10h18"}),m.jsx("path",{d:"M18 22a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z"}),m.jsx("path",{d:"M18 16.5V18l.5.5"})]}),sb=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M12 12h.01"}),m.jsx("path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"}),m.jsx("path",{d:"M12 18h.01"}),m.jsx("path",{d:"M18 10h-2a2 2 0 0 1-2-2V4H8v4a2 2 0 0 1-2 2H2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V10Z"}),m.jsx("path",{d:"M8 12h.01"})]}),ov=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),m.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),m.jsx("path",{d:"M12 11h4"}),m.jsx("path",{d:"M12 16h4"}),m.jsx("path",{d:"M8 11h.01"}),m.jsx("path",{d:"M8 16h.01"})]}),rb=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),m.jsx("polyline",{points:"14 2 14 8 20 8"}),m.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),m.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),m.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]}),ab=({user:t,onNavigate:e})=>{const n=[{id:"assessments",title:"Test Autovalutazione",subtitle:"Scopri il tuo benessere",Icon:ib},{id:"dashboard",title:"Dashboard Benessere",subtitle:"Visualizza i tuoi progressi",Icon:ob},{id:"wellnessRoutine",title:"Routine Benessere",subtitle:"Completa le tue missioni",Icon:At},{id:"breathing",title:"Meditazione Guidata",subtitle:"Esercizi di respirazione",Icon:nv},{id:"spaBookings",title:"Percorsi SPA",subtitle:"Scopri i percorsi benessere",Icon:iv},{id:"analysisQuote",title:"Analisi & Preventivi",subtitle:"Crea il tuo piano di analisi",Icon:ov},{id:"prescriptions",title:"Invio Ricette Mediche",subtitle:"Invia ricette alla farmacia",Icon:rb},{id:"pharmacyServices",title:"Servizi Farmacia",subtitle:"Telemedicina e altro",Icon:sb}];return m.jsxs("div",{className:"p-4 md:p-8 animate-fade-in",children:[m.jsxs("header",{className:"mb-8",children:[m.jsxs("h1",{className:"text-4xl font-bold text-slate-800",children:["Bentornato, ",t.name,"!"]}),m.jsx("p",{className:"text-xl text-slate-600",children:"Il tuo coach personale per il benessere."})]}),m.jsx(nb,{user:t,onNavigate:e}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(i=>m.jsx("div",{onClick:()=>e(i.id),className:"bg-white rounded-xl shadow-md p-6 flex flex-col justify-between items-start cursor-pointer hover:shadow-xl hover:scale-105 transition-all duration-300 animate-slide-in-up",children:m.jsxs("div",{children:[m.jsx("div",{className:"p-3 bg-sky-100 rounded-full mb-4 inline-block",children:m.jsx(i.Icon,{className:"w-8 h-8 text-sky-600"})}),m.jsx("h2",{className:"text-xl font-bold text-slate-800",children:i.title}),m.jsx("p",{className:"text-slate-500 mt-1",children:i.subtitle})]})},i.id))})]})},lb=({data:t,width:e=400,height:n=200,color:i="#0ea5e9"})=>{if(!t||t.length<2)return m.jsx("div",{className:"flex items-center justify-center h-full text-slate-500 text-sm italic",children:"Dati insufficienti per il grafico."});const o=20,s=e-o*2,r=n-o*2,a=80,l=20,c=p=>p/(t.length-1)*s+o,u=p=>r-(p-l)/(a-l)*r+o,h=t.map((p,g)=>`${g===0?"M":"L"} ${c(g)} ${u(p.score)}`).join(" ");return m.jsxs("svg",{viewBox:`0 0 ${e} ${n}`,className:"w-full h-full overflow-visible","aria-label":"Grafico dell'andamento dei punteggi",children:[m.jsx("path",{d:h,fill:"none",stroke:i,strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),t.map((p,g)=>m.jsxs("g",{className:"group",children:[m.jsx("circle",{cx:c(g),cy:u(p.score),r:"5",fill:"white",stroke:i,strokeWidth:"2",className:"transition-all duration-300 group-hover:r-7"}),m.jsx("rect",{x:c(g)-40,y:u(p.score)-35,width:"80",height:"25",rx:"4",fill:"#1e293b",opacity:"0",className:"group-hover:opacity-90 transition-opacity duration-200 pointer-events-none"}),m.jsxs("text",{x:c(g),y:u(p.score)-20,textAnchor:"middle",fill:"white",fontSize:"10",opacity:"0",className:"group-hover:opacity-100 transition-opacity duration-200 pointer-events-none font-bold",children:[p.score," (",new Date(p.date).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit"}),")"]})]},g)),m.jsx("text",{x:o-5,y:u(l),textAnchor:"end",dominantBaseline:"middle",className:"text-xs fill-slate-400 font-medium",children:l}),m.jsx("text",{x:o-5,y:u(a),textAnchor:"end",dominantBaseline:"middle",className:"text-xs fill-slate-400 font-medium",children:a})]})},wi=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),m.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Pd=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),m.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),cb=({user:t,onNavigate:e,onStartAssessment:n})=>{console.log("AssessmentScreen RENDERED");const[i,o]=O.useState({}),s=15;O.useEffect(()=>{if(t){const l={};Object.keys(un).forEach(c=>{const u=Oe(`assessmentHistory_${t.email}_${c}`,[]);u.length>0&&(l[c]=u)}),o(l)}},[t]);const r=Object.keys(i).length>0,a=l=>{const c=i[l];if(!c||c.length===0)return{status:"new",daysRemaining:0};const u=new Date(c[c.length-1].date),p=Math.abs(new Date().getTime()-u.getTime()),g=Math.ceil(p/(1e3*60*60*24));return g<s?{status:"locked",daysRemaining:s-g}:{status:"ready",daysRemaining:0}};return m.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-32",children:[m.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Test di Autovalutazione"}),m.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Misura il tuo benessere. Ripeti i test ogni 15 giorni per monitorare i progressi."}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.values(un).map(l=>{const{status:c,daysRemaining:u}=a(l.id),h=c==="locked";return m.jsxs("div",{className:`rounded-xl shadow-md p-6 flex flex-col items-start transition-all duration-300 relative overflow-hidden ${h?"bg-slate-50 border border-slate-200":"bg-white hover:shadow-xl hover:scale-105 cursor-pointer"}`,onClick:()=>!h&&n(l.id),children:[m.jsxs("div",{className:"flex justify-between w-full mb-4",children:[m.jsx("div",{className:`p-3 rounded-full ${h?"bg-slate-200":"bg-sky-100"}`,children:m.jsx(l.Icon,{className:`w-8 h-8 ${h?"text-slate-500":"text-sky-600"}`})}),h&&m.jsxs("div",{className:"flex items-center gap-1 bg-green-100 text-green-700 px-2 py-1 rounded-lg h-fit",children:[m.jsx(wi,{className:"w-4 h-4"}),m.jsx("span",{className:"text-xs font-bold",children:"Completato"})]})]}),m.jsx("h2",{className:`text-xl font-bold ${h?"text-slate-500":"text-slate-800"}`,children:l.title}),m.jsx("p",{className:"text-slate-500 mt-2 text-sm",children:h?"Test completato di recente. Attendi per vedere reali miglioramenti.":"Valuta la tua situazione attuale in quest'area."}),h&&m.jsxs("div",{className:"mt-4 w-full pt-4 border-t border-slate-200",children:[m.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-3",children:[m.jsx(Pd,{className:"w-4 h-4"}),m.jsxs("span",{className:"text-sm font-semibold",children:["Disponibile tra ",u," ",u===1?"giorno":"giorni"]})]}),m.jsx("button",{onClick:p=>{p.stopPropagation(),confirm("Rifare il test prima dei 15 giorni potrebbe non mostrare cambiamenti significativi. Vuoi procedere comunque?")&&n(l.id)},className:"text-xs text-sky-600 hover:text-sky-800 underline font-medium",children:"Vuoi ripeterlo subito?"})]})]},l.id)})}),r&&m.jsxs("div",{className:"mt-16 pt-8 border-t border-slate-200 animate-fade-in",children:[m.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-6",children:"I tuoi progressi nel tempo"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.keys(i).map(l=>{const c=un[l],u=i[l],h=u.length>0?u[u.length-1].score:0;return m.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-100",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 bg-sky-50 rounded-lg",children:m.jsx(c.Icon,{className:"w-6 h-6 text-sky-600"})}),m.jsx("h3",{className:"font-bold text-slate-700",children:c.title})]}),m.jsx("span",{className:"text-2xl font-bold text-slate-800 bg-slate-100 px-3 py-1 rounded-md min-w-[3rem] text-center",children:h})]}),m.jsx("div",{className:"w-full h-48",children:m.jsx(lb,{data:u,width:400,height:200})})]},l)})})]})]})},ub=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),m.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),db=t=>m.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"m6 9 6 6 6-6"})}),fb=({user:t,showNotification:e,wellnessData:n})=>{const[i,o]=O.useState({}),[s,r]=O.useState([]),[a,l]=O.useState(new Set),[c,u]=O.useState(null),h=O.useMemo(()=>({missionStates:`missionStates_${t.email}`,manualUnlocks:`manualUnlocks_${t.email}`,reminders:`activeReminders_${t.email}`}),[t.email]);O.useEffect(()=>{const w=Oe(h.missionStates,{}),b=Oe(h.manualUnlocks,[]),C=Oe(h.reminders,[]);o(w),r(b),l(new Set(C))},[h]);const p=O.useMemo(()=>{var C;let w=0;const b={};for(const T of Object.values(n)){let E=0;const k=[...T.daily||[],...T.weekly||[]];for(const A of k)(C=i[A.id])!=null&&C.completed&&(E+=A.points);T.id&&(b[T.id]={name:T.name,points:E,dependsOn:T.dependsOn,unlocksAt:T.unlocksAt},w+=E)}return{total:w,byProgram:b}},[i,n]),g=(w,b)=>{o(C=>{var A;const T={...C},E=((A=T[w])==null?void 0:A.completed)||!1;T[w]={...T[w],completed:!E},localStorage.setItem(h.missionStates,JSON.stringify(T));const k=E?"Missione annullata.":`Missione completata! +${b} punti!`;return e(k,"success"),T})},x=w=>{var Y,j;const b=new Date;let C=8,T=0;if((Y=w.reminderConfig)!=null&&Y.time){const $=w.reminderConfig.time.split(":");$.length===2&&(C=parseInt($[0],10),T=parseInt($[1],10))}else(j=w.reminderConfig)!=null&&j.startHour&&(C=w.reminderConfig.startHour);const E=new Date(b);E.setDate(E.getDate()+1),E.setHours(C,T,0,0);const k=$=>$.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",A=`Wellness: ${w.title}`,I=`Promemoria benessere: ${w.description}`,L=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//ClinicalWellnessSpa//Benessere//IT
BEGIN:VEVENT
UID:${new Date().getTime()}@clinicalwellness.com
DTSTAMP:${k(new Date)}
DTSTART:${k(E)}
RRULE:FREQ=DAILY
SUMMARY:${A}
DESCRIPTION:${I}
BEGIN:VALARM
TRIGGER:-PT15M
ACTION:DISPLAY
DESCRIPTION:Reminder
END:VALARM
END:VEVENT
END:VCALENDAR`,B=new Blob([L],{type:"text/calendar;charset=utf-8"}),P=document.createElement("a");P.href=window.URL.createObjectURL(B),P.setAttribute("download",`${w.title.replace(/\s+/g,"_")}.ics`),document.body.appendChild(P),P.click(),document.body.removeChild(P)},y=w=>{window.confirm(`Vuoi aggiungere questo promemoria ("${w.title}") al tuo Calendario (Google/Apple)?`)&&(x(w),e("Evento calendario scaricato. Aprilo per salvarlo.","success")),l(C=>{const T=new Set(C);return T.has(w.id)?T.delete(w.id):T.add(w.id),localStorage.setItem(h.reminders,JSON.stringify(Array.from(T))),T})},_=O.useMemo(()=>{const w={start:{title:" Routine Base del Benessere",programs:[]},food:{title:" Alimentazione",programs:[]},sleep:{title:" Sonno",programs:[]},anxiety_stress:{title:" Ansia & Stress",programs:[]},activity:{title:" Movimento",programs:[]},smart:{title:" Programmi Smart",programs:[]}};Object.values(n).forEach(b=>{b.id==="start"?w.start.programs.push(b):b.id.startsWith("food")?w.food.programs.push(b):b.id.startsWith("sleep")?w.sleep.programs.push(b):b.id.startsWith("anxiety_stress")?w.anxiety_stress.programs.push(b):b.id.startsWith("activity")?w.activity.programs.push(b):b.isSmart&&w.smart.programs.push(b)});for(const b in w)w[b].programs.sort((C,T)=>{var A,I;const E=parseInt(((A=C.id.match(/\d+$/))==null?void 0:A[0])||"1"),k=parseInt(((I=T.id.match(/\d+$/))==null?void 0:I[0])||"1");return C.id.includes("gold")?-1:T.id.includes("gold")?1:E-k});return w},[n]),v=({program:w})=>{var I,L,B;const b=((I=p.byProgram[w.id])==null?void 0:I.points)||0,C=s.includes(w.id);let T=!1,E=0;const k=w.dependsOn?p.byProgram[w.dependsOn]:null;if(k&&typeof w.unlocksAt=="number"&&!C){const P=k.points||0;P<w.unlocksAt&&(T=!0,E=w.unlocksAt-P)}const A=c===w.id;return T&&k?m.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 opacity-60",children:m.jsxs("div",{className:"flex items-center justify-center gap-4 text-center",children:[m.jsx(Pd,{className:"w-8 h-8 text-slate-400"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-slate-600",children:w.name}),m.jsxs("p",{className:"text-sm text-slate-500",children:["Richiede ",w.unlocksAt,' punti in "',k.name,'". Mancano ',E," punti."]})]})]})}):m.jsxs("div",{className:"bg-white rounded-xl shadow-lg",children:[m.jsxs("button",{className:"w-full text-left p-4 flex justify-between items-center",onClick:()=>u(A?null:w.id),"aria-expanded":A,children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-3xl",children:w.Icon}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-bold text-slate-800",children:w.name}),m.jsx("p",{className:"text-slate-500",children:w.subtitle})]})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:"font-bold text-sky-600 text-lg",children:[b," Punti"]}),m.jsx(db,{className:`w-6 h-6 text-slate-500 transition-transform ${A?"rotate-180":""}`})]})]}),A&&m.jsxs("div",{className:"p-4 border-t border-slate-200 animate-fade-in",children:[m.jsx("p",{className:"text-slate-600 mb-4",children:w.description}),w.daily&&w.daily.length>0&&m.jsx("h4",{className:"font-bold text-slate-700 mb-2 mt-4",children:"Missioni Giornaliere"}),m.jsx("ul",{className:"space-y-3",children:(L=w.daily)==null?void 0:L.map(P=>{var Y,j,$;return m.jsxs("li",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-xl",children:P.Icon}),m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-slate-700",children:P.title}),m.jsx("p",{className:"text-sm text-slate-500",children:P.description})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[P.remindable&&m.jsx("button",{onClick:()=>y(P),className:`p-2 rounded-full transition-colors ${a.has(P.id)?"bg-sky-100 text-sky-600":"text-slate-400 hover:bg-slate-200"}`,"aria-label":a.has(P.id)?"Disattiva promemoria":"Attiva promemoria",title:"Aggiungi al calendario",children:m.jsx(ub,{className:"w-5 h-5"})}),m.jsxs("button",{onClick:()=>g(P.id,P.points),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-bold rounded-full transition-colors bg-white border-2",style:{borderColor:(Y=i[P.id])!=null&&Y.completed?"#22c55e":"#e2e8f0",color:(j=i[P.id])!=null&&j.completed?"#166534":"#334155"},children:[(($=i[P.id])==null?void 0:$.completed)&&m.jsx(wi,{className:"w-5 h-5 text-green-600"}),m.jsxs("span",{children:[P.points," Punti"]})]})]})]},P.id)})}),w.weekly&&w.weekly.length>0&&m.jsx("h4",{className:"font-bold text-slate-700 mb-2 mt-4",children:"Missioni Settimanali"}),m.jsx("ul",{className:"space-y-3",children:(B=w.weekly)==null?void 0:B.map(P=>{var Y,j,$;return m.jsxs("li",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-xl",children:P.Icon}),m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-slate-700",children:P.title}),m.jsx("p",{className:"text-sm text-slate-500",children:P.description})]})]}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsxs("button",{onClick:()=>g(P.id,P.points),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-bold rounded-full transition-colors bg-white border-2",style:{borderColor:(Y=i[P.id])!=null&&Y.completed?"#22c55e":"#e2e8f0",color:(j=i[P.id])!=null&&j.completed?"#166534":"#334155"},children:[(($=i[P.id])==null?void 0:$.completed)&&m.jsx(wi,{className:"w-5 h-5 text-green-600"}),m.jsxs("span",{children:[P.points," Punti"]})]})})]},P.id)})})]})]})},S=["start","food","sleep","anxiety_stress","activity","smart"];return m.jsxs("div",{className:"p-4 md:p-8 animate-fade-in",children:[m.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"La Tua Routine di Benessere"}),m.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Completa le missioni, accumula punti e sblocca nuovi livelli!"}),m.jsxs("div",{className:"bg-sky-600 text-white p-6 rounded-2xl shadow-lg mb-8 text-center",children:[m.jsx("p",{className:"text-lg text-sky-200",children:"Punti Benessere Totali"}),m.jsx("p",{className:"text-5xl font-bold",children:p.total})]}),S.map(w=>{const b=_[w];return!b||b.programs.length===0?null:m.jsxs("div",{className:"mb-8",children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:b.title}),m.jsx("div",{className:"space-y-4",children:b.programs.map(C=>m.jsx(v,{program:C},C.id))})]},w)})]})},hb=()=>{const t={coherence:{name:"5-5 Coerenza Cardiaca",inhale:5,hold:0,exhale:5,total:10},vagotonia:{name:"4-6 Vagotonia",inhale:4,hold:0,exhale:6,total:10},sleep:{name:"4-7-8 Sonno",inhale:4,hold:7,exhale:8,total:19},training:{name:"6-6 Allenamento",inhale:6,hold:0,exhale:6,total:12}},e=[{label:"1 Minuto",value:60},{label:"5 Minuti",value:300},{label:"10 Minuti",value:600},{label:"15 Minuti",value:900}],n=[{label:"432 Hz Healing",file:"432hz_healing.mp3"},{label:"7 Chakra",file:"7-chakra.mp3"},{label:"Comunicativit",file:"Comunicativita.mp3"},{label:"Perdono",file:"Perdono.mp3"}],[i,o]=O.useState(e[0].value),[s,r]=O.useState("coherence"),[a,l]=O.useState(!1),[c,u]=O.useState(e[0].value),[h,p]=O.useState(0),[g,x]=O.useState("Inizia"),[y,_]=O.useState(.6),[v,S]=O.useState(n[0].file),w=O.useRef(null),b=O.useRef(null),C=O.useRef(null);O.useEffect(()=>{const I=C.current;return()=>{I&&I.pause()}},[]),O.useEffect(()=>(a&&c>0?w.current=setInterval(()=>{u(I=>I-1)},1e3):c===0&&a&&(l(!1),C.current&&(C.current.pause(),C.current.currentTime=0),alert("Sessione di respirazione completata!")),()=>clearInterval(w.current)),[a,c]),O.useEffect(()=>{if(!a){clearTimeout(b.current),x("Inizia"),_(.6);return}const I=t[s],L=()=>{x("Inspira..."),_(1),b.current=setTimeout(()=>{I.hold>0&&x("Trattieni"),b.current=setTimeout(()=>{x("...espira"),_(.6),b.current=setTimeout(()=>{p(B=>B+1),a&&L()},I.exhale*1e3)},I.hold*1e3)},I.inhale*1e3)};return L(),()=>clearTimeout(b.current)},[a,s]);const T=()=>{a?(l(!1),C.current&&(C.current.pause(),C.current.currentTime=0)):(u(i),p(0),l(!0),C.current&&C.current.play().catch(I=>console.error("Audio playback failed:",I)))},E=I=>{const L=String(Math.floor(I/60)).padStart(2,"0"),B=String(I%60).padStart(2,"0");return`${L}:${B}`},k=t[s],A=a?g==="Inspira..."?k.inhale:k.exhale:1;return m.jsxs("div",{className:"p-4 md:p-8 animate-fade-in flex flex-col items-center justify-center h-full",children:[m.jsxs("div",{className:"w-full max-w-2xl",children:[m.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-4 text-center",children:"Coerenza Cardiaca"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Durata Sessione:"}),m.jsx("select",{value:i,onChange:I=>o(Number(I.target.value)),disabled:a,className:"w-full p-2 border border-slate-300 rounded-md",children:e.map(I=>m.jsx("option",{value:I.value,children:I.label},I.value))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ritmo Respirazione:"}),m.jsx("select",{value:s,onChange:I=>r(I.target.value),disabled:a,className:"w-full p-2 border border-slate-300 rounded-md",children:Object.entries(t).map(([I,L])=>m.jsx("option",{value:I,children:L.name},I))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Audio Relax:"}),m.jsx("select",{value:v,onChange:I=>S(I.target.value),disabled:a,className:"w-full p-2 border border-slate-300 rounded-md",children:n.map(I=>m.jsx("option",{value:I.file,children:I.label},I.file))})]})]}),m.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80 flex items-center justify-center mx-auto",children:[m.jsx("div",{className:"absolute w-full h-full bg-sky-200 rounded-full opacity-50"}),m.jsx("div",{className:"absolute w-full h-full bg-sky-300 rounded-full",style:{transform:`scale(${y})`,transition:`transform ${A}s ease-in-out`}}),m.jsx("span",{className:"relative text-2xl font-semibold text-sky-800 z-10",children:g})]}),m.jsxs("div",{className:"flex justify-around items-center mt-8 text-center",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-slate-500",children:"Cicli completati"}),m.jsx("p",{className:"text-3xl font-bold text-slate-800",children:h})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-slate-500",children:"Tempo residuo"}),m.jsx("p",{className:"text-3xl font-bold text-slate-800",children:E(a?c:i)})]})]}),m.jsx("button",{onClick:T,className:"w-full max-w-xs mx-auto mt-8 block px-8 py-4 bg-sky-600 text-white font-bold text-lg rounded-full shadow-lg hover:bg-sky-700 active:bg-sky-800 transition-colors",children:a?"Ferma Esercizio":"Inizia Esercizio"})]}),m.jsx("audio",{ref:C,src:`/CLINICAL-WELLNESS-SPA/audio/${v}`,loop:!0})]})},Ph={programs:[{name:"Stress Management",duration:"60 min",price:60,package4:215,description:"Programma integrato per la gestione dello stress e il riequilibrio psicofisico."},{name:"Sleep Program",duration:"60 min",price:60,package4:215,description:"Un percorso mirato a migliorare la qualit del sonno e favorire il rilassamento profondo."},{name:"Performance Program",duration:"60 min",price:60,package4:215,description:"Ideato per ottimizzare le energie e migliorare le capacit fisiche e mentali."},{name:"Longevity Program",duration:"1h 15 min",price:80,package4:290,description:"Percorso orientato alla prevenzione e al mantenimento della vitalit nel tempo."},{name:"Wellness Program",duration:"60 min",price:60,package4:215,description:"Programma completo per raggiungere uno stato di benessere generale e rigenerazione."}],treatments:[{category:"Massaggi",items:[{name:"Massaggio Linfodrenante",duration:"50 min",price:50,package4:180},{name:"Massaggio Connettivale",duration:"50 min",price:50,package4:180,package6:270,package10:450},{name:"Massaggio Tuina",duration:"50 min",price:50,package4:180},{name:"Massaggio Antistress",duration:"1h 15 min",price:80,package4:290},{name:"Massaggio Bioenergetico",duration:"1h 15 min",price:80,package4:290},{name:"Riflessologia Plantare",duration:"50 min",price:50,package4:180},{name:"Massaggio con Coppettazione",duration:"50 min",price:50,package4:180},{name:"Massaggio Relax",duration:"60 min",price:60,package4:215}]},{category:"Trattamenti Anti-Cellulite",items:[{name:"Connettivale base",duration:"50 min",price:50,package6:270,package10:450},{name:"Connettivale con prodotti specifici",duration:"50 min",price:55,package6:300,package10:490},{name:"Sauna Infrarossi + Connettivale",duration:"60 min",price:55,package6:300,package10:490},{name:"Connettivale + Termosauna",duration:"60 min",price:60,package6:330,package10:540},{name:"Ionoforesi + Connettivale",duration:"60 min",price:60,package6:330,package10:540}]},{category:"Trattamenti Corpo",items:[{name:"Termosauna",duration:"30 min",price:30},{name:"Peeling corpo (Sauna + Peeling)",duration:"60 min",price:50}]},{category:"Trattamenti Viso RENOPHASE",items:[{name:"Igiene Viso 1",duration:"50 min",price:90},{name:"Igiene Viso 2 (pelle grassa)",duration:"50 min",price:120},{name:"Anti-Age base",duration:"50 min",price:60},{name:"Anti-Age RENOPHASE",duration:"50 min",price:120},{name:"Pelli Sensibili base",duration:"50 min",price:60},{name:"Pelli Sensibili RENOPHASE",duration:"50 min",price:90},{name:"Pelli Secche base",duration:"50 min",price:60},{name:"Soft RENOPHASE",duration:"50 min",price:90},{name:"Intensivo RENOPHASE",duration:"50 min",price:150},{name:"Macchie RENOPHASE",duration:"50 min",price:150},{name:"Acne RENOPHASE",duration:"50 min",price:150},{name:"Pre/Post Iniettivi RENOPHASE",duration:"50 min",price:150}]},{category:"Trattamenti Microaree RENOPHASE",items:[{name:"Occhi",baseDuration:"45 min",basePrice:60,photoDuration:"60 min",photoPrice:80},{name:"Collo",baseDuration:"45 min",basePrice:60,photoDuration:"60 min",photoPrice:80},{name:"Labbra",baseDuration:"45 min",basePrice:60,photoDuration:"60 min",photoPrice:80}]},{category:"Mantenimento e Prevenzione",items:[{name:"Fotostimolazione LED",duration:"30 min",price:40,package6:219}]},{category:"Trattamenti Specifici",items:[{name:"Gambe Pesanti: Linfodrenante + Impedenzometria",duration:"60 min",package10:470},{name:"Gambe Pesanti: Linfodrenante + Bendaggi Freddi",duration:"60 min",price:60,package6:330},{name:"Gonfiore Addominale: Sauna Finlandese + Udara",duration:"60 min",price:60,package6:330}]}]},Rd="farmaciacentrale.montesilvano@gmail.com",Dd="393400600600",pb={food_level_2:"energiaCucina",food_level_3:"gourmetMaster",anxiety_stress_level_2:"oasiTranquilla",anxiety_stress_level_3:"superZen",sleep_level_2:"sognoCalmo",sleep_level_3:"notteMagica",sleep_level_4:"sonnoProfondo",activity_sprint_2:"energiaMovimento",activity_sprint_3:"eccellenzaAtletica"},mb=[{program:"Alimentazione",level:"Livello 2  Energia in Cucina",password:"energiaCucina"},{program:"Alimentazione",level:"Livello 3  Sfida del Gourmet",password:"gourmetMaster"},{program:"Ansia-Stress",level:"Livello 2  Oasi della Tranquillit",password:"oasiTranquilla"},{program:"Ansia-Stress",level:"Livello 3  Super Zen",password:"superZen"},{program:"Sonno",level:"Livello 2  Sogno Calmo",password:"sognoCalmo"},{program:"Sonno",level:"Livello 3  Notte Magica",password:"notteMagica"},{program:"Sonno",level:"Livello 4  Sonno Profondo",password:"sonnoProfondo"},{program:"Movimento",level:"Livello 2  Energia in Movimento",password:"energiaMovimento"},{program:"Movimento",level:"Livello 3  Eccellenza Atletica",password:"eccellenzaAtletica"}],Ld=({selection:t,onProceed:e,total:n})=>{const i=l=>{if(!l)return 0;let c=0;const u=l.split(" ");for(let h=0;h<u.length;h++)u[h].includes("h")?c+=parseInt(u[h],10)*60:u[h].includes("min")&&(c+=parseInt(u[h],10));return c},o=l=>{if(l===0)return"N/A";const c=Math.floor(l/60),u=l%60;let h="";return c>0&&(h+=`${c}h `),u>0&&(h+=`${u}min`),h.trim()},s=n!==void 0?n:t.reduce((l,c)=>l+c.price,0),r=t.reduce((l,c)=>l+i(c.duration),0),a=o(r);return m.jsx("div",{className:"fixed bottom-0 left-0 right-0 md:left-64 bg-slate-800 text-white p-4 shadow-[0_-4px_15px_-5px_rgba(0,0,0,0.2)] z-20 animate-slide-in-bottom",children:m.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col sm:flex-row justify-between items-center gap-4",children:[m.jsxs("div",{className:"flex-grow text-center sm:text-left",children:[m.jsxs("h3",{className:"font-bold text-lg",children:[t.length," Servizi Selezionati"]}),m.jsxs("div",{className:"flex gap-4 text-sky-200 text-sm",children:[r>0&&m.jsxs("span",{children:["Durata Totale: ",m.jsx("span",{className:"font-semibold text-white",children:a})]}),m.jsxs("span",{children:["Costo Totale: ",m.jsxs("span",{className:"font-semibold text-white",children:[s,""]})]})]})]}),m.jsx("button",{onClick:e,className:"bg-sky-500 font-semibold py-2 px-6 rounded-lg hover:bg-sky-600 transition-colors flex items-center justify-center gap-2",children:m.jsx("span",{children:"Richiedi Appuntamento"})})]})})},sv=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M18 6 6 18"}),m.jsx("path",{d:"m6 6 12 12"})]}),rv=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),m.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),av=t=>m.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M16.75 13.96c.25.13.42.2.55.32.13.13.2.27.2.42s-.07.28-.2.42c-.13.13-.27.2-.42.2h-.13c-.32 0-.68-.07-1.1-.2-1.25-.42-2.25-1.18-2.97-2.18-.72-1-1.1-2.13-1.1-3.36 0-.2.07-.37.2-.5.13-.13.27-.2.42-.2h.13c.13 0 .25.03.35.1.1.07.17.15.22.25.1.13.17.3.22.5s.1.42.13.65c.03.23.03.45.03.63 0 .2-.03.4-.1.55-.07.15-.15.28-.25.4-.1.1-.18.18-.25.25-.07.07-.13.12-.17.15-.04.03-.07.07-.07.13s0 .1.03.13c.03.03.07.07.1.13.17.2.38.45.65.7.27.28.5.5.75.7s.48.37.7.5c.07.03.12.06.15.08.03.02.06.03.08.03s.04.02.06.03c.02.01.05.02.08.03.03.01.07.02.1.03.1.03.2.07.3.13.03.03.06.05.08.06.02.01.05.03.08.04.03.01.07.02.1.03l.03.01h.02c.03 0 .07-.02.1-.03.17-.07.32-.15.45-.25s.22-.2.3-.3c.08-.1.13-.2.15-.28.02-.08.03-.17.03-.25 0-.1-.02-.2-.05-.3-.03-.1-.08-.2-.13-.3s-.12-.18-.2-.28c-.08-.1-.15-.18-.2-.25-.05-.07-.1-.13-.13-.18s-.05-.1-.05-.13a.14.14 0 0 1 .03-.1c.01-.02.03-.03.05-.04.1-.05.2-.1.3-.15s.18-.1.25-.13c.07-.03.13-.05.17-.05.04 0 .08.02.1.03s.05.03.06.05c.01.02.03.03.03.05.01.02.02.05.02.08s-.02.07-.03.1c-.01.03-.03.06-.05.08l-.05.08c-.03.03-.05.06-.06.08a.2.2 0 0 0-.02.1c0 .03.01.06.03.1.02.03.05.06.1.1l.4.45c.1.13.2.25.3.37.1.12.2.23.3.32.1.1.2.18.3.25.1.07.2.13.28.17.08.04.17.07.25.1.08.03.17.04.25.04.13 0 .25-.02.37-.05.12-.03.24-.08.36-.15.12-.07.23-.15.33-.25.1-.1.18-.2.25-.32.07-.12.12-.24.15-.37.03-.13.05-.25.05-.38 0-.2-.07-.38-.2-.53-.13-.15-.3-.28-.5-.38-.2-.1-.42-.16-.65-.18-.23-.02-.48-.03-.7-.03-.23 0-.45.01-.65.03-.2.02-.4.06-.55.13-.15.07-.3.15-.42.25-.12.1-.23.2-.3.3s-.15.2-.2.3c-.05.1-.1.2-.13.3s-.05.2-.05.3v.1c0 .07.02.13.05.18.03.05.08.1.13.15l.35.35c.05.05.1.1.13.15l.13.15c.03.03.05.06.06.1a.24.24 0 0 1 0 .2c-.01.04-.03.08-.06.1-.03.03-.06.05-.1.06-.04.01-.08.02-.1.02-.03 0-.06,0-.08-.01s-.05-.02-.08-.03a.55.55 0 0 1-.13-.06c-.05-.03-.1-.06-.15-.1-.2-.13-.4-.28-.6-.45-.2-.17-.38-.35-.55-.52-.17-.17-.33-.35-.48-.52s-.28-.33-.4-.48c-.05-.07-.1-.13-.15-.2s-.1-.13-.13-.2c-.03-.07-.05-.13-.05-.2v-.12c0-.04.01-.08.03-.1.02-.03.05-.05.08-.06.03-.01.07-.02.1-.02h.1c.07 0 .13.02.18.05.05.03.1.08.15.13.1.13.2.25.3.37.1.12.18.23.25.32.07.1.13.18.17.25.04.07.08.13.1.18.02.05.03.1.03.13s-.01.07-.03.1a.1.1 0 0 1-.08.05c-.03.01-.07.01-.1 0-.03 0-.06-.01-.08-.02s-.05-.02-.08-.03c-.07-.03-.15-.07-.22-.1-.07-.03-.15-.07-.22-.1s-.15-.07-.22-.1c-.07-.03-.15-.05-.22-.07-.2-.05-.4-.08-.6-.08-.17 0-.33.02-.5.05-.17.03-.32.08-.47.15-.15.07-.28.16-.4.27-.12.11-.22.23-.3.37zM12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2z"})}),Fd=({isOpen:t,onClose:e,selection:n,user:i,onConfirmByEmail:o,onConfirmByWhatsApp:s})=>{if(!t)return null;const[r,a]=O.useState(""),[l,c]=O.useState(""),[u,h]=O.useState(""),p=new Date().toISOString().split("T")[0],g=y=>{if(h(""),!r||!l){h("Per favore, seleziona sia una data che un orario.");return}if(r<p){h("La data selezionata non pu essere nel passato.");return}y==="email"?o(r,l):y==="whatsapp"&&s(r,l)},x=n.reduce((y,_)=>y+(_.price||0),0);return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 animate-fade-in",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg transform transition-transform animate-slide-in-up",children:[m.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-slate-200",children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Completa la tua Richiesta"}),m.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600",children:m.jsx(sv,{className:"w-6 h-6"})})]}),m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"font-semibold text-slate-700 mb-2",children:"Riepilogo Servizi:"}),m.jsx("ul",{className:"space-y-1 text-slate-600 max-h-32 overflow-y-auto bg-slate-50 p-3 rounded-md",children:n.map(y=>m.jsxs("li",{children:["- ",y.name]},y.id))}),m.jsxs("p",{className:"text-right font-bold text-slate-800 mt-2",children:["Totale: ",x,""]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-slate-700 mb-3",children:"Scegli la tua preferenza di appuntamento:"}),u&&m.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 mb-4 rounded-md",role:"alert",children:m.jsx("p",{children:u})}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"booking-date",className:"block text-sm font-medium text-slate-600 mb-1",children:"Data"}),m.jsx("input",{type:"date",id:"booking-date",min:p,value:r,onChange:y=>a(y.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"booking-time",className:"block text-sm font-medium text-slate-600 mb-1",children:"Orario"}),m.jsx("input",{type:"time",id:"booking-time",value:l,onChange:y=>c(y.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500"})]})]})]})]}),m.jsxs("div",{className:"bg-slate-50 p-5 rounded-b-2xl flex flex-col sm:flex-row justify-end items-center gap-3",children:[m.jsxs("button",{onClick:()=>g("email"),className:"w-full sm:w-auto px-5 py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition-colors flex items-center justify-center gap-2",children:[m.jsx(rv,{className:"w-5 h-5"})," Invia via Email"]}),m.jsxs("button",{onClick:()=>g("whatsapp"),className:"w-full sm:w-auto px-5 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center gap-2",children:[m.jsx(av,{className:"w-5 h-5"})," Invia via WhatsApp"]})]})]})})},zd=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),m.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),gb=({user:t,showNotification:e})=>{const[n,i]=O.useState([]),[o,s]=O.useState(!1),[r,a]=O.useState([]),l=O.useCallback(()=>{const v=Oe("spaBookings",[]).filter(S=>S.userEmail===t.email&&S.type==="spa").sort((S,w)=>new Date(w.dateSubmitted).getTime()-new Date(S.dateSubmitted).getTime());a(v)},[t.email]);O.useEffect(()=>{l()},[l]);const c=(_,v)=>{i(S=>{const w=`${v}-${_.name}`;return S.some(C=>C.id===w)?S.filter(C=>C.id!==w):[...S,{..._,id:w}]})},u=(_,v)=>{const w=Oe("spaBookings",[]).map(b=>b.id===_?{...b,status:v}:b);localStorage.setItem("spaBookings",JSON.stringify(w)),l(),e("Stato appuntamento aggiornato!","success")},h=_=>{if(window.confirm("Sei sicuro di voler annullare questa richiesta?")){const S=Oe("spaBookings",[]).filter(w=>w.id!==_);localStorage.setItem("spaBookings",JSON.stringify(S)),l(),e("Richiesta annullata.","success")}},p=(_,v,S)=>{const w={id:new Date().getTime(),userEmail:t.email,userName:t.name,services:n,requestedDate:_,requestedTime:v,totalPrice:n.reduce((E,k)=>E+(k.price||0),0),status:"pending",dateSubmitted:new Date().toISOString(),type:"spa"},b=Oe("spaBookings",[]);localStorage.setItem("spaBookings",JSON.stringify([...b,w])),l();const C=n.map(E=>`- ${E.name} (${E.duration} - ${E.price})`).join(`
`),T=`Richiesta prenotazione SPA da: ${t.name} (${t.email})
Data: ${new Date(_).toLocaleDateString("it-IT")}
Ora: ${v}

Servizi:
${C}

Totale: ${w.totalPrice}`.trim();S==="email"?window.open(`mailto:${Rd}?subject=${encodeURIComponent(`Richiesta Prenotazione SPA - ${t.name}`)}&body=${encodeURIComponent(T)}`,"_blank"):S==="whatsapp"&&window.open(`https://wa.me/${Dd}?text=${encodeURIComponent(T)}`,"_blank"),s(!1),i([]),e("La tua richiesta  pronta per essere inviata!")},g=({status:_})=>{const v={pending:"bg-amber-100 text-amber-800",confirmed:"bg-emerald-100 text-emerald-800",rejected:"bg-red-100 text-red-800"},S={pending:"In attesa",confirmed:"Confermata",rejected:"Rifiutata"};return m.jsx("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${v[_]||v.pending}`,children:S[_]||S.pending})},x=[{category:"Programmi Benessere",items:Ph.programs},...Ph.treatments],y=n.reduce((_,v)=>_+(v.price||0),0);return m.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-32",children:[m.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Percorsi & Trattamenti SPA"}),m.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Seleziona i trattamenti per richiedere un appuntamento."}),m.jsx("div",{className:"space-y-8",children:x.map(({category:_,items:v})=>m.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:_}),m.jsx("div",{className:"divide-y divide-slate-200",children:v.map(S=>_==="Trattamenti Microaree RENOPHASE"?m.jsxs("div",{className:"py-3",children:[m.jsx("p",{className:"font-bold text-slate-800 mb-2",children:S.name}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[m.jsxs("button",{onClick:()=>c({...S,name:`${S.name} Base`,duration:S.baseDuration,price:S.basePrice},_),className:`flex-1 text-left p-2 rounded-md transition-colors ${n.some(w=>w.id===`${_}-${S.name} Base`)?"bg-sky-100":"hover:bg-slate-50"}`,children:["Base: ",m.jsxs("span",{className:"font-semibold",children:[S.baseDuration," - ",S.basePrice,""]})]}),m.jsxs("button",{onClick:()=>c({...S,name:`${S.name} con Foto-stimolazione`,duration:S.photoDuration,price:S.photoPrice},_),className:`flex-1 text-left p-2 rounded-md transition-colors ${n.some(w=>w.id===`${_}-${S.name} con Foto-stimolazione`)?"bg-sky-100":"hover:bg-slate-50"}`,children:["+ Foto-stimolazione: ",m.jsxs("span",{className:"font-semibold",children:[S.photoDuration," - ",S.photoPrice,""]})]})]})]},S.name):m.jsxs("div",{onClick:()=>c(S,_),className:`py-3 flex justify-between items-center cursor-pointer transition-colors ${n.some(w=>w.id===`${_}-${S.name}`)?"bg-sky-50":"hover:bg-slate-50"}`,children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-bold text-slate-800",children:S.name}),m.jsx("p",{className:"text-sm text-slate-500",children:S.duration})]}),m.jsx("p",{className:"font-semibold text-sky-700",children:S.price?`${S.price}`:"Pacchetto"})]},S.name))})]},_))}),m.jsxs("div",{className:"mt-12",children:[m.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-6",children:"Le Tue Prenotazioni SPA"}),m.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:r.length>0?m.jsx("ul",{className:"space-y-4",children:r.map(_=>m.jsxs("li",{className:"bg-slate-50 p-4 rounded-lg border border-slate-100",children:[m.jsxs("div",{className:"flex justify-between items-start gap-4",children:[m.jsxs("div",{children:[m.jsxs("p",{className:"font-bold text-slate-800",children:["Richiesta del ",new Date(_.dateSubmitted).toLocaleDateString("it-IT")]}),m.jsxs("p",{className:"text-sm text-slate-600",children:["Appuntamento per: ",new Date(_.requestedDate).toLocaleDateString("it-IT")," ore ",_.requestedTime]})]}),m.jsx(g,{status:_.status})]}),m.jsx("ul",{className:"mt-2 text-sm text-slate-700 list-disc list-inside",children:_.services.map(v=>m.jsx("li",{children:v.name},v.id))}),_.status==="pending"&&m.jsxs("div",{className:"mt-4 border-t border-slate-200 pt-3 flex items-center justify-end gap-3",children:[m.jsxs("button",{onClick:()=>u(_.id,"confirmed"),className:"flex items-center gap-1.5 text-sm font-semibold text-emerald-600 hover:text-emerald-800 p-2 rounded-lg hover:bg-emerald-50 transition-colors",children:[m.jsx(wi,{className:"w-5 h-5"}),m.jsx("span",{children:"Conferma Appuntamento"})]}),m.jsxs("button",{onClick:()=>h(_.id),className:"flex items-center gap-1.5 text-sm font-semibold text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:[m.jsx(zd,{className:"w-5 h-5"}),m.jsx("span",{children:"Elimina Richiesta"})]})]})]},_.id))}):m.jsx("p",{className:"text-center text-slate-500 py-8",children:"Non hai prenotazioni SPA attive."})})]}),n.length>0&&m.jsx(Ld,{selection:n,total:y,onProceed:()=>s(!0)}),m.jsx(Fd,{isOpen:o,onClose:()=>s(!1),selection:n,user:t,onConfirmByEmail:(_,v)=>p(_,v,"email"),onConfirmByWhatsApp:(_,v)=>p(_,v,"whatsapp")})]})},xb=["Rughe ed invecchiamento cutaneo","Cellulite e ritenzione idrica","Analisi","Invecchiamento","Salute cardiovascolare","Insonnia","Disturbi dell'intestino","Intolleranze alimentari ed allergie","Migliorare la performance sportiva","Gambe pesanti e varici","Dimagrimento","Attivita' fisica","Ansia e Stress","Ipertensione","Malattie della pelle","Algie e Dolori","Stanchezza","Benessere e felicita'","Problemi posturali","Cistiti ricorrenti"],lv=[{name:"Colesterolo Totale",price:7},{name:"Trigliceridi",price:6},{name:"Profilo Lipidico Completo",price:20},{name:"Profilo Glucidico Completo",price:20},{name:"Vitamina D",price:20},{name:"Proteina C Reattiva",price:6},{name:"Esame Urine",price:10}],cv=[{name:"Skin Analysis",price:10},{name:"Skin Check (Dermatology)",price:30},{name:"Valutazione Training",price:0,label:"da concordare"},{name:"Analisi DNA e Genomiche",price:130},{name:"Cortisolo Salivare",price:15},{name:"Test ed Analisi del Sonno",price:0,label:"compresa nel pacchetto"},{name:"Test dello Stress",price:0,label:"compreso nel pacchetto"},{name:"Polisonnografia",price:0,label:"da concordare"},{name:"Pletismografia",price:0,label:"da concordare"},{name:"Metabolica (func. tiroide, ecc)",price:0,label:"da concordare"},{name:"Body Composition",price:40},{name:"HRV",price:0,label:"compresa nel pacchetto"},{name:"Intestino e Microbioma",price:199},{name:"Valutazione Osteopatica",price:50},{name:"Dietetica Intolleranze",price:150},{name:"ECG",price:35},{name:"Holter Pressorio",price:60},{name:"Holter ECG",price:70}],Ud=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),m.jsx("polyline",{points:"7 10 12 15 17 10"}),m.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),vb={"Rughe ed invecchiamento cutaneo":["Skin Analysis","Skin Check (Dermatology)","Analisi DNA e Genomiche"],"Cellulite e ritenzione idrica":["Esame Urine","Body Composition"],Invecchiamento:["Analisi DNA e Genomiche","Vitamina D","Profilo Lipidico Completo"],"Salute cardiovascolare":["Profilo Lipidico Completo","ECG","Holter Pressorio","Holter ECG","Proteina C Reattiva"],Insonnia:["Test ed Analisi del Sonno","Cortisolo Salivare","Polisonnografia"],"Disturbi dell'intestino":["Intestino e Microbioma","Dietetica Intolleranze"],"Intolleranze alimentari ed allergie":["Dietetica Intolleranze","Intestino e Microbioma"],"Migliorare la performance sportiva":["Valutazione Training","Body Composition","HRV"],"Gambe pesanti e varici":["Pletismografia","Esame Urine"],Dimagrimento:["Body Composition","Profilo Glucidico Completo","Metabolica (func. tiroide, ecc)"],"Attivita' fisica":["Valutazione Training","Body Composition","HRV","ECG"],"Ansia e Stress":["Test dello Stress","Cortisolo Salivare","HRV"],Ipertensione:["Holter Pressorio","Profilo Lipidico Completo","ECG"],"Malattie della pelle":["Skin Analysis","Skin Check (Dermatology)","Teledermatologia"],"Algie e Dolori":["Valutazione Osteopatica","Proteina C Reattiva"],Stanchezza:["Vitamina D","Metabolica (func. tiroide, ecc)","Cortisolo Salivare"],"Benessere e felicita'":["Profilo Lipidico Completo","Vitamina D"],"Problemi posturali":["Valutazione Osteopatica"],"Cistiti ricorrenti":["Esame Urine"]},uv=new Map;[...lv,...cv].forEach(t=>uv.set(t.name,t));const yb=({user:t,showNotification:e,onNavigate:n})=>{const[i,o]=O.useState([]),[s,r]=O.useState(new Set),[a,l]=O.useState(!1),[c,u]=O.useState(!1),h=()=>{if(i.length===0)return;const _=i.reduce((b,C)=>b+(C.price||0),0);let v=`=================================================
`;v+=`   CLINICAL WELLNESS SPA - PIANO ANALISI
`,v+=`=================================================

`,v+=`UTENTE: ${t.name}
`,v+=`DATA: ${new Date().toLocaleDateString("it-IT")}

`,v+=`OBIETTIVI SELEZIONATI:
`,Array.from(s).forEach(b=>v+=`- ${b}
`),v+=`
ANALISI CONSIGLIATE:
`,i.forEach(b=>v+=`- ${b.name} (${b.price>0?b.price+"":b.label||"da definire"})
`),v+=`
TOTALE STIMATO: ${_}
`,v+=`
-------------------------------------------------
`,v+=`Presenta questo elenco in Farmacia Centrale
per pianificare l'esecuzione dei test.
`,v+=`=================================================
`;const S=new Blob(["\uFEFF"+v],{type:"text/plain;charset=utf-8"}),w=document.createElement("a");w.href=URL.createObjectURL(S),w.download=`Piano_Analisi_${Date.now()}.txt`,w.click()},p=_=>{const v=new Set(s);v.has(_)?v.delete(_):v.add(_),r(v)},g=_=>{o(v=>v.some(w=>w.id===_.name)?v.filter(w=>w.id!==_.name):[...v,{id:_.name,name:_.name,price:_.price,label:_.label}])},x=()=>{const _=new Set;s.forEach(S=>(vb[S]||[]).forEach(w=>_.add(w)));const v=Array.from(_).map(S=>{const w=uv.get(S);return w?{id:w.name,name:w.name,price:w.price,label:w.label}:null}).filter(Boolean);o(v),u(!0)},y=i.reduce((_,v)=>_+(v.price||0),0);return m.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-32",children:[m.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Analisi & Preventivi"}),m.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Definisci i tuoi obiettivi per un piano personalizzato."}),m.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg mb-8",children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:"1. Scegli i tuoi obiettivi"}),m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:xb.map(_=>m.jsx("button",{onClick:()=>p(_),className:`px-3 py-3 text-sm font-semibold rounded-lg border-2 transition-all ${s.has(_)?"bg-sky-600 text-white border-sky-600":"bg-white text-slate-700 border-slate-300 hover:border-sky-500"}`,children:_},_))}),m.jsx("div",{className:"mt-6 flex justify-center",children:m.jsx("button",{onClick:x,disabled:s.size===0,className:"px-8 py-3 bg-red-600 text-white font-bold rounded-xl shadow-md hover:bg-red-700 disabled:bg-slate-400",children:"Genera Piano Analisi"})})]}),c&&m.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg animate-fade-in",children:[m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-700",children:"2. Esami Consigliati"}),m.jsxs("button",{onClick:h,className:"flex items-center gap-2 text-emerald-600 font-bold hover:underline",children:[m.jsx(Ud,{className:"w-5 h-5"})," Scarica Elenco (.txt)"]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-slate-800 mb-3 border-b pb-2",children:"Analisi Sangue"}),m.jsx("div",{className:"space-y-1",children:lv.map(_=>m.jsxs("div",{onClick:()=>g(_),className:`flex justify-between items-center p-2 rounded-lg cursor-pointer transition-colors ${i.some(v=>v.id===_.name)?"bg-sky-100":"hover:bg-slate-50"}`,children:[m.jsx("span",{className:"text-sm",children:_.name}),m.jsxs("span",{className:"font-semibold",children:[_.price,""]})]},_.name))})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-slate-800 mb-3 border-b pb-2",children:"Altre Analisi"}),m.jsx("div",{className:"space-y-1",children:cv.map(_=>m.jsxs("div",{onClick:()=>g(_),className:`flex justify-between items-center p-2 rounded-lg cursor-pointer transition-colors ${i.some(v=>v.id===_.name)?"bg-sky-100":"hover:bg-slate-50"}`,children:[m.jsx("span",{className:"text-sm",children:_.name}),m.jsx("span",{className:"font-semibold",children:_.label||`${_.price}`})]},_.name))})]})]})]}),i.length>0&&m.jsx(Ld,{selection:i,total:y,onProceed:()=>l(!0)}),m.jsx(Fd,{isOpen:a,onClose:()=>l(!1),selection:i,user:t,onConfirmByEmail:()=>{},onConfirmByWhatsApp:()=>{}})]})};function Od(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Ii=Od();function dv(t){Ii=t}const fv=/[&<>"']/,_b=new RegExp(fv.source,"g"),hv=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Sb=new RegExp(hv.source,"g"),wb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Rh=t=>wb[t];function lt(t,e){if(e){if(fv.test(t))return t.replace(_b,Rh)}else if(hv.test(t))return t.replace(Sb,Rh);return t}const bb=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Cb(t){return t.replace(bb,(e,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const Tb=/(^|[^\[])\^/g;function se(t,e){let n=typeof t=="string"?t:t.source;e=e||"";const i={replace:(o,s)=>{let r=typeof s=="string"?s:s.source;return r=r.replace(Tb,"$1"),n=n.replace(o,r),i},getRegex:()=>new RegExp(n,e)};return i}function Dh(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const rs={exec:()=>null};function Lh(t,e){const n=t.replace(/\|/g,(s,r,a)=>{let l=!1,c=r;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=n.split(/ \|/);let o=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(/\\\|/g,"|");return i}function Mo(t,e,n){const i=t.length;if(i===0)return"";let o=0;for(;o<i&&t.charAt(i-o-1)===e;)o++;return t.slice(0,i-o)}function Eb(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return-1}function Fh(t,e,n,i){const o=e.href,s=e.title?lt(e.title):null,r=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:n,href:o,title:s,text:r,tokens:i.inlineTokens(r)};return i.state.inLink=!1,a}return{type:"image",raw:n,href:o,title:s,text:lt(r)}}function kb(t,e){const n=t.match(/^(\s+)(?:```)/);if(n===null)return e;const i=n[1];return e.split(`
`).map(o=>{const s=o.match(/^\s+/);if(s===null)return o;const[r]=s;return r.length>=i.length?o.slice(i.length):o}).join(`
`)}class Ta{constructor(e){N(this,"options");N(this,"rules");N(this,"lexer");this.options=e||Ii}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Mo(i,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const i=n[0],o=kb(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:o}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let i=n[2].trim();if(/#$/.test(i)){const o=Mo(i,"#");(this.options.pedantic||!o||/ $/.test(o))&&(i=o.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:Mo(n[0],`
`)}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){let i=Mo(n[0],`
`).split(`
`),o="",s="";const r=[];for(;i.length>0;){let a=!1;const l=[];let c;for(c=0;c<i.length;c++)if(/^ {0,3}>/.test(i[c]))l.push(i[c]),a=!0;else if(!a)l.push(i[c]);else break;i=i.slice(c);const u=l.join(`
`),h=u.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");o=o?`${o}
${u}`:u,s=s?`${s}
${h}`:h;const p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,r,!0),this.lexer.state.top=p,i.length===0)break;const g=r[r.length-1];if((g==null?void 0:g.type)==="code")break;if((g==null?void 0:g.type)==="blockquote"){const x=g,y=x.raw+`
`+i.join(`
`),_=this.blockquote(y);r[r.length-1]=_,o=o.substring(0,o.length-x.raw.length)+_.raw,s=s.substring(0,s.length-x.text.length)+_.text;break}else if((g==null?void 0:g.type)==="list"){const x=g,y=x.raw+`
`+i.join(`
`),_=this.list(y);r[r.length-1]=_,o=o.substring(0,o.length-g.raw.length)+_.raw,s=s.substring(0,s.length-x.raw.length)+_.raw,i=y.substring(r[r.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:o,tokens:r,text:s}}}list(e){let n=this.rules.block.list.exec(e);if(n){let i=n[1].trim();const o=i.length>1,s={type:"list",raw:"",ordered:o,start:o?+i.slice(0,-1):"",loose:!1,items:[]};i=o?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=o?i:"[*+-]");const r=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a=!1;for(;e;){let l=!1,c="",u="";if(!(n=r.exec(e))||this.rules.block.hr.test(e))break;c=n[0],e=e.substring(c.length);let h=n[2].split(`
`,1)[0].replace(/^\t+/,v=>" ".repeat(3*v.length)),p=e.split(`
`,1)[0],g=!h.trim(),x=0;if(this.options.pedantic?(x=2,u=h.trimStart()):g?x=n[1].length+1:(x=n[2].search(/[^ ]/),x=x>4?1:x,u=h.slice(x),x+=n[1].length),g&&/^ *$/.test(p)&&(c+=p+`
`,e=e.substring(p.length+1),l=!0),!l){const v=new RegExp(`^ {0,${Math.min(3,x-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),S=new RegExp(`^ {0,${Math.min(3,x-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),w=new RegExp(`^ {0,${Math.min(3,x-1)}}(?:\`\`\`|~~~)`),b=new RegExp(`^ {0,${Math.min(3,x-1)}}#`);for(;e;){const C=e.split(`
`,1)[0];if(p=C,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),w.test(p)||b.test(p)||v.test(p)||S.test(e))break;if(p.search(/[^ ]/)>=x||!p.trim())u+=`
`+p.slice(x);else{if(g||h.search(/[^ ]/)>=4||w.test(h)||b.test(h)||S.test(h))break;u+=`
`+p}!g&&!p.trim()&&(g=!0),c+=C+`
`,e=e.substring(C.length+1),h=p.slice(x)}}s.loose||(a?s.loose=!0:/\n *\n *$/.test(c)&&(a=!0));let y=null,_;this.options.gfm&&(y=/^\[[ xX]\] /.exec(u),y&&(_=y[0]!=="[ ] ",u=u.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:c,task:!!y,checked:_,loose:!1,text:u,tokens:[]}),s.raw+=c}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let l=0;l<s.items.length;l++)if(this.lexer.state.top=!1,s.items[l].tokens=this.lexer.blockTokens(s.items[l].text,[]),!s.loose){const c=s.items[l].tokens.filter(h=>h.type==="space"),u=c.length>0&&c.some(h=>/\n.*\n/.test(h.raw));s.loose=u}if(s.loose)for(let l=0;l<s.items.length;l++)s.items[l].loose=!0;return s}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),o=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:o,title:s}}}table(e){const n=this.rules.block.table.exec(e);if(!n||!/[:|]/.test(n[2]))return;const i=Lh(n[1]),o=n[2].replace(/^\||\| *$/g,"").split("|"),s=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],r={type:"table",raw:n[0],header:[],align:[],rows:[]};if(i.length===o.length){for(const a of o)/^ *-+: *$/.test(a)?r.align.push("right"):/^ *:-+: *$/.test(a)?r.align.push("center"):/^ *:-+ *$/.test(a)?r.align.push("left"):r.align.push(null);for(let a=0;a<i.length;a++)r.header.push({text:i[a],tokens:this.lexer.inline(i[a]),header:!0,align:r.align[a]});for(const a of s)r.rows.push(Lh(a,r.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:r.align[c]})));return r}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const i=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:lt(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const r=Mo(i.slice(0,-1),"\\");if((i.length-r.length)%2===0)return}else{const r=Eb(n[2],"()");if(r>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+r;n[2]=n[2].substring(0,r),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let o=n[2],s="";if(this.options.pedantic){const r=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);r&&(o=r[1],s=r[3])}else s=n[3]?n[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(i)?o=o.slice(1):o=o.slice(1,-1)),Fh(n,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(e,n){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const o=(i[2]||i[1]).replace(/\s+/g," "),s=n[o.toLowerCase()];if(!s){const r=i[0].charAt(0);return{type:"text",raw:r,text:r}}return Fh(i,s,i[0],this.lexer)}}emStrong(e,n,i=""){let o=this.rules.inline.emStrongLDelim.exec(e);if(!o||o[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(o[1]||o[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const r=[...o[0]].length-1;let a,l,c=r,u=0;const h=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+r);(o=h.exec(n))!=null;){if(a=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!a)continue;if(l=[...a].length,o[3]||o[4]){c+=l;continue}else if((o[5]||o[6])&&r%3&&!((r+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const p=[...o[0]][0].length,g=e.slice(0,r+o.index+p+l);if(Math.min(r,l)%2){const y=g.slice(1,-1);return{type:"em",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}const x=g.slice(2,-2);return{type:"strong",raw:g,text:x,tokens:this.lexer.inlineTokens(x)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let i=n[2].replace(/\n/g," ");const o=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return o&&s&&(i=i.substring(1,i.length-1)),i=lt(i,!0),{type:"codespan",raw:n[0],text:i}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let i,o;return n[2]==="@"?(i=lt(n[1]),o="mailto:"+i):(i=lt(n[1]),o=i),{type:"link",raw:n[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}url(e){var i;let n;if(n=this.rules.inline.url.exec(e)){let o,s;if(n[2]==="@")o=lt(n[0]),s="mailto:"+o;else{let r;do r=n[0],n[0]=((i=this.rules.inline._backpedal.exec(n[0]))==null?void 0:i[0])??"";while(r!==n[0]);o=lt(n[0]),n[1]==="www."?s="http://"+n[0]:s=n[0]}return{type:"link",raw:n[0],text:o,href:s,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){let i;return this.lexer.state.inRawBlock?i=n[0]:i=lt(n[0]),{type:"text",raw:n[0],text:i}}}}const Ib=/^(?: *(?:\n|$))+/,Ab=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Mb=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,js=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Nb=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,pv=/(?:[*+-]|\d{1,9}[.)])/,mv=se(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,pv).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Vd=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Pb=/^[^\n]+/,Bd=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Rb=se(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Bd).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Db=se(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,pv).getRegex(),al="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Hd=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Lb=se("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Hd).replace("tag",al).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),gv=se(Vd).replace("hr",js).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",al).getRegex(),Fb=se(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",gv).getRegex(),$d={blockquote:Fb,code:Ab,def:Rb,fences:Mb,heading:Nb,hr:js,html:Lb,lheading:mv,list:Db,newline:Ib,paragraph:gv,table:rs,text:Pb},zh=se("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",js).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",al).getRegex(),zb={...$d,table:zh,paragraph:se(Vd).replace("hr",js).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",zh).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",al).getRegex()},Ub={...$d,html:se(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Hd).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:rs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:se(Vd).replace("hr",js).replace("heading",` *#{1,6} *[^
]`).replace("lheading",mv).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},xv=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ob=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,vv=/^( {2,}|\\)\n(?!\s*$)/,Vb=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ws="\\p{P}\\p{S}",Bb=se(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Ws).getRegex(),Hb=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,$b=se(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Ws).getRegex(),Gb=se("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Ws).getRegex(),qb=se("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Ws).getRegex(),jb=se(/\\([punct])/,"gu").replace(/punct/g,Ws).getRegex(),Wb=se(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Jb=se(Hd).replace("(?:-->|$)","-->").getRegex(),Yb=se("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Jb).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ea=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Kb=se(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ea).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),yv=se(/^!?\[(label)\]\[(ref)\]/).replace("label",Ea).replace("ref",Bd).getRegex(),_v=se(/^!?\[(ref)\](?:\[\])?/).replace("ref",Bd).getRegex(),Qb=se("reflink|nolink(?!\\()","g").replace("reflink",yv).replace("nolink",_v).getRegex(),Gd={_backpedal:rs,anyPunctuation:jb,autolink:Wb,blockSkip:Hb,br:vv,code:Ob,del:rs,emStrongLDelim:$b,emStrongRDelimAst:Gb,emStrongRDelimUnd:qb,escape:xv,link:Kb,nolink:_v,punctuation:Bb,reflink:yv,reflinkSearch:Qb,tag:Yb,text:Vb,url:rs},Xb={...Gd,link:se(/^!?\[(label)\]\((.*?)\)/).replace("label",Ea).getRegex(),reflink:se(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ea).getRegex()},ou={...Gd,escape:se(xv).replace("])","~|])").getRegex(),url:se(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Zb={...ou,br:se(vv).replace("{2,}","*").getRegex(),text:se(ou.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},mr={normal:$d,gfm:zb,pedantic:Ub},No={normal:Gd,gfm:ou,breaks:Zb,pedantic:Xb};class Gt{constructor(e){N(this,"tokens");N(this,"options");N(this,"state");N(this,"tokenizer");N(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ii,this.options.tokenizer=this.options.tokenizer||new Ta,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:mr.normal,inline:No.normal};this.options.pedantic?(n.block=mr.pedantic,n.inline=No.pedantic):this.options.gfm&&(n.block=mr.gfm,this.options.breaks?n.inline=No.breaks:n.inline=No.gfm),this.tokenizer.rules=n}static get rules(){return{block:mr,inline:No}}static lex(e,n){return new Gt(n).lex(e)}static lexInline(e,n){return new Gt(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],i=!1){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let o,s,r;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(o=a.call({lexer:this},e,n))?(e=e.substring(o.raw.length),n.push(o),!0):!1))){if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length),o.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length),s=n[n.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+o.raw,s.text+=`
`+o.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length),s=n[n.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+o.raw,s.text+=`
`+o.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),n.push(o);continue}if(r=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(r=e.substring(0,a+1))}if(this.state.top&&(o=this.tokenizer.paragraph(r))){s=n[n.length-1],i&&(s==null?void 0:s.type)==="paragraph"?(s.raw+=`
`+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(o),i=r.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length),s=n[n.length-1],s&&s.type==="text"?(s.raw+=`
`+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(o);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i,o,s,r=e,a,l,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,a.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(i=u.call({lexer:this},e,n))?(e=e.substring(i.raw.length),n.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),o=n[n.length-1],o&&i.type==="text"&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),o=n[n.length-1],o&&i.type==="text"&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(e,r,c)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),n.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=e.slice(1);let p;this.options.extensions.startInline.forEach(g=>{p=g.call({lexer:this},h),typeof p=="number"&&p>=0&&(u=Math.min(u,p))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(i=this.tokenizer.inlineText(s)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(c=i.raw.slice(-1)),l=!0,o=n[n.length-1],o&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):n.push(i);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}}class ka{constructor(e){N(this,"options");N(this,"parser");this.options=e||Ii}space(e){return""}code({text:e,lang:n,escaped:i}){var r;const o=(r=(n||"").match(/^\S*/))==null?void 0:r[0],s=e.replace(/\n$/,"")+`
`;return o?'<pre><code class="language-'+lt(o)+'">'+(i?s:lt(s,!0))+`</code></pre>
`:"<pre><code>"+(i?s:lt(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){const n=e.ordered,i=e.start;let o="";for(let a=0;a<e.items.length;a++){const l=e.items[a];o+=this.listitem(l)}const s=n?"ol":"ul",r=n&&i!==1?' start="'+i+'"':"";return"<"+s+r+`>
`+o+"</"+s+`>
`}listitem(e){let n="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):n+=i+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",i="";for(let s=0;s<e.header.length;s++)i+=this.tablecell(e.header[s]);n+=this.tablerow({text:i});let o="";for(let s=0;s<e.rows.length;s++){const r=e.rows[s];i="";for(let a=0;a<r.length;a++)i+=this.tablecell(r[a]);o+=this.tablerow({text:i})}return o&&(o=`<tbody>${o}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+o+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const n=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+n+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:i}){const o=this.parser.parseInline(i),s=Dh(e);if(s===null)return o;e=s;let r='<a href="'+e+'"';return n&&(r+=' title="'+n+'"'),r+=">"+o+"</a>",r}image({href:e,title:n,text:i}){const o=Dh(e);if(o===null)return i;e=o;let s=`<img src="${e}" alt="${i}"`;return n&&(s+=` title="${n}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class qd{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class qt{constructor(e){N(this,"options");N(this,"renderer");N(this,"textRenderer");this.options=e||Ii,this.options.renderer=this.options.renderer||new ka,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new qd}static parse(e,n){return new qt(n).parse(e)}static parseInline(e,n){return new qt(n).parseInline(e)}parse(e,n=!0){let i="";for(let o=0;o<e.length;o++){const s=e[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const a=s,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){i+=l||"";continue}}const r=s;switch(r.type){case"space":{i+=this.renderer.space(r);continue}case"hr":{i+=this.renderer.hr(r);continue}case"heading":{i+=this.renderer.heading(r);continue}case"code":{i+=this.renderer.code(r);continue}case"table":{i+=this.renderer.table(r);continue}case"blockquote":{i+=this.renderer.blockquote(r);continue}case"list":{i+=this.renderer.list(r);continue}case"html":{i+=this.renderer.html(r);continue}case"paragraph":{i+=this.renderer.paragraph(r);continue}case"text":{let a=r,l=this.renderer.text(a);for(;o+1<e.length&&e[o+1].type==="text";)a=e[++o],l+=`
`+this.renderer.text(a);n?i+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):i+=l;continue}default:{const a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(e,n){n=n||this.renderer;let i="";for(let o=0;o<e.length;o++){const s=e[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=a||"";continue}}const r=s;switch(r.type){case"escape":{i+=n.text(r);break}case"html":{i+=n.html(r);break}case"link":{i+=n.link(r);break}case"image":{i+=n.image(r);break}case"strong":{i+=n.strong(r);break}case"em":{i+=n.em(r);break}case"codespan":{i+=n.codespan(r);break}case"br":{i+=n.br(r);break}case"del":{i+=n.del(r);break}case"text":{i+=n.text(r);break}default:{const a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}}class as{constructor(e){N(this,"options");this.options=e||Ii}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}N(as,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var gn,Sv,su,wv;class eC{constructor(...e){wf(this,gn);N(this,"defaults",Od());N(this,"options",this.setOptions);N(this,"parse",So(this,gn,su).call(this,Gt.lex,qt.parse));N(this,"parseInline",So(this,gn,su).call(this,Gt.lexInline,qt.parseInline));N(this,"Parser",qt);N(this,"Renderer",ka);N(this,"TextRenderer",qd);N(this,"Lexer",Gt);N(this,"Tokenizer",Ta);N(this,"Hooks",as);this.use(...e)}walkTokens(e,n){var o,s;let i=[];for(const r of e)switch(i=i.concat(n.call(this,r)),r.type){case"table":{const a=r;for(const l of a.header)i=i.concat(this.walkTokens(l.tokens,n));for(const l of a.rows)for(const c of l)i=i.concat(this.walkTokens(c.tokens,n));break}case"list":{const a=r;i=i.concat(this.walkTokens(a.items,n));break}default:{const a=r;(s=(o=this.defaults.extensions)==null?void 0:o.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const c=a[l].flat(1/0);i=i.concat(this.walkTokens(c,n))}):a.tokens&&(i=i.concat(this.walkTokens(a.tokens,n)))}}return i}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const o={...i};if(o.async=this.defaults.async||o.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const r=n.renderers[s.name];r?n.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=r.apply(this,a)),l}:n.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const r=n[s.level];r?r.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),o.extensions=n),i.renderer){const s=this.defaults.renderer||new ka(this.defaults);for(const r in i.renderer){if(!(r in s))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;const a=r;let l=i.renderer[a];i.useNewRenderer||(l=So(this,gn,Sv).call(this,l,a,s));const c=s[a];s[a]=(...u)=>{let h=l.apply(s,u);return h===!1&&(h=c.apply(s,u)),h||""}}o.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new Ta(this.defaults);for(const r in i.tokenizer){if(!(r in s))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;const a=r,l=i.tokenizer[a],c=s[a];s[a]=(...u)=>{let h=l.apply(s,u);return h===!1&&(h=c.apply(s,u)),h}}o.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new as;for(const r in i.hooks){if(!(r in s))throw new Error(`hook '${r}' does not exist`);if(r==="options")continue;const a=r,l=i.hooks[a],c=s[a];as.passThroughHooks.has(r)?s[a]=u=>{if(this.defaults.async)return Promise.resolve(l.call(s,u)).then(p=>c.call(s,p));const h=l.call(s,u);return c.call(s,h)}:s[a]=(...u)=>{let h=l.apply(s,u);return h===!1&&(h=c.apply(s,u)),h}}o.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,r=i.walkTokens;o.walkTokens=function(a){let l=[];return l.push(r.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...o}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return Gt.lex(e,n??this.defaults)}parser(e,n){return qt.parse(e,n??this.defaults)}}gn=new WeakSet,Sv=function(e,n,i){switch(n){case"heading":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,i.parser.parseInline(o.tokens),o.depth,Cb(i.parser.parseInline(o.tokens,i.parser.textRenderer)))};case"code":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text,o.lang,!!o.escaped)};case"table":return function(o){if(!o.type||o.type!==n)return e.apply(this,arguments);let s="",r="";for(let l=0;l<o.header.length;l++)r+=this.tablecell({text:o.header[l].text,tokens:o.header[l].tokens,header:!0,align:o.align[l]});s+=this.tablerow({text:r});let a="";for(let l=0;l<o.rows.length;l++){const c=o.rows[l];r="";for(let u=0;u<c.length;u++)r+=this.tablecell({text:c[u].text,tokens:c[u].tokens,header:!1,align:o.align[u]});a+=this.tablerow({text:r})}return e.call(this,s,a)};case"blockquote":return function(o){if(!o.type||o.type!==n)return e.apply(this,arguments);const s=this.parser.parse(o.tokens);return e.call(this,s)};case"list":return function(o){if(!o.type||o.type!==n)return e.apply(this,arguments);const s=o.ordered,r=o.start,a=o.loose;let l="";for(let c=0;c<o.items.length;c++){const u=o.items[c],h=u.checked,p=u.task;let g="";if(u.task){const x=this.checkbox({checked:!!h});a?u.tokens.length>0&&u.tokens[0].type==="paragraph"?(u.tokens[0].text=x+" "+u.tokens[0].text,u.tokens[0].tokens&&u.tokens[0].tokens.length>0&&u.tokens[0].tokens[0].type==="text"&&(u.tokens[0].tokens[0].text=x+" "+u.tokens[0].tokens[0].text)):u.tokens.unshift({type:"text",text:x+" "}):g+=x+" "}g+=this.parser.parse(u.tokens,a),l+=this.listitem({type:"list_item",raw:g,text:g,task:p,checked:!!h,loose:a,tokens:u.tokens})}return e.call(this,l,s,r)};case"html":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text,o.block)};case"paragraph":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(o.tokens))};case"escape":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text)};case"link":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.href,o.title,this.parser.parseInline(o.tokens))};case"image":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.href,o.title,o.text)};case"strong":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(o.tokens))};case"em":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(o.tokens))};case"codespan":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text)};case"del":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(o.tokens))};case"text":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text)}}return e},su=function(e,n){return(i,o)=>{const s={...o},r={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(r.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),r.async=!0);const a=So(this,gn,wv).call(this,!!r.silent,!!r.async);if(typeof i>"u"||i===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(r.hooks&&(r.hooks.options=r),r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(i):i).then(l=>e(l,r)).then(l=>r.hooks?r.hooks.processAllTokens(l):l).then(l=>r.walkTokens?Promise.all(this.walkTokens(l,r.walkTokens)).then(()=>l):l).then(l=>n(l,r)).then(l=>r.hooks?r.hooks.postprocess(l):l).catch(a);try{r.hooks&&(i=r.hooks.preprocess(i));let l=e(i,r);r.hooks&&(l=r.hooks.processAllTokens(l)),r.walkTokens&&this.walkTokens(l,r.walkTokens);let c=n(l,r);return r.hooks&&(c=r.hooks.postprocess(c)),c}catch(l){return a(l)}}},wv=function(e,n){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const o="<p>An error occurred:</p><pre>"+lt(i.message+"",!0)+"</pre>";return n?Promise.resolve(o):o}if(n)return Promise.reject(i);throw i}};const bi=new eC;function ne(t,e){return bi.parse(t,e)}ne.options=ne.setOptions=function(t){return bi.setOptions(t),ne.defaults=bi.defaults,dv(ne.defaults),ne};ne.getDefaults=Od;ne.defaults=Ii;ne.use=function(...t){return bi.use(...t),ne.defaults=bi.defaults,dv(ne.defaults),ne};ne.walkTokens=function(t,e){return bi.walkTokens(t,e)};ne.parseInline=bi.parseInline;ne.Parser=qt;ne.parser=qt.parse;ne.Renderer=ka;ne.TextRenderer=qd;ne.Lexer=Gt;ne.lexer=Gt.lex;ne.Tokenizer=Ta;ne.Hooks=as;ne.parse=ne;ne.options;ne.setOptions;ne.use;ne.walkTokens;ne.parseInline;qt.parse;Gt.lex;const Ia=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M4.5 3h15"}),m.jsx("path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-16V3"}),m.jsx("path",{d:"M6 14h12"})]}),tC=({assessment:t,score:e,answers:n,onRetake:i,onBackToHome:o})=>{const s=t.results.find(p=>e>=p.scoreMin&&e<=p.scoreMax)||t.results.sort((p,g)=>p.scoreMin-g.scoreMin)[0],r=t.id==="sleep"&&n,[a,l]=O.useState(null),[c,u]=O.useState(null);O.useEffect(()=>{if(r){const p={"Fase 1":0,"Fase 2":0,"Fase 3-4":0,REM:0},g={"Fase 1":0,"Fase 2":0,"Fase 3-4":0,REM:0};t.questions.forEach((_,v)=>{const S=n[v]||0;(_.phase?_.phase.split(" / ").map(b=>b.trim()):[]).forEach(b=>{p[b]!==void 0&&(p[b]+=S,g[b]+=4)})});const x=Object.keys(p).map(_=>{const v=g[_]>0?Math.round(p[_]/g[_]*100):100;return{name:_,percentage:v,status:v<60?"Critico":v<75?"Lieve":"Ottimale"}});l(x);const y=[...x].sort((_,v)=>_.percentage-v.percentage).filter(_=>_.percentage<75).slice(0,2);if(y.length>0){const _=new Set;y.forEach(v=>{var S,w,b;return(b=(w=(S=t.phaseRemedies)==null?void 0:S[v.name])==null?void 0:w.remedies)==null?void 0:b.forEach(C=>_.add(C))}),u({ingredients:Array.from(_),phases:y.map(v=>v.name)})}}},[r,n,t]);const h=()=>{const p=s.summary.replace(/<[^>]*>?/gm,"").replace(/\s+/g," ").trim();let g=`=================================================
`;g+=`   CLINICAL WELLNESS SPA - REPORT DI VALUTAZIONE
`,g+=`=================================================

`,g+=`TEST: ${t.title.toUpperCase()}
`,g+=`DATA: ${new Date().toLocaleDateString("it-IT")}
`,g+=`PUNTEGGIO: ${e} / 80

`,g+=`RISULTATO: ${s.title}
`,g+=`-------------------------------------------------
`,g+=`${p}

`,a&&(g+=`DETTAGLIO ARCHITETTURA DEL SONNO:
`,a.forEach(_=>{g+=`- ${_.name.padEnd(10)}: ${_.percentage}% (${_.status})
`}),c&&(g+=`
-------------------------------------------------
`,g+=`   PIANO GALENICO PERSONALIZZATO
`,g+=`-------------------------------------------------
`,g+=`OBIETTIVO: Supporto ${c.phases.join(" e ")}
`,g+=`COMPOSIZIONE: ${c.ingredients.join(" + ")}
`,g+=`POSOLOGIA: 1-2 capsule 30 min prima di coricarsi.

`,g+=`Porta questo report in Farmacia Centrale Montesilvano.
`)),g+=`
=================================================
`,g+="Disclaimer: Autovalutazione AI. Non sostituisce il medico.";const x=new Blob(["\uFEFF"+g],{type:"text/plain;charset=utf-8"}),y=document.createElement("a");y.href=URL.createObjectURL(x),y.download=`Report_${t.id}_${Date.now()}.txt`,y.click()};return m.jsx("div",{className:"p-4 md:p-8 animate-fade-in pb-32",children:m.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl max-w-3xl mx-auto border border-slate-100",children:[m.jsx("h2",{className:"text-3xl font-extrabold text-slate-800 mb-2",children:s.title}),m.jsxs("p",{className:"text-sky-600 font-bold text-xl mb-6",children:["Punteggio: ",e]}),m.jsx("div",{className:"prose prose-slate text-left bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-100",dangerouslySetInnerHTML:{__html:ne.parse(s.summary)}}),a&&m.jsxs("div",{className:"text-left mb-8 space-y-4",children:[m.jsx("h3",{className:"text-xl font-bold text-slate-800 border-b pb-2",children:"Analisi del Sonno"}),a.map(p=>m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between text-sm font-bold mb-1",children:[m.jsx("span",{className:"text-slate-700",children:p.name}),m.jsxs("span",{className:p.percentage<60?"text-red-500":"text-emerald-600",children:[p.percentage,"% - ",p.status]})]}),m.jsx("div",{className:"w-full bg-slate-100 h-2 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full transition-all duration-1000 ${p.percentage<60?"bg-red-500":"bg-emerald-500"}`,style:{width:`${p.percentage}%`}})})]},p.name))]}),c&&m.jsxs("div",{className:"bg-indigo-600 text-white p-6 rounded-2xl shadow-lg mb-8 text-left relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:m.jsx(Ia,{className:"w-24 h-24 text-white"})}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[m.jsx(Ia,{className:"w-6 h-6"}),m.jsx("h3",{className:"text-lg font-bold",children:"Formula Personalizzata"})]}),m.jsx("div",{className:"bg-white/10 p-4 rounded-xl font-mono text-sm mb-4 border border-white/20",children:c.ingredients.join(" + ")}),m.jsx("p",{className:"text-xs opacity-90 italic",children:"Preparazione esclusiva in Farmacia Centrale Montesilvano."})]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[m.jsx("button",{onClick:i,className:"px-6 py-3 bg-slate-100 text-slate-700 font-bold rounded-xl hover:bg-slate-200 transition-all",children:"Ripeti Test"}),m.jsxs("button",{onClick:h,className:"px-6 py-3 bg-emerald-500 text-white font-bold rounded-xl shadow-lg flex items-center justify-center gap-2 hover:bg-emerald-600 transition-all transform active:scale-95",children:[m.jsx(Ud,{className:"w-5 h-5"})," Scarica Report (.txt)"]}),m.jsx("button",{onClick:o,className:"px-6 py-3 bg-sky-600 text-white font-bold rounded-xl hover:bg-sky-700 transition-all",children:"Home"})]})]})})},Uh={category:"Servizi Diagnostici",items:[{name:"Holter Pressorio 24h",duration:"20 min",price:60,description:"Monitoraggio della pressione arteriosa per 24 ore."},{name:"Holter Cardiaco 24h",duration:"20 min",price:70,description:"Registrazione dell'attivit elettrica del cuore per 24 ore."},{name:"Elettrocardiogramma (ECG)",duration:"15 min",price:35,description:"Test rapido per controllare il ritmo e l'attivit elettrica del cuore."},{name:"Tampone Covid-19 Rapido",duration:"10 min",price:15,description:"Test antigenico rapido per la rilevazione del SARS-CoV-2."},{name:"Tampone Streptococco",duration:"10 min",price:20,description:"Test rapido per la diagnosi di faringite da Streptococco."},{name:"Foratura Lobi",duration:"15 min",price:25,description:"Servizio di foratura lobi sterile e sicuro."},{name:"Foratura Naso",duration:"20 min",price:30,description:"Servizio di foratura del naso con tecnica sterile."},{name:"Teledermatologia",duration:"20 min",price:80,description:"Valutazione dermatologica a distanza con invio di immagini."},{name:"BIA - Bioimpedenziometria",duration:"30 min",price:40,description:"Analisi della composizione corporea (massa magra, massa grassa, idratazione)."}]},nC=({user:t,showNotification:e})=>{const[n,i]=O.useState([]),[o,s]=O.useState(!1),[r,a]=O.useState([]),l=O.useCallback(()=>{const _=Oe("spaBookings",[]).filter(v=>v.userEmail===t.email&&v.type==="pharmacy").sort((v,S)=>new Date(S.dateSubmitted).getTime()-new Date(v.dateSubmitted).getTime());a(_)},[t.email]);O.useEffect(()=>{l()},[l]);const c=y=>{i(_=>{const v=y.name;return _.some(w=>w.id===v)?_.filter(w=>w.id!==v):[..._,{...y,id:v}]})},u=(y,_)=>{const S=Oe("spaBookings",[]).map(w=>w.id===y?{...w,status:_}:w);localStorage.setItem("spaBookings",JSON.stringify(S)),l(),e("Stato appuntamento aggiornato!","success")},h=y=>{if(window.confirm("Sei sicuro di voler annullare questa richiesta?")){const v=Oe("spaBookings",[]).filter(S=>S.id!==y);localStorage.setItem("spaBookings",JSON.stringify(v)),l(),e("Richiesta annullata.","success")}},p=(y,_,v)=>{const S={id:new Date().getTime(),userEmail:t.email,userName:t.name,services:n,requestedDate:y,requestedTime:_,totalPrice:n.reduce((T,E)=>T+E.price,0),status:"pending",dateSubmitted:new Date().toISOString(),type:"pharmacy"},w=Oe("spaBookings",[]);localStorage.setItem("spaBookings",JSON.stringify([...w,S])),l();const b=n.map(T=>`- ${T.name} (${T.duration} - ${T.price})`).join(`
`),C=`Richiesta Servizi Farmacia da: ${t.name} (${t.email})
Data: ${new Date(y).toLocaleDateString("it-IT")}
Ora: ${_}

Servizi:
${b}

Totale: ${S.totalPrice}`.trim();v==="email"?window.open(`mailto:${Rd}?subject=${encodeURIComponent(`Richiesta Servizi Farmacia - ${t.name}`)}&body=${encodeURIComponent(C)}`,"_blank"):v==="whatsapp"&&window.open(`https://wa.me/${Dd}?text=${encodeURIComponent(C)}`,"_blank"),s(!1),i([]),e("La tua richiesta  pronta per essere inviata!")},g=({status:y})=>{const _={pending:"bg-amber-100 text-amber-800",confirmed:"bg-emerald-100 text-emerald-800",rejected:"bg-red-100 text-red-800"},v={pending:"In attesa",confirmed:"Confermata",rejected:"Rifiutata"};return m.jsx("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${_[y]||_.pending}`,children:v[y]||v.pending})},x=n.reduce((y,_)=>y+(_.price||0),0);return m.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-32",children:[m.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Servizi della Farmacia"}),m.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Scegli i servizi di cui hai bisogno e prenota un appuntamento."}),m.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:Uh.category}),m.jsx("div",{className:"divide-y divide-slate-200",children:Uh.items.map(y=>m.jsxs("div",{onClick:()=>c(y),className:`py-4 flex justify-between items-start cursor-pointer transition-colors ${n.some(_=>_.id===y.name)?"bg-sky-50":"hover:bg-slate-50"}`,children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-bold text-slate-800",children:y.name}),m.jsx("p",{className:"text-sm text-slate-600 mt-1",children:y.description}),m.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Durata: ",y.duration]})]}),m.jsxs("p",{className:"font-semibold text-sky-700 flex-shrink-0 ml-4",children:[y.price,""]})]},y.name))})]}),m.jsxs("div",{className:"mt-12",children:[m.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-6",children:"Le Tue Richieste di Servizi"}),m.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:r.length>0?m.jsx("ul",{className:"space-y-4",children:r.map(y=>m.jsxs("li",{className:"bg-slate-50 p-4 rounded-lg border border-slate-100",children:[m.jsxs("div",{className:"flex justify-between items-start gap-4",children:[m.jsxs("div",{children:[m.jsxs("p",{className:"font-bold text-slate-800",children:["Richiesta del ",new Date(y.dateSubmitted).toLocaleDateString("it-IT")]}),m.jsxs("p",{className:"text-sm text-slate-600",children:["Appuntamento per: ",new Date(y.requestedDate).toLocaleDateString("it-IT")," ore ",y.requestedTime]})]}),m.jsx(g,{status:y.status})]}),m.jsx("ul",{className:"mt-2 text-sm text-slate-700 list-disc list-inside",children:y.services.map(_=>m.jsx("li",{children:_.name},_.id))}),y.status==="pending"&&m.jsxs("div",{className:"mt-4 border-t border-slate-200 pt-3 flex items-center justify-end gap-3",children:[m.jsxs("button",{onClick:()=>u(y.id,"confirmed"),className:"flex items-center gap-1.5 text-sm font-semibold text-emerald-600 hover:text-emerald-800 p-2 rounded-lg hover:bg-emerald-50 transition-colors",children:[m.jsx(wi,{className:"w-5 h-5"}),m.jsx("span",{children:"Conferma Richiesta"})]}),m.jsxs("button",{onClick:()=>h(y.id),className:"flex items-center gap-1.5 text-sm font-semibold text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:[m.jsx(zd,{className:"w-5 h-5"}),m.jsx("span",{children:"Elimina"})]})]})]},y.id))}):m.jsx("p",{className:"text-center text-slate-500 py-8",children:"Non hai richieste di servizi in corso."})})]}),n.length>0&&m.jsx(Ld,{selection:n,total:x,onProceed:()=>s(!0)}),m.jsx(Fd,{isOpen:o,onClose:()=>s(!1),selection:n,user:t,onConfirmByEmail:(y,_)=>p(y,_,"email"),onConfirmByWhatsApp:(y,_)=>p(y,_,"whatsapp")})]})},Po=(t,e)=>{if(t===0)return null;const n=un[e];if(!n)return null;const i=n.questions.length*4;return Math.min(100,Math.round(t/i*100))},iC=t=>{const e=(n,i,o,s,r,a)=>n===null||o===null||r===null?null:Math.round(n*i+o*s+r*a);return{body:e(t.fitness,.5,t.sleep,.3,t.diet,.2),mind:e(t.sleep,.4,t.stress,.5,t.microbiome,.1),emotions:e(t.sleep,.4,t.stress,.5,t.diet,.1)}},Zn={DEPRESSION_HAPPINESS:`
    <h4 class="font-bold text-sky-700 mb-2">ESERCIZI PER LA SALUTE E FELICITA' - Decalogo per la Gestione della Depressione</h4>
    <ol class="list-decimal list-inside space-y-1 text-sm">
        <li><strong>Mindfulness:</strong> Pratica la meditazione mindfulness per 20-30 minuti al giorno.</li>
        <li><strong>Esercizio Fisico:</strong> Fai esercizio fisico regolarmente, almeno 30 minuti al giorno.</li>
        <li><strong>Connettersi con gli Altri:</strong> Trascorri tempo con amici e familiari.</li>
        <li><strong>Pianificazione delle Attivit:</strong> Organizza attivit piacevoli e gratificanti.</li>
        <li><strong>Alimentazione Sana:</strong> Mantieni una dieta equilibrata e nutriente.</li>
        <li><strong>Routine del Sonno:</strong> Segui una routine regolare per il sonno.</li>
        <li><strong>Limitare l'Alcool:</strong> Evita il consumo eccessivo di alcool.</li>
        <li><strong>Diario delle Emozioni:</strong> Scrivi i tuoi pensieri e le tue emozioni ogni giorno.</li>
        <li><strong>Terapia e Supporto:</strong> Se necessario chiedi il supporto di un terapeuta.</li>
        <li><strong>Tecniche di Gestione dello Stress:</strong> Respirazione profonda e rilassamento muscolare.</li>
    </ol>
    <p class="mt-2 text-xs font-semibold">Durata degli Esercizi: 20 gg poi eseguire nuovamente i test.</p>
    `,MINDFULNESS_INSOMNIA:`
    <h4 class="font-bold text-sky-700 mb-2">MINDFULNESS PER GESTIRE L'INSONNIA</h4>
    <p class="text-sm mb-2">La pratica della Mindfulness pu migliorare la qualit del sonno aiutando a calmare la mente prima di dormire. Attraverso la pratica regolare, si impara a osservare i propri pensieri senza esserne travolti.</p>
    <p class="text-sm mb-2">Si consiglia di meditare regolarmente <strong>15-20 minuti al giorno</strong> prima di andare a letto.</p>
    <p class="mt-2 text-xs font-semibold">Durata degli esercizi: 20 gg poi eseguire nuovamente i test.</p>
    `,OSTEOPATHY:`
    <h4 class="font-bold text-sky-700 mb-2">Postura, Stress e Longevit: Osteopatia Strutturale</h4>
    <p class="text-sm mb-2">L'Osteopatia interviene sulle disfunzioni strutturali, migliorando l'allineamento corporeo e prevenendo problemi legati a una postura scorretta. Il trattamento pu agire sulla componente neurovegetativa e sullo stress.</p>
    <ul class="list-disc list-inside space-y-1 text-sm">
        <li>Miglioramento mobilit e respirazione</li>
        <li>Riduzione tensioni muscolari da stress</li>
        <li>Massaggi terapeutici per rilascio endorfine</li>
    </ul>
    <p class="mt-2 text-xs font-semibold">Durata del trattamento: 10 sedute poi eseguire nuovamente i test.</p>
    `,BINAURAL:`
    <h4 class="font-bold text-sky-700 mb-2">Terapia Binaurale per l'Ansia</h4>
    <p class="text-sm mb-2">Si consiglia terapia 20-30 minuti con <strong>Onde Alpha () + Onde Delta ()</strong>.</p>
    <ul class="list-disc list-inside space-y-1 text-sm">
        <li><strong>396 Hz:</strong> Libera dal senso di colpa e ansia</li>
        <li><strong>417 Hz:</strong> Cambiamento, lasciare andare il passato</li>
        <li><strong>528 Hz:</strong> Riparazione e armonizzazione del DNA</li>
    </ul>
    <p class="mt-2 text-xs font-semibold">Durata della terapia: 20 gg poi eseguire nuovamente i test.</p>
    `,SAUNA:`
    <h4 class="font-bold text-sky-700 mb-2">SAUNA INFRAROSSI</h4>
    <p class="text-sm mb-2">La sauna infrarossi produce un effettivo e localizzato dimagrimento (sino a 900 Kcal a seduta) ed elimina tossine e metalli pesanti.</p>
    <ul class="list-disc list-inside space-y-1 text-sm">
        <li>Migliora la pelle (pi luminosa ed elastica)</li>
        <li>Favorisce il sonno e la circolazione</li>
        <li>Ottimo prima di massaggi e trattamenti estetici</li>
    </ul>
    <p class="mt-2 text-xs font-semibold">Durata: 10 sedute poi eseguire nuovamente i test.</p>
    `,DETOX:`
    <h4 class="font-bold text-sky-700 mb-2">TERAPIA DETOX - Tisane Naturali</h4>
    <ul class="list-disc list-inside space-y-1 text-sm">
        <li><strong>Tarassaco:</strong> azione depurativa (radice secca, scorza limone, zenzero).</li>
        <li><strong>T Verde e Ortica:</strong> azione antiossidante.</li>
        <li><strong>Finocchio e Zenzero:</strong> azione digestiva.</li>
        <li><strong>Zenzero e Curcuma:</strong> azione antinfiammatoria.</li>
    </ul>
    <p class="mt-2 text-xs font-semibold">Durata della terapia Detox: 4 settimane poi eseguire nuovamente i test.</p>
    `,BIOFEEDBACK:`
    <h4 class="font-bold text-sky-700 mb-2">COERENZA CARDIACA E HRV</h4>
    <p class="text-sm mb-2">Per combattere stress, ansia e insonnia,  fondamentale monitorare e migliorare la variabilit della frequenza cardiaca (HRV).</p>
    <ul class="list-disc list-inside space-y-1 text-sm">
        <li>Utilizza lo strumento di <strong>Coerenza Cardiaca</strong> in app quotidianamente.</li>
        <li>Valuta esami clinici specifici come <strong>Holter Cardiaco/Pressorio</strong> o <strong>ECG</strong> disponibili in farmacia.</li>
    </ul>
    `},oC=(t,e)=>{const n=[];e.stress!==null&&e.stress<50&&n.push({title:"Gestione Ansia & Stress",status:"critical",description:"Livelli di stress elevati. Consigliamo di agire subito monitorando il cuore (HRV) e praticando il rilassamento.",detailedContent:Zn.BIOFEEDBACK+"<br/>"+Zn.BINAURAL,therapies:["Coerenza Cardiaca (vedi app)","Holter Cardiaco/Pressorio","Test Cortisolo Salivare"],actionLink:"breathing",iconKey:"stress"}),e.sleep!==null&&e.sleep<50&&n.push({title:"Qualit del Sonno",status:"critical",description:"Il riposo notturno non  rigenerante. Oltre alla mindfulness, valuta l'impatto fisiologico dello stress.",detailedContent:Zn.MINDFULNESS_INSOMNIA+"<br/><p class='text-sm mt-2'>Consigliato anche check <strong>HRV e Coerenza Cardiaca</strong>.</p>",therapies:["Polisonnografia (prenota in analisi)","Mindfulness serale","Coerenza Cardiaca"],actionLink:"analysisQuote",iconKey:"sleep"}),(e.diet!==null&&e.diet<50||e.microbiome!==null&&e.microbiome<50)&&n.push({title:"Detox & Nutrizione",status:"moderate",description:"Il sistema digerente necessita di depurazione. Utile indagare intolleranze.",detailedContent:Zn.DETOX,therapies:["Test Intolleranze/Microbioma","Tisane depurative","Piano nutrizionale"],actionLink:"analysisQuote",iconKey:"diet"}),e.fitness!==null&&e.fitness<40&&n.push({title:"Struttura & Postura",status:"moderate",description:"Possibili tensioni muscolari. Un check-up posturale pu prevenire dolori cronici.",detailedContent:Zn.OSTEOPATHY,therapies:["Valutazione Osteopatica","Massaggi decontratturanti","Esercizi posturali"],actionLink:"spaBookings",iconKey:"structure"}),t.mind!==null&&t.mind<50&&n.push({title:"Riequilibrio Emozionale",status:"critical",description:"Strategie per ritrovare la serenit. La sauna infrarossi pu aiutare il rilascio di tensioni profonde.",detailedContent:Zn.DEPRESSION_HAPPINESS+"<br/>"+Zn.SAUNA,therapies:["Supporto psicologico","Sauna Infrarossi","Percorsi SPA Relax"],actionLink:"spaBookings",iconKey:"emotion"});const i=t.body!==null&&t.mind!==null?(t.body+t.mind)/2:null;return i!==null&&i>=60&&n.length===0&&n.push({title:"Mantenimento Benessere",status:"optimal",description:"Il tuo stato di salute  buono. Continua con protocolli di mantenimento per la longevit.",therapies:["Massaggi di mantenimento","Check-up annuale (Analisi sangue)","Trattamenti viso/corpo prevenzione"],actionLink:"spaBookings",iconKey:"maintenance"}),n};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Js(t){return t+.5|0}const Mn=(t,e,n)=>Math.max(Math.min(t,n),e);function Go(t){return Mn(Js(t*2.55),0,255)}function $n(t){return Mn(Js(t*255),0,255)}function tn(t){return Mn(Js(t/2.55)/100,0,1)}function Oh(t){return Mn(Js(t*100),0,100)}const mt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ru=[..."0123456789ABCDEF"],sC=t=>ru[t&15],rC=t=>ru[(t&240)>>4]+ru[t&15],gr=t=>(t&240)>>4===(t&15),aC=t=>gr(t.r)&&gr(t.g)&&gr(t.b)&&gr(t.a);function lC(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&mt[t[1]]*17,g:255&mt[t[2]]*17,b:255&mt[t[3]]*17,a:e===5?mt[t[4]]*17:255}:(e===7||e===9)&&(n={r:mt[t[1]]<<4|mt[t[2]],g:mt[t[3]]<<4|mt[t[4]],b:mt[t[5]]<<4|mt[t[6]],a:e===9?mt[t[7]]<<4|mt[t[8]]:255})),n}const cC=(t,e)=>t<255?e(t):"";function uC(t){var e=aC(t)?sC:rC;return t?"#"+e(t.r)+e(t.g)+e(t.b)+cC(t.a,e):void 0}const dC=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function bv(t,e,n){const i=e*Math.min(n,1-n),o=(s,r=(s+t/30)%12)=>n-i*Math.max(Math.min(r-3,9-r,1),-1);return[o(0),o(8),o(4)]}function fC(t,e,n){const i=(o,s=(o+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function hC(t,e,n){const i=bv(t,1,.5);let o;for(e+n>1&&(o=1/(e+n),e*=o,n*=o),o=0;o<3;o++)i[o]*=1-e-n,i[o]+=e;return i}function pC(t,e,n,i,o){return t===o?(e-n)/i+(e<n?6:0):e===o?(n-t)/i+2:(t-e)/i+4}function jd(t){const n=t.r/255,i=t.g/255,o=t.b/255,s=Math.max(n,i,o),r=Math.min(n,i,o),a=(s+r)/2;let l,c,u;return s!==r&&(u=s-r,c=a>.5?u/(2-s-r):u/(s+r),l=pC(n,i,o,u,s),l=l*60+.5),[l|0,c||0,a]}function Wd(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map($n)}function Jd(t,e,n){return Wd(bv,t,e,n)}function mC(t,e,n){return Wd(hC,t,e,n)}function gC(t,e,n){return Wd(fC,t,e,n)}function Cv(t){return(t%360+360)%360}function xC(t){const e=dC.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Go(+e[5]):$n(+e[5]));const o=Cv(+e[2]),s=+e[3]/100,r=+e[4]/100;return e[1]==="hwb"?i=mC(o,s,r):e[1]==="hsv"?i=gC(o,s,r):i=Jd(o,s,r),{r:i[0],g:i[1],b:i[2],a:n}}function vC(t,e){var n=jd(t);n[0]=Cv(n[0]+e),n=Jd(n),t.r=n[0],t.g=n[1],t.b=n[2]}function yC(t){if(!t)return;const e=jd(t),n=e[0],i=Oh(e[1]),o=Oh(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${o}%, ${tn(t.a)})`:`hsl(${n}, ${i}%, ${o}%)`}const Vh={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Bh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function _C(){const t={},e=Object.keys(Bh),n=Object.keys(Vh);let i,o,s,r,a;for(i=0;i<e.length;i++){for(r=a=e[i],o=0;o<n.length;o++)s=n[o],a=a.replace(s,Vh[s]);s=parseInt(Bh[r],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let xr;function SC(t){xr||(xr=_C(),xr.transparent=[0,0,0,0]);const e=xr[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const wC=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function bC(t){const e=wC.exec(t);let n=255,i,o,s;if(e){if(e[7]!==i){const r=+e[7];n=e[8]?Go(r):Mn(r*255,0,255)}return i=+e[1],o=+e[3],s=+e[5],i=255&(e[2]?Go(i):Mn(i,0,255)),o=255&(e[4]?Go(o):Mn(o,0,255)),s=255&(e[6]?Go(s):Mn(s,0,255)),{r:i,g:o,b:s,a:n}}}function CC(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${tn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Yl=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ni=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function TC(t,e,n){const i=Ni(tn(t.r)),o=Ni(tn(t.g)),s=Ni(tn(t.b));return{r:$n(Yl(i+n*(Ni(tn(e.r))-i))),g:$n(Yl(o+n*(Ni(tn(e.g))-o))),b:$n(Yl(s+n*(Ni(tn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function vr(t,e,n){if(t){let i=jd(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Jd(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Tv(t,e){return t&&Object.assign(e||{},t)}function Hh(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=$n(t[3]))):(e=Tv(t,{r:0,g:0,b:0,a:1}),e.a=$n(e.a)),e}function EC(t){return t.charAt(0)==="r"?bC(t):xC(t)}class Rs{constructor(e){if(e instanceof Rs)return e;const n=typeof e;let i;n==="object"?i=Hh(e):n==="string"&&(i=lC(e)||SC(e)||EC(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Tv(this._rgb);return e&&(e.a=tn(e.a)),e}set rgb(e){this._rgb=Hh(e)}rgbString(){return this._valid?CC(this._rgb):void 0}hexString(){return this._valid?uC(this._rgb):void 0}hslString(){return this._valid?yC(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,o=e.rgb;let s;const r=n===s?.5:n,a=2*r-1,l=i.a-o.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*o.r+.5,i.g=255&c*i.g+s*o.g+.5,i.b=255&c*i.b+s*o.b+.5,i.a=r*i.a+(1-r)*o.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=TC(this._rgb,e._rgb,n)),this}clone(){return new Rs(this.rgb)}alpha(e){return this._rgb.a=$n(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Js(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return vr(this._rgb,2,e),this}darken(e){return vr(this._rgb,2,-e),this}saturate(e){return vr(this._rgb,1,e),this}desaturate(e){return vr(this._rgb,1,-e),this}rotate(e){return vC(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Kt(){}const kC=(()=>{let t=0;return()=>t++})();function K(t){return t==null}function pe(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function X(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function _e(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function rt(t,e){return _e(t)?t:e}function W(t,e){return typeof t>"u"?e:t}const IC=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Ev=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ae(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ie(t,e,n,i){let o,s,r;if(pe(t))for(s=t.length,o=0;o<s;o++)e.call(n,t[o],o);else if(X(t))for(r=Object.keys(t),s=r.length,o=0;o<s;o++)e.call(n,t[r[o]],r[o])}function Aa(t,e){let n,i,o,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(o=t[n],s=e[n],o.datasetIndex!==s.datasetIndex||o.index!==s.index)return!1;return!0}function Ma(t){if(pe(t))return t.map(Ma);if(X(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let o=0;for(;o<i;++o)e[n[o]]=Ma(t[n[o]]);return e}return t}function kv(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function AC(t,e,n,i){if(!kv(t))return;const o=e[t],s=n[t];X(o)&&X(s)?Ds(o,s,i):e[t]=Ma(s)}function Ds(t,e,n){const i=pe(e)?e:[e],o=i.length;if(!X(t))return t;n=n||{};const s=n.merger||AC;let r;for(let a=0;a<o;++a){if(r=i[a],!X(r))continue;const l=Object.keys(r);for(let c=0,u=l.length;c<u;++c)s(l[c],t,r,n)}return t}function ls(t,e){return Ds(t,e,{merger:MC})}function MC(t,e,n){if(!kv(t))return;const i=e[t],o=n[t];X(i)&&X(o)?ls(i,o):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ma(o))}const $h={"":t=>t,x:t=>t.x,y:t=>t.y};function NC(t){const e=t.split("."),n=[];let i="";for(const o of e)i+=o,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function PC(t){const e=NC(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function jn(t,e){return($h[e]||($h[e]=PC(e)))(t)}function Yd(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ls=t=>typeof t<"u",Wn=t=>typeof t=="function",Gh=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function RC(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ee=Math.PI,de=2*ee,DC=de+ee,Na=Number.POSITIVE_INFINITY,LC=ee/180,we=ee/2,ei=ee/4,qh=ee*2/3,Nn=Math.log10,Jt=Math.sign;function cs(t,e,n){return Math.abs(t-e)<n}function jh(t){const e=Math.round(t);t=cs(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Nn(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function FC(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((o,s)=>o-s).pop(),e}function zC(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function fo(t){return!zC(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function UC(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Iv(t,e,n){let i,o,s;for(i=0,o=t.length;i<o;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Mt(t){return t*(ee/180)}function Kd(t){return t*(180/ee)}function Wh(t){if(!_e(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Av(t,e){const n=e.x-t.x,i=e.y-t.y,o=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*ee&&(s+=de),{angle:s,distance:o}}function au(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function OC(t,e){return(t-e+DC)%de-ee}function ze(t){return(t%de+de)%de}function Fs(t,e,n,i){const o=ze(t),s=ze(e),r=ze(n),a=ze(s-o),l=ze(r-o),c=ze(o-s),u=ze(o-r);return o===s||o===r||i&&s===r||a>l&&c<u}function Ie(t,e,n){return Math.max(e,Math.min(n,t))}function VC(t){return Ie(t,-32768,32767)}function sn(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Qd(t,e,n){n=n||(r=>t[r]<e);let i=t.length-1,o=0,s;for(;i-o>1;)s=o+i>>1,n(s)?o=s:i=s;return{lo:o,hi:i}}const rn=(t,e,n,i)=>Qd(t,n,i?o=>{const s=t[o][e];return s<n||s===n&&t[o+1][e]===n}:o=>t[o][e]<n),BC=(t,e,n)=>Qd(t,n,i=>t[i][e]>=n);function HC(t,e,n){let i=0,o=t.length;for(;i<o&&t[i]<e;)i++;for(;o>i&&t[o-1]>n;)o--;return i>0||o<t.length?t.slice(i,o):t}const Mv=["push","pop","shift","splice","unshift"];function $C(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Mv.forEach(n=>{const i="_onData"+Yd(n),o=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const r=o.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),r}})})}function Jh(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,o=i.indexOf(e);o!==-1&&i.splice(o,1),!(i.length>0)&&(Mv.forEach(s=>{delete t[s]}),delete t._chartjs)}function Nv(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Pv=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Rv(t,e){let n=[],i=!1;return function(...o){n=o,i||(i=!0,Pv.call(window,()=>{i=!1,t.apply(e,n)}))}}function GC(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Xd=t=>t==="start"?"left":t==="end"?"right":"center",Fe=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,qC=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function Dv(t,e,n){const i=e.length;let o=0,s=i;if(t._sorted){const{iScale:r,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=r.axis,{min:h,max:p,minDefined:g,maxDefined:x}=r.getUserBounds();if(g){if(o=Math.min(rn(l,u,h).lo,n?i:rn(e,u,r.getPixelForValue(h)).lo),c){const y=l.slice(0,o+1).reverse().findIndex(_=>!K(_[a.axis]));o-=Math.max(0,y)}o=Ie(o,0,i-1)}if(x){let y=Math.max(rn(l,r.axis,p,!0).hi+1,n?0:rn(e,u,r.getPixelForValue(p),!0).hi+1);if(c){const _=l.slice(y-1).findIndex(v=>!K(v[a.axis]));y+=Math.max(0,_)}s=Ie(y,o,i)-o}else s=i-o}return{start:o,count:s}}function Lv(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,o={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=o,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,o),s}const yr=t=>t===0||t===1,Yh=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*de/n)),Kh=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*de/n)+1,us={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*we)+1,easeOutSine:t=>Math.sin(t*we),easeInOutSine:t=>-.5*(Math.cos(ee*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>yr(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>yr(t)?t:Yh(t,.075,.3),easeOutElastic:t=>yr(t)?t:Kh(t,.075,.3),easeInOutElastic(t){return yr(t)?t:t<.5?.5*Yh(t*2,.1125,.45):.5+.5*Kh(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-us.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?us.easeInBounce(t*2)*.5:us.easeOutBounce(t*2-1)*.5+.5};function Zd(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Qh(t){return Zd(t)?t:new Rs(t)}function Kl(t){return Zd(t)?t:new Rs(t).saturate(.5).darken(.1).hexString()}const jC=["x","y","borderWidth","radius","tension"],WC=["color","borderColor","backgroundColor"];function JC(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:WC},numbers:{type:"number",properties:jC}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function YC(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Xh=new Map;function KC(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Xh.get(n);return i||(i=new Intl.NumberFormat(t,e),Xh.set(n,i)),i}function Ys(t,e,n){return KC(e,n).format(t)}const Fv={values(t){return pe(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let o,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(o="scientific"),s=QC(t,n)}const r=Nn(Math.abs(s)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Ys(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Nn(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?Fv.numeric.call(this,t,e,n):""}};function QC(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var ll={formatters:Fv};function XC(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ll.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ci=Object.create(null),lu=Object.create(null);function ds(t,e){if(!e)return t;const n=e.split(".");for(let i=0,o=n.length;i<o;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function Ql(t,e,n){return typeof e=="string"?Ds(ds(t,e),n):Ds(ds(t,""),e)}class ZC{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,o)=>Kl(o.backgroundColor),this.hoverBorderColor=(i,o)=>Kl(o.borderColor),this.hoverColor=(i,o)=>Kl(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Ql(this,e,n)}get(e){return ds(this,e)}describe(e,n){return Ql(lu,e,n)}override(e,n){return Ql(Ci,e,n)}route(e,n,i,o){const s=ds(this,e),r=ds(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=r[o];return X(l)?Object.assign({},c,l):W(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var me=new ZC({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[JC,YC,XC]);function e1(t){return!t||K(t.size)||K(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Pa(t,e,n,i,o){let s=e[o];return s||(s=e[o]=t.measureText(o).width,n.push(o)),s>i&&(i=s),i}function t1(t,e,n,i){i=i||{};let o=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(o=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let r=0;const a=n.length;let l,c,u,h,p;for(l=0;l<a;l++)if(h=n[l],h!=null&&!pe(h))r=Pa(t,o,s,r,h);else if(pe(h))for(c=0,u=h.length;c<u;c++)p=h[c],p!=null&&!pe(p)&&(r=Pa(t,o,s,r,p));t.restore();const g=s.length/2;if(g>n.length){for(l=0;l<g;l++)delete o[s[l]];s.splice(0,g)}return r}function ti(t,e,n){const i=t.currentDevicePixelRatio,o=n!==0?Math.max(n/2,.5):0;return Math.round((e-o)*i)/i+o}function Zh(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function cu(t,e,n,i){zv(t,e,n,i,null)}function zv(t,e,n,i,o){let s,r,a,l,c,u,h,p;const g=e.pointStyle,x=e.rotation,y=e.radius;let _=(x||0)*LC;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(_),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),g){default:o?t.ellipse(n,i,o/2,y,0,0,de):t.arc(n,i,y,0,de),t.closePath();break;case"triangle":u=o?o/2:y,t.moveTo(n+Math.sin(_)*u,i-Math.cos(_)*y),_+=qh,t.lineTo(n+Math.sin(_)*u,i-Math.cos(_)*y),_+=qh,t.lineTo(n+Math.sin(_)*u,i-Math.cos(_)*y),t.closePath();break;case"rectRounded":c=y*.516,l=y-c,r=Math.cos(_+ei)*l,h=Math.cos(_+ei)*(o?o/2-c:l),a=Math.sin(_+ei)*l,p=Math.sin(_+ei)*(o?o/2-c:l),t.arc(n-h,i-a,c,_-ee,_-we),t.arc(n+p,i-r,c,_-we,_),t.arc(n+h,i+a,c,_,_+we),t.arc(n-p,i+r,c,_+we,_+ee),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*y,u=o?o/2:l,t.rect(n-u,i-l,2*u,2*l);break}_+=ei;case"rectRot":h=Math.cos(_)*(o?o/2:y),r=Math.cos(_)*y,a=Math.sin(_)*y,p=Math.sin(_)*(o?o/2:y),t.moveTo(n-h,i-a),t.lineTo(n+p,i-r),t.lineTo(n+h,i+a),t.lineTo(n-p,i+r),t.closePath();break;case"crossRot":_+=ei;case"cross":h=Math.cos(_)*(o?o/2:y),r=Math.cos(_)*y,a=Math.sin(_)*y,p=Math.sin(_)*(o?o/2:y),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+p,i-r),t.lineTo(n-p,i+r);break;case"star":h=Math.cos(_)*(o?o/2:y),r=Math.cos(_)*y,a=Math.sin(_)*y,p=Math.sin(_)*(o?o/2:y),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+p,i-r),t.lineTo(n-p,i+r),_+=ei,h=Math.cos(_)*(o?o/2:y),r=Math.cos(_)*y,a=Math.sin(_)*y,p=Math.sin(_)*(o?o/2:y),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+p,i-r),t.lineTo(n-p,i+r);break;case"line":r=o?o/2:Math.cos(_)*y,a=Math.sin(_)*y,t.moveTo(n-r,i-a),t.lineTo(n+r,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(_)*(o?o/2:y),i+Math.sin(_)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function an(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function cl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ul(t){t.restore()}function n1(t,e,n,i,o){if(!e)return t.lineTo(n.x,n.y);if(o==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else o==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function i1(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function o1(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),K(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function s1(t,e,n,i,o){if(o.strikethrough||o.underline){const s=t.measureText(i),r=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=o.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=o.decorationWidth||2,t.moveTo(r,u),t.lineTo(a,u),t.stroke()}}function r1(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ti(t,e,n,i,o,s={}){const r=pe(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=o.string,o1(t,s),l=0;l<r.length;++l)c=r[l],s.backdrop&&r1(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),K(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),s1(t,n,i,c,s),i+=Number(o.lineHeight);t.restore()}function zs(t,e){const{x:n,y:i,w:o,h:s,radius:r}=e;t.arc(n+r.topLeft,i+r.topLeft,r.topLeft,1.5*ee,ee,!0),t.lineTo(n,i+s-r.bottomLeft),t.arc(n+r.bottomLeft,i+s-r.bottomLeft,r.bottomLeft,ee,we,!0),t.lineTo(n+o-r.bottomRight,i+s),t.arc(n+o-r.bottomRight,i+s-r.bottomRight,r.bottomRight,we,0,!0),t.lineTo(n+o,i+r.topRight),t.arc(n+o-r.topRight,i+r.topRight,r.topRight,0,-we,!0),t.lineTo(n+r.topLeft,i)}const a1=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,l1=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function c1(t,e){const n=(""+t).match(a1);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const u1=t=>+t||0;function ef(t,e){const n={},i=X(e),o=i?Object.keys(e):e,s=X(t)?i?r=>W(t[r],t[e[r]]):r=>t[r]:()=>t;for(const r of o)n[r]=u1(s(r));return n}function Uv(t){return ef(t,{top:"y",right:"x",bottom:"y",left:"x"})}function mi(t){return ef(t,["topLeft","topRight","bottomLeft","bottomRight"])}function $e(t){const e=Uv(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ee(t,e){t=t||{},e=e||me.font;let n=W(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=W(t.style,e.style);i&&!(""+i).match(l1)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const o={family:W(t.family,e.family),lineHeight:c1(W(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:W(t.weight,e.weight),string:""};return o.string=e1(o),o}function qo(t,e,n,i){let o,s,r;for(o=0,s=t.length;o<s;++o)if(r=t[o],r!==void 0&&r!==void 0)return r}function d1(t,e,n){const{min:i,max:o}=t,s=Ev(e,(o-i)/2),r=(a,l)=>n&&a===0?0:a+l;return{min:r(i,-Math.abs(s)),max:r(o,s)}}function Qn(t,e){return Object.assign(Object.create(t),e)}function tf(t,e=[""],n,i,o=()=>t[0]){const s=n||t;typeof i>"u"&&(i=Hv("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:o,override:a=>tf([a,...t],e,s,i)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Vv(a,l,()=>y1(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return tp(a).includes(l)},ownKeys(a){return tp(a)},set(a,l,c){const u=a._storage||(a._storage=o());return a[l]=u[l]=c,delete a._keys,!0}})}function ho(t,e,n,i){const o={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Ov(t,i),setContext:s=>ho(t,s,n,i),override:s=>ho(t.override(s),e,n,i)};return new Proxy(o,{deleteProperty(s,r){return delete s[r],delete t[r],!0},get(s,r,a){return Vv(s,r,()=>h1(s,r,a))},getOwnPropertyDescriptor(s,r){return s._descriptors.allKeys?Reflect.has(t,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,r)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,r){return Reflect.has(t,r)},ownKeys(){return Reflect.ownKeys(t)},set(s,r,a){return t[r]=a,delete s[r],!0}})}function Ov(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:o=e.allKeys}=t;return{allKeys:o,scriptable:n,indexable:i,isScriptable:Wn(n)?n:()=>n,isIndexable:Wn(i)?i:()=>i}}const f1=(t,e)=>t?t+Yd(e):e,nf=(t,e)=>X(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Vv(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function h1(t,e,n){const{_proxy:i,_context:o,_subProxy:s,_descriptors:r}=t;let a=i[e];return Wn(a)&&r.isScriptable(e)&&(a=p1(e,a,t,n)),pe(a)&&a.length&&(a=m1(e,a,t,r.isIndexable)),nf(e,a)&&(a=ho(a,o,s&&s[e],r)),a}function p1(t,e,n,i){const{_proxy:o,_context:s,_subProxy:r,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,r||i);return a.delete(t),nf(t,l)&&(l=of(o._scopes,o,t,l)),l}function m1(t,e,n,i){const{_proxy:o,_context:s,_subProxy:r,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(X(e[0])){const l=e,c=o._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=of(c,o,t,u);e.push(ho(h,s,r&&r[t],a))}}return e}function Bv(t,e,n){return Wn(t)?t(e,n):t}const g1=(t,e)=>t===!0?e:typeof t=="string"?jn(e,t):void 0;function x1(t,e,n,i,o){for(const s of e){const r=g1(n,s);if(r){t.add(r);const a=Bv(r._fallback,n,o);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(r===!1&&typeof i<"u"&&n!==i)return null}return!1}function of(t,e,n,i){const o=e._rootScopes,s=Bv(e._fallback,n,i),r=[...t,...o],a=new Set;a.add(i);let l=ep(a,r,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=ep(a,r,s,l,i),l===null)?!1:tf(Array.from(a),[""],o,s,()=>v1(e,n,i))}function ep(t,e,n,i,o){for(;n;)n=x1(t,e,n,i,o);return n}function v1(t,e,n){const i=t._getTarget();e in i||(i[e]={});const o=i[e];return pe(o)&&X(n)?n:o||{}}function y1(t,e,n,i){let o;for(const s of e)if(o=Hv(f1(s,t),n),typeof o<"u")return nf(t,o)?of(n,i,t,o):o}function Hv(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function tp(t){let e=t._keys;return e||(e=t._keys=_1(t._scopes)),e}function _1(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(o=>!o.startsWith("_")))e.add(i);return Array.from(e)}function $v(t,e,n,i){const{iScale:o}=t,{key:s="r"}=this._parsing,r=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],r[a]={r:o.parse(jn(u,s),c)};return r}const S1=Number.EPSILON||1e-14,po=(t,e)=>e<t.length&&!t[e].skip&&t[e],Gv=t=>t==="x"?"y":"x";function w1(t,e,n,i){const o=t.skip?e:t,s=e,r=n.skip?e:n,a=au(s,o),l=au(r,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,p=i*u;return{previous:{x:s.x-h*(r.x-o.x),y:s.y-h*(r.y-o.y)},next:{x:s.x+p*(r.x-o.x),y:s.y+p*(r.y-o.y)}}}function b1(t,e,n){const i=t.length;let o,s,r,a,l,c=po(t,0);for(let u=0;u<i-1;++u)if(l=c,c=po(t,u+1),!(!l||!c)){if(cs(e[u],0,S1)){n[u]=n[u+1]=0;continue}o=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(o,2)+Math.pow(s,2),!(a<=9)&&(r=3/Math.sqrt(a),n[u]=o*r*e[u],n[u+1]=s*r*e[u])}}function C1(t,e,n="x"){const i=Gv(n),o=t.length;let s,r,a,l=po(t,0);for(let c=0;c<o;++c){if(r=a,a=l,l=po(t,c+1),!a)continue;const u=a[n],h=a[i];r&&(s=(u-r[n])/3,a[`cp1${n}`]=u-s,a[`cp1${i}`]=h-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${i}`]=h+s*e[c])}}function T1(t,e="x"){const n=Gv(e),i=t.length,o=Array(i).fill(0),s=Array(i);let r,a,l,c=po(t,0);for(r=0;r<i;++r)if(a=l,l=c,c=po(t,r+1),!!l){if(c){const u=c[e]-l[e];o[r]=u!==0?(c[n]-l[n])/u:0}s[r]=a?c?Jt(o[r-1])!==Jt(o[r])?0:(o[r-1]+o[r])/2:o[r-1]:o[r]}b1(t,o,s),C1(t,s,e)}function _r(t,e,n){return Math.max(Math.min(t,n),e)}function E1(t,e){let n,i,o,s,r,a=an(t[0],e);for(n=0,i=t.length;n<i;++n)r=s,s=a,a=n<i-1&&an(t[n+1],e),s&&(o=t[n],r&&(o.cp1x=_r(o.cp1x,e.left,e.right),o.cp1y=_r(o.cp1y,e.top,e.bottom)),a&&(o.cp2x=_r(o.cp2x,e.left,e.right),o.cp2y=_r(o.cp2y,e.top,e.bottom)))}function k1(t,e,n,i,o){let s,r,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")T1(t,o);else{let c=i?t[t.length-1]:t[0];for(s=0,r=t.length;s<r;++s)a=t[s],l=w1(c,a,t[Math.min(s+1,r-(i?0:1))%r],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&E1(t,n)}function sf(){return typeof window<"u"&&typeof document<"u"}function rf(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ra(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const dl=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function I1(t,e){return dl(t).getPropertyValue(e)}const A1=["top","right","bottom","left"];function gi(t,e,n){const i={};n=n?"-"+n:"";for(let o=0;o<4;o++){const s=A1[o];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const M1=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function N1(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:o,offsetY:s}=i;let r=!1,a,l;if(M1(o,s,t.target))a=o,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function ri(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,o=dl(n),s=o.boxSizing==="border-box",r=gi(o,"padding"),a=gi(o,"border","width"),{x:l,y:c,box:u}=N1(t,n),h=r.left+(u&&a.left),p=r.top+(u&&a.top);let{width:g,height:x}=e;return s&&(g-=r.width+a.width,x-=r.height+a.height),{x:Math.round((l-h)/g*n.width/i),y:Math.round((c-p)/x*n.height/i)}}function P1(t,e,n){let i,o;if(e===void 0||n===void 0){const s=t&&rf(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const r=s.getBoundingClientRect(),a=dl(s),l=gi(a,"border","width"),c=gi(a,"padding");e=r.width-c.width-l.width,n=r.height-c.height-l.height,i=Ra(a.maxWidth,s,"clientWidth"),o=Ra(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Na,maxHeight:o||Na}}const Pn=t=>Math.round(t*10)/10;function R1(t,e,n,i){const o=dl(t),s=gi(o,"margin"),r=Ra(o.maxWidth,t,"clientWidth")||Na,a=Ra(o.maxHeight,t,"clientHeight")||Na,l=P1(t,e,n);let{width:c,height:u}=l;if(o.boxSizing==="content-box"){const p=gi(o,"border","width"),g=gi(o,"padding");c-=g.width+p.width,u-=g.height+p.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=Pn(Math.min(c,r,l.maxWidth)),u=Pn(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Pn(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Pn(Math.floor(u*i))),{width:c,height:u}}function np(t,e,n){const i=e||1,o=Pn(t.height*i),s=Pn(t.width*i);t.height=Pn(t.height),t.width=Pn(t.width);const r=t.canvas;return r.style&&(n||!r.style.height&&!r.style.width)&&(r.style.height=`${t.height}px`,r.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||r.height!==o||r.width!==s?(t.currentDevicePixelRatio=i,r.height=o,r.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const D1=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};sf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function ip(t,e){const n=I1(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ai(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function L1(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function F1(t,e,n,i){const o={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},r=ai(t,o,n),a=ai(o,s,n),l=ai(s,e,n),c=ai(r,a,n),u=ai(a,l,n);return ai(c,u,n)}const z1=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},U1=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function eo(t,e,n){return t?z1(e,n):U1()}function qv(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function jv(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Wv(t){return t==="angle"?{between:Fs,compare:OC,normalize:ze}:{between:sn,compare:(e,n)=>e-n,normalize:e=>e}}function op({start:t,end:e,count:n,loop:i,style:o}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:o}}function O1(t,e,n){const{property:i,start:o,end:s}=n,{between:r,normalize:a}=Wv(i),l=e.length;let{start:c,end:u,loop:h}=t,p,g;if(h){for(c+=l,u+=l,p=0,g=l;p<g&&r(a(e[c%l][i]),o,s);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function Jv(t,e,n){if(!n)return[t];const{property:i,start:o,end:s}=n,r=e.length,{compare:a,between:l,normalize:c}=Wv(i),{start:u,end:h,loop:p,style:g}=O1(t,e,n),x=[];let y=!1,_=null,v,S,w;const b=()=>l(o,w,v)&&a(o,w)!==0,C=()=>a(s,v)===0||l(s,w,v),T=()=>y||b(),E=()=>!y||C();for(let k=u,A=u;k<=h;++k)S=e[k%r],!S.skip&&(v=c(S[i]),v!==w&&(y=l(v,o,s),_===null&&T()&&(_=a(v,o)===0?k:A),_!==null&&E()&&(x.push(op({start:_,end:k,loop:p,count:r,style:g})),_=null),A=k,w=v));return _!==null&&x.push(op({start:_,end:h,loop:p,count:r,style:g})),x}function Yv(t,e){const n=[],i=t.segments;for(let o=0;o<i.length;o++){const s=Jv(i[o],t.points,e);s.length&&n.push(...s)}return n}function V1(t,e,n,i){let o=0,s=e-1;if(n&&!i)for(;o<e&&!t[o].skip;)o++;for(;o<e&&t[o].skip;)o++;for(o%=e,n&&(s+=o);s>o&&t[s%e].skip;)s--;return s%=e,{start:o,end:s}}function B1(t,e,n,i){const o=t.length,s=[];let r=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%o];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%o,end:(l-1)%o,loop:i}),e=r=c.stop?l:null):(r=l,a.skip&&(e=l)),a=c}return r!==null&&s.push({start:e%o,end:r%o,loop:i}),s}function H1(t,e){const n=t.points,i=t.options.spanGaps,o=n.length;if(!o)return[];const s=!!t._loop,{start:r,end:a}=V1(n,o,s,i);if(i===!0)return sp(t,[{start:r,end:a,loop:s}],n,e);const l=a<r?a+o:a,c=!!t._fullLoop&&r===0&&a===o-1;return sp(t,B1(n,r,l,c),n,e)}function sp(t,e,n,i){return!i||!i.setContext||!n?e:$1(t,e,n,i)}function $1(t,e,n,i){const o=t._chart.getContext(),s=rp(t.options),{_datasetIndex:r,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,h=e[0].start,p=h;function g(x,y,_,v){const S=a?-1:1;if(x!==y){for(x+=l;n[x%l].skip;)x-=S;for(;n[y%l].skip;)y+=S;x%l!==y%l&&(c.push({start:x%l,end:y%l,loop:_,style:v}),u=v,h=y%l)}}for(const x of e){h=a?h:x.start;let y=n[h%l],_;for(p=h+1;p<=x.end;p++){const v=n[p%l];_=rp(i.setContext(Qn(o,{type:"segment",p0:y,p1:v,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:r}))),G1(_,u)&&g(h,p-1,x.loop,u),y=v,u=_}h<p-1&&g(h,p-1,x.loop,u)}return c}function rp(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function G1(t,e){if(!e)return!1;const n=[],i=function(o,s){return Zd(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Sr(t,e,n){return t.options.clip?t[n]:e[n]}function q1(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Sr(n,e,"left"),right:Sr(n,e,"right"),top:Sr(i,e,"top"),bottom:Sr(i,e,"bottom")}:e}function Kv(t,e){const n=e._clip;if(n.disabled)return!1;const i=q1(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class j1{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,o){const s=n.listeners[o],r=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:r,currentStep:Math.min(i-n.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Pv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,o)=>{if(!i.running||!i.items.length)return;const s=i.items;let r=s.length-1,a=!1,l;for(;r>=0;--r)l=s[r],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[r]=s[s.length-1],s.pop());a&&(o.draw(),this._notify(o,i,e,"progress")),s.length||(i.running=!1,this._notify(o,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,o)=>Math.max(i,o._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let o=i.length-1;for(;o>=0;--o)i[o].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Qt=new j1;const ap="transparent",W1={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Qh(t||ap),o=i.valid&&Qh(e||ap);return o&&o.valid?o.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class J1{constructor(e,n,i,o){const s=n[i];o=qo([e.to,o,s,e.from]);const r=qo([e.from,s,o]);this._active=!0,this._fn=e.fn||W1[e.type||typeof r],this._easing=us[e.easing]||us.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=r,this._to=o,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const o=this._target[this._prop],s=i-this._start,r=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=qo([e.to,n,o,e.from]),this._from=qo([e.from,o,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,o=this._prop,s=this._from,r=this._loop,a=this._to;let l;if(this._active=s!==a&&(r||n<i),!this._active){this._target[o]=a,this._notify(!0);return}if(n<0){this._target[o]=s;return}l=n/i%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[o]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let o=0;o<i.length;o++)i[o][n]()}}class Qv{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!X(e))return;const n=Object.keys(me.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(o=>{const s=e[o];if(!X(s))return;const r={};for(const a of n)r[a]=s[a];(pe(s.properties)&&s.properties||[o]).forEach(a=>{(a===o||!i.has(a))&&i.set(a,r)})})}_animateOptions(e,n){const i=n.options,o=K1(e,i);if(!o)return[];const s=this._createAnimations(o,i);return i.$shared&&Y1(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,o=[],s=e.$animations||(e.$animations={}),r=Object.keys(n),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){o.push(...this._animateOptions(e,n));continue}const u=n[c];let h=s[c];const p=i.get(c);if(h)if(p&&h.active()){h.update(p,u,a);continue}else h.cancel();if(!p||!p.duration){e[c]=u;continue}s[c]=h=new J1(p,e,c,u),o.push(h)}return o}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Qt.add(this._chart,i),!0}}function Y1(t,e){const n=[],i=Object.keys(e);for(let o=0;o<i.length;o++){const s=t[i[o]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function K1(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function lp(t,e){const n=t&&t.options||{},i=n.reverse,o=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:o,end:i?o:s}}function Q1(t,e,n){if(n===!1)return!1;const i=lp(t,n),o=lp(e,n);return{top:o.end,right:i.end,bottom:o.start,left:i.start}}function X1(t){let e,n,i,o;return X(t)?(e=t.top,n=t.right,i=t.bottom,o=t.left):e=n=i=o=t,{top:e,right:n,bottom:i,left:o,disabled:t===!1}}function Xv(t,e){const n=[],i=t._getSortedDatasetMetas(e);let o,s;for(o=0,s=i.length;o<s;++o)n.push(i[o].index);return n}function cp(t,e,n,i={}){const o=t.keys,s=i.mode==="single";let r,a,l,c;if(e===null)return;let u=!1;for(r=0,a=o.length;r<a;++r){if(l=+o[r],l===n){if(u=!0,i.all)continue;break}c=t.values[l],_e(c)&&(s||e===0||Jt(e)===Jt(c))&&(e+=c)}return!u&&!i.all?0:e}function Z1(t,e){const{iScale:n,vScale:i}=e,o=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",r=Object.keys(t),a=new Array(r.length);let l,c,u;for(l=0,c=r.length;l<c;++l)u=r[l],a[l]={[o]:u,[s]:t[u]};return a}function Xl(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function eT(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function tT(t){const{min:e,max:n,minDefined:i,maxDefined:o}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:o?n:Number.POSITIVE_INFINITY}}function nT(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function up(t,e,n,i){for(const o of e.getMatchingVisibleMetas(i).reverse()){const s=t[o.index];if(n&&s>0||!n&&s<0)return o.index}return null}function dp(t,e){const{chart:n,_cachedMeta:i}=t,o=n._stacks||(n._stacks={}),{iScale:s,vScale:r,index:a}=i,l=s.axis,c=r.axis,u=eT(s,r,i),h=e.length;let p;for(let g=0;g<h;++g){const x=e[g],{[l]:y,[c]:_}=x,v=x._stacks||(x._stacks={});p=v[c]=nT(o,u,y),p[a]=_,p._top=up(p,r,!0,i.type),p._bottom=up(p,r,!1,i.type);const S=p._visualValues||(p._visualValues={});S[a]=_}}function Zl(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function iT(t,e){return Qn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function oT(t,e,n){return Qn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Ro(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const o of e){const s=o._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const ec=t=>t==="reset"||t==="none",fp=(t,e)=>e?t:Object.assign({},t),sT=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Xv(n,!0),values:null};class Rt{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Xl(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ro(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),o=(h,p,g,x)=>h==="x"?p:h==="r"?x:g,s=n.xAxisID=W(i.xAxisID,Zl(e,"x")),r=n.yAxisID=W(i.yAxisID,Zl(e,"y")),a=n.rAxisID=W(i.rAxisID,Zl(e,"r")),l=n.indexAxis,c=n.iAxisID=o(l,s,r,a),u=n.vAxisID=o(l,r,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(r),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Jh(this._data,this),e._stacked&&Ro(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(X(n)){const o=this._cachedMeta;this._data=Z1(n,o)}else if(i!==n){if(i){Jh(i,this);const o=this._cachedMeta;Ro(o),o._parsed=[]}n&&Object.isExtensible(n)&&$C(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let o=!1;this._dataCheck();const s=n._stacked;n._stacked=Xl(n.vScale,n),n.stack!==i.stack&&(o=!0,Ro(n),n.stack=i.stack),this._resyncElements(e),(o||s!==n._stacked)&&(dp(this,n._parsed),n._stacked=Xl(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:o}=this,{iScale:s,_stacked:r}=i,a=s.axis;let l=e===0&&n===o.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,p;if(this._parsing===!1)i._parsed=o,i._sorted=!0,p=o;else{pe(o[e])?p=this.parseArrayData(i,o,e,n):X(o[e])?p=this.parseObjectData(i,o,e,n):p=this.parsePrimitiveData(i,o,e,n);const g=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=h=p[u],l&&(g()&&(l=!1),c=h);i._sorted=l}r&&dp(this,p)}parsePrimitiveData(e,n,i,o){const{iScale:s,vScale:r}=e,a=s.axis,l=r.axis,c=s.getLabels(),u=s===r,h=new Array(o);let p,g,x;for(p=0,g=o;p<g;++p)x=p+i,h[p]={[a]:u||s.parse(c[x],x),[l]:r.parse(n[x],x)};return h}parseArrayData(e,n,i,o){const{xScale:s,yScale:r}=e,a=new Array(o);let l,c,u,h;for(l=0,c=o;l<c;++l)u=l+i,h=n[u],a[l]={x:s.parse(h[0],u),y:r.parse(h[1],u)};return a}parseObjectData(e,n,i,o){const{xScale:s,yScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(o);let u,h,p,g;for(u=0,h=o;u<h;++u)p=u+i,g=n[p],c[u]={x:s.parse(jn(g,a),p),y:r.parse(jn(g,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const o=this.chart,s=this._cachedMeta,r=n[e.axis],a={keys:Xv(o,!0),values:n._stacks[e.axis]._visualValues};return cp(a,r,s.index,{mode:i})}updateRangeFromParsed(e,n,i,o){const s=i[n.axis];let r=s===null?NaN:s;const a=o&&i._stacks[n.axis];o&&a&&(o.values=a,r=cp(o,s,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,n){const i=this._cachedMeta,o=i._parsed,s=i._sorted&&e===i.iScale,r=o.length,a=this._getOtherScale(e),l=sT(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=tT(a);let p,g;function x(){g=o[p];const y=g[a.axis];return!_e(g[e.axis])||u>y||h<y}for(p=0;p<r&&!(!x()&&(this.updateRangeFromParsed(c,e,g,l),s));++p);if(s){for(p=r-1;p>=0;--p)if(!x()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let o,s,r;for(o=0,s=n.length;o<s;++o)r=n[o][e.axis],_e(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,o=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:o?""+o.getLabelForValue(s[o.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=X1(W(this.options.clip,Q1(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,o=i.data||[],s=n.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||o.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=o[u];h.hidden||(h.active&&c?r.push(h):h.draw(e,s))}for(u=0;u<r.length;++u)r[u].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const o=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const r=this._cachedMeta.data[e];s=r.$context||(r.$context=oT(this.getContext(),e,r)),s.parsed=this.getParsed(e),s.raw=o.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=iT(this.chart.getContext(),this.index)),s.dataset=o,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const o=n==="active",s=this._cachedDataOpts,r=e+"-"+n,a=s[r],l=this.enableOptionSharing&&Ls(i);if(a)return fp(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=o?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),u),g=Object.keys(me.elements[e]),x=()=>this.getContext(i,o,n),y=c.resolveNamedOptions(p,g,x,h);return y.$shared&&(y.$shared=l,s[r]=Object.freeze(fp(y,l))),y}_resolveAnimations(e,n,i){const o=this.chart,s=this._cachedDataOpts,r=`animation-${n}`,a=s[r];if(a)return a;let l;if(o.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(p,this.getContext(e,i,n))}const c=new Qv(o,l&&l.animations);return l&&l._cacheable&&(s[r]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||ec(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),o=this._sharedOptions,s=this.getSharedOptions(i),r=this.includeOptions(n,s)||s!==o;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:r}}updateElement(e,n,i,o){ec(o)?Object.assign(e,i):this._resolveAnimations(n,o).update(e,i)}updateSharedOptions(e,n,i){e&&!ec(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,o){e.active=o;const s=this.getStyle(n,o);this._resolveAnimations(n,i,o).update(e,{options:!o&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const o=i.length,s=n.length,r=Math.min(s,o);r&&this.parse(0,r),s>o?this._insertElements(o,s-o,e):s<o&&this._removeElements(s,o-s)}_insertElements(e,n,i=!0){const o=this._cachedMeta,s=o.data,r=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=r;a--)c[a]=c[a-n]};for(l(s),a=e;a<r;++a)s[a]=new this.dataElementType;this._parsing&&l(o._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,o){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const o=i._parsed.splice(e,n);i._stacked&&Ro(i,o)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,o]=e;this[n](i,o)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}N(Rt,"defaults",{}),N(Rt,"datasetElementType",null),N(Rt,"dataElementType",null);function rT(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let o=0,s=n.length;o<s;o++)i=i.concat(n[o].controller.getAllParsedValues(t));t._cache.$bar=Nv(i.sort((o,s)=>o-s))}return t._cache.$bar}function aT(t){const e=t.iScale,n=rT(e,t.type);let i=e._length,o,s,r,a;const l=()=>{r===32767||r===-32768||(Ls(a)&&(i=Math.min(i,Math.abs(r-a)||i)),a=r)};for(o=0,s=n.length;o<s;++o)r=e.getPixelForValue(n[o]),l();for(a=void 0,o=0,s=e.ticks.length;o<s;++o)r=e.getPixelForTick(o),l();return i}function lT(t,e,n,i){const o=n.barThickness;let s,r;return K(o)?(s=e.min*n.categoryPercentage,r=n.barPercentage):(s=o*i,r=1),{chunk:s/i,ratio:r,start:e.pixels[t]-s/2}}function cT(t,e,n,i){const o=e.pixels,s=o[t];let r=t>0?o[t-1]:null,a=t<o.length-1?o[t+1]:null;const l=n.categoryPercentage;r===null&&(r=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-r);const c=s-(s-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/i,ratio:n.barPercentage,start:c}}function uT(t,e,n,i){const o=n.parse(t[0],i),s=n.parse(t[1],i),r=Math.min(o,s),a=Math.max(o,s);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:o,end:s,min:r,max:a}}function Zv(t,e,n,i){return pe(t)?uT(t,e,n,i):e[n.axis]=n.parse(t,i),e}function hp(t,e,n,i){const o=t.iScale,s=t.vScale,r=o.getLabels(),a=o===s,l=[];let c,u,h,p;for(c=n,u=n+i;c<u;++c)p=e[c],h={},h[o.axis]=a||o.parse(r[c],c),l.push(Zv(p,h,s,c));return l}function tc(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function dT(t,e,n){return t!==0?Jt(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function fT(t){let e,n,i,o,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(o="end",s="start"):(o="start",s="end"),{start:n,end:i,reverse:e,top:o,bottom:s}}function hT(t,e,n,i){let o=e.borderSkipped;const s={};if(!o){t.borderSkipped=s;return}if(o===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:u}=fT(t);o==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?o=c:(n._bottom||0)===i?o=u:(s[pp(u,r,a,l)]=!0,o=c)),s[pp(o,r,a,l)]=!0,t.borderSkipped=s}function pp(t,e,n,i){return i?(t=pT(t,e,n),t=mp(t,n,e)):t=mp(t,e,n),t}function pT(t,e,n){return t===e?n:t===n?e:t}function mp(t,e,n){return t==="start"?e:t==="end"?n:t}function mT(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class jr extends Rt{parsePrimitiveData(e,n,i,o){return hp(e,n,i,o)}parseArrayData(e,n,i,o){return hp(e,n,i,o)}parseObjectData(e,n,i,o){const{iScale:s,vScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=r.axis==="x"?a:l,h=[];let p,g,x,y;for(p=i,g=i+o;p<g;++p)y=n[p],x={},x[s.axis]=s.parse(jn(y,c),p),h.push(Zv(jn(y,u),x,r,p));return h}updateRangeFromParsed(e,n,i,o){super.updateRangeFromParsed(e,n,i,o);const s=i._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:o}=n,s=this.getParsed(e),r=s._custom,a=tc(r)?"["+r.start+", "+r.end+"]":""+o.getLabelForValue(s[o.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,o){const s=o==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,o);for(let g=n;g<n+i;g++){const x=this.getParsed(g),y=s||K(x[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),_=this._calculateBarIndexPixels(g,u),v=(x._stacks||{})[a.axis],S={horizontal:c,base:y.base,enableBorderRadius:!v||tc(x._custom)||r===v._top||r===v._bottom,x:c?y.head:_.center,y:c?_.center:y.head,height:c?_.size:Math.abs(y.size),width:c?Math.abs(y.size):_.size};p&&(S.options=h||this.resolveDataElementOptions(g,e[g].active?"active":o));const w=S.options||e[g].options;hT(S,w,v,r),mT(S,w,u.ratio),this.updateElement(e[g],g,S,o)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=i.options.stacked,r=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],c=u=>{const h=u._parsed.find(g=>g[i.axis]===l),p=h&&h[u.vScale.axis];if(K(p)||isNaN(p))return!0};for(const u of o)if(!(n!==void 0&&c(u))&&((s===!1||r.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&r.push(u.stack),u.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[W(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,i){const o=this._getStacks(e,i),s=n!==void 0?o.indexOf(n):-1;return s===-1?o.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,o=[];let s,r;for(s=0,r=n.data.length;s<r;++s)o.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||aT(n),pixels:o,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:o},options:{base:s,minBarLength:r}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=tc(c);let h=l[n.axis],p=0,g=i?this.applyStack(n,l,i):h,x,y;g!==h&&(p=g-h,g=h),u&&(h=c.barStart,g=c.barEnd-c.barStart,h!==0&&Jt(h)!==Jt(c.barEnd)&&(p=0),p+=h);const _=!K(s)&&!u?s:p;let v=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(p+g):x=v,y=x-v,Math.abs(y)<r){y=dT(y,n,a)*r,h===a&&(v-=y/2);const S=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),b=Math.min(S,w),C=Math.max(S,w);v=Math.max(Math.min(v,C),b),x=v+y,i&&!u&&(l._stacks[n.axis]._visualValues[o]=n.getValueForPixel(x)-n.getValueForPixel(v))}if(v===n.getPixelForValue(a)){const S=Jt(y)*n.getLineWidthForValue(a)/2;v+=S,y-=S}return{size:y,base:v,head:x,center:x+y/2}}_calculateBarIndexPixels(e,n){const i=n.scale,o=this.options,s=o.skipNull,r=W(o.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=s?this._getStackCount(e):n.stackCount,h=o.barThickness==="flex"?cT(e,n,o,u*c):lT(e,n,o,u*c),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(W(p,this.getFirstScaleIdForIndexAxis())),x=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+g;a=h.start+h.chunk*x+h.chunk/2,l=Math.min(r,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(r,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,o=i.length;let s=0;for(;s<o;++s)this.getParsed(s)[n.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}N(jr,"id","bar"),N(jr,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),N(jr,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Wr extends Rt{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,i,o){const s=super.parsePrimitiveData(e,n,i,o);for(let r=0;r<s.length;r++)s[r]._custom=this.resolveDataElementOptions(r+i).radius;return s}parseArrayData(e,n,i,o){const s=super.parseArrayData(e,n,i,o);for(let r=0;r<s.length;r++){const a=n[i+r];s[r]._custom=W(a[2],this.resolveDataElementOptions(r+i).radius)}return s}parseObjectData(e,n,i,o){const s=super.parseObjectData(e,n,i,o);for(let r=0;r<s.length;r++){const a=n[i+r];s[r]._custom=W(a&&a.r&&+a.r,this.resolveDataElementOptions(r+i).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let i=e.length-1;i>=0;--i)n=Math.max(n,e[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=n,r=this.getParsed(e),a=o.getLabelForValue(r.x),l=s.getLabelForValue(r.y),c=r._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,i,o){const s=o==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,o),u=r.axis,h=a.axis;for(let p=n;p<n+i;p++){const g=e[p],x=!s&&this.getParsed(p),y={},_=y[u]=s?r.getPixelForDecimal(.5):r.getPixelForValue(x[u]),v=y[h]=s?a.getBasePixel():a.getPixelForValue(x[h]);y.skip=isNaN(_)||isNaN(v),c&&(y.options=l||this.resolveDataElementOptions(p,g.active?"active":o),s&&(y.options.radius=0)),this.updateElement(g,p,y,o)}}resolveDataElementOptions(e,n){const i=this.getParsed(e);let o=super.resolveDataElementOptions(e,n);o.$shared&&(o=Object.assign({},o,{$shared:!1}));const s=o.radius;return n!=="active"&&(o.radius=0),o.radius+=W(i&&i._custom,s),o}}N(Wr,"id","bubble"),N(Wr,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),N(Wr,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function gT(t,e,n){let i=1,o=1,s=0,r=0;if(e<de){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),p=Math.sin(l),g=(w,b,C)=>Fs(w,a,l,!0)?1:Math.max(b,b*n,C,C*n),x=(w,b,C)=>Fs(w,a,l,!0)?-1:Math.min(b,b*n,C,C*n),y=g(0,c,h),_=g(we,u,p),v=x(ee,c,h),S=x(ee+we,u,p);i=(y-v)/2,o=(_-S)/2,s=-(y+v)/2,r=-(_+S)/2}return{ratioX:i,ratioY:o,offsetX:s,offsetY:r}}class fi extends Rt{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=i;else{let s=l=>+i[l];if(X(i[e])){const{key:l="value"}=this._parsing;s=c=>+jn(i[c],l)}let r,a;for(r=e,a=e+n;r<a;++r)o._parsed[r]=s(r)}}_getRotation(){return Mt(this.options.rotation-90)}_getCircumference(){return Mt(this.options.circumference)}_getRotationExtents(){let e=de,n=-de;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const o=this.chart.getDatasetMeta(i).controller,s=o._getRotation(),r=o._getCircumference();e=Math.min(e,s),n=Math.max(n,s+r)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,o=this._cachedMeta,s=o.data,r=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-r)/2,0),l=Math.min(IC(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:x,offsetY:y}=gT(h,u,l),_=(i.width-r)/p,v=(i.height-r)/g,S=Math.max(Math.min(_,v)/2,0),w=Ev(this.options.radius,S),b=Math.max(w*l,0),C=(w-b)/this._getVisibleDatasetWeightTotal();this.offsetX=x*w,this.offsetY=y*w,o.total=this.calculateTotal(),this.outerRadius=w-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const i=this.options,o=this._cachedMeta,s=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||o._parsed[e]===null||o.data[e].hidden?0:this.calculateCircumference(o._parsed[e]*s/de)}updateElements(e,n,i,o){const s=o==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,p=s&&c.animateScale,g=p?0:this.innerRadius,x=p?0:this.outerRadius,{sharedOptions:y,includeOptions:_}=this._getSharedOptions(n,o);let v=this._getRotation(),S;for(S=0;S<n;++S)v+=this._circumference(S,s);for(S=n;S<n+i;++S){const w=this._circumference(S,s),b=e[S],C={x:u+this.offsetX,y:h+this.offsetY,startAngle:v,endAngle:v+w,circumference:w,outerRadius:x,innerRadius:g};_&&(C.options=y||this.resolveDataElementOptions(S,b.active?"active":o)),v+=w,this.updateElement(b,S,C,o)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,o;for(o=0;o<n.length;o++){const s=e._parsed[o];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(o)&&!n[o].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?de*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,o=i.data.labels||[],s=Ys(n._parsed[e],i.options.locale);return{label:o[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const i=this.chart;let o,s,r,a,l;if(!e){for(o=0,s=i.data.datasets.length;o<s;++o)if(i.isDatasetVisible(o)){r=i.getDatasetMeta(o),e=r.data,a=r.controller;break}}if(!e)return 0;for(o=0,s=e.length;o<s;++o)l=a.resolveDataElementOptions(o),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,o=e.length;i<o;++i){const s=this.resolveDataElementOptions(i);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(W(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}N(fi,"id","doughnut"),N(fi,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),N(fi,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),N(fi,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:i,textAlign:o,color:s,useBorderRadius:r,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const h=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:h.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(c),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:o,pointStyle:i,borderRadius:r&&(a||h.borderRadius),index:c}}):[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class fs extends Rt{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:o=[],_dataset:s}=n,r=this.chart._animationsDisabled;let{start:a,count:l}=Dv(n,o,r);this._drawStart=a,this._drawCount=l,Lv(n)&&(a=0,l=o.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=o;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:c},e),this.updateElements(o,a,l,e)}updateElements(e,n,i,o){const s=o==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,o),p=r.axis,g=a.axis,{spanGaps:x,segment:y}=this.options,_=fo(x)?x:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||o==="none",S=n+i,w=e.length;let b=n>0&&this.getParsed(n-1);for(let C=0;C<w;++C){const T=e[C],E=v?T:{};if(C<n||C>=S){E.skip=!0;continue}const k=this.getParsed(C),A=K(k[g]),I=E[p]=r.getPixelForValue(k[p],C),L=E[g]=s||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,k,l):k[g],C);E.skip=isNaN(I)||isNaN(L)||A,E.stop=C>0&&Math.abs(k[p]-b[p])>_,y&&(E.parsed=k,E.raw=c.data[C]),h&&(E.options=u||this.resolveDataElementOptions(C,T.active?"active":o)),v||this.updateElement(T,C,E,o),b=k}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,o=e.data||[];if(!o.length)return i;const s=o[0].size(this.resolveDataElementOptions(0)),r=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(i,s,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}N(fs,"id","line"),N(fs,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),N(fs,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class hs extends Rt{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,o=i.data.labels||[],s=Ys(n._parsed[e].r,i.options.locale);return{label:o[e]||"",value:s}}parseObjectData(e,n,i,o){return $v.bind(this)(e,n,i,o)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,o)=>{const s=this.getParsed(o).r;!isNaN(s)&&this.chart.getDataVisibility(o)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,i=e.options,o=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(o/2,0),r=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),a=(s-r)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,i,o){const s=o==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,p=c.getIndexAngle(0)-.5*ee;let g=p,x;const y=360/this.countVisibleElements();for(x=0;x<n;++x)g+=this._computeAngle(x,o,y);for(x=n;x<n+i;x++){const _=e[x];let v=g,S=g+this._computeAngle(x,o,y),w=r.getDataVisibility(x)?c.getDistanceFromCenterForValue(this.getParsed(x).r):0;g=S,s&&(l.animateScale&&(w=0),l.animateRotate&&(v=S=p));const b={x:u,y:h,innerRadius:0,outerRadius:w,startAngle:v,endAngle:S,options:this.resolveDataElementOptions(x,_.active?"active":o)};this.updateElement(_,x,b,o)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((i,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&n++}),n}_computeAngle(e,n,i){return this.chart.getDataVisibility(e)?Mt(this.resolveDataElementOptions(e,n).angle||i):0}}N(hs,"id","polarArea"),N(hs,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),N(hs,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:o}}=e.legend.options;return n.labels.map((s,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:o,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class uu extends fi{}N(uu,"id","pie"),N(uu,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class ps extends Rt{getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,o){return $v.bind(this)(e,n,i,o)}update(e){const n=this._cachedMeta,i=n.dataset,o=n.data||[],s=n.iScale.getLabels();if(i.points=o,e!=="resize"){const r=this.resolveDatasetElementOptions(e);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===o.length,options:r};this.updateElement(i,void 0,a,e)}this.updateElements(o,0,o.length,e)}updateElements(e,n,i,o){const s=this._cachedMeta.rScale,r=o==="reset";for(let a=n;a<n+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":o),u=s.getPointPositionForValue(a,this.getParsed(a).r),h=r?s.xCenter:u.x,p=r?s.yCenter:u.y,g={x:h,y:p,angle:u.angle,skip:isNaN(h)||isNaN(p),options:c};this.updateElement(l,a,g,o)}}}N(ps,"id","radar"),N(ps,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),N(ps,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Jr extends Rt{getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=n,r=this.getParsed(e),a=o.getLabelForValue(r.x),l=s.getLabelForValue(r.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:i=[]}=n,o=this.chart._animationsDisabled;let{start:s,count:r}=Dv(n,i,o);if(this._drawStart=s,this._drawCount=r,Lv(n)&&(s=0,r=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!o,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,s,r,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,i,o){const s=o==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,o),h=this.getSharedOptions(u),p=this.includeOptions(o,h),g=r.axis,x=a.axis,{spanGaps:y,segment:_}=this.options,v=fo(y)?y:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||s||o==="none";let w=n>0&&this.getParsed(n-1);for(let b=n;b<n+i;++b){const C=e[b],T=this.getParsed(b),E=S?C:{},k=K(T[x]),A=E[g]=r.getPixelForValue(T[g],b),I=E[x]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[x],b);E.skip=isNaN(A)||isNaN(I)||k,E.stop=b>0&&Math.abs(T[g]-w[g])>v,_&&(E.parsed=T,E.raw=c.data[b]),p&&(E.options=h||this.resolveDataElementOptions(b,C.active?"active":o)),S||this.updateElement(C,b,E,o),w=T}this.updateSharedOptions(h,o,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,o=i.options&&i.options.borderWidth||0;if(!n.length)return o;const s=n[0].size(this.resolveDataElementOptions(0)),r=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(o,s,r)/2}}N(Jr,"id","scatter"),N(Jr,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),N(Jr,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var xT=Object.freeze({__proto__:null,BarController:jr,BubbleController:Wr,DoughnutController:fi,LineController:fs,PieController:uu,PolarAreaController:hs,RadarController:ps,ScatterController:Jr});function ni(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class af{constructor(e){N(this,"options");this.options=e||{}}static override(e){Object.assign(af.prototype,e)}init(){}formats(){return ni()}parse(){return ni()}format(){return ni()}add(){return ni()}diff(){return ni()}startOf(){return ni()}endOf(){return ni()}}var vT={_date:af};function yT(t,e,n,i){const{controller:o,data:s,_sorted:r}=t,a=o._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&r&&s.length){const c=a._reversePixels?BC:rn;if(i){if(o._sharedOptions){const u=s[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const p=c(s,e,n-h),g=c(s,e,n+h);return{lo:p.lo,hi:g.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:h}=o._cachedMeta,{_parsed:p}=t,g=p.slice(0,u.lo+1).reverse().findIndex(y=>!K(y[h.axis]));u.lo-=Math.max(0,g);const x=p.slice(u.hi).findIndex(y=>!K(y[h.axis]));u.hi+=Math.max(0,x)}return u}}return{lo:0,hi:s.length-1}}function fl(t,e,n,i,o){const s=t.getSortedVisibleDatasetMetas(),r=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:p}=yT(s[a],e,r,o);for(let g=h;g<=p;++g){const x=u[g];x.skip||i(x,c,g)}}}function _T(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,o){const s=e?Math.abs(i.x-o.x):0,r=n?Math.abs(i.y-o.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(r,2))}}function nc(t,e,n,i,o){const s=[];return!o&&!t.isPointInArea(e)||fl(t,n,e,function(a,l,c){!o&&!an(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function ST(t,e,n,i){let o=[];function s(r,a,l){const{startAngle:c,endAngle:u}=r.getProps(["startAngle","endAngle"],i),{angle:h}=Av(r,{x:e.x,y:e.y});Fs(h,c,u)&&o.push({element:r,datasetIndex:a,index:l})}return fl(t,n,e,s),o}function wT(t,e,n,i,o,s){let r=[];const a=_T(n);let l=Number.POSITIVE_INFINITY;function c(u,h,p){const g=u.inRange(e.x,e.y,o);if(i&&!g)return;const x=u.getCenterPoint(o);if(!(!!s||t.isPointInArea(x))&&!g)return;const _=a(e,x);_<l?(r=[{element:u,datasetIndex:h,index:p}],l=_):_===l&&r.push({element:u,datasetIndex:h,index:p})}return fl(t,n,e,c),r}function ic(t,e,n,i,o,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?ST(t,e,n,o):wT(t,e,n,i,o,s)}function gp(t,e,n,i,o){const s=[],r=n==="x"?"inXRange":"inYRange";let a=!1;return fl(t,n,e,(l,c,u)=>{l[r]&&l[r](e[n],o)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,o))}),i&&!a?[]:s}var bT={modes:{index(t,e,n,i){const o=ri(e,t),s=n.axis||"x",r=n.includeInvisible||!1,a=n.intersect?nc(t,o,s,i,r):ic(t,o,s,!1,i,r),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const o=ri(e,t),s=n.axis||"xy",r=n.includeInvisible||!1;let a=n.intersect?nc(t,o,s,i,r):ic(t,o,s,!1,i,r);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const o=ri(e,t),s=n.axis||"xy",r=n.includeInvisible||!1;return nc(t,o,s,i,r)},nearest(t,e,n,i){const o=ri(e,t),s=n.axis||"xy",r=n.includeInvisible||!1;return ic(t,o,s,n.intersect,i,r)},x(t,e,n,i){const o=ri(e,t);return gp(t,o,"x",n.intersect,i)},y(t,e,n,i){const o=ri(e,t);return gp(t,o,"y",n.intersect,i)}}};const ey=["left","top","right","bottom"];function Do(t,e){return t.filter(n=>n.pos===e)}function xp(t,e){return t.filter(n=>ey.indexOf(n.pos)===-1&&n.box.axis===e)}function Lo(t,e){return t.sort((n,i)=>{const o=e?i:n,s=e?n:i;return o.weight===s.weight?o.index-s.index:o.weight-s.weight})}function CT(t){const e=[];let n,i,o,s,r,a;for(n=0,i=(t||[]).length;n<i;++n)o=t[n],{position:s,options:{stack:r,stackWeight:a=1}}=o,e.push({index:n,box:o,pos:s,horizontal:o.isHorizontal(),weight:o.weight,stack:r&&s+r,stackWeight:a});return e}function TT(t){const e={};for(const n of t){const{stack:i,pos:o,stackWeight:s}=n;if(!i||!ey.includes(o))continue;const r=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=s}return e}function ET(t,e){const n=TT(t),{vBoxMaxWidth:i,hBoxMaxHeight:o}=e;let s,r,a;for(s=0,r=t.length;s<r;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=o):(a.width=i,a.height=u?u*o:l&&e.availableHeight)}return n}function kT(t){const e=CT(t),n=Lo(e.filter(c=>c.box.fullSize),!0),i=Lo(Do(e,"left"),!0),o=Lo(Do(e,"right")),s=Lo(Do(e,"top"),!0),r=Lo(Do(e,"bottom")),a=xp(e,"x"),l=xp(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:o.concat(l).concat(r).concat(a),chartArea:Do(e,"chartArea"),vertical:i.concat(o).concat(l),horizontal:s.concat(r).concat(a)}}function vp(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function ty(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function IT(t,e,n,i){const{pos:o,box:s}=n,r=t.maxPadding;if(!X(o)){n.size&&(t[o]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,t[o]+=n.size}s.getPadding&&ty(r,s.getPadding());const a=Math.max(0,e.outerWidth-vp(r,t,"left","right")),l=Math.max(0,e.outerHeight-vp(r,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function AT(t){const e=t.maxPadding;function n(i){const o=Math.max(e[i]-t[i],0);return t[i]+=o,o}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function MT(t,e){const n=e.maxPadding;function i(o){const s={left:0,top:0,right:0,bottom:0};return o.forEach(r=>{s[r]=Math.max(e[r],n[r])}),s}return i(t?["left","right"]:["top","bottom"])}function jo(t,e,n,i){const o=[];let s,r,a,l,c,u;for(s=0,r=t.length,c=0;s<r;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,MT(a.horizontal,e));const{same:h,other:p}=IT(e,n,a,i);c|=h&&o.length,u=u||p,l.fullSize||o.push(a)}return c&&jo(o,e,n,i)||u}function wr(t,e,n,i,o){t.top=n,t.left=e,t.right=e+i,t.bottom=n+o,t.width=i,t.height=o}function yp(t,e,n,i){const o=n.padding;let{x:s,y:r}=e;for(const a of t){const l=a.box,c=i[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,p=c.size||l.height;Ls(c.start)&&(r=c.start),l.fullSize?wr(l,o.left,r,n.outerWidth-o.right-o.left,p):wr(l,e.left+c.placed,r,h,p),c.start=r,c.placed+=h,r=l.bottom}else{const h=e.h*u,p=c.size||l.width;Ls(c.start)&&(s=c.start),l.fullSize?wr(l,s,o.top,p,n.outerHeight-o.bottom-o.top):wr(l,s,e.top+c.placed,p,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=r}var Ve={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const o=$e(t.options.layout.padding),s=Math.max(e-o.width,0),r=Math.max(n-o.height,0),a=kT(t.boxes),l=a.vertical,c=a.horizontal;ie(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=l.reduce((y,_)=>_.box.options&&_.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:o,availableWidth:s,availableHeight:r,vBoxMaxWidth:s/2/u,hBoxMaxHeight:r/2}),p=Object.assign({},o);ty(p,$e(i));const g=Object.assign({maxPadding:p,w:s,h:r,x:o.left,y:o.top},o),x=ET(l.concat(c),h);jo(a.fullSize,g,h,x),jo(l,g,h,x),jo(c,g,h,x)&&jo(l,g,h,x),AT(g),yp(a.leftAndTop,g,h,x),g.x+=g.w,g.y+=g.h,yp(a.rightAndBottom,g,h,x),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},ie(a.chartArea,y=>{const _=y.box;Object.assign(_,t.chartArea),_.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class ny{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,o){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,o?Math.floor(n/o):i)}}isAttached(e){return!0}updateConfig(e){}}class NT extends ny{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Yr="$chartjs",PT={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},_p=t=>t===null||t==="";function RT(t,e){const n=t.style,i=t.getAttribute("height"),o=t.getAttribute("width");if(t[Yr]={initial:{height:i,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",_p(o)){const s=ip(t,"width");s!==void 0&&(t.width=s)}if(_p(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=ip(t,"height");s!==void 0&&(t.height=s)}return t}const iy=D1?{passive:!0}:!1;function DT(t,e,n){t&&t.addEventListener(e,n,iy)}function LT(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,iy)}function FT(t,e){const n=PT[t.type]||t.type,{x:i,y:o}=ri(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:o!==void 0?o:null}}function Da(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function zT(t,e,n){const i=t.canvas,o=new MutationObserver(s=>{let r=!1;for(const a of s)r=r||Da(a.addedNodes,i),r=r&&!Da(a.removedNodes,i);r&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}function UT(t,e,n){const i=t.canvas,o=new MutationObserver(s=>{let r=!1;for(const a of s)r=r||Da(a.removedNodes,i),r=r&&!Da(a.addedNodes,i);r&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}const Us=new Map;let Sp=0;function oy(){const t=window.devicePixelRatio;t!==Sp&&(Sp=t,Us.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function OT(t,e){Us.size||window.addEventListener("resize",oy),Us.set(t,e)}function VT(t){Us.delete(t),Us.size||window.removeEventListener("resize",oy)}function BT(t,e,n){const i=t.canvas,o=i&&rf(i);if(!o)return;const s=Rv((a,l)=>{const c=o.clientWidth;n(a,l),c<o.clientWidth&&n()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return r.observe(o),OT(t,s),r}function oc(t,e,n){n&&n.disconnect(),e==="resize"&&VT(t)}function HT(t,e,n){const i=t.canvas,o=Rv(s=>{t.ctx!==null&&n(FT(s,t))},t);return DT(i,e,o),o}class $T extends ny{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(RT(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Yr])return!1;const i=n[Yr].initial;["height","width"].forEach(s=>{const r=i[s];K(r)?n.removeAttribute(s):n.setAttribute(s,r)});const o=i.style||{};return Object.keys(o).forEach(s=>{n.style[s]=o[s]}),n.width=n.width,delete n[Yr],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const o=e.$proxies||(e.$proxies={}),r={attach:zT,detach:UT,resize:BT}[n]||HT;o[n]=r(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),o=i[n];if(!o)return;({attach:oc,detach:oc,resize:oc}[n]||LT)(e,n,o),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,o){return R1(e,n,i,o)}isAttached(e){const n=e&&rf(e);return!!(n&&n.isConnected)}}function GT(t){return!sf()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?NT:$T}class zt{constructor(){N(this,"x");N(this,"y");N(this,"active",!1);N(this,"options");N(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return fo(this.x)&&fo(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const o={};return e.forEach(s=>{o[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),o}}N(zt,"defaults",{}),N(zt,"defaultRoutes");function qT(t,e){const n=t.options.ticks,i=jT(t),o=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?JT(e):[],r=s.length,a=s[0],l=s[r-1],c=[];if(r>o)return YT(e,c,s,r/o),c;const u=WT(s,e,o);if(r>0){let h,p;const g=r>1?Math.round((l-a)/(r-1)):null;for(br(e,c,u,K(g)?0:a-g,a),h=0,p=r-1;h<p;h++)br(e,c,u,s[h],s[h+1]);return br(e,c,u,l,K(g)?e.length:l+g),c}return br(e,c,u),c}function jT(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),o=t._maxLength/n;return Math.floor(Math.min(i,o))}function WT(t,e,n){const i=KT(t),o=e.length/n;if(!i)return Math.max(o,1);const s=FC(i);for(let r=0,a=s.length-1;r<a;r++){const l=s[r];if(l>o)return l}return Math.max(o,1)}function JT(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function YT(t,e,n,i){let o=0,s=n[0],r;for(i=Math.ceil(i),r=0;r<t.length;r++)r===s&&(e.push(t[r]),o++,s=n[o*i])}function br(t,e,n,i,o){const s=W(i,0),r=Math.min(W(o,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),o&&(l=o-i,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<r;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function KT(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const QT=t=>t==="left"?"right":t==="right"?"left":t,wp=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,bp=(t,e)=>Math.min(e||t,t);function Cp(t,e){const n=[],i=t.length/e,o=t.length;let s=0;for(;s<o;s+=i)n.push(t[Math.floor(s)]);return n}function XT(t,e,n){const i=t.ticks.length,o=Math.min(e,i-1),s=t._startPixel,r=t._endPixel,a=1e-6;let l=t.getPixelForTick(o),c;if(!(n&&(i===1?c=Math.max(l-s,r-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(o-1))/2,l+=o<e?c:-c,l<s-a||l>r+a)))return l}function ZT(t,e){ie(t,n=>{const i=n.gc,o=i.length/2;let s;if(o>e){for(s=0;s<o;++s)delete n.data[i[s]];i.splice(0,o)}})}function Fo(t){return t.drawTicks?t.tickLength:0}function Tp(t,e){if(!t.display)return 0;const n=Ee(t.font,e),i=$e(t.padding);return(pe(t.text)?t.text.length:1)*n.lineHeight+i.height}function eE(t,e){return Qn(t,{scale:e,type:"scale"})}function tE(t,e,n){return Qn(t,{tick:n,index:e,type:"tick"})}function nE(t,e,n){let i=Xd(t);return(n&&e!=="right"||!n&&e==="right")&&(i=QT(i)),i}function iE(t,e,n,i){const{top:o,left:s,bottom:r,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,p,g,x;const y=r-o,_=a-s;if(t.isHorizontal()){if(g=Fe(i,s,a),X(n)){const v=Object.keys(n)[0],S=n[v];x=u[v].getPixelForValue(S)+y-e}else n==="center"?x=(c.bottom+c.top)/2+y-e:x=wp(t,n,e);p=a-s}else{if(X(n)){const v=Object.keys(n)[0],S=n[v];g=u[v].getPixelForValue(S)-_+e}else n==="center"?g=(c.left+c.right)/2-_+e:g=wp(t,n,e);x=Fe(i,r,o),h=n==="left"?-we:we}return{titleX:g,titleY:x,maxWidth:p,rotation:h}}let Ks=class sy extends zt{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:o}=this;return e=rt(e,Number.POSITIVE_INFINITY),n=rt(n,Number.NEGATIVE_INFINITY),i=rt(i,Number.POSITIVE_INFINITY),o=rt(o,Number.NEGATIVE_INFINITY),{min:rt(e,i),max:rt(n,o),minDefined:_e(e),maxDefined:_e(n)}}getMinMax(e){let{min:n,max:i,minDefined:o,maxDefined:s}=this.getUserBounds(),r;if(o&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,e),o||(n=Math.min(n,r.min)),s||(i=Math.max(i,r.max));return n=s&&n>i?i:n,i=o&&n>i?n:i,{min:rt(n,rt(i,n)),max:rt(i,rt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ae(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:o,grace:s,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=d1(this,s,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Cp(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=qT(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ae(this.options.afterUpdate,[this])}beforeSetDimensions(){ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ae(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ae(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,o,s;for(i=0,o=e.length;i<o;i++)s=e[i],s.label=ae(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=bp(this.ticks.length,e.ticks.maxTicksLimit),o=n.minRotation||0,s=n.maxRotation;let r=o,a,l,c;if(!this._isVisible()||!n.display||o>=s||i<=1||!this.isHorizontal()){this.labelRotation=o;return}const u=this._getLabelSizes(),h=u.widest.width,p=u.highest.height,g=Ie(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:g/(i-1),h+6>a&&(a=g/(i-(e.offset?.5:1)),l=this.maxHeight-Fo(e.grid)-n.padding-Tp(e.title,this.chart.options.font),c=Math.sqrt(h*h+p*p),r=Kd(Math.min(Math.asin(Ie((u.highest.height+6)/a,-1,1)),Math.asin(Ie(l/c,-1,1))-Math.asin(Ie(p/c,-1,1)))),r=Math.max(o,Math.min(s,r))),this.labelRotation=r}afterCalculateLabelRotation(){ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ae(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:o,grid:s}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=Tp(o,n.options.font);if(a?(e.width=this.maxWidth,e.height=Fo(s)+l):(e.height=this.maxHeight,e.width=Fo(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:p}=this._getLabelSizes(),g=i.padding*2,x=Mt(this.labelRotation),y=Math.cos(x),_=Math.sin(x);if(a){const v=i.mirror?0:_*h.width+y*p.height;e.height=Math.min(this.maxHeight,e.height+v+g)}else{const v=i.mirror?0:y*h.width+_*p.height;e.width=Math.min(this.maxWidth,e.width+v+g)}this._calculatePadding(c,u,_,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,o){const{ticks:{align:s,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,g=0;l?c?(p=o*e.width,g=i*n.height):(p=i*e.height,g=o*n.width):s==="start"?g=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,g=n.width/2),this.paddingLeft=Math.max((p-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-h+r)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=n.height,h=0),this.paddingTop=u+r,this.paddingBottom=h+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ae(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)K(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Cp(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:o,_longestTextCache:s}=this,r=[],a=[],l=Math.floor(n/bp(n,i));let c=0,u=0,h,p,g,x,y,_,v,S,w,b,C;for(h=0;h<n;h+=l){if(x=e[h].label,y=this._resolveTickFontOptions(h),o.font=_=y.string,v=s[_]=s[_]||{data:{},gc:[]},S=y.lineHeight,w=b=0,!K(x)&&!pe(x))w=Pa(o,v.data,v.gc,w,x),b=S;else if(pe(x))for(p=0,g=x.length;p<g;++p)C=x[p],!K(C)&&!pe(C)&&(w=Pa(o,v.data,v.gc,w,C),b+=S);r.push(w),a.push(b),c=Math.max(w,c),u=Math.max(b,u)}ZT(s,n);const T=r.indexOf(c),E=a.indexOf(u),k=A=>({width:r[A]||0,height:a[A]||0});return{first:k(0),last:k(n-1),widest:k(T),highest:k(E),widths:r,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return VC(this._alignToPixels?ti(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=tE(this.getContext(),e,i))}return this.$context||(this.$context=eE(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Mt(this.labelRotation),i=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n)),s=this._getLabelSizes(),r=e.autoSkipPadding||0,a=s?s.widest.width+r:0,l=s?s.highest.height+r:0;return this.isHorizontal()?l*i>a*o?a/i:l/o:l*o<a*i?l/i:a/o}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,o=this.options,{grid:s,position:r,border:a}=o,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),p=Fo(s),g=[],x=a.setContext(this.getContext()),y=x.display?x.width:0,_=y/2,v=function($){return ti(i,$,y)};let S,w,b,C,T,E,k,A,I,L,B,P;if(r==="top")S=v(this.bottom),E=this.bottom-p,A=S-_,L=v(e.top)+_,P=e.bottom;else if(r==="bottom")S=v(this.top),L=e.top,P=v(e.bottom)-_,E=S+_,A=this.top+p;else if(r==="left")S=v(this.right),T=this.right-p,k=S-_,I=v(e.left)+_,B=e.right;else if(r==="right")S=v(this.left),I=e.left,B=v(e.right)-_,T=S+_,k=this.left+p;else if(n==="x"){if(r==="center")S=v((e.top+e.bottom)/2+.5);else if(X(r)){const $=Object.keys(r)[0],D=r[$];S=v(this.chart.scales[$].getPixelForValue(D))}L=e.top,P=e.bottom,E=S+_,A=E+p}else if(n==="y"){if(r==="center")S=v((e.left+e.right)/2);else if(X(r)){const $=Object.keys(r)[0],D=r[$];S=v(this.chart.scales[$].getPixelForValue(D))}T=S-_,k=T-p,I=e.left,B=e.right}const Y=W(o.ticks.maxTicksLimit,h),j=Math.max(1,Math.ceil(h/Y));for(w=0;w<h;w+=j){const $=this.getContext(w),D=s.setContext($),M=a.setContext($),F=D.lineWidth,z=D.color,G=M.dash||[],H=M.dashOffset,J=D.tickWidth,re=D.tickColor,st=D.tickBorderDash||[],fe=D.tickBorderDashOffset;b=XT(this,w,l),b!==void 0&&(C=ti(i,b,F),c?T=k=I=B=C:E=A=L=P=C,g.push({tx1:T,ty1:E,tx2:k,ty2:A,x1:I,y1:L,x2:B,y2:P,width:F,color:z,borderDash:G,borderDashOffset:H,tickWidth:J,tickColor:re,tickBorderDash:st,tickBorderDashOffset:fe}))}return this._ticksLength=h,this._borderValue=S,g}_computeLabelItems(e){const n=this.axis,i=this.options,{position:o,ticks:s}=i,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,p=Fo(i.grid),g=p+u,x=h?-u:g,y=-Mt(this.labelRotation),_=[];let v,S,w,b,C,T,E,k,A,I,L,B,P="middle";if(o==="top")T=this.bottom-x,E=this._getXAxisLabelAlignment();else if(o==="bottom")T=this.top+x,E=this._getXAxisLabelAlignment();else if(o==="left"){const j=this._getYAxisLabelAlignment(p);E=j.textAlign,C=j.x}else if(o==="right"){const j=this._getYAxisLabelAlignment(p);E=j.textAlign,C=j.x}else if(n==="x"){if(o==="center")T=(e.top+e.bottom)/2+g;else if(X(o)){const j=Object.keys(o)[0],$=o[j];T=this.chart.scales[j].getPixelForValue($)+g}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(o==="center")C=(e.left+e.right)/2-g;else if(X(o)){const j=Object.keys(o)[0],$=o[j];C=this.chart.scales[j].getPixelForValue($)}E=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const Y=this._getLabelSizes();for(v=0,S=a.length;v<S;++v){w=a[v],b=w.label;const j=s.setContext(this.getContext(v));k=this.getPixelForTick(v)+s.labelOffset,A=this._resolveTickFontOptions(v),I=A.lineHeight,L=pe(b)?b.length:1;const $=L/2,D=j.color,M=j.textStrokeColor,F=j.textStrokeWidth;let z=E;r?(C=k,E==="inner"&&(v===S-1?z=this.options.reverse?"left":"right":v===0?z=this.options.reverse?"right":"left":z="center"),o==="top"?c==="near"||y!==0?B=-L*I+I/2:c==="center"?B=-Y.highest.height/2-$*I+I:B=-Y.highest.height+I/2:c==="near"||y!==0?B=I/2:c==="center"?B=Y.highest.height/2-$*I:B=Y.highest.height-L*I,h&&(B*=-1),y!==0&&!j.showLabelBackdrop&&(C+=I/2*Math.sin(y))):(T=k,B=(1-L)*I/2);let G;if(j.showLabelBackdrop){const H=$e(j.backdropPadding),J=Y.heights[v],re=Y.widths[v];let st=B-H.top,fe=0-H.left;switch(P){case"middle":st-=J/2;break;case"bottom":st-=J;break}switch(E){case"center":fe-=re/2;break;case"right":fe-=re;break;case"inner":v===S-1?fe-=re:v>0&&(fe-=re/2);break}G={left:fe,top:st,width:re+H.width,height:J+H.height,color:j.backdropColor}}_.push({label:b,font:A,textOffset:B,options:{rotation:y,color:D,strokeColor:M,strokeWidth:F,textAlign:z,textBaseline:P,translation:[C,T],backdrop:G}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Mt(this.labelRotation))return e==="top"?"left":"right";let o="center";return n.align==="start"?o="left":n.align==="end"?o="right":n.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:o,padding:s}}=this.options,r=this._getLabelSizes(),a=e+s,l=r.widest.width;let c,u;return n==="left"?o?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?o?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:o,width:s,height:r}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,o,s,r),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const o=this.ticks.findIndex(s=>s.value===e);return o>=0?n.setContext(this.getContext(o)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,r;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,r=o.length;s<r;++s){const l=o[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:o}}=this,s=i.setContext(this.getContext()),r=i.display?s.width:0;if(!r)return;const a=o.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,p;this.isHorizontal()?(c=ti(e,this.left,r)-r/2,u=ti(e,this.right,a)+a/2,h=p=l):(h=ti(e,this.top,r)-r/2,p=ti(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,o=this._computeLabelArea();o&&cl(i,o);const s=this.getLabelItems(e);for(const r of s){const a=r.options,l=r.font,c=r.label,u=r.textOffset;Ti(i,c,0,u,l,a)}o&&ul(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:o}}=this;if(!i.display)return;const s=Ee(i.font),r=$e(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||X(n)?(l+=r.bottom,pe(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=r.top;const{titleX:c,titleY:u,maxWidth:h,rotation:p}=iE(this,l,n,a);Ti(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:p,textAlign:nE(a,n,o),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=W(e.grid&&e.grid.z,-1),o=W(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==sy.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",o=[];let s,r;for(s=0,r=n.length;s<r;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&o.push(a)}return o}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ee(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}};class Cr{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;rE(n)&&(i=this.register(n));const o=this.items,s=e.id,r=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in o||(o[s]=e,oE(e,r,i),this.override&&me.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,o=this.scope;i in n&&delete n[i],o&&i in me[o]&&(delete me[o][i],this.override&&delete Ci[i])}}function oE(t,e,n){const i=Ds(Object.create(null),[n?me.get(n):{},me.get(e),t.defaults]);me.set(e,i),t.defaultRoutes&&sE(e,t.defaultRoutes),t.descriptors&&me.describe(e,t.descriptors)}function sE(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),o=i.pop(),s=[t].concat(i).join("."),r=e[n].split("."),a=r.pop(),l=r.join(".");me.route(s,o,l,a)})}function rE(t){return"id"in t&&"defaults"in t}class aE{constructor(){this.controllers=new Cr(Rt,"datasets",!0),this.elements=new Cr(zt,"elements"),this.plugins=new Cr(Object,"plugins"),this.scales=new Cr(Ks,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(o=>{const s=i||this._getRegistryForType(o);i||s.isForType(o)||s===this.plugins&&o.id?this._exec(e,s,o):ie(o,r=>{const a=i||this._getRegistryForType(r);this._exec(e,a,r)})})}_exec(e,n,i){const o=Yd(e);ae(i["before"+o],[],i),n[e](i),ae(i["after"+o],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const o=n.get(e);if(o===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return o}}var Ht=new aE;class lE{constructor(){this._init=void 0}notify(e,n,i,o){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=o?this._descriptors(e).filter(o):this._descriptors(e),r=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),r}_notify(e,n,i,o){o=o||{};for(const s of e){const r=s.plugin,a=r[i],l=[n,o,s.options];if(ae(a,l,r)===!1&&o.cancelable)return!1}return!0}invalidate(){K(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,o=W(i.options&&i.options.plugins,{}),s=cE(i);return o===!1&&!n?[]:dE(e,s,o,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,o=(s,r)=>s.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(o(n,i),e,"stop"),this._notify(o(i,n),e,"start")}}function cE(t){const e={},n=[],i=Object.keys(Ht.plugins.items);for(let s=0;s<i.length;s++)n.push(Ht.getPlugin(i[s]));const o=t.plugins||[];for(let s=0;s<o.length;s++){const r=o[s];n.indexOf(r)===-1&&(n.push(r),e[r.id]=!0)}return{plugins:n,localIds:e}}function uE(t,e){return!e&&t===!1?null:t===!0?{}:t}function dE(t,{plugins:e,localIds:n},i,o){const s=[],r=t.getContext();for(const a of e){const l=a.id,c=uE(i[l],o);c!==null&&s.push({plugin:a,options:fE(t.config,{plugin:a,local:n[l]},c,r)})}return s}function fE(t,{plugin:e,local:n},i,o){const s=t.pluginScopeKeys(e),r=t.getOptionScopes(i,s);return n&&e.defaults&&r.push(e.defaults),t.createResolver(r,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function du(t,e){const n=me.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function hE(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function pE(t,e){return t===e?"_index_":"_value_"}function Ep(t){if(t==="x"||t==="y"||t==="r")return t}function mE(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function fu(t,...e){if(Ep(t))return t;for(const n of e){const i=n.axis||mE(n.position)||t.length>1&&Ep(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function kp(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function gE(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return kp(t,"x",n[0])||kp(t,"y",n[0])}return{}}function xE(t,e){const n=Ci[t.type]||{scales:{}},i=e.scales||{},o=du(t.type,e),s=Object.create(null);return Object.keys(i).forEach(r=>{const a=i[r];if(!X(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=fu(r,a,gE(r,t),me.scales[a.type]),c=pE(l,o),u=n.scales||{};s[r]=ls(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(r=>{const a=r.type||t.type,l=r.indexAxis||du(a,e),u=(Ci[a]||{}).scales||{};Object.keys(u).forEach(h=>{const p=hE(h,l),g=r[p+"AxisID"]||p;s[g]=s[g]||Object.create(null),ls(s[g],[{axis:p},i[g],u[h]])})}),Object.keys(s).forEach(r=>{const a=s[r];ls(a,[me.scales[a.type],me.scale])}),s}function ry(t){const e=t.options||(t.options={});e.plugins=W(e.plugins,{}),e.scales=xE(t,e)}function ay(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function vE(t){return t=t||{},t.data=ay(t.data),ry(t),t}const Ip=new Map,ly=new Set;function Tr(t,e){let n=Ip.get(t);return n||(n=e(),Ip.set(t,n),ly.add(n)),n}const zo=(t,e,n)=>{const i=jn(e,n);i!==void 0&&t.add(i)};class yE{constructor(e){this._config=vE(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ay(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ry(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Tr(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Tr(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Tr(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Tr(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let o=i.get(e);return(!o||n)&&(o=new Map,i.set(e,o)),o}getOptionScopes(e,n,i){const{options:o,type:s}=this,r=this._cachedScopes(e,i),a=r.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>zo(l,e,h))),u.forEach(h=>zo(l,o,h)),u.forEach(h=>zo(l,Ci[s]||{},h)),u.forEach(h=>zo(l,me,h)),u.forEach(h=>zo(l,lu,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),ly.has(n)&&r.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ci[n]||{},me.datasets[n]||{},{type:n},me,lu]}resolveNamedOptions(e,n,i,o=[""]){const s={$shared:!0},{resolver:r,subPrefixes:a}=Ap(this._resolverCache,e,o);let l=r;if(SE(r,n)){s.$shared=!1,i=Wn(i)?i():i;const c=this.createResolver(e,i,a);l=ho(r,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],o){const{resolver:s}=Ap(this._resolverCache,e,i);return X(n)?ho(s,n,void 0,o):s}}function Ap(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const o=n.join();let s=i.get(o);return s||(s={resolver:tf(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(o,s)),s}const _E=t=>X(t)&&Object.getOwnPropertyNames(t).some(e=>Wn(t[e]));function SE(t,e){const{isScriptable:n,isIndexable:i}=Ov(t);for(const o of e){const s=n(o),r=i(o),a=(r||s)&&t[o];if(s&&(Wn(a)||_E(a))||r&&pe(a))return!0}return!1}var wE="4.5.1";const bE=["top","bottom","left","right","chartArea"];function Mp(t,e){return t==="top"||t==="bottom"||bE.indexOf(t)===-1&&e==="x"}function Np(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Pp(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ae(n&&n.onComplete,[t],e)}function CE(t){const e=t.chart,n=e.options.animation;ae(n&&n.onProgress,[t],e)}function cy(t){return sf()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Kr={},Rp=t=>{const e=cy(t);return Object.values(Kr).filter(n=>n.canvas===e).pop()};function TE(t,e,n){const i=Object.keys(t);for(const o of i){const s=+o;if(s>=e){const r=t[o];delete t[o],(n>0||s>e)&&(t[s+n]=r)}}}function EE(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var bn;let Qs=(bn=class{static register(...e){Ht.add(...e),Dp()}static unregister(...e){Ht.remove(...e),Dp()}constructor(e,n){const i=this.config=new yE(n),o=cy(e),s=Rp(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const r=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||GT(o)),this.platform.updateConfig(i);const a=this.platform.acquireContext(o,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=kC(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new lE,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=GC(h=>this.update(h),r.resizeDelay||0),this._dataChanges=[],Kr[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Qt.listen(this,"complete",Pp),Qt.listen(this,"progress",CE),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:o,_aspectRatio:s}=this;return K(e)?n&&s?s:o?i/o:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ht}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():np(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Zh(this.canvas,this.ctx),this}stop(){return Qt.stop(this),this}resize(e,n){Qt.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,o=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(o,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,np(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),ae(i.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ie(n,(i,o)=>{i.id=o})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,o=Object.keys(i).reduce((r,a)=>(r[a]=!1,r),{});let s=[];n&&(s=s.concat(Object.keys(n).map(r=>{const a=n[r],l=fu(r,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ie(s,r=>{const a=r.options,l=a.id,c=fu(l,a),u=W(a.type,r.dtype);(a.position===void 0||Mp(a.position,c)!==Mp(r.dposition))&&(a.position=r.dposition),o[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const p=Ht.getScale(u);h=new p({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),ie(o,(r,a)=>{r||delete i[a]}),ie(i,r=>{Ve.configure(this,r,r.options),Ve.addBox(this,r)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((o,s)=>o.index-s.index),i>n){for(let o=n;o<i;++o)this._destroyDatasetMeta(o);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Np("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,o)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,o;for(this._removeUnreferencedMetasets(),i=0,o=n.length;i<o;i++){const s=n[i];let r=this.getDatasetMeta(i);const a=s.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(i),r=this.getDatasetMeta(i)),r.type=a,r.indexAxis=s.indexAxis||du(a,this.options),r.order=s.order||0,r.index=i,r.label=""+s.label,r.visible=this.isDatasetVisible(i),r.controller)r.controller.updateIndex(i),r.controller.linkScales();else{const l=Ht.getController(a),{datasetElementType:c,dataElementType:u}=me.datasets[a];Object.assign(l,{dataElementType:Ht.getElement(u),datasetElementType:c&&Ht.getElement(c)}),r.controller=new l(this,i),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){ie(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),p=!o&&s.indexOf(h)===-1;h.buildOrUpdateElements(p),r=Math.max(+h.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),o||ie(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Np("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ie(this.scales,e=>{Ve.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Gh(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:o,count:s}of n){const r=i==="_removeElements"?-s:s;TE(e,o,r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(r=>r[0]===s).map((r,a)=>a+","+r.splice(1).join(","))),o=i(0);for(let s=1;s<n;s++)if(!Gh(o,i(s)))return;return Array.from(o).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ve.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],ie(this.boxes,o=>{i&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,s)=>{o._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Wn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),o={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(i.controller._update(n),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Qt.has(this)?this.attached&&!Qt.running(this)&&Qt.start(this):(this.draw(),Pp({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let o,s;for(o=0,s=n.length;o<s;++o){const r=n[o];(!e||r.visible)&&i.push(r)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},o=Kv(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&cl(n,o),e.controller.draw(),o&&ul(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return an(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,o){const s=bT.modes[n];return typeof s=="function"?s(this,e,i,o):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let o=i.filter(s=>s&&s._dataset===n).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(o)),o}getContext(){return this.$context||(this.$context=Qn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const o=i?"show":"hide",s=this.getDatasetMeta(e),r=s.controller._resolveAnimations(void 0,o);Ls(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),r.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?o:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Qt.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Zh(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Kr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,r)=>{n.addEventListener(this,s,r),e[s]=r},o=(s,r,a)=>{s.offsetX=r,s.offsetY=a,this._eventHandler(s)};ie(this.options.events,s=>i(s,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},o=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{o("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",r)};r=()=>{this.attached=!1,o("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():r()}unbindEvents(){ie(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ie(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const o=i?"set":"remove";let s,r,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+o+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){r=e[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[o+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:r})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[r],index:r}});!Aa(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const o=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),r=s(n,e),a=i?e:s(e,n);r.length&&this.updateHoverStyle(r,o.mode,!1),a.length&&o.mode&&this.updateHoverStyle(a,o.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},o=r=>(r.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,o)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,o),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:o=[],options:s}=this,r=n,a=this._getActiveElements(e,o,i,r),l=RC(e),c=EE(e,this._lastEvent,i,l);i&&(this._lastEvent=null,ae(s.onHover,[e,a,this],this),l&&ae(s.onClick,[e,a,this],this));const u=!Aa(a,o);return(u||n)&&(this._active=a,this._updateHoverStyles(a,o,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,o){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,o)}},N(bn,"defaults",me),N(bn,"instances",Kr),N(bn,"overrides",Ci),N(bn,"registry",Ht),N(bn,"version",wE),N(bn,"getChart",Rp),bn);function Dp(){return ie(Qs.instances,t=>t._plugins.invalidate())}function kE(t,e,n){const{startAngle:i,x:o,y:s,outerRadius:r,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/r,ze(i-n));if(t.beginPath(),t.arc(o,s,r-c/2,i+h/2,n-h/2),a>0){const p=Math.min(c/a,ze(i-n));t.arc(o,s,a+c/2,n-p/2,i+p/2,!0)}else{const p=Math.min(c/2,r*ze(i-n));if(u==="round")t.arc(o,s,p,n-ee/2,i+ee/2,!0);else if(u==="bevel"){const g=2*p*p,x=-g*Math.cos(n+ee/2)+o,y=-g*Math.sin(n+ee/2)+s,_=g*Math.cos(i+ee/2)+o,v=g*Math.sin(i+ee/2)+s;t.lineTo(x,y),t.lineTo(_,v)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function IE(t,e,n){const{startAngle:i,pixelMargin:o,x:s,y:r,outerRadius:a,innerRadius:l}=e;let c=o/a;t.beginPath(),t.arc(s,r,a,i-c,n+c),l>o?(c=o/l,t.arc(s,r,l,n+c,i-c,!0)):t.arc(s,r,o,n+we,i-we),t.closePath(),t.clip()}function AE(t){return ef(t,["outerStart","outerEnd","innerStart","innerEnd"])}function ME(t,e,n,i){const o=AE(t.options.borderRadius),s=(n-e)/2,r=Math.min(s,i*e/2),a=l=>{const c=(n-Math.min(s,l))*i/2;return Ie(l,0,Math.min(s,c))};return{outerStart:a(o.outerStart),outerEnd:a(o.outerEnd),innerStart:Ie(o.innerStart,0,r),innerEnd:Ie(o.innerEnd,0,r)}}function Pi(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function La(t,e,n,i,o,s){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-c,0),p=u>0?u+i+n+c:0;let g=0;const x=o-l;if(i){const j=u>0?u-i:0,$=h>0?h-i:0,D=(j+$)/2,M=D!==0?x*D/(D+i):x;g=(x-M)/2}const y=Math.max(.001,x*h-n/ee)/h,_=(x-y)/2,v=l+_+g,S=o-_-g,{outerStart:w,outerEnd:b,innerStart:C,innerEnd:T}=ME(e,p,h,S-v),E=h-w,k=h-b,A=v+w/E,I=S-b/k,L=p+C,B=p+T,P=v+C/L,Y=S-T/B;if(t.beginPath(),s){const j=(A+I)/2;if(t.arc(r,a,h,A,j),t.arc(r,a,h,j,I),b>0){const F=Pi(k,I,r,a);t.arc(F.x,F.y,b,I,S+we)}const $=Pi(B,S,r,a);if(t.lineTo($.x,$.y),T>0){const F=Pi(B,Y,r,a);t.arc(F.x,F.y,T,S+we,Y+Math.PI)}const D=(S-T/p+(v+C/p))/2;if(t.arc(r,a,p,S-T/p,D,!0),t.arc(r,a,p,D,v+C/p,!0),C>0){const F=Pi(L,P,r,a);t.arc(F.x,F.y,C,P+Math.PI,v-we)}const M=Pi(E,v,r,a);if(t.lineTo(M.x,M.y),w>0){const F=Pi(E,A,r,a);t.arc(F.x,F.y,w,v-we,A)}}else{t.moveTo(r,a);const j=Math.cos(A)*h+r,$=Math.sin(A)*h+a;t.lineTo(j,$);const D=Math.cos(I)*h+r,M=Math.sin(I)*h+a;t.lineTo(D,M)}t.closePath()}function NE(t,e,n,i,o){const{fullCircles:s,startAngle:r,circumference:a}=e;let l=e.endAngle;if(s){La(t,e,n,i,l,o);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=r+(a%de||de))}return La(t,e,n,i,l,o),t.fill(),l}function PE(t,e,n,i,o){const{fullCircles:s,startAngle:r,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:p,borderRadius:g}=l,x=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=p,x?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let y=e.endAngle;if(s){La(t,e,n,i,y,o);for(let _=0;_<s;++_)t.stroke();isNaN(a)||(y=r+(a%de||de))}x&&IE(t,e,y),l.selfJoin&&y-r>=ee&&g===0&&u!=="miter"&&kE(t,e,y),s||(La(t,e,n,i,y,o),t.stroke())}class Wo extends zt{constructor(n){super();N(this,"circumference");N(this,"endAngle");N(this,"fullCircles");N(this,"innerRadius");N(this,"outerRadius");N(this,"pixelMargin");N(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,i,o){const s=this.getProps(["x","y"],o),{angle:r,distance:a}=Av(s,{x:n,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],o),g=(this.options.spacing+this.options.borderWidth)/2,x=W(p,c-l),y=Fs(r,l,c)&&l!==c,_=x>=de||y,v=sn(a,u+g,h+g);return _&&v}getCenterPoint(n){const{x:i,y:o,startAngle:s,endAngle:r,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(s+r)/2,p=(a+l+u+c)/2;return{x:i+Math.cos(h)*p,y:o+Math.sin(h)*p}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:i,circumference:o}=this,s=(i.offset||0)/4,r=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=o>de?Math.floor(o/de):0,o===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(ee,o||0)),u=s*c;n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,NE(n,this,u,r,a),PE(n,this,u,r,a),n.restore()}}N(Wo,"id","arc"),N(Wo,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),N(Wo,"defaultRoutes",{backgroundColor:"backgroundColor"}),N(Wo,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function uy(t,e,n=e){t.lineCap=W(n.borderCapStyle,e.borderCapStyle),t.setLineDash(W(n.borderDash,e.borderDash)),t.lineDashOffset=W(n.borderDashOffset,e.borderDashOffset),t.lineJoin=W(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=W(n.borderWidth,e.borderWidth),t.strokeStyle=W(n.borderColor,e.borderColor)}function RE(t,e,n){t.lineTo(n.x,n.y)}function DE(t){return t.stepped?n1:t.tension||t.cubicInterpolationMode==="monotone"?i1:RE}function dy(t,e,n={}){const i=t.length,{start:o=0,end:s=i-1}=n,{start:r,end:a}=e,l=Math.max(o,r),c=Math.min(s,a),u=o<r&&s<r||o>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function LE(t,e,n,i){const{points:o,options:s}=e,{count:r,start:a,loop:l,ilen:c}=dy(o,n,i),u=DE(s);let{move:h=!0,reverse:p}=i||{},g,x,y;for(g=0;g<=c;++g)x=o[(a+(p?c-g:g))%r],!x.skip&&(h?(t.moveTo(x.x,x.y),h=!1):u(t,y,x,p,s.stepped),y=x);return l&&(x=o[(a+(p?c:0))%r],u(t,y,x,p,s.stepped)),!!l}function FE(t,e,n,i){const o=e.points,{count:s,start:r,ilen:a}=dy(o,n,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,p,g,x,y,_,v;const S=b=>(r+(c?a-b:b))%s,w=()=>{y!==_&&(t.lineTo(u,_),t.lineTo(u,y),t.lineTo(u,v))};for(l&&(g=o[S(0)],t.moveTo(g.x,g.y)),p=0;p<=a;++p){if(g=o[S(p)],g.skip)continue;const b=g.x,C=g.y,T=b|0;T===x?(C<y?y=C:C>_&&(_=C),u=(h*u+b)/++h):(w(),t.lineTo(b,C),x=T,h=0,y=_=C),v=C}w()}function hu(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?FE:LE}function zE(t){return t.stepped?L1:t.tension||t.cubicInterpolationMode==="monotone"?F1:ai}function UE(t,e,n,i){let o=e._path;o||(o=e._path=new Path2D,e.path(o,n,i)&&o.closePath()),uy(t,e.options),t.stroke(o)}function OE(t,e,n,i){const{segments:o,options:s}=e,r=hu(e);for(const a of o)uy(t,s,a.style),t.beginPath(),r(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const VE=typeof Path2D=="function";function BE(t,e,n,i){VE&&!e.options.segment?UE(t,e,n,i):OE(t,e,n,i)}class ln extends zt{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const o=i.spanGaps?this._loop:this._fullLoop;k1(this._points,i,e,o,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=H1(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,o=e[n],s=this.points,r=Yv(this,{property:n,start:o,end:o});if(!r.length)return;const a=[],l=zE(i);let c,u;for(c=0,u=r.length;c<u;++c){const{start:h,end:p}=r[c],g=s[h],x=s[p];if(g===x){a.push(g);continue}const y=Math.abs((o-g[n])/(x[n]-g[n])),_=l(g,x,y,i.stepped);_[n]=e[n],a.push(_)}return a.length===1?a[0]:a}pathSegment(e,n,i){return hu(this)(e,this,n,i)}path(e,n,i){const o=this.segments,s=hu(this);let r=this._loop;n=n||0,i=i||this.points.length-n;for(const a of o)r&=s(e,this,a,{start:n,end:n+i-1});return!!r}draw(e,n,i,o){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),BE(e,this,i,o),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}N(ln,"id","line"),N(ln,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),N(ln,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),N(ln,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Lp(t,e,n,i){const o=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<o.radius+o.hitRadius}class ms extends zt{constructor(n){super();N(this,"parsed");N(this,"skip");N(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,o){const s=this.options,{x:r,y:a}=this.getProps(["x","y"],o);return Math.pow(n-r,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return Lp(this,n,"x",i)}inYRange(n,i){return Lp(this,n,"y",i)}getCenterPoint(n){const{x:i,y:o}=this.getProps(["x","y"],n);return{x:i,y:o}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const o=i&&n.borderWidth||0;return(i+o)*2}draw(n,i){const o=this.options;this.skip||o.radius<.1||!an(this,i,this.size(o)/2)||(n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.fillStyle=o.backgroundColor,cu(n,o,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}N(ms,"id","point"),N(ms,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),N(ms,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function fy(t,e){const{x:n,y:i,base:o,width:s,height:r}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=r/2,a=Math.min(n,o),l=Math.max(n,o),c=i-h,u=i+h):(h=s/2,a=n-h,l=n+h,c=Math.min(i,o),u=Math.max(i,o)),{left:a,top:c,right:l,bottom:u}}function Rn(t,e,n,i){return t?0:Ie(e,n,i)}function HE(t,e,n){const i=t.options.borderWidth,o=t.borderSkipped,s=Uv(i);return{t:Rn(o.top,s.top,0,n),r:Rn(o.right,s.right,0,e),b:Rn(o.bottom,s.bottom,0,n),l:Rn(o.left,s.left,0,e)}}function $E(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),o=t.options.borderRadius,s=mi(o),r=Math.min(e,n),a=t.borderSkipped,l=i||X(o);return{topLeft:Rn(!l||a.top||a.left,s.topLeft,0,r),topRight:Rn(!l||a.top||a.right,s.topRight,0,r),bottomLeft:Rn(!l||a.bottom||a.left,s.bottomLeft,0,r),bottomRight:Rn(!l||a.bottom||a.right,s.bottomRight,0,r)}}function GE(t){const e=fy(t),n=e.right-e.left,i=e.bottom-e.top,o=HE(t,n/2,i/2),s=$E(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+o.l,y:e.top+o.t,w:n-o.l-o.r,h:i-o.t-o.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,s.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(o.b,o.r))}}}}function sc(t,e,n,i){const o=e===null,s=n===null,a=t&&!(o&&s)&&fy(t,i);return a&&(o||sn(e,a.left,a.right))&&(s||sn(n,a.top,a.bottom))}function qE(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function jE(t,e){t.rect(e.x,e.y,e.w,e.h)}function rc(t,e,n={}){const i=t.x!==n.x?-e:0,o=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,r=(t.y+t.h!==n.y+n.h?e:0)-o;return{x:t.x+i,y:t.y+o,w:t.w+s,h:t.h+r,radius:t.radius}}class Qr extends zt{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:o}}=this,{inner:s,outer:r}=GE(this),a=qE(r.radius)?zs:jE;e.save(),(r.w!==s.w||r.h!==s.h)&&(e.beginPath(),a(e,rc(r,n,s)),e.clip(),a(e,rc(s,-n,r)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,rc(s,n)),e.fillStyle=o,e.fill(),e.restore()}inRange(e,n,i){return sc(this,e,n,i)}inXRange(e,n){return sc(this,e,null,n)}inYRange(e,n){return sc(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:o,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+o)/2:n,y:s?i:(i+o)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}N(Qr,"id","bar"),N(Qr,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),N(Qr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var WE=Object.freeze({__proto__:null,ArcElement:Wo,BarElement:Qr,LineElement:ln,PointElement:ms});const pu=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Fp=pu.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function hy(t){return pu[t%pu.length]}function py(t){return Fp[t%Fp.length]}function JE(t,e){return t.borderColor=hy(e),t.backgroundColor=py(e),++e}function YE(t,e){return t.backgroundColor=t.data.map(()=>hy(e++)),e}function KE(t,e){return t.backgroundColor=t.data.map(()=>py(e++)),e}function QE(t){let e=0;return(n,i)=>{const o=t.getDatasetMeta(i).controller;o instanceof fi?e=YE(n,e):o instanceof hs?e=KE(n,e):o&&(e=JE(n,e))}}function zp(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function XE(t){return t&&(t.borderColor||t.backgroundColor)}function ZE(){return me.borderColor!=="rgba(0,0,0,0.1)"||me.backgroundColor!=="rgba(0,0,0,0.1)"}var ek={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:o}=t.config,{elements:s}=o,r=zp(i)||XE(o)||s&&zp(s)||ZE();if(!n.forceOverride&&r)return;const a=QE(t);i.forEach(a)}};function tk(t,e,n,i,o){const s=o.samples||i;if(s>=n)return t.slice(e,e+n);const r=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let u=e,h,p,g,x,y;for(r[l++]=t[u],h=0;h<s-2;h++){let _=0,v=0,S;const w=Math.floor((h+1)*a)+1+e,b=Math.min(Math.floor((h+2)*a)+1,n)+e,C=b-w;for(S=w;S<b;S++)_+=t[S].x,v+=t[S].y;_/=C,v/=C;const T=Math.floor(h*a)+1+e,E=Math.min(Math.floor((h+1)*a)+1,n)+e,{x:k,y:A}=t[u];for(g=x=-1,S=T;S<E;S++)x=.5*Math.abs((k-_)*(t[S].y-A)-(k-t[S].x)*(v-A)),x>g&&(g=x,p=t[S],y=S);r[l++]=p,u=y}return r[l++]=t[c],r}function nk(t,e,n,i){let o=0,s=0,r,a,l,c,u,h,p,g,x,y;const _=[],v=e+n-1,S=t[e].x,b=t[v].x-S;for(r=e;r<e+n;++r){a=t[r],l=(a.x-S)/b*i,c=a.y;const C=l|0;if(C===u)c<x?(x=c,h=r):c>y&&(y=c,p=r),o=(s*o+a.x)/++s;else{const T=r-1;if(!K(h)&&!K(p)){const E=Math.min(h,p),k=Math.max(h,p);E!==g&&E!==T&&_.push({...t[E],x:o}),k!==g&&k!==T&&_.push({...t[k],x:o})}r>0&&T!==g&&_.push(t[T]),_.push(a),u=C,s=0,x=y=c,h=p=g=r}}return _}function my(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Up(t){t.data.datasets.forEach(e=>{my(e)})}function ik(t,e){const n=e.length;let i=0,o;const{iScale:s}=t,{min:r,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=Ie(rn(e,s.axis,r).lo,0,n-1)),c?o=Ie(rn(e,s.axis,a).hi+1,i,n)-i:o=n-i,{start:i,count:o}}var ok={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){Up(t);return}const i=t.width;t.data.datasets.forEach((o,s)=>{const{_data:r,indexAxis:a}=o,l=t.getDatasetMeta(s),c=r||o.data;if(qo([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:p}=ik(l,c);const g=n.threshold||4*i;if(p<=g){my(o);return}K(r)&&(o._data=c,delete o.data,Object.defineProperty(o,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let x;switch(n.algorithm){case"lttb":x=tk(c,h,p,i,n);break;case"min-max":x=nk(c,h,p,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}o._decimated=x})},destroy(t){Up(t)}};function sk(t,e,n){const i=t.segments,o=t.points,s=e.points,r=[];for(const a of i){let{start:l,end:c}=a;c=hl(l,c,o);const u=mu(n,o[l],o[c],a.loop);if(!e.segments){r.push({source:a,target:u,start:o[l],end:o[c]});continue}const h=Yv(e,u);for(const p of h){const g=mu(n,s[p.start],s[p.end],p.loop),x=Jv(a,o,g);for(const y of x)r.push({source:y,target:p,start:{[n]:Op(u,g,"start",Math.max)},end:{[n]:Op(u,g,"end",Math.min)}})}}return r}function mu(t,e,n,i){if(i)return;let o=e[t],s=n[t];return t==="angle"&&(o=ze(o),s=ze(s)),{property:t,start:o,end:s}}function rk(t,e){const{x:n=null,y:i=null}=t||{},o=e.points,s=[];return e.segments.forEach(({start:r,end:a})=>{a=hl(r,a,o);const l=o[r],c=o[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function hl(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function Op(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function gy(t,e){let n=[],i=!1;return pe(t)?(i=!0,n=t):n=rk(t,e),n.length?new ln({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function Vp(t){return t&&t.fill!==!1}function ak(t,e,n){let o=t[e].fill;const s=[e];let r;if(!n)return o;for(;o!==!1&&s.indexOf(o)===-1;){if(!_e(o))return o;if(r=t[o],!r)return!1;if(r.visible)return o;s.push(o),o=r.fill}return!1}function lk(t,e,n){const i=fk(t);if(X(i))return isNaN(i.value)?!1:i;let o=parseFloat(i);return _e(o)&&Math.floor(o)===o?ck(i[0],e,o,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function ck(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function uk(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:X(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function dk(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:X(t)?i=t.value:i=e.getBaseValue(),i}function fk(t){const e=t.options,n=e.fill;let i=W(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function hk(t){const{scale:e,index:n,line:i}=t,o=[],s=i.segments,r=i.points,a=pk(e,n);a.push(gy({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)mk(o,r[u],a)}return new ln({points:o,options:{}})}function pk(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let o=0;o<i.length;o++){const s=i[o];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function mk(t,e,n){const i=[];for(let o=0;o<n.length;o++){const s=n[o],{first:r,last:a,point:l}=gk(s,e,"x");if(!(!l||r&&a)){if(r)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function gk(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const o=i[n],s=t.segments,r=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],h=r[u.start][n],p=r[u.end][n];if(sn(o,h,p)){a=o===h,l=o===p;break}}return{first:a,last:l,point:i}}class xy{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:o,y:s,radius:r}=this;return n=n||{start:0,end:de},e.arc(o,s,r,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:o}=this,s=e.angle;return{x:n+Math.cos(s)*o,y:i+Math.sin(s)*o,angle:s}}}function xk(t){const{chart:e,fill:n,line:i}=t;if(_e(n))return vk(e,n);if(n==="stack")return hk(t);if(n==="shape")return!0;const o=yk(t);return o instanceof xy?o:gy(o,i)}function vk(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function yk(t){return(t.scale||{}).getPointPositionForValue?Sk(t):_k(t)}function _k(t){const{scale:e={},fill:n}=t,i=uk(n,e);if(_e(i)){const o=e.isHorizontal();return{x:o?i:null,y:o?null:i}}return null}function Sk(t){const{scale:e,fill:n}=t,i=e.options,o=e.getLabels().length,s=i.reverse?e.max:e.min,r=dk(n,e,s),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new xy({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(r)})}for(let l=0;l<o;++l)a.push(e.getPointPositionForValue(l,r));return a}function ac(t,e,n){const i=xk(e),{chart:o,index:s,line:r,scale:a,axis:l}=e,c=r.options,u=c.fill,h=c.backgroundColor,{above:p=h,below:g=h}=u||{},x=o.getDatasetMeta(s),y=Kv(o,x);i&&r.points.length&&(cl(t,n),wk(t,{line:r,target:i,above:p,below:g,area:n,scale:a,axis:l,clip:y}),ul(t))}function wk(t,e){const{line:n,target:i,above:o,below:s,area:r,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=s;s!==o&&(c==="x"?(Bp(t,i,r.top),lc(t,{line:n,target:i,color:o,scale:a,property:c,clip:l}),t.restore(),t.save(),Bp(t,i,r.bottom)):c==="y"&&(Hp(t,i,r.left),lc(t,{line:n,target:i,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),Hp(t,i,r.right),u=o)),lc(t,{line:n,target:i,color:u,scale:a,property:c,clip:l}),t.restore()}function Bp(t,e,n){const{segments:i,points:o}=e;let s=!0,r=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,u=o[l],h=o[hl(l,c,o)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),r=!!e.pathSegment(t,a,{move:r}),r?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Hp(t,e,n){const{segments:i,points:o}=e;let s=!0,r=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,u=o[l],h=o[hl(l,c,o)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),r=!!e.pathSegment(t,a,{move:r}),r?t.closePath():t.lineTo(n,h.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function lc(t,e){const{line:n,target:i,property:o,color:s,scale:r,clip:a}=e,l=sk(n,i,o);for(const{source:c,target:u,start:h,end:p}of l){const{style:{backgroundColor:g=s}={}}=c,x=i!==!0;t.save(),t.fillStyle=g,bk(t,r,a,x&&mu(o,h,p)),t.beginPath();const y=!!n.pathSegment(t,c);let _;if(x){y?t.closePath():$p(t,i,p,o);const v=!!i.pathSegment(t,u,{move:y,reverse:!0});_=y&&v,_||$p(t,i,h,o)}t.closePath(),t.fill(_?"evenodd":"nonzero"),t.restore()}}function bk(t,e,n,i){const o=e.chart.chartArea,{property:s,start:r,end:a}=i||{};if(s==="x"||s==="y"){let l,c,u,h;s==="x"?(l=r,c=o.top,u=a,h=o.bottom):(l=o.left,c=r,u=o.right,h=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),h=Math.min(h,n.bottom)),t.rect(l,c,u-l,h-c),t.clip()}}function $p(t,e,n,i){const o=e.interpolate(n,i);o&&t.lineTo(o.x,o.y)}var vy={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,o=[];let s,r,a,l;for(r=0;r<i;++r)s=t.getDatasetMeta(r),a=s.dataset,l=null,a&&a.options&&a instanceof ln&&(l={visible:t.isDatasetVisible(r),index:r,fill:lk(a,r,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,o.push(l);for(r=0;r<i;++r)l=o[r],!(!l||l.fill===!1)&&(l.fill=ak(o,r,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",o=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let r=o.length-1;r>=0;--r){const a=o[r].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&ac(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let o=i.length-1;o>=0;--o){const s=i[o].$filler;Vp(s)&&ac(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!Vp(i)||n.drawTime!=="beforeDatasetDraw"||ac(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Gp=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},Ck=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class qp extends zt{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ae(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,o)=>e.sort(i,o,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,o=Ee(i.font),s=o.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Gp(i,s);let c,u;n.font=o.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(r,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(r,o,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,o){const{ctx:s,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=o+a;let h=e;s.textAlign="left",s.textBaseline="middle";let p=-1,g=-u;return this.legendItems.forEach((x,y)=>{const _=i+n/2+s.measureText(x.text).width;(y===0||c[c.length-1]+_+2*a>r)&&(h+=u,c[c.length-(y>0?0:1)]=0,g+=u,p++),l[y]={left:0,top:g,row:p,width:_,height:o},c[c.length-1]+=_+a}),h}_fitCols(e,n,i,o){const{ctx:s,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=r-e;let h=a,p=0,g=0,x=0,y=0;return this.legendItems.forEach((_,v)=>{const{itemWidth:S,itemHeight:w}=Tk(i,n,s,_,o);v>0&&g+w+2*a>u&&(h+=p+a,c.push({width:p,height:g}),x+=p+a,y++,p=g=0),l[v]={left:x,top:g,col:y,width:S,height:w},p=Math.max(p,S),g+=w+a}),h+=p,c.push({width:p,height:g}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:o},rtl:s}}=this,r=eo(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Fe(i,this.left+o,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Fe(i,this.left+o,this.right-this.lineWidths[a])),c.top+=this.top+e+o,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+o}else{let a=0,l=Fe(i,this.top+e+o,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Fe(i,this.top+e+o,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+o,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;cl(e,this),this._draw(),ul(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:o}=this,{align:s,labels:r}=e,a=me.color,l=eo(e.rtl,this.left,this.width),c=Ee(r.font),{padding:u}=r,h=c.size,p=h/2;let g;this.drawTitle(),o.textAlign=l.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=c.string;const{boxWidth:x,boxHeight:y,itemHeight:_}=Gp(r,h),v=function(T,E,k){if(isNaN(x)||x<=0||isNaN(y)||y<0)return;o.save();const A=W(k.lineWidth,1);if(o.fillStyle=W(k.fillStyle,a),o.lineCap=W(k.lineCap,"butt"),o.lineDashOffset=W(k.lineDashOffset,0),o.lineJoin=W(k.lineJoin,"miter"),o.lineWidth=A,o.strokeStyle=W(k.strokeStyle,a),o.setLineDash(W(k.lineDash,[])),r.usePointStyle){const I={radius:y*Math.SQRT2/2,pointStyle:k.pointStyle,rotation:k.rotation,borderWidth:A},L=l.xPlus(T,x/2),B=E+p;zv(o,I,L,B,r.pointStyleWidth&&x)}else{const I=E+Math.max((h-y)/2,0),L=l.leftForLtr(T,x),B=mi(k.borderRadius);o.beginPath(),Object.values(B).some(P=>P!==0)?zs(o,{x:L,y:I,w:x,h:y,radius:B}):o.rect(L,I,x,y),o.fill(),A!==0&&o.stroke()}o.restore()},S=function(T,E,k){Ti(o,k.text,T,E+_/2,c,{strikethrough:k.hidden,textAlign:l.textAlign(k.textAlign)})},w=this.isHorizontal(),b=this._computeTitleHeight();w?g={x:Fe(s,this.left+u,this.right-i[0]),y:this.top+u+b,line:0}:g={x:this.left+u,y:Fe(s,this.top+b+u,this.bottom-n[0].height),line:0},qv(this.ctx,e.textDirection);const C=_+u;this.legendItems.forEach((T,E)=>{o.strokeStyle=T.fontColor,o.fillStyle=T.fontColor;const k=o.measureText(T.text).width,A=l.textAlign(T.textAlign||(T.textAlign=r.textAlign)),I=x+p+k;let L=g.x,B=g.y;l.setWidth(this.width),w?E>0&&L+I+u>this.right&&(B=g.y+=C,g.line++,L=g.x=Fe(s,this.left+u,this.right-i[g.line])):E>0&&B+C>this.bottom&&(L=g.x=L+n[g.line].width+u,g.line++,B=g.y=Fe(s,this.top+b+u,this.bottom-n[g.line].height));const P=l.x(L);if(v(P,B,T),L=qC(A,L+x+p,w?L+I:this.right,e.rtl),S(l.x(L),B,T),w)g.x+=I+u;else if(typeof T.text!="string"){const Y=c.lineHeight;g.y+=yy(T,Y)+u}else g.y+=C}),jv(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Ee(n.font),o=$e(n.padding);if(!n.display)return;const s=eo(e.rtl,this.left,this.width),r=this.ctx,a=n.position,l=i.size/2,c=o.top+l;let u,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,h=Fe(e.align,h,this.right-p);else{const x=this.columnSizes.reduce((y,_)=>Math.max(y,_.height),0);u=c+Fe(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const g=Fe(a,h,h+p);r.textAlign=s.textAlign(Xd(a)),r.textBaseline="middle",r.strokeStyle=n.color,r.fillStyle=n.color,r.font=i.string,Ti(r,n.text,g,u,i)}_computeTitleHeight(){const e=this.options.title,n=Ee(e.font),i=$e(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,o,s;if(sn(e,this.left,this.right)&&sn(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(o=s[i],sn(e,o.left,o.left+o.width)&&sn(n,o.top,o.top+o.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!Ik(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const o=this._hoveredItem,s=Ck(o,i);o&&!s&&ae(n.onLeave,[e,o,this],this),this._hoveredItem=i,i&&!s&&ae(n.onHover,[e,i,this],this)}else i&&ae(n.onClick,[e,i,this],this)}}function Tk(t,e,n,i,o){const s=Ek(i,t,e,n),r=kk(o,i,e.lineHeight);return{itemWidth:s,itemHeight:r}}function Ek(t,e,n,i){let o=t.text;return o&&typeof o!="string"&&(o=o.reduce((s,r)=>s.length>r.length?s:r)),e+n.size/2+i.measureText(o).width}function kk(t,e,n){let i=t;return typeof e.text!="string"&&(i=yy(e,n)),i}function yy(t,e){const n=t.text?t.text.length:0;return e*n}function Ik(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var _y={id:"legend",_element:qp,start(t,e,n){const i=t.legend=new qp({ctx:t.ctx,options:n,chart:t});Ve.configure(t,i,n),Ve.addBox(t,i)},stop(t){Ve.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Ve.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,o=n.chart;o.isDatasetVisible(i)?(o.hide(i),e.hidden=!0):(o.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:o,color:s,useBorderRadius:r,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=$e(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:o||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class lf extends zt{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const o=pe(i.text)?i.text.length:1;this._padding=$e(i.padding);const s=o*Ee(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:o,right:s,options:r}=this,a=r.align;let l=0,c,u,h;return this.isHorizontal()?(u=Fe(a,i,s),h=n+e,c=s-i):(r.position==="left"?(u=i+e,h=Fe(a,o,n),l=ee*-.5):(u=s-e,h=Fe(a,n,o),l=ee*.5),c=o-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=Ee(n.font),s=i.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Ti(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:Xd(n.align),textBaseline:"middle",translation:[r,a]})}}function Ak(t,e){const n=new lf({ctx:t.ctx,options:e,chart:t});Ve.configure(t,n,e),Ve.addBox(t,n),t.titleBlock=n}var Sy={id:"title",_element:lf,start(t,e,n){Ak(t,n)},stop(t){const e=t.titleBlock;Ve.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Ve.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Er=new WeakMap;var Mk={id:"subtitle",start(t,e,n){const i=new lf({ctx:t.ctx,options:n,chart:t});Ve.configure(t,i,n),Ve.addBox(t,i),Er.set(t,i)},stop(t){Ve.removeBox(t,Er.get(t)),Er.delete(t)},beforeUpdate(t,e,n){const i=Er.get(t);Ve.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Jo={average(t){if(!t.length)return!1;let e,n,i=new Set,o=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),o+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:o/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,o=Number.POSITIVE_INFINITY,s,r,a;for(s=0,r=t.length;s<r;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=au(e,c);u<o&&(o=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Vt(t,e){return e&&(pe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Xt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Nk(t,e){const{element:n,datasetIndex:i,index:o}=e,s=t.getDatasetMeta(i).controller,{label:r,value:a}=s.getLabelAndValue(o);return{chart:t,label:r,parsed:s.getParsed(o),raw:t.data.datasets[i].data[o],formattedValue:a,dataset:s.getDataset(),dataIndex:o,datasetIndex:i,element:n}}function jp(t,e){const n=t.chart.ctx,{body:i,footer:o,title:s}=t,{boxWidth:r,boxHeight:a}=e,l=Ee(e.bodyFont),c=Ee(e.titleFont),u=Ee(e.footerFont),h=s.length,p=o.length,g=i.length,x=$e(e.padding);let y=x.height,_=0,v=i.reduce((b,C)=>b+C.before.length+C.lines.length+C.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(y+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){const b=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=g*b+(v-g)*l.lineHeight+(v-1)*e.bodySpacing}p&&(y+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let S=0;const w=function(b){_=Math.max(_,n.measureText(b).width+S)};return n.save(),n.font=c.string,ie(t.title,w),n.font=l.string,ie(t.beforeBody.concat(t.afterBody),w),S=e.displayColors?r+2+e.boxPadding:0,ie(i,b=>{ie(b.before,w),ie(b.lines,w),ie(b.after,w)}),S=0,n.font=u.string,ie(t.footer,w),n.restore(),_+=x.width,{width:_,height:y}}function Pk(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function Rk(t,e,n,i){const{x:o,width:s}=i,r=n.caretSize+n.caretPadding;if(t==="left"&&o+s+r>e.width||t==="right"&&o-s-r<0)return!0}function Dk(t,e,n,i){const{x:o,width:s}=n,{width:r,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=o<=(a+l)/2?"left":"right":o<=s/2?c="left":o>=r-s/2&&(c="right"),Rk(c,t,e,n)&&(c="center"),c}function Wp(t,e,n){const i=n.yAlign||e.yAlign||Pk(t,n);return{xAlign:n.xAlign||e.xAlign||Dk(t,e,n,i),yAlign:i}}function Lk(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function Fk(t,e,n){let{y:i,height:o}=t;return e==="top"?i+=n:e==="bottom"?i-=o+n:i-=o/2,i}function Jp(t,e,n,i){const{caretSize:o,caretPadding:s,cornerRadius:r}=t,{xAlign:a,yAlign:l}=n,c=o+s,{topLeft:u,topRight:h,bottomLeft:p,bottomRight:g}=mi(r);let x=Lk(e,a);const y=Fk(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(u,p)+o:a==="right"&&(x+=Math.max(h,g)+o),{x:Ie(x,0,i.width-e.width),y:Ie(y,0,i.height-e.height)}}function kr(t,e,n){const i=$e(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Yp(t){return Vt([],Xt(t))}function zk(t,e,n){return Qn(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Kp(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const wy={beforeTitle:Kt,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Kt,beforeBody:Kt,beforeLabel:Kt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return K(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Kt,afterBody:Kt,beforeFooter:Kt,footer:Kt,afterFooter:Kt};function Xe(t,e,n,i){const o=t[e].call(n,i);return typeof o>"u"?wy[e].call(n,i):o}class gu extends zt{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),o=i.enabled&&n.options.animation&&i.animations,s=new Qv(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=zk(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,o=Xe(i,"beforeTitle",this,e),s=Xe(i,"title",this,e),r=Xe(i,"afterTitle",this,e);let a=[];return a=Vt(a,Xt(o)),a=Vt(a,Xt(s)),a=Vt(a,Xt(r)),a}getBeforeBody(e,n){return Yp(Xe(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,o=[];return ie(e,s=>{const r={before:[],lines:[],after:[]},a=Kp(i,s);Vt(r.before,Xt(Xe(a,"beforeLabel",this,s))),Vt(r.lines,Xe(a,"label",this,s)),Vt(r.after,Xt(Xe(a,"afterLabel",this,s))),o.push(r)}),o}getAfterBody(e,n){return Yp(Xe(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,o=Xe(i,"beforeFooter",this,e),s=Xe(i,"footer",this,e),r=Xe(i,"afterFooter",this,e);let a=[];return a=Vt(a,Xt(o)),a=Vt(a,Xt(s)),a=Vt(a,Xt(r)),a}_createItems(e){const n=this._active,i=this.chart.data,o=[],s=[],r=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Nk(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,p)=>e.filter(u,h,p,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),ie(a,u=>{const h=Kp(e.callbacks,u);o.push(Xe(h,"labelColor",this,u)),s.push(Xe(h,"labelPointStyle",this,u)),r.push(Xe(h,"labelTextColor",this,u))}),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=r,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),o=this._active;let s,r=[];if(!o.length)this.opacity!==0&&(s={opacity:0});else{const a=Jo[i.position].call(this,o,this._eventPosition);r=this._createItems(i),this.title=this.getTitle(r,i),this.beforeBody=this.getBeforeBody(r,i),this.body=this.getBody(r,i),this.afterBody=this.getAfterBody(r,i),this.footer=this.getFooter(r,i);const l=this._size=jp(this,i),c=Object.assign({},a,l),u=Wp(this.chart,i,c),h=Jp(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,o){const s=this.getCaretPosition(e,i,o);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:o,yAlign:s}=this,{caretSize:r,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=mi(a),{x:p,y:g}=e,{width:x,height:y}=n;let _,v,S,w,b,C;return s==="center"?(b=g+y/2,o==="left"?(_=p,v=_-r,w=b+r,C=b-r):(_=p+x,v=_+r,w=b-r,C=b+r),S=_):(o==="left"?v=p+Math.max(l,u)+r:o==="right"?v=p+x-Math.max(c,h)-r:v=this.caretX,s==="top"?(w=g,b=w-r,_=v-r,S=v+r):(w=g+y,b=w+r,_=v+r,S=v-r),C=w),{x1:_,x2:v,x3:S,y1:w,y2:b,y3:C}}drawTitle(e,n,i){const o=this.title,s=o.length;let r,a,l;if(s){const c=eo(i.rtl,this.x,this.width);for(e.x=kr(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",r=Ee(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=r.string,l=0;l<s;++l)n.fillText(o[l],c.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,o,s){const r=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=Ee(s.bodyFont),h=kr(this,"left",s),p=o.x(h),g=l<u.lineHeight?(u.lineHeight-l)/2:0,x=n.y+g;if(s.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=o.leftForLtr(p,c)+c/2,v=x+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,cu(e,y,_,v),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,cu(e,y,_,v)}else{e.lineWidth=X(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const y=o.leftForLtr(p,c),_=o.leftForLtr(o.xPlus(p,1),c-2),v=mi(r.borderRadius);Object.values(v).some(S=>S!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,zs(e,{x:y,y:x,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),zs(e,{x:_,y:x+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(y,x,c,l),e.strokeRect(y,x,c,l),e.fillStyle=r.backgroundColor,e.fillRect(_,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:o}=this,{bodySpacing:s,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=Ee(i.bodyFont);let p=h.lineHeight,g=0;const x=eo(i.rtl,this.x,this.width),y=function(k){n.fillText(k,x.x(e.x+g),e.y+p/2),e.y+=p+s},_=x.textAlign(r);let v,S,w,b,C,T,E;for(n.textAlign=r,n.textBaseline="middle",n.font=h.string,e.x=kr(this,_,i),n.fillStyle=i.bodyColor,ie(this.beforeBody,y),g=a&&_!=="right"?r==="center"?c/2+u:c+2+u:0,b=0,T=o.length;b<T;++b){for(v=o[b],S=this.labelTextColors[b],n.fillStyle=S,ie(v.before,y),w=v.lines,a&&w.length&&(this._drawColorBox(n,e,b,x,i),p=Math.max(h.lineHeight,l)),C=0,E=w.length;C<E;++C)y(w[C]),p=h.lineHeight;ie(v.after,y)}g=0,p=h.lineHeight,ie(this.afterBody,y),e.y-=s}drawFooter(e,n,i){const o=this.footer,s=o.length;let r,a;if(s){const l=eo(i.rtl,this.x,this.width);for(e.x=kr(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",r=Ee(i.footerFont),n.fillStyle=i.footerColor,n.font=r.string,a=0;a<s;++a)n.fillText(o[a],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+i.footerSpacing}}drawBackground(e,n,i,o){const{xAlign:s,yAlign:r}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:p,bottomLeft:g,bottomRight:x}=mi(o.cornerRadius);n.fillStyle=o.backgroundColor,n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.beginPath(),n.moveTo(a+h,l),r==="top"&&this.drawCaret(e,n,i,o),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),r==="center"&&s==="right"&&this.drawCaret(e,n,i,o),n.lineTo(a+c,l+u-x),n.quadraticCurveTo(a+c,l+u,a+c-x,l+u),r==="bottom"&&this.drawCaret(e,n,i,o),n.lineTo(a+g,l+u),n.quadraticCurveTo(a,l+u,a,l+u-g),r==="center"&&s==="left"&&this.drawCaret(e,n,i,o),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),o.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,o=i&&i.x,s=i&&i.y;if(o||s){const r=Jo[e.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=jp(this,e),l=Object.assign({},r,this._size),c=Wp(n,e,l),u=Jp(e,l,c,n);(o._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const o={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const r=$e(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,o,n),qv(e,n.textDirection),s.y+=r.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),jv(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,o=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Aa(i,o),r=this._positionChanged(o,n);(s||r)&&(this._active=o,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,s=this._active||[],r=this._getActiveElements(e,s,n,i),a=this._positionChanged(r,e),l=n||!Aa(r,s)||a;return l&&(this._active=r,(o.enabled||o.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,o){const s=this.options;if(e.type==="mouseout")return[];if(!o)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&r.reverse(),r}_positionChanged(e,n){const{caretX:i,caretY:o,options:s}=this,r=Jo[s.position].call(this,e,n);return r!==!1&&(i!==r.x||o!==r.y)}}N(gu,"positioners",Jo);var by={id:"tooltip",_element:gu,positioners:Jo,afterInit(t,e,n){n&&(t.tooltip=new gu({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:wy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Uk=Object.freeze({__proto__:null,Colors:ek,Decimation:ok,Filler:vy,Legend:_y,SubTitle:Mk,Title:Sy,Tooltip:by});const Ok=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Vk(t,e,n,i){const o=t.indexOf(e);if(o===-1)return Ok(t,e,n,i);const s=t.lastIndexOf(e);return o!==s?n:o}const Bk=(t,e)=>t===null?null:Ie(Math.round(t),0,e);function Qp(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Fa extends Ks{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:o,label:s}of n)i[o]===s&&i.splice(o,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(K(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:Vk(i,e,W(n,e),this._addedLabels),Bk(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(o=this.getLabels().length-1)),this.min=i,this.max=o}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,o=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let r=e;r<=n;r++)o.push({value:r});return o}getLabelForValue(e){return Qp.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}N(Fa,"id","category"),N(Fa,"defaults",{ticks:{callback:Qp}});function Hk(t,e){const n=[],{bounds:o,step:s,min:r,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:p}=t,g=s||1,x=u-1,{min:y,max:_}=e,v=!K(r),S=!K(a),w=!K(c),b=(_-y)/(h+1);let C=jh((_-y)/x/g)*g,T,E,k,A;if(C<1e-14&&!v&&!S)return[{value:y},{value:_}];A=Math.ceil(_/C)-Math.floor(y/C),A>x&&(C=jh(A*C/x/g)*g),K(l)||(T=Math.pow(10,l),C=Math.ceil(C*T)/T),o==="ticks"?(E=Math.floor(y/C)*C,k=Math.ceil(_/C)*C):(E=y,k=_),v&&S&&s&&UC((a-r)/s,C/1e3)?(A=Math.round(Math.min((a-r)/C,u)),C=(a-r)/A,E=r,k=a):w?(E=v?r:E,k=S?a:k,A=c-1,C=(k-E)/A):(A=(k-E)/C,cs(A,Math.round(A),C/1e3)?A=Math.round(A):A=Math.ceil(A));const I=Math.max(Wh(C),Wh(E));T=Math.pow(10,K(l)?I:l),E=Math.round(E*T)/T,k=Math.round(k*T)/T;let L=0;for(v&&(p&&E!==r?(n.push({value:r}),E<r&&L++,cs(Math.round((E+L*C)*T)/T,r,Xp(r,b,t))&&L++):E<r&&L++);L<A;++L){const B=Math.round((E+L*C)*T)/T;if(S&&B>a)break;n.push({value:B})}return S&&p&&k!==a?n.length&&cs(n[n.length-1].value,a,Xp(a,b,t))?n[n.length-1].value=a:n.push({value:a}):(!S||k===a)&&n.push({value:k}),n}function Xp(t,e,{horizontal:n,minRotation:i}){const o=Mt(i),s=(n?Math.sin(o):Math.cos(o))||.001,r=.75*e*(""+t).length;return Math.min(e/s,r)}class za extends Ks{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return K(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:o,max:s}=this;const r=l=>o=n?o:l,a=l=>s=i?s:l;if(e){const l=Jt(o),c=Jt(s);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(o===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||r(o-l)}this.min=o,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,o;return i?(o=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),n=n||11),n&&(o=Math.min(n,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,r=Hk(o,s);return e.bounds==="ticks"&&Iv(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const o=(i-n)/Math.max(e.length-1,1)/2;n-=o,i+=o}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Ys(e,this.chart.options.locale,this.options.ticks.format)}}class Ua extends za{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=_e(e)?e:0,this.max=_e(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Mt(this.options.ticks.minRotation),o=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/o))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}N(Ua,"id","linear"),N(Ua,"defaults",{ticks:{callback:ll.formatters.numeric}});const Os=t=>Math.floor(Nn(t)),ii=(t,e)=>Math.pow(10,Os(t)+e);function Zp(t){return t/Math.pow(10,Os(t))===1}function em(t,e,n){const i=Math.pow(10,n),o=Math.floor(t/i);return Math.ceil(e/i)-o}function $k(t,e){const n=e-t;let i=Os(n);for(;em(t,e,i)>10;)i++;for(;em(t,e,i)<10;)i--;return Math.min(i,Os(t))}function Gk(t,{min:e,max:n}){e=rt(t.min,e);const i=[],o=Os(e);let s=$k(e,n),r=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=o>s?Math.pow(10,o):0,c=Math.round((e-l)*r)/r,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,s)),p=rt(t.min,Math.round((l+u+h*Math.pow(10,s))*r)/r);for(;p<n;)i.push({value:p,major:Zp(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,r=s>=0?1:r),p=Math.round((l+u+h*Math.pow(10,s))*r)/r;const g=rt(t.max,p);return i.push({value:g,major:Zp(g),significand:h}),i}class xu extends Ks{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=za.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return _e(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=_e(e)?Math.max(0,e):null,this.max=_e(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!_e(this._userMin)&&(this.min=e===ii(this.min,0)?ii(this.min,-1):ii(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,o=this.max;const s=a=>i=e?i:a,r=a=>o=n?o:a;i===o&&(i<=0?(s(1),r(10)):(s(ii(i,-1)),r(ii(o,1)))),i<=0&&s(ii(o,-1)),o<=0&&r(ii(i,1)),this.min=i,this.max=o}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=Gk(n,this);return e.bounds==="ticks"&&Iv(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Ys(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Nn(e),this._valueRange=Nn(this.max)-Nn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Nn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}N(xu,"id","logarithmic"),N(xu,"defaults",{ticks:{callback:ll.formatters.logarithmic,major:{enabled:!0}}});function vu(t){const e=t.ticks;if(e.display&&t.display){const n=$e(e.backdropPadding);return W(e.font&&e.font.size,me.font.size)+n.height}return 0}function qk(t,e,n){return n=pe(n)?n:[n],{w:t1(t,e.string,n),h:n.length*e.lineHeight}}function tm(t,e,n,i,o){return t===i||t===o?{start:e-n/2,end:e+n/2}:t<i||t>o?{start:e-n,end:e}:{start:e,end:e+n}}function jk(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],o=[],s=t._pointLabels.length,r=t.options.pointLabels,a=r.centerPointLabels?ee/s:0;for(let l=0;l<s;l++){const c=r.setContext(t.getPointLabelContext(l));o[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+o[l],a),h=Ee(c.font),p=qk(t.ctx,h,t._pointLabels[l]);i[l]=p;const g=ze(t.getIndexAngle(l)+a),x=Math.round(Kd(g)),y=tm(x,u.x,p.w,0,180),_=tm(x,u.y,p.h,90,270);Wk(n,e,g,y,_)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=Kk(t,i,o)}function Wk(t,e,n,i,o){const s=Math.abs(Math.sin(n)),r=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),o.start<e.t?(l=(e.t-o.start)/r,t.t=Math.min(t.t,e.t-l)):o.end>e.b&&(l=(o.end-e.b)/r,t.b=Math.max(t.b,e.b+l))}function Jk(t,e,n){const i=t.drawingArea,{extra:o,additionalAngle:s,padding:r,size:a}=n,l=t.getPointPosition(e,i+o+r,s),c=Math.round(Kd(ze(l.angle+we))),u=Zk(l.y,a.h,c),h=Qk(c),p=Xk(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:p,top:u,right:p+a.w,bottom:u+a.h}}function Yk(t,e){if(!e)return!0;const{left:n,top:i,right:o,bottom:s}=t;return!(an({x:n,y:i},e)||an({x:n,y:s},e)||an({x:o,y:i},e)||an({x:o,y:s},e))}function Kk(t,e,n){const i=[],o=t._pointLabels.length,s=t.options,{centerPointLabels:r,display:a}=s.pointLabels,l={extra:vu(s)/2,additionalAngle:r?ee/o:0};let c;for(let u=0;u<o;u++){l.padding=n[u],l.size=e[u];const h=Jk(t,u,l);i.push(h),a==="auto"&&(h.visible=Yk(h,c),h.visible&&(c=h))}return i}function Qk(t){return t===0||t===180?"center":t<180?"left":"right"}function Xk(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function Zk(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function eI(t,e,n){const{left:i,top:o,right:s,bottom:r}=n,{backdropColor:a}=e;if(!K(a)){const l=mi(e.borderRadius),c=$e(e.backdropPadding);t.fillStyle=a;const u=i-c.left,h=o-c.top,p=s-i+c.width,g=r-o+c.height;Object.values(l).some(x=>x!==0)?(t.beginPath(),zs(t,{x:u,y:h,w:p,h:g,radius:l}),t.fill()):t.fillRect(u,h,p,g)}}function tI(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let o=e-1;o>=0;o--){const s=t._pointLabelItems[o];if(!s.visible)continue;const r=i.setContext(t.getPointLabelContext(o));eI(n,r,s);const a=Ee(r.font),{x:l,y:c,textAlign:u}=s;Ti(n,t._pointLabels[o],l,c+a.lineHeight/2,a,{color:r.color,textAlign:u,textBaseline:"middle"})}}function Cy(t,e,n,i){const{ctx:o}=t;if(n)o.arc(t.xCenter,t.yCenter,e,0,de);else{let s=t.getPointPosition(0,e);o.moveTo(s.x,s.y);for(let r=1;r<i;r++)s=t.getPointPosition(r,e),o.lineTo(s.x,s.y)}}function nI(t,e,n,i,o){const s=t.ctx,r=e.circular,{color:a,lineWidth:l}=e;!r&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(o.dash||[]),s.lineDashOffset=o.dashOffset,s.beginPath(),Cy(t,n,r,i),s.closePath(),s.stroke(),s.restore())}function iI(t,e,n){return Qn(t,{label:n,index:e,type:"pointLabel"})}class Yo extends za{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=$e(vu(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=_e(e)&&!isNaN(e)?e:0,this.max=_e(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/vu(this.options))}generateTickLabels(e){za.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const o=ae(this.options.pointLabels.callback,[n,i],this);return o||o===0?o:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?jk(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,o){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,o))}getIndexAngle(e){const n=de/(this._pointLabels.length||1),i=this.options.startAngle||0;return ze(e*n+Mt(i))}getDistanceFromCenterForValue(e){if(K(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(K(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return iI(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const o=this.getIndexAngle(e)-we+i;return{x:Math.cos(o)*n+this.xCenter,y:Math.sin(o)*n+this.yCenter,angle:o}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:o,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:o,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),Cy(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:o,border:s}=n,r=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&tI(this,r),o.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const p=this.getContext(h),g=o.setContext(p),x=s.setContext(p);nI(this,g,l,r,x)}}),i.display){for(e.save(),a=r-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:p}=u;!p||!h||(e.lineWidth=p,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const o=this.getIndexAngle(0);let s,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(o),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=Ee(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,r=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=$e(c.backdropPadding);e.fillRect(-r/2-h.left,-s-u.size/2-h.top,r+h.width,u.size+h.height)}Ti(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}N(Yo,"id","radialLinear"),N(Yo,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ll.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),N(Yo,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),N(Yo,"descriptors",{angleLines:{_fallback:"grid"}});const pl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},et=Object.keys(pl);function nm(t,e){return t-e}function im(t,e){if(K(e))return null;const n=t._adapter,{parser:i,round:o,isoWeekday:s}=t._parseOpts;let r=e;return typeof i=="function"&&(r=i(r)),_e(r)||(r=typeof i=="string"?n.parse(r,i):n.parse(r)),r===null?null:(o&&(r=o==="week"&&(fo(s)||s===!0)?n.startOf(r,"isoWeek",s):n.startOf(r,o)),+r)}function om(t,e,n,i){const o=et.length;for(let s=et.indexOf(t);s<o-1;++s){const r=pl[et[s]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((n-e)/(a*r.size))<=i)return et[s]}return et[o-1]}function oI(t,e,n,i,o){for(let s=et.length-1;s>=et.indexOf(n);s--){const r=et[s];if(pl[r].common&&t._adapter.diff(o,i,r)>=e-1)return r}return et[n?et.indexOf(n):0]}function sI(t){for(let e=et.indexOf(t)+1,n=et.length;e<n;++e)if(pl[et[e]].common)return et[e]}function sm(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:o}=Qd(n,e),s=n[i]>=e?n[i]:n[o];t[s]=!0}}function rI(t,e,n,i){const o=t._adapter,s=+o.startOf(e[0].value,i),r=e[e.length-1].value;let a,l;for(a=s;a<=r;a=+o.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function rm(t,e,n){const i=[],o={},s=e.length;let r,a;for(r=0;r<s;++r)a=e[r],o[a]=r,i.push({value:a,major:!1});return s===0||!n?i:rI(t,i,o,n)}class Vs extends Ks{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),o=this._adapter=new vT._date(e.adapters.date);o.init(n),ls(i.displayFormats,o.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:im(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:o,max:s,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(o=Math.min(o,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),o=_e(o)&&!isNaN(o)?o:+n.startOf(Date.now(),i),s=_e(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(o,s-1),this.max=Math.max(o+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,o=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const s=this.min,r=this.max,a=HC(o,s,r);return this._unit=n.unit||(i.autoSkip?om(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):oI(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:sI(this._unit),this.initOffsets(o),e.reverse&&a.reverse(),rm(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,o,s;this.options.offset&&e.length&&(o=this.getDecimalForValue(e[0]),e.length===1?n=1-o:n=(this.getDecimalForValue(e[1])-o)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const r=e.length<3?.5:.25;n=Ie(n,0,r),i=Ie(i,0,r),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,o=this.options,s=o.time,r=s.unit||om(s.minUnit,n,i,this._getLabelCapacity(n)),a=W(o.ticks.stepSize,1),l=r==="week"?s.isoWeekday:!1,c=fo(l)||l===!0,u={};let h=n,p,g;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":r),e.diff(i,n,r)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+r);const x=o.ticks.source==="data"&&this.getDataTimestamps();for(p=h,g=0;p<i;p=+e.add(p,a,r),g++)sm(u,p,x);return(p===i||o.bounds==="ticks"||g===1)&&sm(u,p,x),Object.keys(u).sort(nm).map(y=>+y)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const o=this.options.time.displayFormats,s=this._unit,r=n||o[s];return this._adapter.format(e,r)}_tickFormatFunction(e,n,i,o){const s=this.options,r=s.ticks.callback;if(r)return ae(r,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],p=i[n],g=c&&h&&p&&p.major;return this._adapter.format(e,o||(g?h:u))}generateTickLabels(e){let n,i,o;for(n=0,i=e.length;n<i;++n)o=e[n],o.label=this._tickFormatFunction(o.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,o=Mt(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(o),r=Math.sin(o),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*r,h:i*r+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,o=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,rm(this,[e],this._majorUnit),o),r=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(n=0,i=o.length;n<i;++n)e=e.concat(o[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const o=this.getLabels();for(n=0,i=o.length;n<i;++n)e.push(im(this,o[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Nv(e.sort(nm))}}N(Vs,"id","time"),N(Vs,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ir(t,e,n){let i=0,o=t.length-1,s,r,a,l;n?(e>=t[i].pos&&e<=t[o].pos&&({lo:i,hi:o}=rn(t,"pos",e)),{pos:s,time:a}=t[i],{pos:r,time:l}=t[o]):(e>=t[i].time&&e<=t[o].time&&({lo:i,hi:o}=rn(t,"time",e)),{time:s,pos:a}=t[i],{time:r,pos:l}=t[o]);const c=r-s;return c?a+(l-a)*(e-s)/c:a}class yu extends Vs{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ir(n,this.min),this._tableRange=Ir(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,o=[],s=[];let r,a,l,c,u;for(r=0,a=e.length;r<a;++r)c=e[r],c>=n&&c<=i&&o.push(c);if(o.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(r=0,a=o.length;r<a;++r)u=o[r+1],l=o[r-1],c=o[r],Math.round((u+l)/2)!==c&&s.push({time:c,pos:r/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((o,s)=>o-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Ir(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Ir(this._table,i*this._tableRange+this._minPos,!0)}}N(yu,"id","timeseries"),N(yu,"defaults",Vs.defaults);var aI=Object.freeze({__proto__:null,CategoryScale:Fa,LinearScale:Ua,LogarithmicScale:xu,RadialLinearScale:Yo,TimeScale:Vs,TimeSeriesScale:yu});const lI=[xT,WE,Uk,aI];Qs.register(...lI);const Ty="label";function am(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function cI(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Ey(t,e){t.labels=e}function ky(t,e,n=Ty){const i=[];t.datasets=e.map(o=>{const s=t.datasets.find(r=>r[n]===o[n]);return!s||!o.data||i.includes(s)?{...o}:(i.push(s),Object.assign(s,o),s)})}function uI(t,e=Ty){const n={labels:[],datasets:[]};return Ey(n,t.labels),ky(n,t.datasets,e),n}function dI(t,e){const{height:n=150,width:i=300,redraw:o=!1,datasetIdKey:s,type:r,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...p}=t,g=je.useRef(null),x=je.useRef(null),y=()=>{g.current&&(x.current=new Qs(g.current,{type:r,data:uI(a,s),options:l&&{...l},plugins:c}),am(e,x.current))},_=()=>{am(e,null),x.current&&(x.current.destroy(),x.current=null)};return je.useEffect(()=>{!o&&x.current&&l&&cI(x.current,l)},[o,l]),je.useEffect(()=>{!o&&x.current&&Ey(x.current.config.data,a.labels)},[o,a.labels]),je.useEffect(()=>{!o&&x.current&&a.datasets&&ky(x.current.config.data,a.datasets,s)},[o,a.datasets]),je.useEffect(()=>{x.current&&(o?(_(),setTimeout(y)):x.current.update(h))},[o,l,a.labels,a.datasets,h]),je.useEffect(()=>{x.current&&(_(),setTimeout(y))},[r]),je.useEffect(()=>(y(),()=>_()),[]),m.jsx("canvas",{ref:g,role:"img",height:n,width:i,...p,children:u})}const fI=je.forwardRef(dI);function Iy(t,e){return Qs.register(e),je.forwardRef((n,i)=>m.jsx(fI,{...n,ref:i,type:t}))}const hI=Iy("line",fs),pI=Iy("radar",ps),mI=({scores:t,composites:e})=>{const n={labels:["Fitness","Sonno","Dietetica","Stress","Microbioma","ENERGIA","MENTE","EMOZIONI"],datasets:[{label:"Il Tuo Profilo Benessere",data:[t.fitness,t.sleep,t.diet,t.stress,t.microbiome,e.body,e.mind,e.emotions],backgroundColor:"rgba(14, 165, 233, 0.2)",borderColor:"rgba(14, 165, 233, 1)",borderWidth:2,pointBackgroundColor:"#fff",pointBorderColor:"rgba(14, 165, 233, 1)",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(14, 165, 233)",spanGaps:!0},{label:"Obiettivo Ottimale",data:[80,80,80,80,80,80,80,80],backgroundColor:"rgba(16, 185, 129, 0.05)",borderColor:"rgba(16, 185, 129, 0.4)",borderWidth:1,pointRadius:0,borderDash:[5,5]}]},i={scales:{r:{suggestedMin:0,suggestedMax:100,ticks:{stepSize:20,backdropColor:"transparent",font:{size:10}},pointLabels:{font:{size:13,weight:"bold",family:"'Inter', sans-serif"},color:"#475569"}}},plugins:{legend:{position:"bottom",labels:{font:{family:"'Inter', sans-serif",size:12}}}},maintainAspectRatio:!1};return m.jsx("div",{className:"w-full h-[400px] flex justify-center items-center",children:m.jsx(pI,{data:n,options:i})})},Ay=({className:t})=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:t||"w-10 h-10 text-white drop-shadow-md",children:[m.jsx("path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"}),m.jsx("path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"})]}),My=({className:t})=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:t||"w-10 h-10 text-white drop-shadow-md",children:[m.jsx("circle",{cx:"12",cy:"5",r:"2"}),m.jsx("path",{d:"M12 7v5"}),m.jsx("path",{d:"M8 9l4-2 4 2"}),m.jsx("path",{d:"M8 14l4 2 4-2"}),m.jsx("path",{d:"M9 22l3-6 3 6"}),m.jsx("path",{d:"M12 12v3"})]}),Ny=({className:t})=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:t||"w-10 h-10 text-white drop-shadow-md",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-50"}),m.jsx("path",{d:"M12 8a4 4 0 1 0 0 8 4 4 0 1 0 0-8z"}),m.jsx("path",{d:"M12 2v2"}),m.jsx("path",{d:"M12 20v2"}),m.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),m.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),m.jsx("path",{d:"M2 12h2"}),m.jsx("path",{d:"M20 12h2"}),m.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),m.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),gI=({scores:t,composites:e,gender:n})=>{const i="body_female.png",o="body_male.png",s=x=>x===null?"#94a3b8":x<40?"#ef4444":x<70?"#f59e0b":"#10b981",a=Object.values(t).filter(x=>x!==null),l=a.length,c=Math.round(l/5*100),u=a.reduce((x,y)=>x+y,0),h=l>0?Math.round(u/l):null,p=x=>x===null?"text-slate-400":x<=50?"text-red-500":x<=60?"text-amber-500":x<=80?"text-emerald-500":"text-sky-500",g=({x,y,align:_,label:v,value:S,targetY:w})=>{const b=s(S),C=_==="end"?180:220;return m.jsxs("g",{className:"transition-all duration-300 hover:opacity-100 opacity-90 cursor-default group",children:[m.jsx("line",{x1:x,y1:y,x2:C,y2:w,stroke:b,strokeWidth:"2",strokeDasharray:"4,2",opacity:"0.4",className:"group-hover:opacity-100 transition-opacity"}),m.jsx("rect",{x:_==="end"?x-52:x,y:y-16,width:"54",height:"34",rx:"12",fill:"white",stroke:b,strokeWidth:"2.5",filter:"drop-shadow(0px 3px 3px rgba(0,0,0,0.15))"}),m.jsx("text",{x:_==="end"?x-25:x+27,y:y+1,textAnchor:"middle",dominantBaseline:"middle",fill:b,fontWeight:"800",fontSize:"15",fontFamily:"sans-serif",children:S!==null?`${S}%`:"-"}),m.jsx("text",{x:_==="end"?x-60:x+62,y,textAnchor:_,dominantBaseline:"middle",fill:"#475569",fontSize:"11",fontWeight:"800",fontFamily:"sans-serif",style:{textTransform:"uppercase",letterSpacing:"0.5px"},children:v}),m.jsx("circle",{cx:C,cy:w,r:"4",fill:b,stroke:"white",strokeWidth:"2"})]})};return m.jsxs("div",{className:"flex flex-col w-full bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm h-full relative",children:[m.jsx("div",{className:"px-6 py-4 bg-white border-b border-slate-100 z-10",children:m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Wellness Index"}),m.jsx("span",{className:`text-3xl font-extrabold ${p(h)} leading-none`,children:h!==null?`${h}%`:"-"})]}),m.jsxs("div",{className:"flex flex-col items-end w-1/2",children:[m.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:["Profilo ",c,"%"]}),m.jsx("div",{className:"w-full bg-slate-100 rounded-full h-1.5 overflow-hidden",children:m.jsx("div",{className:"bg-gradient-to-r from-sky-400 to-sky-600 h-1.5 rounded-full transition-all duration-1000 ease-out",style:{width:`${c}%`}})})]})]})}),m.jsxs("div",{className:"relative flex-grow flex flex-col items-center justify-center p-2 bg-gradient-to-b from-white via-sky-50/30 to-slate-100/50 min-h-[400px]",children:[m.jsxs("svg",{viewBox:"0 0 400 480",className:"w-full h-auto max-h-[480px] drop-shadow-xl select-none",children:[m.jsx("defs",{children:m.jsxs("filter",{id:"bodyGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[m.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),m.jsxs("feMerge",{children:[m.jsx("feMergeNode",{in:"coloredBlur"}),m.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),m.jsx("image",{href:n==="male"?o:i,x:"50",y:"-20",width:"300",height:"400",preserveAspectRatio:"xMidYMid meet",filter:"url(#bodyGlow)",opacity:"0.9"}),m.jsx(g,{x:110,y:60,align:"end",label:"SONNO",value:t.sleep,targetY:60}),m.jsx(g,{x:290,y:60,align:"start",label:"STRESS",value:t.stress,targetY:60}),m.jsx(g,{x:290,y:160,align:"start",label:"FITNESS",value:t.fitness,targetY:160}),m.jsx(g,{x:110,y:260,align:"end",label:"DIETA",value:t.diet,targetY:260}),m.jsx(g,{x:290,y:260,align:"start",label:"MICROBIOMA",value:t.microbiome,targetY:280})]}),m.jsx("div",{className:"w-full px-4 pb-6",children:m.jsxs("div",{className:"flex flex-wrap justify-center items-start gap-4 sm:gap-8",children:[m.jsxs("div",{className:"flex flex-col items-center group cursor-default w-20 sm:w-24",children:[m.jsx("div",{className:`w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center border-4 ${e.body!==null?"border-emerald-500 text-emerald-800 bg-emerald-50":"border-slate-200 text-slate-400 bg-white"} shadow-xl shadow-emerald-100/50 group-hover:scale-105 transition-transform duration-300 relative z-10`,children:m.jsx("span",{className:"text-sm sm:text-lg font-extrabold",children:e.body!==null?`${e.body}%`:"-"})}),m.jsx("span",{className:"text-[10px] sm:text-xs font-bold text-slate-600 mt-2 mb-1 uppercase tracking-wide group-hover:text-emerald-700 transition-colors",children:"Energia"}),m.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-2xl overflow-hidden shadow-md bg-gradient-to-br from-emerald-400 to-teal-600 flex items-center justify-center group-hover:shadow-lg transition-all",children:m.jsx(My,{className:"w-6 h-6 sm:w-10 sm:h-10 text-white"})})]}),m.jsxs("div",{className:"flex flex-col items-center group cursor-default w-20 sm:w-24",children:[m.jsx("div",{className:`w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center border-4 ${e.mind!==null?"border-sky-500 text-sky-700 bg-sky-50":"border-slate-200 text-slate-400 bg-white"} shadow-lg group-hover:scale-105 transition-transform duration-300 relative z-10`,children:m.jsx("span",{className:"text-sm sm:text-lg font-extrabold",children:e.mind!==null?`${e.mind}%`:"-"})}),m.jsx("span",{className:"text-[10px] sm:text-xs font-bold text-slate-500 mt-2 mb-1 uppercase tracking-wide group-hover:text-sky-600 transition-colors",children:"Mente"}),m.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-2xl overflow-hidden shadow-md bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center group-hover:shadow-lg transition-all",children:m.jsx(Ay,{className:"w-6 h-6 sm:w-10 sm:h-10 text-white"})})]}),m.jsxs("div",{className:"flex flex-col items-center group cursor-default w-20 sm:w-24",children:[m.jsx("div",{className:`w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center border-4 ${e.emotions!==null?"border-orange-500 text-orange-700 bg-orange-50":"border-slate-200 text-slate-400 bg-white"} shadow-lg group-hover:scale-105 transition-transform duration-300 relative z-10`,children:m.jsx("span",{className:"text-sm sm:text-lg font-extrabold",children:e.emotions!==null?`${e.emotions}%`:"-"})}),m.jsx("span",{className:"text-[10px] sm:text-xs font-bold text-slate-500 mt-2 mb-1 uppercase tracking-wide group-hover:text-orange-600 transition-colors",children:"Emozioni"}),m.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-2xl overflow-hidden shadow-md bg-gradient-to-br from-orange-500 to-amber-500 flex items-center justify-center group-hover:shadow-lg transition-all",children:m.jsx(Ny,{className:"w-6 h-6 sm:w-10 sm:h-10 text-white"})})]})]})})]})]})};Qs.register(Fa,Ua,ms,ln,Sy,by,_y,vy);const to=(t,e,n)=>{const o=(e.getTime()-t.getTime())/(1e3*3600*24);return Math.sin(2*Math.PI*o/n)*100},xI=({birthDate:t,targetDate:e})=>{const n=[],i=[],o=[],s=[];for(let l=-2;l<=12;l++){const c=new Date(e);c.setDate(c.getDate()+l);const u=l===0?"Oggi":c.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit"});n.push(u),i.push(to(t,c,23)),o.push(to(t,c,28)),s.push(to(t,c,33))}const r={labels:n,datasets:[{label:"Fisico (Energia)",data:i,borderColor:"rgb(22, 163, 74)",backgroundColor:"rgba(22, 163, 74, 0.1)",tension:.4,pointRadius:l=>l.dataIndex===2?6:0,pointHoverRadius:6},{label:"Emozionale",data:o,borderColor:"rgb(249, 115, 22)",backgroundColor:"rgba(249, 115, 22, 0.1)",tension:.4,pointRadius:l=>l.dataIndex===2?6:0,pointHoverRadius:6},{label:"Intellettuale (Mente)",data:s,borderColor:"rgb(14, 165, 233)",backgroundColor:"rgba(14, 165, 233, 0.1)",tension:.4,pointRadius:l=>l.dataIndex===2?6:0,pointHoverRadius:6}]},a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1}},scales:{y:{min:-100,max:100,grid:{color:l=>l.tick.value===0?"rgba(0,0,0,0.3)":"rgba(0,0,0,0.05)",lineWidth:l=>l.tick.value===0?2:1},ticks:{display:!1}},x:{grid:{display:!1}}}};return m.jsx("div",{className:"w-full h-64",children:m.jsx(hI,{data:r,options:a})})},_u=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"m12 19-7-7 7-7"}),m.jsx("path",{d:"M19 12H5"})]}),vI={start:{daily:[{id:"start_d_new_0",title:"Meditare regolarmente",Icon:"",description:"1520 minuti prima di dormire.",points:5,remindable:!0,reminderConfig:{type:"daily",time:"22:00"}},{id:"start_d_new_1",title:"Orari regolari (mattina)",Icon:"",description:"Sveglia costante.",points:5},{id:"start_d_new_2",title:"Orari regolari (sera)",Icon:"",description:"Orario fisso per dormire.",points:5},{id:"start_d_new_3",title:"Stretching o movimento",Icon:"",description:"Durante la giornata.",points:5},{id:"start_d_new_4",title:"Evitare caffeina",Icon:"",description:"Nel pomeriggio e sera.",points:5},{id:"start_d_new_5",title:"Evitare alcol",Icon:"",description:"Nel pomeriggio e sera.",points:5},{id:"start_d_new_6",title:"Rilassamento muscolare",Icon:"",description:"Prima di dormire.",points:5},{id:"start_d_new_7",title:"Spegnere dispositivi",Icon:"",description:"Almeno 1h prima di dormire.",points:5},{id:"start_d_new_8",title:"Leggere un libro",Icon:"",description:"Attivit serale.",points:5},{id:"start_d_new_9",title:"Bagno caldo",Icon:"",description:"Relax serale.",points:5},{id:"start_d_new_10",title:"Tracciare abitudini",Icon:"",description:"Diario del sonno.",points:5},{id:"start_d_new_11",title:"Terapia binaurale",Icon:"",description:"Onde Alpha/Delta.",points:5},{id:"start_d_new_12",title:"Fitoterapia",Icon:"",description:"Se indicata.",points:5},{id:"start_d_new_13",title:"Idratazione",Icon:"",description:"8 bicchieri dacqua.",points:5,remindable:!0,reminderConfig:{type:"interval",hours:2,startHour:9,endHour:19}},{id:"start_d_new_14",title:"Oli essenziali",Icon:"",description:"Relax serale.",points:5},{id:"start_d_new_15",title:"Autocompassione",Icon:"",description:"Gentilezza verso s.",points:5},{id:"start_d_new_16",title:"Passeggiata allaperto",Icon:"",description:"1020 minuti.",points:5},{id:"start_d_new_17",title:"Gratitudine",Icon:"",description:"Esercizi positivi.",points:5},{id:"start_d_new_18",title:"Musica rilassante",Icon:"",description:"Ascolto consapevole.",points:5},{id:"start_d_new_19",title:"Creativit",Icon:"",description:"Disegno, scrittura, ecc.",points:5},{id:"start_d_new_20",title:"Limitare social media",Icon:"",description:"<30 min al giorno.",points:5},{id:"start_d_new_21",title:"Pianificare pasti",Icon:"",description:"Organizzazione settimanale.",points:5},{id:"start_d_new_22",title:"Verdure a foglia verde",Icon:"",description:"Almeno una porzione.",points:5},{id:"start_d_new_23",title:"Detox digitale",Icon:"",description:"1 giorno senza schermi.",points:10},{id:"start_d_new_24",title:"Meditazione serale (ripetuta)",Icon:"",description:"Seconda sessione.",points:5}]}},lm=[{day:1,message:"Il segreto per migliorarsi  non sprecare la vita in distrazioni.",quote:"Ogni passo  un investimento sulla tua forza futura.",category:"Attivit fisica"},{day:2,message:"Inizia osservando le tue giornate: cosa ti porta davvero avanti?",quote:"La qualit del sonno decide la qualit della tua giornata.",category:"Sonno"},{day:3,message:"Riconosci le attivit che ti allontanano dai tuoi obiettivi.",quote:"Il silenzio interiore  la tua vera forza.",category:"Ansia e stress"},{day:4,message:"Prima di tutto, definisci gli obiettivi che temi di affrontare.",quote:"Mangiare bene  il primo allenamento del corpo.",category:"Alimentazione"},{day:5,message:"Non lasciare che la paura del fallimento ti blocchi.",quote:"Il corpo si allena, la mente si libera.",category:"Attivit fisica"},{day:6,message:"Scrivi nero su bianco ci che vuoi cambiare.",quote:"Un intestino sano  un alleato silenzioso.",category:"Microbioma"},{day:7,message:"Elimina le distrazioni che non ti aiutano a realizzare il tuo obiettivo.",quote:"Dormire bene  il primo atto di cura verso te stesso.",category:"Sonno"},{day:8,message:"Ogni giorno togli un piccolo ostacolo dalla tua routine.",quote:"Trasforma la tensione in energia creativa.",category:"Ansia e stress"},{day:9,message:"Scegli con coraggio ci che ti fa crescere.",quote:"La semplicit nel piatto  ricchezza per la vita.",category:"Alimentazione"},{day:10,message:"Ricorda: il cambiamento richiede energia emotiva.",quote:"Respira: ogni respiro  un ritorno alla calma.",category:"Ansia e stress"},{day:11,message:"Preparati con azioni precise che diventeranno abitudini.",quote:"La diversit nel piatto crea armonia dentro di te.",category:"Microbioma"},{day:12,message:"Ogni nuova abitudine  un mattone della tua nuova vita.",quote:"Il sudore di oggi  la fiducia di domani.",category:"Attivit fisica"},{day:13,message:"Segna sul calendario la data: tra due settimane inizia il tuo cambiamento.",quote:"Unora di sonno persa  un giorno di energia rubata.",category:"Sonno"},{day:14,message:"Mancano pochi giorni: il tuo nuovo inizio  vicino.",quote:"Il microbioma  il giardino segreto della tua salute.",category:"Microbioma"}],cm=[{category:"Attivit fisica",text:"Ogni passo  un investimento sulla tua forza futura."},{category:"Attivit fisica",text:"La costanza batte la velocit: muoviti ogni giorno."},{category:"Attivit fisica",text:"Il corpo si allena, la mente si libera."},{category:"Attivit fisica",text:"Non serve essere perfetti, basta essere presenti."},{category:"Attivit fisica",text:"Il sudore di oggi  la fiducia di domani."},{category:"Attivit fisica",text:"Allenati per la versione migliore di te stesso, non per gli altri."},{category:"Sonno",text:"Il riposo  carburante: senza di lui non c energia."},{category:"Sonno",text:"Dormire bene  il primo atto di cura verso te stesso."},{category:"Sonno",text:"Il sonno ricarica la mente come la batteria di un telefono."},{category:"Sonno",text:"Chiudere gli occhi  aprire la porta alla rigenerazione."},{category:"Sonno",text:"Unora di sonno persa  un giorno di energia rubata."},{category:"Sonno",text:"La qualit del sonno decide la qualit della tua giornata."},{category:"Ansia e stress",text:"Respira: ogni respiro  un ritorno alla calma."},{category:"Ansia e stress",text:"Il controllo non  fuori,  dentro di te."},{category:"Ansia e stress",text:"La serenit nasce da piccoli gesti quotidiani."},{category:"Ansia e stress",text:"Non puoi fermare le onde, ma puoi imparare a surfare."},{category:"Ansia e stress",text:"Trasforma la tensione in energia creativa."},{category:"Ansia e stress",text:"Il silenzio interiore  la tua vera forza."},{category:"Alimentazione",text:"Mangiare bene  il primo allenamento del corpo."},{category:"Alimentazione",text:"Ogni scelta a tavola  un passo verso la salute."},{category:"Alimentazione",text:"Il cibo  medicina quotidiana."},{category:"Alimentazione",text:"Nutri il corpo, illumina la mente."},{category:"Alimentazione",text:"La semplicit nel piatto  ricchezza per la vita."},{category:"Alimentazione",text:"Mangiare consapevole  vivere consapevole."},{category:"Microbioma",text:"Il tuo benessere inizia dallequilibrio invisibile dentro di te."},{category:"Microbioma",text:"Prenditi cura del microbioma, e lui si prender cura di te."},{category:"Microbioma",text:"Un intestino sano  un alleato silenzioso."},{category:"Microbioma",text:"La diversit nel piatto crea armonia dentro di te."},{category:"Microbioma",text:"Il microbioma  il giardino segreto della tua salute."},{category:"Microbioma",text:"Piccoli cambiamenti alimentano grandi trasformazioni interiori."}];var yI={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _I,SI;function wI(){return{geminiUrl:_I,vertexUrl:SI}}function bI(t,e,n,i){var o,s;if(!(t!=null&&t.baseUrl)){const r=wI();return e?(o=r.vertexUrl)!==null&&o!==void 0?o:n:(s=r.geminiUrl)!==null&&s!==void 0?s:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vn{}function U(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const s=e[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function f(t,e,n){for(let s=0;s<e.length-1;s++){const r=e[s];if(r.endsWith("[]")){const a=r.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${r}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const u=l[c];f(u,e.slice(s+1),n[c])}else for(const c of l)f(c,e.slice(s+1),n)}return}else if(r.endsWith("[0]")){const a=r.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];f(l[0],e.slice(s+1),n);return}(!t[r]||typeof t[r]!="object")&&(t[r]={}),t=t[r]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const o=e[i];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in t){const r=t[s];return Array.isArray(r)?r.map(a=>d(a,e.slice(i+1),n)):n}else return n}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function CI(t,e){for(const[n,i]of Object.entries(e)){const o=n.split("."),s=i.split("."),r=new Set;let a=-1;for(let l=0;l<o.length;l++)if(o[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const c=s[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&r.add(c)}Su(t,o,s,0,r)}}function Su(t,e,n,i,o){if(i>=e.length||typeof t!="object"||t===null)return;const s=e[i];if(s.endsWith("[]")){const r=s.slice(0,-2),a=t;if(r in a&&Array.isArray(a[r]))for(const l of a[r])Su(l,e,n,i+1,o)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const r=t,a=Object.keys(r).filter(c=>!c.startsWith("_")&&!o.has(c)),l={};for(const c of a)l[c]=r[c];for(const[c,u]of Object.entries(l)){const h=[];for(const p of n.slice(i))p==="*"?h.push(c):h.push(p);f(r,h,u)}for(const c of a)delete r[c]}}else{const r=t;s in r&&Su(r[s],e,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TI(t){const e={},n=d(t,["operationName"]);n!=null&&f(e,["operationName"],n);const i=d(t,["resourceName"]);return i!=null&&f(e,["_url","resourceName"],i),e}function EI(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const i=d(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=d(t,["done"]);o!=null&&f(e,["done"],o);const s=d(t,["error"]);s!=null&&f(e,["error"],s);const r=d(t,["response","generateVideoResponse"]);return r!=null&&f(e,["response"],II(r)),e}function kI(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const i=d(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=d(t,["done"]);o!=null&&f(e,["done"],o);const s=d(t,["error"]);s!=null&&f(e,["error"],s);const r=d(t,["response"]);return r!=null&&f(e,["response"],AI(r)),e}function II(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>MI(r))),f(e,["generatedVideos"],s)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function AI(t){const e={},n=d(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>NI(r))),f(e,["generatedVideos"],s)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function MI(t){const e={},n=d(t,["video"]);return n!=null&&f(e,["video"],zI(n)),e}function NI(t){const e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],UI(n)),e}function PI(t){const e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function RI(t){const e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function DI(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const i=d(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=d(t,["done"]);o!=null&&f(e,["done"],o);const s=d(t,["error"]);s!=null&&f(e,["error"],s);const r=d(t,["response"]);return r!=null&&f(e,["response"],LI(r)),e}function LI(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["parent"]);i!=null&&f(e,["parent"],i);const o=d(t,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function Py(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const i=d(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=d(t,["done"]);o!=null&&f(e,["done"],o);const s=d(t,["error"]);s!=null&&f(e,["error"],s);const r=d(t,["response"]);return r!=null&&f(e,["response"],FI(r)),e}function FI(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["parent"]);i!=null&&f(e,["parent"],i);const o=d(t,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function zI(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const i=d(t,["encodedVideo"]);i!=null&&f(e,["videoBytes"],cf(i));const o=d(t,["encoding"]);return o!=null&&f(e,["mimeType"],o),e}function UI(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=d(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],cf(i));const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var um;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(um||(um={}));var dm;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(dm||(dm={}));var fm;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(fm||(fm={}));var Dn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Dn||(Dn={}));var hm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(hm||(hm={}));var pm;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(pm||(pm={}));var mm;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(mm||(mm={}));var gm;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(gm||(gm={}));var xm;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(xm||(xm={}));var vm;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(vm||(vm={}));var ym;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ym||(ym={}));var _m;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(_m||(_m={}));var Sm;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Sm||(Sm={}));var wm;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(wm||(wm={}));var bm;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(bm||(bm={}));var Cm;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Cm||(Cm={}));var Tm;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Tm||(Tm={}));var Em;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Em||(Em={}));var km;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(km||(km={}));var Oa;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Oa||(Oa={}));var Im;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Im||(Im={}));var Am;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Am||(Am={}));var Mm;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Mm||(Mm={}));var wu;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(wu||(wu={}));var Nm;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Nm||(Nm={}));var Pm;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Pm||(Pm={}));var Rm;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Rm||(Rm={}));var Dm;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Dm||(Dm={}));var Lm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Lm||(Lm={}));var Fm;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Fm||(Fm={}));var zm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(zm||(zm={}));var Um;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Um||(Um={}));var Om;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Om||(Om={}));var Vm;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Vm||(Vm={}));var Bm;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Bm||(Bm={}));var Hm;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Hm||(Hm={}));var $m;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})($m||($m={}));var Gm;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Gm||(Gm={}));var qm;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(qm||(qm={}));var jm;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(jm||(jm={}));var Wm;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Wm||(Wm={}));var Jm;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Jm||(Jm={}));var Ym;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Ym||(Ym={}));var Km;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Km||(Km={}));var Qm;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Qm||(Qm={}));var Xm;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Xm||(Xm={}));var Zm;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Zm||(Zm={}));var eg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(eg||(eg={}));var tg;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(tg||(tg={}));var ng;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ng||(ng={}));var ig;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ig||(ig={}));var og;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(og||(og={}));var sg;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(sg||(sg={}));var rg;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(rg||(rg={}));var ag;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(ag||(ag={}));var ji;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ji||(ji={}));class bu{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Uo{get text(){var e,n,i,o,s,r,a,l;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const h=[];for(const p of(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,x]of Object.entries(p))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(x!==null||x!==void 0)&&h.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;u=!0,c+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var e,n,i,o,s,r,a,l;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const u=[];for(const h of(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[p,g]of Object.entries(h))p!=="inlineData"&&(g!==null||g!==void 0)&&u.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,i,o,s,r,a,l;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,i,o,s,r,a,l,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,i,o,s,r,a,l,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class lg{}class cg{}class OI{}class VI{}class BI{}class HI{}class ug{}class dg{}class fg{}class $I{}class Va{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Va;let o;const s=e;return n?o=kI(s):o=EI(s),Object.assign(i,o),i}}class hg{}class pg{}class mg{}class gg{}class GI{}class qI{}class jI{}class uf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new uf,s=DI(e);return Object.assign(i,s),i}}class WI{}class JI{}class YI{}class xg{}class KI{get text(){var e,n,i;let o="",s=!1;const r=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&r.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,o+=a.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var e,n,i;let o="";const s=[];for(const r of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[a,l]of Object.entries(r))a!=="inlineData"&&l!==null&&s.push(a);r.inlineData&&typeof r.inlineData.data=="string"&&(o+=atob(r.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class QI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class df{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new df,s=Py(e);return Object.assign(i,s),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function te(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Ry(t,e){const n=te(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Dy(t){return Array.isArray(t)?t.map(e=>Ba(e)):[Ba(t)]}function Ba(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Ly(t){const e=Ba(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Fy(t){const e=Ba(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function vg(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function zy(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>vg(e)):[vg(t)]}function Cu(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function yg(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function _g(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Be(t){if(t==null)throw new Error("ContentUnion is required");return Cu(t)?t:{role:"user",parts:zy(t)}}function ff(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Be(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Be(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Be(n)):[Be(e)]}function _t(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(yg(t)||_g(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Be(t)]}const e=[],n=[],i=Cu(t[0]);for(const o of t){const s=Cu(o);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(o);else{if(yg(o)||_g(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:zy(n)}),e}function XI(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Dn).includes(n[0].toUpperCase())?n[0].toUpperCase():Dn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Dn).includes(i.toUpperCase())?i.toUpperCase():Dn.TYPE_UNSPECIFIED})}}function no(t){const e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&XI(t.type,e);for(const[r,a]of Object.entries(t))if(a!=null)if(r=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Dn).includes(a.toUpperCase())?a.toUpperCase():Dn.TYPE_UNSPECIFIED}else if(n.includes(r))e[r]=no(a);else if(i.includes(r)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(no(c))}e[r]=l}else if(o.includes(r)){const l={};for(const[c,u]of Object.entries(a))l[c]=no(u);e[r]=l}else{if(r==="additionalProperties")continue;e[r]=a}return e}function hf(t){return no(t)}function pf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function mf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function vo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=no(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=no(e.response));return t}function yo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function ZI(t,e,n,i=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function yn(t,e){if(typeof e!="string")throw new Error("name must be a string");return ZI(t,e,"cachedContents")}function Uy(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Xn(t){return cf(t)}function e2(t){return t!=null&&typeof t=="object"&&"name"in t}function t2(t){return t!=null&&typeof t=="object"&&"video"in t}function n2(t){return t!=null&&typeof t=="object"&&"uri"in t}function Oy(t){var e;let n;if(e2(t)&&(n=t.name),!(n2(t)&&(n=t.uri,n===void 0))&&!(t2(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Vy(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function By(t){for(const e of["models","tunedModels","publisherModels"])if(i2(t,e))return t[e];return[]}function i2(t,e){return t!==null&&typeof t=="object"&&e in t}function o2(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function s2(t,e={}){const n=[],i=new Set;for(const o of t){const s=o.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const r=o2(o,e);r.functionDeclarations&&n.push(...r.functionDeclarations)}return{functionDeclarations:n}}function Hy(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function r2(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function $y(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let s=!1;for(const r of o){if(typeof r!="object"||r===null)continue;const l=r.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function _o(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Gy(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a2(t){const e={},n=d(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const i=d(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>B2(r))),f(e,["inlinedResponses"],s)}const o=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["inlinedEmbedContentResponses"],s)}return e}function l2(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const i=d(t,["gcsDestination","outputUriPrefix"]);i!=null&&f(e,["gcsUri"],i);const o=d(t,["bigqueryDestination","outputUri"]);return o!=null&&f(e,["bigqueryUri"],o),e}function c2(t){const e={},n=d(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const i=d(t,["gcsUri"]);i!=null&&f(e,["gcsDestination","outputUriPrefix"],i);const o=d(t,["bigqueryUri"]);if(o!=null&&f(e,["bigqueryDestination","outputUri"],o),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Xr(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const i=d(t,["metadata","displayName"]);i!=null&&f(e,["displayName"],i);const o=d(t,["metadata","state"]);o!=null&&f(e,["state"],Gy(o));const s=d(t,["metadata","createTime"]);s!=null&&f(e,["createTime"],s);const r=d(t,["metadata","endTime"]);r!=null&&f(e,["endTime"],r);const a=d(t,["metadata","updateTime"]);a!=null&&f(e,["updateTime"],a);const l=d(t,["metadata","model"]);l!=null&&f(e,["model"],l);const c=d(t,["metadata","output"]);return c!=null&&f(e,["dest"],a2($y(c))),e}function Tu(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const i=d(t,["displayName"]);i!=null&&f(e,["displayName"],i);const o=d(t,["state"]);o!=null&&f(e,["state"],Gy(o));const s=d(t,["error"]);s!=null&&f(e,["error"],s);const r=d(t,["createTime"]);r!=null&&f(e,["createTime"],r);const a=d(t,["startTime"]);a!=null&&f(e,["startTime"],a);const l=d(t,["endTime"]);l!=null&&f(e,["endTime"],l);const c=d(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const u=d(t,["model"]);u!=null&&f(e,["model"],u);const h=d(t,["inputConfig"]);h!=null&&f(e,["src"],u2(h));const p=d(t,["outputConfig"]);p!=null&&f(e,["dest"],l2($y(p)));const g=d(t,["completionStats"]);return g!=null&&f(e,["completionStats"],g),e}function u2(t){const e={},n=d(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const i=d(t,["gcsSource","uris"]);i!=null&&f(e,["gcsUri"],i);const o=d(t,["bigquerySource","inputUri"]);return o!=null&&f(e,["bigqueryUri"],o),e}function d2(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&f(n,["fileName"],i);const o=d(e,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>V2(t,r))),f(n,["requests","requests"],s)}return n}function f2(t){const e={},n=d(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const i=d(t,["gcsUri"]);i!=null&&f(e,["gcsSource","uris"],i);const o=d(t,["bigqueryUri"]);if(o!=null&&f(e,["bigquerySource","inputUri"],o),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function h2(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function p2(t,e){const n={},i=d(e,["name"]);return i!=null&&f(n,["_url","name"],_o(t,i)),n}function m2(t,e){const n={},i=d(e,["name"]);return i!=null&&f(n,["_url","name"],_o(t,i)),n}function g2(t){const e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);const i=d(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],x2(i));const o=d(t,["tokenCount"]);o!=null&&f(e,["tokenCount"],o);const s=d(t,["finishReason"]);s!=null&&f(e,["finishReason"],s);const r=d(t,["avgLogprobs"]);r!=null&&f(e,["avgLogprobs"],r);const a=d(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const l=d(t,["index"]);l!=null&&f(e,["index"],l);const c=d(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);const u=d(t,["safetyRatings"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>g)),f(e,["safetyRatings"],p)}const h=d(t,["urlContextMetadata"]);return h!=null&&f(e,["urlContextMetadata"],h),e}function x2(t){const e={},n=d(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["citations"],i)}return e}function qy(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>J2(s))),f(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&f(e,["role"],i),e}function v2(t,e){const n={},i=d(t,["displayName"]);if(e!==void 0&&i!=null&&f(e,["batch","displayName"],i),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function y2(t,e){const n={},i=d(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=d(t,["dest"]);return e!==void 0&&o!=null&&f(e,["outputConfig"],c2(r2(o))),n}function Sg(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["src"]);o!=null&&f(n,["batch","inputConfig"],d2(t,Hy(t,o)));const s=d(e,["config"]);return s!=null&&v2(s,n),n}function _2(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["model"],te(t,i));const o=d(e,["src"]);o!=null&&f(n,["inputConfig"],f2(Hy(t,o)));const s=d(e,["config"]);return s!=null&&y2(s,n),n}function S2(t,e){const n={},i=d(t,["displayName"]);return e!==void 0&&i!=null&&f(e,["batch","displayName"],i),n}function w2(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["src"]);o!=null&&f(n,["batch","inputConfig"],A2(t,o));const s=d(e,["config"]);return s!=null&&S2(s,n),n}function b2(t,e){const n={},i=d(e,["name"]);return i!=null&&f(n,["_url","name"],_o(t,i)),n}function C2(t,e){const n={},i=d(e,["name"]);return i!=null&&f(n,["_url","name"],_o(t,i)),n}function T2(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["done"]);o!=null&&f(e,["done"],o);const s=d(t,["error"]);return s!=null&&f(e,["error"],s),e}function E2(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["done"]);o!=null&&f(e,["done"],o);const s=d(t,["error"]);return s!=null&&f(e,["error"],s),e}function k2(t,e){const n={},i=d(e,["contents"]);if(i!=null){let s=ff(t,i);Array.isArray(s)&&(s=s.map(r=>r)),f(n,["requests[]","request","content"],s)}const o=d(e,["config"]);return o!=null&&(f(n,["_self"],I2(o,n)),CI(n,{"requests[].*":"requests[].request.*"})),n}function I2(t,e){const n={},i=d(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const o=d(t,["title"]);e!==void 0&&o!=null&&f(e,["requests[]","title"],o);const s=d(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&f(e,["requests[]","outputDimensionality"],s),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function A2(t,e){const n={},i=d(e,["fileName"]);i!=null&&f(n,["file_name"],i);const o=d(e,["inlinedRequests"]);return o!=null&&f(n,["requests"],k2(t,o)),n}function M2(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function N2(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const i=d(t,["args"]);i!=null&&f(e,["args"],i);const o=d(t,["name"]);if(o!=null&&f(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function P2(t){const e={},n=d(t,["mode"]);n!=null&&f(e,["mode"],n);const i=d(t,["allowedFunctionNames"]);if(i!=null&&f(e,["allowedFunctionNames"],i),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function R2(t,e,n){const i={},o=d(e,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],qy(Be(o)));const s=d(e,["temperature"]);s!=null&&f(i,["temperature"],s);const r=d(e,["topP"]);r!=null&&f(i,["topP"],r);const a=d(e,["topK"]);a!=null&&f(i,["topK"],a);const l=d(e,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const c=d(e,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);const u=d(e,["stopSequences"]);u!=null&&f(i,["stopSequences"],u);const h=d(e,["responseLogprobs"]);h!=null&&f(i,["responseLogprobs"],h);const p=d(e,["logprobs"]);p!=null&&f(i,["logprobs"],p);const g=d(e,["presencePenalty"]);g!=null&&f(i,["presencePenalty"],g);const x=d(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const y=d(e,["seed"]);y!=null&&f(i,["seed"],y);const _=d(e,["responseMimeType"]);_!=null&&f(i,["responseMimeType"],_);const v=d(e,["responseSchema"]);v!=null&&f(i,["responseSchema"],hf(v));const S=d(e,["responseJsonSchema"]);if(S!=null&&f(i,["responseJsonSchema"],S),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=d(e,["safetySettings"]);if(n!==void 0&&w!=null){let P=w;Array.isArray(P)&&(P=P.map(Y=>Y2(Y))),f(n,["safetySettings"],P)}const b=d(e,["tools"]);if(n!==void 0&&b!=null){let P=yo(b);Array.isArray(P)&&(P=P.map(Y=>Q2(vo(Y)))),f(n,["tools"],P)}const C=d(e,["toolConfig"]);if(n!==void 0&&C!=null&&f(n,["toolConfig"],K2(C)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=d(e,["cachedContent"]);n!==void 0&&T!=null&&f(n,["cachedContent"],yn(t,T));const E=d(e,["responseModalities"]);E!=null&&f(i,["responseModalities"],E);const k=d(e,["mediaResolution"]);k!=null&&f(i,["mediaResolution"],k);const A=d(e,["speechConfig"]);if(A!=null&&f(i,["speechConfig"],pf(A)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=d(e,["thinkingConfig"]);I!=null&&f(i,["thinkingConfig"],I);const L=d(e,["imageConfig"]);L!=null&&f(i,["imageConfig"],O2(L));const B=d(e,["enableEnhancedCivicAnswers"]);return B!=null&&f(i,["enableEnhancedCivicAnswers"],B),i}function D2(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>g2(c))),f(e,["candidates"],l)}const o=d(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const s=d(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const r=d(t,["responseId"]);r!=null&&f(e,["responseId"],r);const a=d(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function L2(t,e){const n={},i=d(e,["name"]);return i!=null&&f(n,["_url","name"],_o(t,i)),n}function F2(t,e){const n={},i=d(e,["name"]);return i!=null&&f(n,["_url","name"],_o(t,i)),n}function z2(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function U2(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function O2(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=d(t,["imageSize"]);if(i!=null&&f(e,["imageSize"],i),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function V2(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["request","model"],te(t,i));const o=d(e,["contents"]);if(o!=null){let a=_t(o);Array.isArray(a)&&(a=a.map(l=>qy(l))),f(n,["request","contents"],a)}const s=d(e,["metadata"]);s!=null&&f(n,["metadata"],s);const r=d(e,["config"]);return r!=null&&f(n,["request","generationConfig"],R2(t,r,d(n,["request"],{}))),n}function B2(t){const e={},n=d(t,["response"]);n!=null&&f(e,["response"],D2(n));const i=d(t,["error"]);return i!=null&&f(e,["error"],i),e}function H2(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);if(e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function $2(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const s=d(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),n}function G2(t){const e={},n=d(t,["config"]);return n!=null&&H2(n,e),e}function q2(t){const e={},n=d(t,["config"]);return n!=null&&$2(n,e),e}function j2(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=d(t,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Xr(r))),f(e,["batchJobs"],s)}return e}function W2(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=d(t,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Tu(r))),f(e,["batchJobs"],s)}return e}function J2(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=d(t,["fileData"]);s!=null&&f(e,["fileData"],M2(s));const r=d(t,["functionCall"]);r!=null&&f(e,["functionCall"],N2(r));const a=d(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=d(t,["inlineData"]);l!=null&&f(e,["inlineData"],h2(l));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const u=d(t,["thought"]);u!=null&&f(e,["thought"],u);const h=d(t,["thoughtSignature"]);h!=null&&f(e,["thoughtSignature"],h);const p=d(t,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function Y2(t){const e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function K2(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],P2(n));const i=d(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],i),e}function Q2(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=d(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],z2(a));const l=d(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],U2(l));const c=d(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(mn||(mn={}));class Ai{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let r={config:{}};!i||Object.keys(i).length===0?r={config:{}}:typeof i=="object"?r=Object.assign({},i):r=i,r.config&&(r.config.pageToken=n.nextPageToken),this.paramsInternal=r,this.pageInternalSize=(s=(o=r.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X2 extends vn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ai(mn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Sg(this.apiClient,e),i=n._url,o=U("{model}:batchGenerateContent",i),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const u of l){const h=Object.assign({},u);if(h.systemInstruction){const p=h.systemInstruction;delete h.systemInstruction;const g=h.request;g.systemInstruction=p,h.request=g}c.push(h)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const s=this.getGcsUri(e),r=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${o}`;else if(r)i.dest=`${r}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=_2(this.apiClient,e);return a=U("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>Tu(u))}else{const c=Sg(this.apiClient,e);return a=U("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),r.then(u=>Xr(u))}}async createEmbeddingsInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=w2(this.apiClient,e);return s=U("{model}:asyncBatchEmbedContent",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>Xr(l))}}async get(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=F2(this.apiClient,e);return a=U("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>Tu(u))}else{const c=L2(this.apiClient,e);return a=U("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),r.then(u=>Xr(u))}}async cancel(e){var n,i,o,s;let r="",a={};if(this.apiClient.isVertexAI()){const l=m2(this.apiClient,e);r=U("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=p2(this.apiClient,e);r=U("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=q2(e);return a=U("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=W2(u),p=new xg;return Object.assign(p,h),p})}else{const c=G2(e);return a=U("batches",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=j2(u),p=new xg;return Object.assign(p,h),p})}}async delete(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=C2(this.apiClient,e);return a=U("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>E2(u))}else{const c=b2(this.apiClient,e);return a=U("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>T2(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z2(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function wg(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>wA(s))),f(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&f(e,["role"],i),e}function eA(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=d(t,["expireTime"]);e!==void 0&&o!=null&&f(e,["expireTime"],o);const s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const r=d(t,["contents"]);if(e!==void 0&&r!=null){let u=_t(r);Array.isArray(u)&&(u=u.map(h=>wg(h))),f(e,["contents"],u)}const a=d(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],wg(Be(a)));const l=d(t,["tools"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>CA(h))),f(e,["tools"],u)}const c=d(t,["toolConfig"]);if(e!==void 0&&c!=null&&f(e,["toolConfig"],bA(c)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function tA(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=d(t,["expireTime"]);e!==void 0&&o!=null&&f(e,["expireTime"],o);const s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const r=d(t,["contents"]);if(e!==void 0&&r!=null){let h=_t(r);Array.isArray(h)&&(h=h.map(p=>p)),f(e,["contents"],h)}const a=d(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],Be(a));const l=d(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>TA(p))),f(e,["tools"],h)}const c=d(t,["toolConfig"]);e!==void 0&&c!=null&&f(e,["toolConfig"],c);const u=d(t,["kmsKeyName"]);return e!==void 0&&u!=null&&f(e,["encryption_spec","kmsKeyName"],u),n}function nA(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["model"],Ry(t,i));const o=d(e,["config"]);return o!=null&&eA(o,n),n}function iA(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["model"],Ry(t,i));const o=d(e,["config"]);return o!=null&&tA(o,n),n}function oA(t,e){const n={},i=d(e,["name"]);return i!=null&&f(n,["_url","name"],yn(t,i)),n}function sA(t,e){const n={},i=d(e,["name"]);return i!=null&&f(n,["_url","name"],yn(t,i)),n}function rA(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function aA(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function lA(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function cA(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const i=d(t,["args"]);i!=null&&f(e,["args"],i);const o=d(t,["name"]);if(o!=null&&f(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uA(t){const e={},n=d(t,["mode"]);n!=null&&f(e,["mode"],n);const i=d(t,["allowedFunctionNames"]);if(i!=null&&f(e,["allowedFunctionNames"],i),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function dA(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&f(e,["description"],n);const i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["parameters"]);o!=null&&f(e,["parameters"],o);const s=d(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const r=d(t,["response"]);r!=null&&f(e,["response"],r);const a=d(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function fA(t,e){const n={},i=d(e,["name"]);return i!=null&&f(n,["_url","name"],yn(t,i)),n}function hA(t,e){const n={},i=d(e,["name"]);return i!=null&&f(n,["_url","name"],yn(t,i)),n}function pA(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function mA(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function gA(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function xA(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function vA(t){const e={},n=d(t,["config"]);return n!=null&&gA(n,e),e}function yA(t){const e={},n=d(t,["config"]);return n!=null&&xA(n,e),e}function _A(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=d(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["cachedContents"],s)}return e}function SA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=d(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["cachedContents"],s)}return e}function wA(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=d(t,["fileData"]);s!=null&&f(e,["fileData"],lA(s));const r=d(t,["functionCall"]);r!=null&&f(e,["functionCall"],cA(r));const a=d(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=d(t,["inlineData"]);l!=null&&f(e,["inlineData"],Z2(l));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const u=d(t,["thought"]);u!=null&&f(e,["thought"],u);const h=d(t,["thoughtSignature"]);h!=null&&f(e,["thoughtSignature"],h);const p=d(t,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function bA(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],uA(n));const i=d(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],i),e}function CA(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=d(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],pA(a));const l=d(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],mA(l));const c=d(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function TA(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>dA(p))),f(e,["functionDeclarations"],h)}const i=d(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const o=d(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const a=d(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const l=d(t,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const c=d(t,["googleSearch"]);c!=null&&f(e,["googleSearch"],c);const u=d(t,["urlContext"]);return u!=null&&f(e,["urlContext"],u),e}function EA(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=d(t,["expireTime"]);return e!==void 0&&o!=null&&f(e,["expireTime"],o),n}function kA(t,e){const n={},i=d(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=d(t,["expireTime"]);return e!==void 0&&o!=null&&f(e,["expireTime"],o),n}function IA(t,e){const n={},i=d(e,["name"]);i!=null&&f(n,["_url","name"],yn(t,i));const o=d(e,["config"]);return o!=null&&EA(o,n),n}function AA(t,e){const n={},i=d(e,["name"]);i!=null&&f(n,["_url","name"],yn(t,i));const o=d(e,["config"]);return o!=null&&kA(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MA extends vn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ai(mn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=iA(this.apiClient,e);return a=U("cachedContents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}else{const c=nA(this.apiClient,e);return a=U("cachedContents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async get(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=hA(this.apiClient,e);return a=U("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}else{const c=fA(this.apiClient,e);return a=U("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async delete(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=sA(this.apiClient,e);return a=U("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=aA(u),p=new mg;return Object.assign(p,h),p})}else{const c=oA(this.apiClient,e);return a=U("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=rA(u),p=new mg;return Object.assign(p,h),p})}}async update(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=AA(this.apiClient,e);return a=U("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}else{const c=IA(this.apiClient,e);return a=U("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),r.then(u=>u)}}async listInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=yA(e);return a=U("cachedContents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=SA(u),p=new gg;return Object.assign(p,h),p})}else{const c=vA(e);return a=U("cachedContents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=_A(u),p=new gg;return Object.assign(p,h),p})}}}function Ha(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function bg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function q(t){return this instanceof q?(this.v=t,this):new q(t)}function Dt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",r),o[Symbol.asyncIterator]=function(){return this},o;function r(g){return function(x){return Promise.resolve(x).then(g,h)}}function a(g,x){i[g]&&(o[g]=function(y){return new Promise(function(_,v){s.push([g,y,_,v])>1||l(g,y)})},x&&(o[g]=x(o[g])))}function l(g,x){try{c(i[g](x))}catch(y){p(s[0][3],y)}}function c(g){g.value instanceof q?Promise.resolve(g.value.v).then(u,h):p(s[0][2],g)}function u(g){l("next",g)}function h(g){l("throw",g)}function p(g,x){g(x),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Lt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof bg=="function"?bg(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(r){return new Promise(function(a,l){r=t[s](r),o(a,l,r.done,r.value)})}}function o(s,r,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NA(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:jy(n)}function jy(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function PA(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Cg(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let s=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),s&&!jy(t[i])&&(s=!1),i++;s?e.push(...o):e.pop()}return e}class RA{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new DA(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class DA{constructor(e,n,i,o={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),PA(s)}async sendMessage(e){var n;await this.sendPromise;const i=Be(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,r,a;const l=await o,c=(r=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content,u=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];u!=null&&(p=(a=u.slice(h))!==null&&a!==void 0?a:[]);const g=c?[c]:[];this.recordHistory(i,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const i=Be(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const s=await o;return this.processStreamResponse(s,i)}getHistory(e=!1){const n=e?Cg(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Dt(this,arguments,function*(){var o,s,r,a,l,c;const u=[];try{for(var h=!0,p=Lt(e),g;g=yield q(p.next()),o=g.done,!o;h=!0){a=g.value,h=!1;const x=a;if(NA(x)){const y=(c=(l=x.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;y!==void 0&&u.push(y)}yield yield q(x)}}catch(x){s={error:x}}finally{try{!h&&!o&&(r=p.return)&&(yield q(r.call(p)))}finally{if(s)throw s.error}}this.recordHistory(n,u)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Cg(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ml extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ml.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function LA(t){const e={},n=d(t,["file"]);return n!=null&&f(e,["file"],n),e}function FA(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function zA(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],Oy(n)),e}function UA(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function OA(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],Oy(n)),e}function VA(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function BA(t){const e={},n=d(t,["config"]);return n!=null&&VA(n,e),e}function HA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=d(t,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $A extends vn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ai(mn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=BA(e);return s=U("files",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),o.then(l=>{const c=HA(l),u=new WI;return Object.assign(u,c),u})}}async createInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=LA(e);return s=U("upload/v1beta/files",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const c=FA(l),u=new JI;return Object.assign(u,c),u})}}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=OA(e);return s=U("files/{file}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=zA(e);return s=U("files/{file}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),o.then(l=>{const c=UA(l),u=new YI;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zr(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function GA(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>rM(s))),f(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&f(e,["role"],i),e}function qA(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function jA(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const i=d(t,["args"]);i!=null&&f(e,["args"],i);const o=d(t,["name"]);if(o!=null&&f(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WA(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&f(e,["description"],n);const i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["parameters"]);o!=null&&f(e,["parameters"],o);const s=d(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const r=d(t,["response"]);r!=null&&f(e,["response"],r);const a=d(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function JA(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=d(t,["responseJsonSchema"]);i!=null&&f(e,["responseJsonSchema"],i);const o=d(t,["audioTimestamp"]);o!=null&&f(e,["audioTimestamp"],o);const s=d(t,["candidateCount"]);s!=null&&f(e,["candidateCount"],s);const r=d(t,["enableAffectiveDialog"]);r!=null&&f(e,["enableAffectiveDialog"],r);const a=d(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);const l=d(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);const c=d(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const u=d(t,["mediaResolution"]);u!=null&&f(e,["mediaResolution"],u);const h=d(t,["presencePenalty"]);h!=null&&f(e,["presencePenalty"],h);const p=d(t,["responseLogprobs"]);p!=null&&f(e,["responseLogprobs"],p);const g=d(t,["responseMimeType"]);g!=null&&f(e,["responseMimeType"],g);const x=d(t,["responseModalities"]);x!=null&&f(e,["responseModalities"],x);const y=d(t,["responseSchema"]);y!=null&&f(e,["responseSchema"],y);const _=d(t,["routingConfig"]);_!=null&&f(e,["routingConfig"],_);const v=d(t,["seed"]);v!=null&&f(e,["seed"],v);const S=d(t,["speechConfig"]);S!=null&&f(e,["speechConfig"],S);const w=d(t,["stopSequences"]);w!=null&&f(e,["stopSequences"],w);const b=d(t,["temperature"]);b!=null&&f(e,["temperature"],b);const C=d(t,["thinkingConfig"]);C!=null&&f(e,["thinkingConfig"],C);const T=d(t,["topK"]);T!=null&&f(e,["topK"],T);const E=d(t,["topP"]);if(E!=null&&f(e,["topP"],E),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function YA(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function KA(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function QA(t,e){const n={},i=d(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);const s=d(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const r=d(t,["topP"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","topP"],r);const a=d(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=d(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const u=d(t,["seed"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","seed"],u);const h=d(t,["speechConfig"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","speechConfig"],mf(h));const p=d(t,["thinkingConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","thinkingConfig"],p);const g=d(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=d(t,["systemInstruction"]);e!==void 0&&x!=null&&f(e,["setup","systemInstruction"],GA(Be(x)));const y=d(t,["tools"]);if(e!==void 0&&y!=null){let T=yo(y);Array.isArray(T)&&(T=T.map(E=>lM(vo(E)))),f(e,["setup","tools"],T)}const _=d(t,["sessionResumption"]);e!==void 0&&_!=null&&f(e,["setup","sessionResumption"],aM(_));const v=d(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&f(e,["setup","inputAudioTranscription"],v);const S=d(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&f(e,["setup","outputAudioTranscription"],S);const w=d(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&f(e,["setup","realtimeInputConfig"],w);const b=d(t,["contextWindowCompression"]);e!==void 0&&b!=null&&f(e,["setup","contextWindowCompression"],b);const C=d(t,["proactivity"]);if(e!==void 0&&C!=null&&f(e,["setup","proactivity"],C),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function XA(t,e){const n={},i=d(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],JA(i));const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);const s=d(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const r=d(t,["topP"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","topP"],r);const a=d(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=d(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const u=d(t,["seed"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","seed"],u);const h=d(t,["speechConfig"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","speechConfig"],mf(h));const p=d(t,["thinkingConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","thinkingConfig"],p);const g=d(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=d(t,["systemInstruction"]);e!==void 0&&x!=null&&f(e,["setup","systemInstruction"],Be(x));const y=d(t,["tools"]);if(e!==void 0&&y!=null){let E=yo(y);Array.isArray(E)&&(E=E.map(k=>cM(vo(k)))),f(e,["setup","tools"],E)}const _=d(t,["sessionResumption"]);e!==void 0&&_!=null&&f(e,["setup","sessionResumption"],_);const v=d(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&f(e,["setup","inputAudioTranscription"],v);const S=d(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&f(e,["setup","outputAudioTranscription"],S);const w=d(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&f(e,["setup","realtimeInputConfig"],w);const b=d(t,["contextWindowCompression"]);e!==void 0&&b!=null&&f(e,["setup","contextWindowCompression"],b);const C=d(t,["proactivity"]);e!==void 0&&C!=null&&f(e,["setup","proactivity"],C);const T=d(t,["explicitVadSignal"]);return e!==void 0&&T!=null&&f(e,["setup","explicitVadSignal"],T),n}function ZA(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["setup","model"],te(t,i));const o=d(e,["config"]);return o!=null&&f(n,["config"],QA(o,n)),n}function eM(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["setup","model"],te(t,i));const o=d(e,["config"]);return o!=null&&f(n,["config"],XA(o,n)),n}function tM(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function nM(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["weightedPrompts"],i)}return e}function iM(t){const e={},n=d(t,["media"]);if(n!=null){let c=Dy(n);Array.isArray(c)&&(c=c.map(u=>Zr(u))),f(e,["mediaChunks"],c)}const i=d(t,["audio"]);i!=null&&f(e,["audio"],Zr(Fy(i)));const o=d(t,["audioStreamEnd"]);o!=null&&f(e,["audioStreamEnd"],o);const s=d(t,["video"]);s!=null&&f(e,["video"],Zr(Ly(s)));const r=d(t,["text"]);r!=null&&f(e,["text"],r);const a=d(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=d(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function oM(t){const e={},n=d(t,["media"]);if(n!=null){let c=Dy(n);Array.isArray(c)&&(c=c.map(u=>u)),f(e,["mediaChunks"],c)}const i=d(t,["audio"]);i!=null&&f(e,["audio"],Fy(i));const o=d(t,["audioStreamEnd"]);o!=null&&f(e,["audioStreamEnd"],o);const s=d(t,["video"]);s!=null&&f(e,["video"],Ly(s));const r=d(t,["text"]);r!=null&&f(e,["text"],r);const a=d(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=d(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function sM(t){const e={},n=d(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const i=d(t,["serverContent"]);i!=null&&f(e,["serverContent"],i);const o=d(t,["toolCall"]);o!=null&&f(e,["toolCall"],o);const s=d(t,["toolCallCancellation"]);s!=null&&f(e,["toolCallCancellation"],s);const r=d(t,["usageMetadata"]);r!=null&&f(e,["usageMetadata"],uM(r));const a=d(t,["goAway"]);a!=null&&f(e,["goAway"],a);const l=d(t,["sessionResumptionUpdate"]);l!=null&&f(e,["sessionResumptionUpdate"],l);const c=d(t,["voiceActivityDetectionSignal"]);return c!=null&&f(e,["voiceActivityDetectionSignal"],c),e}function rM(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=d(t,["fileData"]);s!=null&&f(e,["fileData"],qA(s));const r=d(t,["functionCall"]);r!=null&&f(e,["functionCall"],jA(r));const a=d(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=d(t,["inlineData"]);l!=null&&f(e,["inlineData"],Zr(l));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const u=d(t,["thought"]);u!=null&&f(e,["thought"],u);const h=d(t,["thoughtSignature"]);h!=null&&f(e,["thoughtSignature"],h);const p=d(t,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function aM(t){const e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lM(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=d(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],YA(a));const l=d(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],KA(l));const c=d(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function cM(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>WA(p))),f(e,["functionDeclarations"],h)}const i=d(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const o=d(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const a=d(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const l=d(t,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const c=d(t,["googleSearch"]);c!=null&&f(e,["googleSearch"],c);const u=d(t,["urlContext"]);return u!=null&&f(e,["urlContext"],u),e}function uM(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=d(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const o=d(t,["candidatesTokenCount"]);o!=null&&f(e,["responseTokenCount"],o);const s=d(t,["toolUsePromptTokenCount"]);s!=null&&f(e,["toolUsePromptTokenCount"],s);const r=d(t,["thoughtsTokenCount"]);r!=null&&f(e,["thoughtsTokenCount"],r);const a=d(t,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);const l=d(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(x=>x)),f(e,["promptTokensDetails"],g)}const c=d(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(x=>x)),f(e,["cacheTokensDetails"],g)}const u=d(t,["candidatesTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(x=>x)),f(e,["responseTokensDetails"],g)}const h=d(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(x=>x)),f(e,["toolUsePromptTokensDetails"],g)}const p=d(t,["trafficType"]);return p!=null&&f(e,["trafficType"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dM(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function fM(t){const e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);const i=d(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],hM(i));const o=d(t,["tokenCount"]);o!=null&&f(e,["tokenCount"],o);const s=d(t,["finishReason"]);s!=null&&f(e,["finishReason"],s);const r=d(t,["avgLogprobs"]);r!=null&&f(e,["avgLogprobs"],r);const a=d(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const l=d(t,["index"]);l!=null&&f(e,["index"],l);const c=d(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);const u=d(t,["safetyRatings"]);if(u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>g)),f(e,["safetyRatings"],p)}const h=d(t,["urlContextMetadata"]);return h!=null&&f(e,["urlContextMetadata"],h),e}function hM(t){const e={},n=d(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["citations"],i)}return e}function pM(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["contents"]);if(o!=null){let s=_t(o);Array.isArray(s)&&(s=s.map(r=>r)),f(n,["contents"],s)}return n}function mM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["tokensInfo"],o)}return e}function gM(t){const e={},n=d(t,["values"]);n!=null&&f(e,["values"],n);const i=d(t,["statistics"]);return i!=null&&f(e,["statistics"],xM(i)),e}function xM(t){const e={},n=d(t,["truncated"]);n!=null&&f(e,["truncated"],n);const i=d(t,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function gl(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>EN(s))),f(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&f(e,["role"],i),e}function vM(t){const e={},n=d(t,["controlType"]);n!=null&&f(e,["controlType"],n);const i=d(t,["enableControlImageComputation"]);return i!=null&&f(e,["computeControl"],i),e}function yM(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function _M(t,e){const n={},i=d(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],Be(i));const o=d(t,["tools"]);if(e!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>Ky(a))),f(e,["tools"],r)}const s=d(t,["generationConfig"]);return e!==void 0&&s!=null&&f(e,["generationConfig"],dN(s)),n}function SM(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["contents"]);if(o!=null){let r=_t(o);Array.isArray(r)&&(r=r.map(a=>gl(a))),f(n,["contents"],r)}const s=d(e,["config"]);return s!=null&&yM(s),n}function wM(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["contents"]);if(o!=null){let r=_t(o);Array.isArray(r)&&(r=r.map(a=>a)),f(n,["contents"],r)}const s=d(e,["config"]);return s!=null&&_M(s,n),n}function bM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["totalTokens"]);i!=null&&f(e,["totalTokens"],i);const o=d(t,["cachedContentTokenCount"]);return o!=null&&f(e,["cachedContentTokenCount"],o),e}function CM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["totalTokens"]);return i!=null&&f(e,["totalTokens"],i),e}function TM(t,e){const n={},i=d(e,["model"]);return i!=null&&f(n,["_url","name"],te(t,i)),n}function EM(t,e){const n={},i=d(e,["model"]);return i!=null&&f(n,["_url","name"],te(t,i)),n}function kM(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function IM(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function AM(t,e){const n={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=d(t,["negativePrompt"]);e!==void 0&&o!=null&&f(e,["parameters","negativePrompt"],o);const s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const r=d(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const a=d(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=d(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const u=d(t,["personGeneration"]);e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u);const h=d(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&f(e,["parameters","includeSafetyAttributes"],h);const p=d(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const g=d(t,["language"]);e!==void 0&&g!=null&&f(e,["parameters","language"],g);const x=d(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const y=d(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","compressionQuality"],y);const _=d(t,["addWatermark"]);e!==void 0&&_!=null&&f(e,["parameters","addWatermark"],_);const v=d(t,["labels"]);e!==void 0&&v!=null&&f(e,["labels"],v);const S=d(t,["editMode"]);e!==void 0&&S!=null&&f(e,["parameters","editMode"],S);const w=d(t,["baseSteps"]);return e!==void 0&&w!=null&&f(e,["parameters","editConfig","baseSteps"],w),n}function MM(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=d(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>PN(l))),f(n,["instances[0]","referenceImages"],a)}const r=d(e,["config"]);return r!=null&&AM(r,n),n}function NM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>xl(s))),f(e,["generatedImages"],o)}return e}function PM(t,e){const n={},i=d(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const o=d(t,["title"]);e!==void 0&&o!=null&&f(e,["requests[]","title"],o);const s=d(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&f(e,["requests[]","outputDimensionality"],s),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function RM(t,e){const n={},i=d(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);const o=d(t,["title"]);e!==void 0&&o!=null&&f(e,["instances[]","title"],o);const s=d(t,["outputDimensionality"]);e!==void 0&&s!=null&&f(e,["parameters","outputDimensionality"],s);const r=d(t,["mimeType"]);e!==void 0&&r!=null&&f(e,["instances[]","mimeType"],r);const a=d(t,["autoTruncate"]);return e!==void 0&&a!=null&&f(e,["parameters","autoTruncate"],a),n}function DM(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["contents"]);if(o!=null){let a=ff(t,o);Array.isArray(a)&&(a=a.map(l=>l)),f(n,["requests[]","content"],a)}const s=d(e,["config"]);s!=null&&PM(s,n);const r=d(e,["model"]);return r!==void 0&&f(n,["requests[]","model"],te(t,r)),n}function LM(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["contents"]);if(o!=null){let r=ff(t,o);Array.isArray(r)&&(r=r.map(a=>a)),f(n,["instances[]","content"],r)}const s=d(e,["config"]);return s!=null&&RM(s,n),n}function FM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["embeddings"],s)}const o=d(t,["metadata"]);return o!=null&&f(e,["metadata"],o),e}function zM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>gM(r))),f(e,["embeddings"],s)}const o=d(t,["metadata"]);return o!=null&&f(e,["metadata"],o),e}function UM(t){const e={},n=d(t,["endpoint"]);n!=null&&f(e,["name"],n);const i=d(t,["deployedModelId"]);return i!=null&&f(e,["deployedModelId"],i),e}function OM(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function VM(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const i=d(t,["args"]);i!=null&&f(e,["args"],i);const o=d(t,["name"]);if(o!=null&&f(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function BM(t){const e={},n=d(t,["mode"]);n!=null&&f(e,["mode"],n);const i=d(t,["allowedFunctionNames"]);if(i!=null&&f(e,["allowedFunctionNames"],i),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function HM(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(t,["description"]);n!=null&&f(e,["description"],n);const i=d(t,["name"]);i!=null&&f(e,["name"],i);const o=d(t,["parameters"]);o!=null&&f(e,["parameters"],o);const s=d(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const r=d(t,["response"]);r!=null&&f(e,["response"],r);const a=d(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function $M(t,e,n){const i={},o=d(e,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],gl(Be(o)));const s=d(e,["temperature"]);s!=null&&f(i,["temperature"],s);const r=d(e,["topP"]);r!=null&&f(i,["topP"],r);const a=d(e,["topK"]);a!=null&&f(i,["topK"],a);const l=d(e,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const c=d(e,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);const u=d(e,["stopSequences"]);u!=null&&f(i,["stopSequences"],u);const h=d(e,["responseLogprobs"]);h!=null&&f(i,["responseLogprobs"],h);const p=d(e,["logprobs"]);p!=null&&f(i,["logprobs"],p);const g=d(e,["presencePenalty"]);g!=null&&f(i,["presencePenalty"],g);const x=d(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const y=d(e,["seed"]);y!=null&&f(i,["seed"],y);const _=d(e,["responseMimeType"]);_!=null&&f(i,["responseMimeType"],_);const v=d(e,["responseSchema"]);v!=null&&f(i,["responseSchema"],hf(v));const S=d(e,["responseJsonSchema"]);if(S!=null&&f(i,["responseJsonSchema"],S),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=d(e,["safetySettings"]);if(n!==void 0&&w!=null){let P=w;Array.isArray(P)&&(P=P.map(Y=>RN(Y))),f(n,["safetySettings"],P)}const b=d(e,["tools"]);if(n!==void 0&&b!=null){let P=yo(b);Array.isArray(P)&&(P=P.map(Y=>VN(vo(Y)))),f(n,["tools"],P)}const C=d(e,["toolConfig"]);if(n!==void 0&&C!=null&&f(n,["toolConfig"],ON(C)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=d(e,["cachedContent"]);n!==void 0&&T!=null&&f(n,["cachedContent"],yn(t,T));const E=d(e,["responseModalities"]);E!=null&&f(i,["responseModalities"],E);const k=d(e,["mediaResolution"]);k!=null&&f(i,["mediaResolution"],k);const A=d(e,["speechConfig"]);if(A!=null&&f(i,["speechConfig"],pf(A)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=d(e,["thinkingConfig"]);I!=null&&f(i,["thinkingConfig"],I);const L=d(e,["imageConfig"]);L!=null&&f(i,["imageConfig"],gN(L));const B=d(e,["enableEnhancedCivicAnswers"]);return B!=null&&f(i,["enableEnhancedCivicAnswers"],B),i}function GM(t,e,n){const i={},o=d(e,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],Be(o));const s=d(e,["temperature"]);s!=null&&f(i,["temperature"],s);const r=d(e,["topP"]);r!=null&&f(i,["topP"],r);const a=d(e,["topK"]);a!=null&&f(i,["topK"],a);const l=d(e,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const c=d(e,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);const u=d(e,["stopSequences"]);u!=null&&f(i,["stopSequences"],u);const h=d(e,["responseLogprobs"]);h!=null&&f(i,["responseLogprobs"],h);const p=d(e,["logprobs"]);p!=null&&f(i,["logprobs"],p);const g=d(e,["presencePenalty"]);g!=null&&f(i,["presencePenalty"],g);const x=d(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const y=d(e,["seed"]);y!=null&&f(i,["seed"],y);const _=d(e,["responseMimeType"]);_!=null&&f(i,["responseMimeType"],_);const v=d(e,["responseSchema"]);v!=null&&f(i,["responseSchema"],hf(v));const S=d(e,["responseJsonSchema"]);S!=null&&f(i,["responseJsonSchema"],S);const w=d(e,["routingConfig"]);w!=null&&f(i,["routingConfig"],w);const b=d(e,["modelSelectionConfig"]);b!=null&&f(i,["modelConfig"],b);const C=d(e,["safetySettings"]);if(n!==void 0&&C!=null){let $=C;Array.isArray($)&&($=$.map(D=>D)),f(n,["safetySettings"],$)}const T=d(e,["tools"]);if(n!==void 0&&T!=null){let $=yo(T);Array.isArray($)&&($=$.map(D=>Ky(vo(D)))),f(n,["tools"],$)}const E=d(e,["toolConfig"]);n!==void 0&&E!=null&&f(n,["toolConfig"],E);const k=d(e,["labels"]);n!==void 0&&k!=null&&f(n,["labels"],k);const A=d(e,["cachedContent"]);n!==void 0&&A!=null&&f(n,["cachedContent"],yn(t,A));const I=d(e,["responseModalities"]);I!=null&&f(i,["responseModalities"],I);const L=d(e,["mediaResolution"]);L!=null&&f(i,["mediaResolution"],L);const B=d(e,["speechConfig"]);B!=null&&f(i,["speechConfig"],pf(B));const P=d(e,["audioTimestamp"]);P!=null&&f(i,["audioTimestamp"],P);const Y=d(e,["thinkingConfig"]);Y!=null&&f(i,["thinkingConfig"],Y);const j=d(e,["imageConfig"]);if(j!=null&&f(i,["imageConfig"],xN(j)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function Tg(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["contents"]);if(o!=null){let r=_t(o);Array.isArray(r)&&(r=r.map(a=>gl(a))),f(n,["contents"],r)}const s=d(e,["config"]);return s!=null&&f(n,["generationConfig"],$M(t,s,n)),n}function Eg(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["contents"]);if(o!=null){let r=_t(o);Array.isArray(r)&&(r=r.map(a=>a)),f(n,["contents"],r)}const s=d(e,["config"]);return s!=null&&f(n,["generationConfig"],GM(t,s,n)),n}function kg(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>fM(c))),f(e,["candidates"],l)}const o=d(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const s=d(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const r=d(t,["responseId"]);r!=null&&f(e,["responseId"],r);const a=d(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function Ig(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>u)),f(e,["candidates"],c)}const o=d(t,["createTime"]);o!=null&&f(e,["createTime"],o);const s=d(t,["modelVersion"]);s!=null&&f(e,["modelVersion"],s);const r=d(t,["promptFeedback"]);r!=null&&f(e,["promptFeedback"],r);const a=d(t,["responseId"]);a!=null&&f(e,["responseId"],a);const l=d(t,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function qM(t,e){const n={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=d(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const o=d(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const s=d(t,["guidanceScale"]);if(e!==void 0&&s!=null&&f(e,["parameters","guidanceScale"],s),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=d(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&f(e,["parameters","safetySetting"],r);const a=d(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const l=d(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&f(e,["parameters","includeSafetyAttributes"],l);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const u=d(t,["language"]);e!==void 0&&u!=null&&f(e,["parameters","language"],u);const h=d(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const p=d(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&f(e,["parameters","outputOptions","compressionQuality"],p),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=d(t,["imageSize"]);if(e!==void 0&&g!=null&&f(e,["parameters","sampleImageSize"],g),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function jM(t,e){const n={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=d(t,["negativePrompt"]);e!==void 0&&o!=null&&f(e,["parameters","negativePrompt"],o);const s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const r=d(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const a=d(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=d(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const u=d(t,["personGeneration"]);e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u);const h=d(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&f(e,["parameters","includeSafetyAttributes"],h);const p=d(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const g=d(t,["language"]);e!==void 0&&g!=null&&f(e,["parameters","language"],g);const x=d(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const y=d(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","compressionQuality"],y);const _=d(t,["addWatermark"]);e!==void 0&&_!=null&&f(e,["parameters","addWatermark"],_);const v=d(t,["labels"]);e!==void 0&&v!=null&&f(e,["labels"],v);const S=d(t,["imageSize"]);e!==void 0&&S!=null&&f(e,["parameters","sampleImageSize"],S);const w=d(t,["enhancePrompt"]);return e!==void 0&&w!=null&&f(e,["parameters","enhancePrompt"],w),n}function WM(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=d(e,["config"]);return s!=null&&qM(s,n),n}function JM(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=d(e,["config"]);return s!=null&&jM(s,n),n}function YM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>aN(r))),f(e,["generatedImages"],s)}const o=d(t,["positivePromptSafetyAttributes"]);return o!=null&&f(e,["positivePromptSafetyAttributes"],Jy(o)),e}function KM(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>xl(r))),f(e,["generatedImages"],s)}const o=d(t,["positivePromptSafetyAttributes"]);return o!=null&&f(e,["positivePromptSafetyAttributes"],Yy(o)),e}function QM(t,e){const n={},i=d(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=d(t,["durationSeconds"]);if(e!==void 0&&o!=null&&f(e,["parameters","durationSeconds"],o),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=d(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const r=d(t,["resolution"]);e!==void 0&&r!=null&&f(e,["parameters","resolution"],r);const a=d(t,["personGeneration"]);if(e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const c=d(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&f(e,["parameters","enhancePrompt"],c),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const u=d(t,["lastFrame"]);e!==void 0&&u!=null&&f(e,["instances[0]","lastFrame"],vl(u));const h=d(t,["referenceImages"]);if(e!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>ZN(g))),f(e,["instances[0]","referenceImages"],p)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function XM(t,e){const n={},i=d(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const s=d(t,["fps"]);e!==void 0&&s!=null&&f(e,["parameters","fps"],s);const r=d(t,["durationSeconds"]);e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r);const a=d(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const c=d(t,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const u=d(t,["personGeneration"]);e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u);const h=d(t,["pubsubTopic"]);e!==void 0&&h!=null&&f(e,["parameters","pubsubTopic"],h);const p=d(t,["negativePrompt"]);e!==void 0&&p!=null&&f(e,["parameters","negativePrompt"],p);const g=d(t,["enhancePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","enhancePrompt"],g);const x=d(t,["generateAudio"]);e!==void 0&&x!=null&&f(e,["parameters","generateAudio"],x);const y=d(t,["lastFrame"]);e!==void 0&&y!=null&&f(e,["instances[0]","lastFrame"],Ut(y));const _=d(t,["referenceImages"]);if(e!==void 0&&_!=null){let w=_;Array.isArray(w)&&(w=w.map(b=>eP(b))),f(e,["instances[0]","referenceImages"],w)}const v=d(t,["mask"]);e!==void 0&&v!=null&&f(e,["instances[0]","mask"],XN(v));const S=d(t,["compressionQuality"]);return e!==void 0&&S!=null&&f(e,["parameters","compressionQuality"],S),n}function ZM(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const i=d(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=d(t,["done"]);o!=null&&f(e,["done"],o);const s=d(t,["error"]);s!=null&&f(e,["error"],s);const r=d(t,["response","generateVideoResponse"]);return r!=null&&f(e,["response"],iN(r)),e}function eN(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const i=d(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=d(t,["done"]);o!=null&&f(e,["done"],o);const s=d(t,["error"]);s!=null&&f(e,["error"],s);const r=d(t,["response"]);return r!=null&&f(e,["response"],oN(r)),e}function tN(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=d(e,["image"]);s!=null&&f(n,["instances[0]","image"],vl(s));const r=d(e,["video"]);r!=null&&f(n,["instances[0]","video"],Qy(r));const a=d(e,["source"]);a!=null&&sN(a,n);const l=d(e,["config"]);return l!=null&&QM(l,n),n}function nN(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=d(e,["image"]);s!=null&&f(n,["instances[0]","image"],Ut(s));const r=d(e,["video"]);r!=null&&f(n,["instances[0]","video"],Xy(r));const a=d(e,["source"]);a!=null&&rN(a,n);const l=d(e,["config"]);return l!=null&&XM(l,n),n}function iN(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>cN(r))),f(e,["generatedVideos"],s)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function oN(t){const e={},n=d(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>uN(r))),f(e,["generatedVideos"],s)}const i=d(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function sN(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const o=d(t,["image"]);e!==void 0&&o!=null&&f(e,["instances[0]","image"],vl(o));const s=d(t,["video"]);return e!==void 0&&s!=null&&f(e,["instances[0]","video"],Qy(s)),n}function rN(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const o=d(t,["image"]);e!==void 0&&o!=null&&f(e,["instances[0]","image"],Ut(o));const s=d(t,["video"]);return e!==void 0&&s!=null&&f(e,["instances[0]","video"],Xy(s)),n}function aN(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["image"],vN(n));const i=d(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const o=d(t,["_self"]);return o!=null&&f(e,["safetyAttributes"],Jy(o)),e}function xl(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["image"],Wy(n));const i=d(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const o=d(t,["_self"]);o!=null&&f(e,["safetyAttributes"],Yy(o));const s=d(t,["prompt"]);return s!=null&&f(e,["enhancedPrompt"],s),e}function lN(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["mask"],Wy(n));const i=d(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["labels"],o)}return e}function cN(t){const e={},n=d(t,["video"]);return n!=null&&f(e,["video"],KN(n)),e}function uN(t){const e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],QN(n)),e}function dN(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=d(t,["responseJsonSchema"]);i!=null&&f(e,["responseJsonSchema"],i);const o=d(t,["audioTimestamp"]);o!=null&&f(e,["audioTimestamp"],o);const s=d(t,["candidateCount"]);s!=null&&f(e,["candidateCount"],s);const r=d(t,["enableAffectiveDialog"]);r!=null&&f(e,["enableAffectiveDialog"],r);const a=d(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);const l=d(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);const c=d(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const u=d(t,["mediaResolution"]);u!=null&&f(e,["mediaResolution"],u);const h=d(t,["presencePenalty"]);h!=null&&f(e,["presencePenalty"],h);const p=d(t,["responseLogprobs"]);p!=null&&f(e,["responseLogprobs"],p);const g=d(t,["responseMimeType"]);g!=null&&f(e,["responseMimeType"],g);const x=d(t,["responseModalities"]);x!=null&&f(e,["responseModalities"],x);const y=d(t,["responseSchema"]);y!=null&&f(e,["responseSchema"],y);const _=d(t,["routingConfig"]);_!=null&&f(e,["routingConfig"],_);const v=d(t,["seed"]);v!=null&&f(e,["seed"],v);const S=d(t,["speechConfig"]);S!=null&&f(e,["speechConfig"],S);const w=d(t,["stopSequences"]);w!=null&&f(e,["stopSequences"],w);const b=d(t,["temperature"]);b!=null&&f(e,["temperature"],b);const C=d(t,["thinkingConfig"]);C!=null&&f(e,["thinkingConfig"],C);const T=d(t,["topK"]);T!=null&&f(e,["topK"],T);const E=d(t,["topP"]);if(E!=null&&f(e,["topP"],E),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function fN(t,e){const n={},i=d(e,["model"]);return i!=null&&f(n,["_url","name"],te(t,i)),n}function hN(t,e){const n={},i=d(e,["model"]);return i!=null&&f(n,["_url","name"],te(t,i)),n}function pN(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function mN(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function gN(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=d(t,["imageSize"]);if(i!=null&&f(e,["imageSize"],i),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function xN(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=d(t,["imageSize"]);i!=null&&f(e,["imageSize"],i);const o=d(t,["outputMimeType"]);o!=null&&f(e,["imageOutputOptions","mimeType"],o);const s=d(t,["outputCompressionQuality"]);return s!=null&&f(e,["imageOutputOptions","compressionQuality"],s),e}function vN(t){const e={},n=d(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],Xn(n));const i=d(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Wy(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=d(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],Xn(i));const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function vl(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=d(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],Xn(n));const i=d(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Ut(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=d(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Xn(i));const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function yN(t,e,n){const i={},o=d(e,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);const s=d(e,["pageToken"]);n!==void 0&&s!=null&&f(n,["_query","pageToken"],s);const r=d(e,["filter"]);n!==void 0&&r!=null&&f(n,["_query","filter"],r);const a=d(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],Vy(t,a)),i}function _N(t,e,n){const i={},o=d(e,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);const s=d(e,["pageToken"]);n!==void 0&&s!=null&&f(n,["_query","pageToken"],s);const r=d(e,["filter"]);n!==void 0&&r!=null&&f(n,["_query","filter"],r);const a=d(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],Vy(t,a)),i}function SN(t,e){const n={},i=d(e,["config"]);return i!=null&&yN(t,i,n),n}function wN(t,e){const n={},i=d(e,["config"]);return i!=null&&_N(t,i,n),n}function bN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=d(t,["_self"]);if(o!=null){let s=By(o);Array.isArray(s)&&(s=s.map(r=>Eu(r))),f(e,["models"],s)}return e}function CN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=d(t,["_self"]);if(o!=null){let s=By(o);Array.isArray(s)&&(s=s.map(r=>ku(r))),f(e,["models"],s)}return e}function TN(t){const e={},n=d(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const i=d(t,["segmentationClasses"]);i!=null&&f(e,["maskClasses"],i);const o=d(t,["maskDilation"]);return o!=null&&f(e,["dilation"],o),e}function Eu(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const i=d(t,["displayName"]);i!=null&&f(e,["displayName"],i);const o=d(t,["description"]);o!=null&&f(e,["description"],o);const s=d(t,["version"]);s!=null&&f(e,["version"],s);const r=d(t,["_self"]);r!=null&&f(e,["tunedModelInfo"],BN(r));const a=d(t,["inputTokenLimit"]);a!=null&&f(e,["inputTokenLimit"],a);const l=d(t,["outputTokenLimit"]);l!=null&&f(e,["outputTokenLimit"],l);const c=d(t,["supportedGenerationMethods"]);c!=null&&f(e,["supportedActions"],c);const u=d(t,["temperature"]);u!=null&&f(e,["temperature"],u);const h=d(t,["maxTemperature"]);h!=null&&f(e,["maxTemperature"],h);const p=d(t,["topP"]);p!=null&&f(e,["topP"],p);const g=d(t,["topK"]);g!=null&&f(e,["topK"],g);const x=d(t,["thinking"]);return x!=null&&f(e,["thinking"],x),e}function ku(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const i=d(t,["displayName"]);i!=null&&f(e,["displayName"],i);const o=d(t,["description"]);o!=null&&f(e,["description"],o);const s=d(t,["versionId"]);s!=null&&f(e,["version"],s);const r=d(t,["deployedModels"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(p=>UM(p))),f(e,["endpoints"],h)}const a=d(t,["labels"]);a!=null&&f(e,["labels"],a);const l=d(t,["_self"]);l!=null&&f(e,["tunedModelInfo"],HN(l));const c=d(t,["defaultCheckpointId"]);c!=null&&f(e,["defaultCheckpointId"],c);const u=d(t,["checkpoints"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["checkpoints"],h)}return e}function EN(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=d(t,["fileData"]);s!=null&&f(e,["fileData"],OM(s));const r=d(t,["functionCall"]);r!=null&&f(e,["functionCall"],VM(r));const a=d(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=d(t,["inlineData"]);l!=null&&f(e,["inlineData"],dM(l));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const u=d(t,["thought"]);u!=null&&f(e,["thought"],u);const h=d(t,["thoughtSignature"]);h!=null&&f(e,["thoughtSignature"],h);const p=d(t,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function kN(t){const e={},n=d(t,["productImage"]);return n!=null&&f(e,["image"],Ut(n)),e}function IN(t,e){const n={},i=d(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const o=d(t,["baseSteps"]);e!==void 0&&o!=null&&f(e,["parameters","baseSteps"],o);const s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const r=d(t,["seed"]);e!==void 0&&r!=null&&f(e,["parameters","seed"],r);const a=d(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=d(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const c=d(t,["addWatermark"]);e!==void 0&&c!=null&&f(e,["parameters","addWatermark"],c);const u=d(t,["outputMimeType"]);e!==void 0&&u!=null&&f(e,["parameters","outputOptions","mimeType"],u);const h=d(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","compressionQuality"],h);const p=d(t,["enhancePrompt"]);e!==void 0&&p!=null&&f(e,["parameters","enhancePrompt"],p);const g=d(t,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),n}function AN(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["source"]);o!=null&&NN(o,n);const s=d(e,["config"]);return s!=null&&IN(s,n),n}function MN(t){const e={},n=d(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>xl(o))),f(e,["generatedImages"],i)}return e}function NN(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const o=d(t,["personImage"]);e!==void 0&&o!=null&&f(e,["instances[0]","personImage","image"],Ut(o));const s=d(t,["productImages"]);if(e!==void 0&&s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>kN(a))),f(e,["instances[0]","productImages"],r)}return n}function PN(t){const e={},n=d(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],Ut(n));const i=d(t,["referenceId"]);i!=null&&f(e,["referenceId"],i);const o=d(t,["referenceType"]);o!=null&&f(e,["referenceType"],o);const s=d(t,["maskImageConfig"]);s!=null&&f(e,["maskImageConfig"],TN(s));const r=d(t,["controlImageConfig"]);r!=null&&f(e,["controlImageConfig"],vM(r));const a=d(t,["styleImageConfig"]);a!=null&&f(e,["styleImageConfig"],a);const l=d(t,["subjectImageConfig"]);return l!=null&&f(e,["subjectImageConfig"],l),e}function Jy(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=d(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const o=d(t,["contentType"]);return o!=null&&f(e,["contentType"],o),e}function Yy(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=d(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const o=d(t,["contentType"]);return o!=null&&f(e,["contentType"],o),e}function RN(t){const e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function DN(t){const e={},n=d(t,["image"]);return n!=null&&f(e,["image"],Ut(n)),e}function LN(t,e){const n={},i=d(t,["mode"]);e!==void 0&&i!=null&&f(e,["parameters","mode"],i);const o=d(t,["maxPredictions"]);e!==void 0&&o!=null&&f(e,["parameters","maxPredictions"],o);const s=d(t,["confidenceThreshold"]);e!==void 0&&s!=null&&f(e,["parameters","confidenceThreshold"],s);const r=d(t,["maskDilation"]);e!==void 0&&r!=null&&f(e,["parameters","maskDilation"],r);const a=d(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","binaryColorThreshold"],a);const l=d(t,["labels"]);return e!==void 0&&l!=null&&f(e,["labels"],l),n}function FN(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["source"]);o!=null&&UN(o,n);const s=d(e,["config"]);return s!=null&&LN(s,n),n}function zN(t){const e={},n=d(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>lN(o))),f(e,["generatedMasks"],i)}return e}function UN(t,e){const n={},i=d(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const o=d(t,["image"]);e!==void 0&&o!=null&&f(e,["instances[0]","image"],Ut(o));const s=d(t,["scribbleImage"]);return e!==void 0&&s!=null&&f(e,["instances[0]","scribble"],DN(s)),n}function ON(t){const e={},n=d(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],BM(n));const i=d(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],i),e}function VN(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=d(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],pN(a));const l=d(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],mN(l));const c=d(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function Ky(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>HM(p))),f(e,["functionDeclarations"],h)}const i=d(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const o=d(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=d(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const a=d(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const l=d(t,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const c=d(t,["googleSearch"]);c!=null&&f(e,["googleSearch"],c);const u=d(t,["urlContext"]);return u!=null&&f(e,["urlContext"],u),e}function BN(t){const e={},n=d(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=d(t,["createTime"]);i!=null&&f(e,["createTime"],i);const o=d(t,["updateTime"]);return o!=null&&f(e,["updateTime"],o),e}function HN(t){const e={},n=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const i=d(t,["createTime"]);i!=null&&f(e,["createTime"],i);const o=d(t,["updateTime"]);return o!=null&&f(e,["updateTime"],o),e}function $N(t,e){const n={},i=d(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=d(t,["description"]);e!==void 0&&o!=null&&f(e,["description"],o);const s=d(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&f(e,["defaultCheckpointId"],s),n}function GN(t,e){const n={},i=d(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=d(t,["description"]);e!==void 0&&o!=null&&f(e,["description"],o);const s=d(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&f(e,["defaultCheckpointId"],s),n}function qN(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","name"],te(t,i));const o=d(e,["config"]);return o!=null&&$N(o,n),n}function jN(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["config"]);return o!=null&&GN(o,n),n}function WN(t,e){const n={},i=d(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=d(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&f(e,["parameters","safetySetting"],o);const s=d(t,["personGeneration"]);e!==void 0&&s!=null&&f(e,["parameters","personGeneration"],s);const r=d(t,["includeRaiReason"]);e!==void 0&&r!=null&&f(e,["parameters","includeRaiReason"],r);const a=d(t,["outputMimeType"]);e!==void 0&&a!=null&&f(e,["parameters","outputOptions","mimeType"],a);const l=d(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&f(e,["parameters","outputOptions","compressionQuality"],l);const c=d(t,["enhanceInputImage"]);e!==void 0&&c!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],c);const u=d(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const h=d(t,["labels"]);e!==void 0&&h!=null&&f(e,["labels"],h);const p=d(t,["numberOfImages"]);e!==void 0&&p!=null&&f(e,["parameters","sampleCount"],p);const g=d(t,["mode"]);return e!==void 0&&g!=null&&f(e,["parameters","mode"],g),n}function JN(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["_url","model"],te(t,i));const o=d(e,["image"]);o!=null&&f(n,["instances[0]","image"],Ut(o));const s=d(e,["upscaleFactor"]);s!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],s);const r=d(e,["config"]);return r!=null&&WN(r,n),n}function YN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>xl(s))),f(e,["generatedImages"],o)}return e}function KN(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const i=d(t,["encodedVideo"]);i!=null&&f(e,["videoBytes"],Xn(i));const o=d(t,["encoding"]);return o!=null&&f(e,["mimeType"],o),e}function QN(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=d(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Xn(i));const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function XN(t){const e={},n=d(t,["image"]);n!=null&&f(e,["_self"],Ut(n));const i=d(t,["maskMode"]);return i!=null&&f(e,["maskMode"],i),e}function ZN(t){const e={},n=d(t,["image"]);n!=null&&f(e,["image"],vl(n));const i=d(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function eP(t){const e={},n=d(t,["image"]);n!=null&&f(e,["image"],Ut(n));const i=d(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function Qy(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const i=d(t,["videoBytes"]);i!=null&&f(e,["encodedVideo"],Xn(i));const o=d(t,["mimeType"]);return o!=null&&f(e,["encoding"],o),e}function Xy(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const i=d(t,["videoBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Xn(i));const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tP(t,e){const n={},i=d(t,["displayName"]);return e!==void 0&&i!=null&&f(e,["displayName"],i),n}function nP(t){const e={},n=d(t,["config"]);return n!=null&&tP(n,e),e}function iP(t,e){const n={},i=d(t,["force"]);return e!==void 0&&i!=null&&f(e,["_query","force"],i),n}function oP(t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=d(t,["config"]);return i!=null&&iP(i,e),e}function sP(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function rP(t,e){const n={},i=d(t,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["customMetadata"],s)}const o=d(t,["chunkingConfig"]);return e!==void 0&&o!=null&&f(e,["chunkingConfig"],o),n}function aP(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const i=d(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=d(t,["done"]);o!=null&&f(e,["done"],o);const s=d(t,["error"]);s!=null&&f(e,["error"],s);const r=d(t,["response"]);return r!=null&&f(e,["response"],cP(r)),e}function lP(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const i=d(t,["fileName"]);i!=null&&f(e,["fileName"],i);const o=d(t,["config"]);return o!=null&&rP(o,e),e}function cP(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["parent"]);i!=null&&f(e,["parent"],i);const o=d(t,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function uP(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function dP(t){const e={},n=d(t,["config"]);return n!=null&&uP(n,e),e}function fP(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=d(t,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["fileSearchStores"],s)}return e}function Zy(t,e){const n={},i=d(t,["mimeType"]);e!==void 0&&i!=null&&f(e,["mimeType"],i);const o=d(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const s=d(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["customMetadata"],a)}const r=d(t,["chunkingConfig"]);return e!==void 0&&r!=null&&f(e,["chunkingConfig"],r),n}function hP(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const i=d(t,["config"]);return i!=null&&Zy(i,e),e}function pP(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mP="Content-Type",gP="X-Server-Timeout",xP="User-Agent",Iu="x-goog-api-client",vP="1.34.0",yP=`google-genai-sdk/${vP}`,_P="v1beta1",SP="v1beta";class wP{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:_P,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:SP,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[r,a]of Object.entries(e.queryParams))o.searchParams.append(r,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.unaryApiCall(o,s,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[o,s]of Object.entries(n))typeof s=="object"?i[o]=Object.assign(Object.assign({},i[o]),s):s!==void 0&&(i[o]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.streamApiCall(o,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,o){if(n&&n.timeout||o){const s=new AbortController,r=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),e.signal=r}return n&&n.extraBody!==null&&bP(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Ag(o),new bu(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Ag(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return Dt(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let r="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:u}=yield q(o.read());if(c){if(r.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=s.decode(u,{stream:!0});try{const x=JSON.parse(h);if("error"in x){const y=JSON.parse(JSON.stringify(x.error)),_=y.status,v=y.code,S=`got status: ${_}. ${JSON.stringify(x)}`;if(v>=400&&v<600)throw new ml({message:S,status:v})}}catch(x){if(x.name==="ApiError")throw x}r+=h;let p=-1,g=0;for(;;){p=-1,g=0;for(const _ of l){const v=r.indexOf(_);v!==-1&&(p===-1||v<p)&&(p=v,g=_.length)}if(p===-1)break;const x=r.substring(0,p);r=r.substring(p+g);const y=x.trim();if(y.startsWith(a)){const _=y.substring(a.length).trim();try{const v=new Response(_,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield q(new bu(v))}catch(v){throw new Error(`exception parsing stream chunk ${_}. ${v}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=yP+" "+this.clientOptions.userAgentExtra;return e[xP]=n,e[Iu]=n,e[mP]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[o,s]of Object.entries(e.headers))i.append(o,s);e.timeout&&e.timeout>0&&i.append(gP,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const s=this.clientOptions.uploader,r=await s.stat(e);o.sizeBytes=String(r.size);const a=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:r.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;const l={file:o},c=this.getFileName(e),u=U("upload/v1beta/files",l._url),h=await this.fetchUploadUrl(u,o.sizeBytes,o.mimeType,c,l,n==null?void 0:n.httpOptions);return s.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,i){var o;const s=this.clientOptions.uploader,r=await s.stat(n),a=String(r.size),l=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:r.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,u=this.getFileName(n),h={};i!=null&&Zy(i,h);const p=await this.fetchUploadUrl(c,a,l,u,h,i==null?void 0:i.httpOptions);return s.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,o,s,r){var a;let l={};r?l=r:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const c=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Ag(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new ml({message:o,status:n}):new Error(o)}}function bP(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,r){const a=Object.assign({},s);for(const l in r)if(Object.prototype.hasOwnProperty.call(r,l)){const c=r[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=i(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const o=i(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CP="mcp_used/unknown";let TP=!1;function e_(t){for(const e of t)if(EP(e)||typeof e=="object"&&"inputSchema"in e)return!0;return TP}function t_(t){var e;const n=(e=t[Iu])!==null&&e!==void 0?e:"";t[Iu]=(n+` ${CP}`).trimStart()}function EP(t){return t!==null&&typeof t=="object"&&t instanceof gf}function kP(t){return Dt(this,arguments,function*(n,i=100){let o,s=0;for(;s<i;){const r=yield q(n.listTools({cursor:o}));for(const a of r.tools)yield yield q(a),s++;if(!r.nextCursor)break;o=r.nextCursor}})}class gf{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new gf(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;const s={},r=[];for(const u of this.mcpClients)try{for(var a=!0,l=(n=void 0,Lt(kP(u))),c;c=await l.next(),e=c.done,!e;a=!0){o=c.value,a=!1;const h=o;r.push(h);const p=h.name;if(s[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);s[p]=u}}catch(h){n={error:h}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}this.mcpTools=r,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),s2(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const r=await o.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:r.isError?{error:r}:r}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function IP(t,e,n){const i=new QI;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),e(i)}class AP{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),r=PP(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const u=new Promise(w=>{c=w}),h=e.callbacks,p=function(){c({})},g=this.apiClient,x={onopen:p,onmessage:w=>{IP(g,h.onmessage,w)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(w){},onclose:(i=h==null?void 0:h.onclose)!==null&&i!==void 0?i:function(w){}},y=this.webSocketFactory.create(l,NP(r),x);y.connect(),await u;const S={setup:{model:te(this.apiClient,e.model)}};return y.send(JSON.stringify(S)),new MP(y,this.apiClient)}}class MP{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=nM(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=tM(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ji.PLAY)}pause(){this.sendPlaybackControl(ji.PAUSE)}stop(){this.sendPlaybackControl(ji.STOP)}resetContext(){this.sendPlaybackControl(ji.RESET_CONTEXT)}close(){this.conn.close()}}function NP(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function PP(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RP="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function DP(t,e,n){const i=new KI;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const s=JSON.parse(o);if(t.isVertexAI()){const r=sM(s);Object.assign(i,r)}else Object.assign(i,s);e(i)}class LP{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new AP(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,s,r,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let u;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&e_(e.config.tools)&&t_(h);const p=OP(h);if(this.apiClient.isVertexAI())u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,u);else{const A=this.apiClient.getApiKey();let I="BidiGenerateContent",L="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),I="BidiGenerateContentConstrained",L="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${I}?${L}=${A}`}let g=()=>{};const x=new Promise(A=>{g=A}),y=e.callbacks,_=function(){var A;(A=y==null?void 0:y.onopen)===null||A===void 0||A.call(y),g({})},v=this.apiClient,S={onopen:_,onmessage:A=>{DP(v,y.onmessage,A)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(A){},onclose:(i=y==null?void 0:y.onclose)!==null&&i!==void 0?i:function(A){}},w=this.webSocketFactory.create(u,UP(p),S);w.connect(),await x;let b=te(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&b.startsWith("publishers/")){const A=this.apiClient.getProject(),I=this.apiClient.getLocation();b=`projects/${A}/locations/${I}/`+b}let C={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Oa.AUDIO]}:e.config.responseModalities=[Oa.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const T=(a=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[],E=[];for(const A of T)if(this.isCallableTool(A)){const I=A;E.push(await I.tool())}else E.push(A);E.length>0&&(e.config.tools=E);const k={model:b,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?C=eM(this.apiClient,k):C=ZA(this.apiClient,k),delete C.config,w.send(JSON.stringify(C)),new zP(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const FP={turnComplete:!0};class zP{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=_t(n.turns),e.isVertexAI()||(i=i.map(o=>gl(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(RP)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},FP),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:oM(e)}:n={realtimeInput:iM(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function UP(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function OP(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mg=10;function Ng(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const r of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(io(r)){o=!0;break}if(!o)return!0;const s=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function io(t){return"callTool"in t&&typeof t.callTool=="function"}function VP(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>io(o)))!==null&&i!==void 0?i:!1}function Pg(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,o)=>{if(io(i))return;const s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(o)}),n}function Rg(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BP extends vn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,s,r,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!VP(n)||Ng(n.config))return await this.generateContentInternal(l);const c=Pg(n);if(c.length>0){const y=c.map(_=>`tools[${_}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${y}.`)}let u,h;const p=_t(l.contents),g=(s=(o=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Mg;let x=0;for(;x<g&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const y=u.candidates[0].content,_=[];for(const v of(a=(r=n.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[])if(io(v)){const w=await v.callTool(u.functionCalls);_.push(...w)}x++,h={role:"user",parts:_},l.contents=_t(l.contents),l.contents.push(y),l.contents.push(h),Rg(l.config)&&(p.push(y),p.push(h))}return Rg(l.config)&&(u.automaticFunctionCallingHistory=p),u},this.generateContentStream=async n=>{var i,o,s,r,a;if(this.maybeMoveToResponseJsonSchem(n),Ng(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const l=Pg(n);if(l.length>0){const h=l.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(s=(o=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,u=(a=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!u)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let s;const r=[];if(i!=null&&i.generatedImages)for(const l of i.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((o=l==null?void 0:l.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:r.push(l);let a;return s?a={generatedImages:r,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:r,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async n=>{var i;const r={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!r.config.queryBase){if(!((i=r.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");r.config.filter="labels.tune-type:*"}return new Ai(mn.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(r),r)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,s,r,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((r=(s=n.source)===null||s===void 0?void 0:s.video)===null||r===void 0)&&r.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,o;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const r=await Promise.all(s.map(async l=>io(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:r})};if(a.config.tools=r,e.config&&e.config.tools&&e_(e.config.tools)){const l=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),t_(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,i,o;const s=new Map;for(const r of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(io(r)){const a=r,l=await a.tool();for(const c of(o=l.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(e){var n,i,o;const s=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Mg;let r=!1,a=0;const l=await this.initAfcToolsMap(e);return function(c,u,h){return Dt(this,arguments,function*(){for(var p,g,x,y,_,v;a<s;){r&&(a++,r=!1);const C=yield q(c.processParamsMaybeAddMcpUsage(h)),T=yield q(c.generateContentStreamInternal(C)),E=[],k=[];try{for(var S=!0,w=(g=void 0,Lt(T)),b;b=yield q(w.next()),p=b.done,!p;S=!0){y=b.value,S=!1;const A=y;if(yield yield q(A),A.candidates&&(!((_=A.candidates[0])===null||_===void 0)&&_.content)){k.push(A.candidates[0].content);for(const I of(v=A.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<s&&I.functionCall){if(!I.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has(I.functionCall.name)){const L=yield q(u.get(I.functionCall.name).callTool([I.functionCall]));E.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${I.functionCall.name}`)}}}}catch(A){g={error:A}}finally{try{!S&&!p&&(x=w.return)&&(yield q(x.call(w)))}finally{if(g)throw g.error}}if(E.length>0){r=!0;const A=new Uo;A.candidates=[{content:{role:"user",parts:E}}],yield yield q(A);const I=[];I.push(...k),I.push({role:"user",parts:E});const L=_t(h.contents).concat(I);h.contents=L}else break}})}(this,l,e)}async generateContentInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=Eg(this.apiClient,e);return a=U("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=Ig(u),p=new Uo;return Object.assign(p,h),p})}else{const c=Tg(this.apiClient,e);return a=U("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=kg(u),p=new Uo;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=Eg(this.apiClient,e);return a=U("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),r.then(function(h){return Dt(this,arguments,function*(){var p,g,x,y;try{for(var _=!0,v=Lt(h),S;S=yield q(v.next()),p=S.done,!p;_=!0){y=S.value,_=!1;const w=y,b=Ig(yield q(w.json()));b.sdkHttpResponse={headers:w.headers};const C=new Uo;Object.assign(C,b),yield yield q(C)}}catch(w){g={error:w}}finally{try{!_&&!p&&(x=v.return)&&(yield q(x.call(v)))}finally{if(g)throw g.error}}})})}else{const c=Tg(this.apiClient,e);return a=U("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),r.then(function(h){return Dt(this,arguments,function*(){var p,g,x,y;try{for(var _=!0,v=Lt(h),S;S=yield q(v.next()),p=S.done,!p;_=!0){y=S.value,_=!1;const w=y,b=kg(yield q(w.json()));b.sdkHttpResponse={headers:w.headers};const C=new Uo;Object.assign(C,b),yield yield q(C)}}catch(w){g={error:w}}finally{try{!_&&!p&&(x=v.return)&&(yield q(x.call(v)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=LM(this.apiClient,e);return a=U("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=zM(u),p=new lg;return Object.assign(p,h),p})}else{const c=DM(this.apiClient,e);return a=U("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=FM(u),p=new lg;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=JM(this.apiClient,e);return a=U("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=KM(u),p=new cg;return Object.assign(p,h),p})}else{const c=WM(this.apiClient,e);return a=U("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=YM(u),p=new cg;return Object.assign(p,h),p})}}async editImageInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=MM(this.apiClient,e);return s=U("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),o.then(l=>{const c=NM(l),u=new OI;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=JN(this.apiClient,e);return s=U("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),o.then(l=>{const c=YN(l),u=new VI;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=AN(this.apiClient,e);return s=U("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const c=MN(l),u=new BI;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=FN(this.apiClient,e);return s=U("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const c=zN(l),u=new HI;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=hN(this.apiClient,e);return a=U("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>ku(u))}else{const c=fN(this.apiClient,e);return a=U("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),r.then(u=>Eu(u))}}async listInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=wN(this.apiClient,e);return a=U("{models_url}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=CN(u),p=new ug;return Object.assign(p,h),p})}else{const c=SN(this.apiClient,e);return a=U("{models_url}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=bN(u),p=new ug;return Object.assign(p,h),p})}}async update(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=jN(this.apiClient,e);return a=U("{model}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>ku(u))}else{const c=qN(this.apiClient,e);return a=U("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),r.then(u=>Eu(u))}}async delete(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=EM(this.apiClient,e);return a=U("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=IM(u),p=new dg;return Object.assign(p,h),p})}else{const c=TM(this.apiClient,e);return a=U("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=kM(u),p=new dg;return Object.assign(p,h),p})}}async countTokens(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=wM(this.apiClient,e);return a=U("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=CM(u),p=new fg;return Object.assign(p,h),p})}else{const c=SM(this.apiClient,e);return a=U("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=bM(u),p=new fg;return Object.assign(p,h),p})}}async computeTokens(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=pM(this.apiClient,e);return s=U("{model}:computeTokens",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),o.then(l=>{const c=mM(l),u=new $I;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=nN(this.apiClient,e);return a=U("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>{const h=eN(u),p=new Va;return Object.assign(p,h),p})}else{const c=tN(this.apiClient,e);return a=U("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),r.then(u=>{const h=ZM(u),p=new Va;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HP extends vn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=RI(e);return a=U("{operationName}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r}else{const c=PI(e);return a=U("{operationName}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),r}}async fetchPredictVideosOperationInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=TI(e);return s=U("{resourceName}:fetchPredictOperation",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $P(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function GP(t){const e={},n=d(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ZP(s))),f(e,["parts"],o)}const i=d(t,["role"]);return i!=null&&f(e,["role"],i),e}function qP(t,e,n){const i={},o=d(e,["expireTime"]);n!==void 0&&o!=null&&f(n,["expireTime"],o);const s=d(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&f(n,["newSessionExpireTime"],s);const r=d(e,["uses"]);n!==void 0&&r!=null&&f(n,["uses"],r);const a=d(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],XP(t,a));const l=d(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),i}function jP(t,e){const n={},i=d(e,["config"]);return i!=null&&f(n,["config"],qP(t,i,n)),n}function WP(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=d(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function JP(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const i=d(t,["args"]);i!=null&&f(e,["args"],i);const o=d(t,["name"]);if(o!=null&&f(e,["name"],o),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function YP(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function KP(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function QP(t,e){const n={},i=d(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);const s=d(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const r=d(t,["topP"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","topP"],r);const a=d(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=d(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=d(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const u=d(t,["seed"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","seed"],u);const h=d(t,["speechConfig"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","speechConfig"],mf(h));const p=d(t,["thinkingConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","thinkingConfig"],p);const g=d(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=d(t,["systemInstruction"]);e!==void 0&&x!=null&&f(e,["setup","systemInstruction"],GP(Be(x)));const y=d(t,["tools"]);if(e!==void 0&&y!=null){let T=yo(y);Array.isArray(T)&&(T=T.map(E=>tR(vo(E)))),f(e,["setup","tools"],T)}const _=d(t,["sessionResumption"]);e!==void 0&&_!=null&&f(e,["setup","sessionResumption"],eR(_));const v=d(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&f(e,["setup","inputAudioTranscription"],v);const S=d(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&f(e,["setup","outputAudioTranscription"],S);const w=d(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&f(e,["setup","realtimeInputConfig"],w);const b=d(t,["contextWindowCompression"]);e!==void 0&&b!=null&&f(e,["setup","contextWindowCompression"],b);const C=d(t,["proactivity"]);if(e!==void 0&&C!=null&&f(e,["setup","proactivity"],C),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function XP(t,e){const n={},i=d(e,["model"]);i!=null&&f(n,["setup","model"],te(t,i));const o=d(e,["config"]);return o!=null&&f(n,["config"],QP(o,n)),n}function ZP(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=d(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=d(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=d(t,["fileData"]);s!=null&&f(e,["fileData"],WP(s));const r=d(t,["functionCall"]);r!=null&&f(e,["functionCall"],JP(r));const a=d(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=d(t,["inlineData"]);l!=null&&f(e,["inlineData"],$P(l));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const u=d(t,["thought"]);u!=null&&f(e,["thought"],u);const h=d(t,["thoughtSignature"]);h!=null&&f(e,["thoughtSignature"],h);const p=d(t,["videoMetadata"]);return p!=null&&f(e,["videoMetadata"],p),e}function eR(t){const e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function tR(t){const e={},n=d(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=d(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=d(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],YP(a));const l=d(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],KP(l));const c=d(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nR(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(s=>`${n}.${s}`);e.push(...o)}else e.push(n)}return e.join(",")}function iR(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const s=nR(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const r=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];o.length>0&&(a=o.map(c=>r.includes(c)?`generationConfig.${c}`:c));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class oR extends vn{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=jP(this.apiClient,e);s=U("auth_tokens",a._url),r=a._query,delete a.config,delete a._url,delete a._query;const l=iR(a,e.config);return o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sR(t,e){const n={},i=d(t,["force"]);return e!==void 0&&i!=null&&f(e,["_query","force"],i),n}function rR(t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=d(t,["config"]);return i!=null&&sR(i,e),e}function aR(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function lR(t,e){const n={},i=d(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function cR(t){const e={},n=d(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const i=d(t,["config"]);return i!=null&&lR(i,e),e}function uR(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=d(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=d(t,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dR extends vn{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ai(mn.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=aR(e);return s=U("{name}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=rR(e);o=U("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=cR(e);return s=U("{parent}/documents",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const c=uR(l),u=new GI;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fR extends vn{constructor(e,n=new dR(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Ai(mn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=nP(e);return s=U("fileSearchStores",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=sP(e);return s=U("{name}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=oP(e);o=U("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=dP(e);return s=U("fileSearchStores",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const c=fP(l),u=new qI;return Object.assign(u,c),u})}}async uploadToFileSearchStoreInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hP(e);return s=U("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const c=pP(l),u=new jI;return Object.assign(u,c),u})}}async importFile(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=lP(e);return s=U("{file_search_store_name}:importFile",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const c=aP(l),u=new uf;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let n_=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return n_=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const hR=()=>n_();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Au(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Mu=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bt extends Error{}class Je extends bt{constructor(e,n,i,o){super(`${Je.makeMessage(e,n,i)}`),this.status=e,this.headers=o,this.error=n}static makeMessage(e,n,i){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,i,o){if(!e||!o)return new yl({message:i,cause:Mu(n)});const s=n;return e===400?new o_(e,s,i,o):e===401?new s_(e,s,i,o):e===403?new r_(e,s,i,o):e===404?new a_(e,s,i,o):e===409?new l_(e,s,i,o):e===422?new c_(e,s,i,o):e===429?new u_(e,s,i,o):e>=500?new d_(e,s,i,o):new Je(e,s,i,o)}}class Nu extends Je{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class yl extends Je{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class i_ extends yl{constructor({message:e}={}){super({message:e??"Request timed out."})}}class o_ extends Je{}class s_ extends Je{}class r_ extends Je{}class a_ extends Je{}class l_ extends Je{}class c_ extends Je{}class u_ extends Je{}class d_ extends Je{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pR=/^[a-z][a-z0-9+.-]*:/i,mR=t=>pR.test(t);let Pu=t=>(Pu=Array.isArray,Pu(t));const gR=Pu;let xR=gR;const Dg=xR;function vR(t){if(!t)return!0;for(const e in t)return!1;return!0}function yR(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const _R=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new bt(`${t} must be an integer`);if(e<0)throw new bt(`${t} must be a positive integer`);return e},SR=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wR=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ri="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bR(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const CR=()=>{var t,e,n,i,o;const s=bR();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ri,"X-Stainless-OS":Fg(Deno.build.os),"X-Stainless-Arch":Lg(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ri,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ri,"X-Stainless-OS":Fg((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Lg((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const r=TR();return r?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ri,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${r.browser}`,"X-Stainless-Runtime-Version":r.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ri,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function TR(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const o=i[1]||0,s=i[2]||0,r=i[3]||0;return{browser:e,version:`${o}.${s}.${r}`}}}return null}const Lg=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Fg=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ar;const ER=()=>Ar??(Ar=CR());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kR(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function f_(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function IR(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return f_({start(){},async pull(n){const{done:i,value:o}=await e.next();i?n.close():n.enqueue(o)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function h_(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function AR(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MR=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p_=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function cc(t,e,n){return p_(),new File(t,e??"unknown_file",n)}function NR(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const PR=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const m_=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",RR=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&m_(t),DR=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function LR(t,e,n){if(p_(),t=await t,RR(t))return t instanceof File?t:cc([await t.arrayBuffer()],t.name);if(DR(t)){const o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),cc(await Ru(o),e,n)}const i=await Ru(t);if(e||(e=NR(t)),!(n!=null&&n.type)){const o=i.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return cc(i,e,n)}async function Ru(t){var e,n,i,o,s;let r=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)r.push(t);else if(m_(t))r.push(t instanceof Blob?t:await t.arrayBuffer());else if(PR(t))try{for(var a=!0,l=Lt(t),c;c=await l.next(),e=c.done,!e;a=!0){o=c.value,a=!1;const u=o;r.push(...await Ru(u))}}catch(u){n={error:u}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}else{const u=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${u?`; constructor: ${u}`:""}${FR(t)}`)}return r}function FR(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g_{constructor(e){this._client=e}}g_._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x_(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const zg=Object.freeze(Object.create(null)),zR=(t=x_)=>function(n,...i){if(n.length===1)return n[0];let o=!1;const s=[],r=n.reduce((u,h,p)=>{var g,x,y;/[?#]/.test(h)&&(o=!0);const _=i[p];let v=(o?encodeURIComponent:t)(""+_);return p!==i.length&&(_==null||typeof _=="object"&&_.toString===((y=Object.getPrototypeOf((x=Object.getPrototypeOf((g=_.hasOwnProperty)!==null&&g!==void 0?g:zg))!==null&&x!==void 0?x:zg))===null||y===void 0?void 0:y.toString))&&(v=_+"",s.push({start:u.length+h.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(_).slice(8,-1)} is not a valid path parameter`})),u+h+(p===i.length?"":v)},""),a=r.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)s.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(s.sort((u,h)=>u.start-h.start),s.length>0){let u=0;const h=s.reduce((p,g)=>{const x=" ".repeat(g.start-u),y="^".repeat(g.length);return u=g.start+g.length,p+x+y},"");throw new bt(`Path parameters result in path with invalid segments:
${s.map(p=>p.error).join(`
`)}
${r}
${h}`)}return r},Mr=zR(x_);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v_ extends g_{create(e,n){var i;const{api_version:o=this._client.apiVersion}=e,s=Ha(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new bt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new bt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Mr`/${o}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(Mr`/${o}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.post(Mr`/${o}/interactions/${e}/cancel`,i)}get(e,n={},i){var o;const s=n??{},{api_version:r=this._client.apiVersion}=s,a=Ha(s,["api_version"]);return this._client.get(Mr`/${r}/interactions/${e}`,Object.assign(Object.assign({query:a},i),{stream:(o=n==null?void 0:n.stream)!==null&&o!==void 0?o:!1}))}}v_._key=Object.freeze(["interactions"]);class y_ extends v_{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UR(t){let e=0;for(const o of t)e+=o.length;const n=new Uint8Array(e);let i=0;for(const o of t)n.set(o,i),i+=o.length;return n}let Nr;function xf(t){let e;return(Nr??(e=new globalThis.TextEncoder,Nr=e.encode.bind(e)))(t)}let Pr;function Ug(t){let e;return(Pr??(e=new globalThis.TextDecoder,Pr=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _l{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?xf(e):e;this.buffer=UR([this.buffer,n]);const i=[];let o;for(;(o=OR(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(Ug(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,r=Ug(this.buffer.subarray(0,s));i.push(r),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}_l.NEWLINE_CHARS=new Set([`
`,"\r"]);_l.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function OR(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function VR(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $a={off:0,error:200,warn:300,info:400,debug:500},Og=(t,e,n)=>{if(t){if(yR($a,t))return t;Ge(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys($a))}`)}};function Ko(){}function Rr(t,e,n){return!e||$a[t]>$a[n]?Ko:e[t].bind(e)}const BR={error:Ko,warn:Ko,info:Ko,debug:Ko};let Vg=new WeakMap;function Ge(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return BR;const o=Vg.get(n);if(o&&o[0]===i)return o[1];const s={error:Rr("error",n,i),warn:Rr("warn",n,i),info:Rr("info",n,i),debug:Rr("debug",n,i)};return Vg.set(n,[i,s]),s}const li=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wi{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let o=!1;const s=i?Ge(i):console;function r(){return Dt(this,arguments,function*(){var l,c,u,h;if(o)throw new bt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let p=!1;try{try{for(var g=!0,x=Lt(HR(e,n)),y;y=yield q(x.next()),l=y.done,!l;g=!0){h=y.value,g=!1;const _=h;if(!p)if(_.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield q(JSON.parse(_.data))}catch(v){throw s.error("Could not parse message into JSON:",_.data),s.error("From chunk:",_.raw),v}}}catch(_){c={error:_}}finally{try{!g&&!l&&(u=x.return)&&(yield q(u.call(x)))}finally{if(c)throw c.error}}p=!0}catch(_){if(Au(_))return yield q(void 0);throw _}finally{p||n.abort()}})}return new Wi(r,n,i)}static fromReadableStream(e,n,i){let o=!1;function s(){return Dt(this,arguments,function*(){var l,c,u,h;const p=new _l,g=h_(e);try{for(var x=!0,y=Lt(g),_;_=yield q(y.next()),l=_.done,!l;x=!0){h=_.value,x=!1;const v=h;for(const S of p.decode(v))yield yield q(S)}}catch(v){c={error:v}}finally{try{!x&&!l&&(u=y.return)&&(yield q(u.call(y)))}finally{if(c)throw c.error}}for(const v of p.flush())yield yield q(v)})}function r(){return Dt(this,arguments,function*(){var l,c,u,h;if(o)throw new bt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let p=!1;try{try{for(var g=!0,x=Lt(s()),y;y=yield q(x.next()),l=y.done,!l;g=!0){h=y.value,g=!1;const _=h;p||_&&(yield yield q(JSON.parse(_)))}}catch(_){c={error:_}}finally{try{!g&&!l&&(u=x.return)&&(yield q(u.call(x)))}finally{if(c)throw c.error}}p=!0}catch(_){if(Au(_))return yield q(void 0);throw _}finally{p||n.abort()}})}return new Wi(r,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),o=s=>({next:()=>{if(s.length===0){const r=i.next();e.push(r),n.push(r)}return s.shift()}});return[new Wi(()=>o(e),this.controller,this.client),new Wi(()=>o(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return f_({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:s}=await n.next();if(s)return i.close();const r=xf(JSON.stringify(o)+`
`);i.enqueue(r)}catch(o){i.error(o)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function HR(t,e){return Dt(this,arguments,function*(){var i,o,s,r;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new bt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new bt("Attempted to iterate over a response with no body");const a=new GR,l=new _l,c=h_(t.body);try{for(var u=!0,h=Lt($R(c)),p;p=yield q(h.next()),i=p.done,!i;u=!0){r=p.value,u=!1;const g=r;for(const x of l.decode(g)){const y=a.decode(x);y&&(yield yield q(y))}}}catch(g){o={error:g}}finally{try{!u&&!i&&(s=h.return)&&(yield q(s.call(h)))}finally{if(o)throw o.error}}for(const g of l.flush()){const x=a.decode(g);x&&(yield yield q(x))}})}function $R(t){return Dt(this,arguments,function*(){var n,i,o,s;let r=new Uint8Array;try{for(var a=!0,l=Lt(t),c;c=yield q(l.next()),n=c.done,!n;a=!0){s=c.value,a=!1;const u=s;if(u==null)continue;const h=u instanceof ArrayBuffer?new Uint8Array(u):typeof u=="string"?xf(u):u;let p=new Uint8Array(r.length+h.length);p.set(r),p.set(h,r.length),r=p;let g;for(;(g=VR(r))!==-1;)yield yield q(r.slice(0,g)),r=r.slice(g)}}catch(u){i={error:u}}finally{try{!a&&!n&&(o=l.return)&&(yield q(o.call(l)))}finally{if(i)throw i.error}}r.length>0&&(yield yield q(r))})}class GR{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,o]=qR(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function qR(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function jR(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:s}=e,r=await(async()=>{var a;if(e.options.stream)return Ge(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Wi.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return Ge(t).debug(`[${i}] response parsed`,li({retryOfRequestLogID:o,url:n.url,status:n.status,body:r,durationMs:Date.now()-s})),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vf extends Promise{constructor(e,n,i=jR){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new vf(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const __=Symbol("brand.privateNullableHeaders");function*WR(t){if(!t)return;if(__ in t){const{values:i,nulls:o}=t;yield*i.entries();for(const s of o)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Dg(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const s=Dg(i[1])?i[1]:[i[1]];let r=!1;for(const a of s)a!==void 0&&(e&&!r&&(r=!0,yield[o,null]),yield[o,a])}}const Oo=t=>{const e=new Headers,n=new Set;for(const i of t){const o=new Set;for(const[s,r]of WR(i)){const a=s.toLowerCase();o.has(a)||(e.delete(s),o.add(a)),r===null?(e.delete(s),n.add(a)):(e.append(s,r),n.delete(a))}}return{[__]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uc=t=>{var e,n,i,o,s,r;if(typeof globalThis.process<"u")return(i=(n=(e=yI)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(r=(s=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||s===void 0?void 0:s.call(o,t))===null||r===void 0?void 0:r.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var S_;class Sl{constructor(e){var n,i,o,s,r,a,l,{baseURL:c=uc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:u=(n=uc("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=e,p=Ha(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:u,apiVersion:h},p),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(i=g.timeout)!==null&&i!==void 0?i:Sl.DEFAULT_TIMEOUT,this.logger=(o=g.logger)!==null&&o!==void 0?o:console;const x="warn";this.logLevel=x,this.logLevel=(r=(s=Og(g.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:Og(uc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&r!==void 0?r:x,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:kR(),this.encoder=MR,this._options=g,this.apiKey=u,this.apiVersion=h,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Oo([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Oo([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Oo([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new bt(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ri}`}defaultIdempotencyKey(){return`stainless-node-retry-${hR()}`}makeStatusError(e,n,i,o){return Je.generate(e,n,i,o)}buildURL(e,n,i){const o=!this.baseURLOverridden()&&i||this.baseURL,s=mR(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return vR(r)||(n=Object.assign(Object.assign({},r),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:n},o)))}request(e,n=null){return new vf(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var o,s,r;const a=await e,l=(o=a.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:u,timeout:h}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:u,options:a});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=i===void 0?"":`, retryOf: ${i}`,x=Date.now();if(Ge(this).debug(`[${p}] sending request`,li({retryOfRequestLogID:i,method:a.method,url:u,options:a,headers:c.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Nu;const y=new AbortController,_=await this.fetchWithTimeout(u,c,h,y).catch(Mu),v=Date.now();if(_ instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if(!((r=a.signal)===null||r===void 0)&&r.aborted)throw new Nu;const b=Au(_)||/timed? ?out/i.test(String(_)+("cause"in _?String(_.cause):""));if(n)return Ge(this).info(`[${p}] connection ${b?"timed out":"failed"} - ${w}`),Ge(this).debug(`[${p}] connection ${b?"timed out":"failed"} (${w})`,li({retryOfRequestLogID:i,url:u,durationMs:v-x,message:_.message})),this.retryRequest(a,n,i??p);throw Ge(this).info(`[${p}] connection ${b?"timed out":"failed"} - error; no more retries left`),Ge(this).debug(`[${p}] connection ${b?"timed out":"failed"} (error; no more retries left)`,li({retryOfRequestLogID:i,url:u,durationMs:v-x,message:_.message})),b?new i_:new yl({cause:_})}const S=`[${p}${g}] ${c.method} ${u} ${_.ok?"succeeded":"failed"} with status ${_.status} in ${v-x}ms`;if(!_.ok){const w=await this.shouldRetry(_);if(n&&w){const A=`retrying, ${n} attempts remaining`;return await AR(_.body),Ge(this).info(`${S} - ${A}`),Ge(this).debug(`[${p}] response error (${A})`,li({retryOfRequestLogID:i,url:_.url,status:_.status,headers:_.headers,durationMs:v-x})),this.retryRequest(a,n,i??p,_.headers)}const b=w?"error; no more retries left":"error; not retryable";Ge(this).info(`${S} - ${b}`);const C=await _.text().catch(A=>Mu(A).message),T=SR(C),E=T?void 0:C;throw Ge(this).debug(`[${p}] response error (${b})`,li({retryOfRequestLogID:i,url:_.url,status:_.status,headers:_.headers,message:E,durationMs:Date.now()-x})),this.makeStatusError(_.status,T,E,_.headers)}return Ge(this).info(S),Ge(this).debug(`[${p}] response start`,li({retryOfRequestLogID:i,url:_.url,status:_.status,headers:_.headers,durationMs:v-x})),{response:_,options:a,controller:y,requestLogID:p,retryOfRequestLogID:i,startTime:x}}async fetchWithTimeout(e,n,i,o){const s=n||{},{signal:r,method:a}=s,l=Ha(s,["signal","method"]);r&&r.addEventListener("abort",()=>o.abort());const c=setTimeout(()=>o.abort(),i),u=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,h=Object.assign(Object.assign(Object.assign({signal:o.signal},u?{duplex:"half"}:{}),{method:"GET"}),l);a&&(h.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,o){var s;let r;const a=o==null?void 0:o.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(r=c)}const l=o==null?void 0:o.get("retry-after");if(l&&!r){const c=parseFloat(l);Number.isNaN(c)?r=Date.parse(l)-Date.now():r=c*1e3}if(!(r&&0<=r&&r<60*1e3)){const c=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(n,c)}return await wR(r),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,r=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return r*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,o,s;const r=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:u}=r,h=this.buildURL(l,c,u);"timeout"in r&&_R("timeout",r.timeout),r.timeout=(i=r.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:p,body:g}=this.buildBody({options:r}),x=await this.buildHeaders({options:e,method:a,bodyHeaders:p,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:x},r.signal&&{signal:r.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(s=r.fetchOptions)!==null&&s!==void 0?s:{}),url:h,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:o}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const r=await this.authHeaders(e);let a=Oo([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),ER()),this._options.defaultHeaders,i,e.headers,r]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Oo([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:IR(e)}:this.encoder({body:e,headers:i})}}Sl.DEFAULT_TIMEOUT=6e4;class Me extends Sl{constructor(){super(...arguments),this.interactions=new y_(this)}}S_=Me;Me.GeminiNextGenAPIClient=S_;Me.GeminiNextGenAPIClientError=bt;Me.APIError=Je;Me.APIConnectionError=yl;Me.APIConnectionTimeoutError=i_;Me.APIUserAbortError=Nu;Me.NotFoundError=a_;Me.ConflictError=l_;Me.RateLimitError=u_;Me.BadRequestError=o_;Me.AuthenticationError=s_;Me.InternalServerError=d_;Me.PermissionDeniedError=r_;Me.UnprocessableEntityError=c_;Me.toFile=LR;Me.Interactions=y_;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JR(t,e){const n={},i=d(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function YR(t,e){const n={},i=d(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function KR(t,e){const n={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function QR(t,e){const n={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function XR(t,e,n){const i={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=d(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&f(e,["displayName"],o),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=d(t,["epochCount"]);e!==void 0&&s!=null&&f(e,["tuningTask","hyperparameters","epochCount"],s);const r=d(t,["learningRateMultiplier"]);if(r!=null&&f(i,["tuningTask","hyperparameters","learningRateMultiplier"],r),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=d(t,["batchSize"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","batchSize"],a);const l=d(t,["learningRate"]);if(e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","learningRate"],l),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function ZR(t,e,n){const i={};let o=d(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const g=d(t,["validationDataset"]);e!==void 0&&g!=null&&f(e,["supervisedTuningSpec"],Bg(g))}else if(o==="PREFERENCE_TUNING"){const g=d(t,["validationDataset"]);e!==void 0&&g!=null&&f(e,["preferenceOptimizationSpec"],Bg(g))}const s=d(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&f(e,["tunedModelDisplayName"],s);const r=d(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);let a=d(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=d(t,["epochCount"]);e!==void 0&&g!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=d(t,["epochCount"]);e!==void 0&&g!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=d(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=d(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=d(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=d(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=d(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let u=d(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=d(t,["adapterSize"]);e!==void 0&&g!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(u==="PREFERENCE_TUNING"){const g=d(t,["adapterSize"]);e!==void 0&&g!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=d(t,["labels"]);e!==void 0&&h!=null&&f(e,["labels"],h);const p=d(t,["beta"]);return e!==void 0&&p!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],p),i}function eD(t,e){const n={},i=d(t,["baseModel"]);i!=null&&f(n,["baseModel"],i);const o=d(t,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);const s=d(t,["trainingDataset"]);s!=null&&dD(s);const r=d(t,["config"]);return r!=null&&XR(r,n),n}function tD(t,e){const n={},i=d(t,["baseModel"]);i!=null&&f(n,["baseModel"],i);const o=d(t,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);const s=d(t,["trainingDataset"]);s!=null&&fD(s,n,e);const r=d(t,["config"]);return r!=null&&ZR(r,n,e),n}function nD(t,e){const n={},i=d(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function iD(t,e){const n={},i=d(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function oD(t,e,n){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const s=d(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);const r=d(t,["filter"]);return e!==void 0&&r!=null&&f(e,["_query","filter"],r),i}function sD(t,e,n){const i={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const s=d(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);const r=d(t,["filter"]);return e!==void 0&&r!=null&&f(e,["_query","filter"],r),i}function rD(t,e){const n={},i=d(t,["config"]);return i!=null&&oD(i,n),n}function aD(t,e){const n={},i=d(t,["config"]);return i!=null&&sD(i,n),n}function lD(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);const s=d(t,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>w_(a))),f(n,["tuningJobs"],r)}return n}function cD(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=d(t,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);const s=d(t,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>Du(a))),f(n,["tuningJobs"],r)}return n}function uD(t,e){const n={},i=d(t,["name"]);i!=null&&f(n,["model"],i);const o=d(t,["name"]);return o!=null&&f(n,["endpoint"],o),n}function dD(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(n,["examples","examples"],o)}return n}function fD(t,e,n){const i={};let o=d(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const r=d(t,["gcsUri"]);e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(o==="PREFERENCE_TUNING"){const r=d(t,["gcsUri"]);e!==void 0&&r!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],r)}let s=d(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const r=d(t,["vertexDatasetResource"]);e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(s==="PREFERENCE_TUNING"){const r=d(t,["vertexDatasetResource"]);e!==void 0&&r!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],r)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function w_(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&f(n,["name"],o);const s=d(t,["state"]);s!=null&&f(n,["state"],Uy(s));const r=d(t,["createTime"]);r!=null&&f(n,["createTime"],r);const a=d(t,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);const l=d(t,["tuningTask","completeTime"]);l!=null&&f(n,["endTime"],l);const c=d(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);const u=d(t,["description"]);u!=null&&f(n,["description"],u);const h=d(t,["baseModel"]);h!=null&&f(n,["baseModel"],h);const p=d(t,["_self"]);return p!=null&&f(n,["tunedModel"],uD(p)),n}function Du(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&f(n,["name"],o);const s=d(t,["state"]);s!=null&&f(n,["state"],Uy(s));const r=d(t,["createTime"]);r!=null&&f(n,["createTime"],r);const a=d(t,["startTime"]);a!=null&&f(n,["startTime"],a);const l=d(t,["endTime"]);l!=null&&f(n,["endTime"],l);const c=d(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);const u=d(t,["error"]);u!=null&&f(n,["error"],u);const h=d(t,["description"]);h!=null&&f(n,["description"],h);const p=d(t,["baseModel"]);p!=null&&f(n,["baseModel"],p);const g=d(t,["tunedModel"]);g!=null&&f(n,["tunedModel"],g);const x=d(t,["preTunedModel"]);x!=null&&f(n,["preTunedModel"],x);const y=d(t,["supervisedTuningSpec"]);y!=null&&f(n,["supervisedTuningSpec"],y);const _=d(t,["preferenceOptimizationSpec"]);_!=null&&f(n,["preferenceOptimizationSpec"],_);const v=d(t,["tuningDataStats"]);v!=null&&f(n,["tuningDataStats"],v);const S=d(t,["encryptionSpec"]);S!=null&&f(n,["encryptionSpec"],S);const w=d(t,["partnerModelTuningSpec"]);w!=null&&f(n,["partnerModelTuningSpec"],w);const b=d(t,["customBaseModel"]);b!=null&&f(n,["customBaseModel"],b);const C=d(t,["experiment"]);C!=null&&f(n,["experiment"],C);const T=d(t,["labels"]);T!=null&&f(n,["labels"],T);const E=d(t,["outputUri"]);E!=null&&f(n,["outputUri"],E);const k=d(t,["pipelineJob"]);k!=null&&f(n,["pipelineJob"],k);const A=d(t,["serviceAccount"]);A!=null&&f(n,["serviceAccount"],A);const I=d(t,["tunedModelDisplayName"]);I!=null&&f(n,["tunedModelDisplayName"],I);const L=d(t,["veoTuningSpec"]);return L!=null&&f(n,["veoTuningSpec"],L),n}function hD(t,e){const n={},i=d(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=d(t,["name"]);o!=null&&f(n,["name"],o);const s=d(t,["metadata"]);s!=null&&f(n,["metadata"],s);const r=d(t,["done"]);r!=null&&f(n,["done"],r);const a=d(t,["error"]);return a!=null&&f(n,["error"],a),n}function Bg(t,e){const n={},i=d(t,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);const o=d(t,["vertexDatasetResource"]);return o!=null&&f(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pD extends vn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ai(mn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:wu.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=iD(e);return a=U("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>Du(u))}else{const c=nD(e);return a=U("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>w_(u))}}async listInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=aD(e);return a=U("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=cD(u),p=new hg;return Object.assign(p,h),p})}else{const c=rD(e);return a=U("tunedModels",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=lD(u),p=new hg;return Object.assign(p,h),p})}}async cancel(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=YR(e);return a=U("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=QR(u),p=new pg;return Object.assign(p,h),p})}else{const c=JR(e);return a=U("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:u.headers},p})),r.then(u=>{const h=KR(u),p=new pg;return Object.assign(p,h),p})}}async tuneInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=tD(e,e);return s=U("tuningJobs",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),o.then(l=>Du(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=eD(e);return s=U("tunedModels",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),o.then(l=>hD(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mD{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const gD=1024*1024*8,xD=3,vD=1e3,yD=2,Ga="x-goog-upload-status";async function _D(t,e,n){var i;const o=await b_(t,e,n),s=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Ga])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function SD(t,e,n){var i;const o=await b_(t,e,n),s=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Ga])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const r=Py(s),a=new df;return Object.assign(a,r),a}async function b_(t,e,n){var i,o;let s=0,r=0,a=new bu(new Response),l="upload";for(s=t.size;r<s;){const c=Math.min(gD,s-r),u=t.slice(r,r+c);r+c>=s&&(l+=", finalize");let h=0,p=vD;for(;h<xD&&(a=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(r),"Content-Length":String(c)}}}),!(!((i=a==null?void 0:a.headers)===null||i===void 0)&&i[Ga]));)h++,await bD(p),p=p*yD;if(r+=c,((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[Ga])!=="active")break;if(s<=r)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function wD(t){return{size:t.size,type:t.type}}function bD(t){return new Promise(e=>setTimeout(e,t))}class CD{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _D(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await SD(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wD(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TD{create(e,n,i){return new ED(e,n,i)}}class ED{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hg="x-goog-api-key";class kD{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Hg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Hg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ID="gl-node/";class AD{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Me({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=bI(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new kD(this.apiKey);this.apiClient=new wP({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:ID+"web",uploader:new CD,downloader:new mD}),this.models=new BP(this.apiClient),this.live=new LP(this.apiClient,o,new TD),this.batches=new X2(this.apiClient),this.chats=new RA(this.models,this.apiClient),this.caches=new MA(this.apiClient),this.files=new $A(this.apiClient),this.operations=new HP(this.apiClient),this.authTokens=new oR(this.apiClient),this.tunings=new pD(this.apiClient),this.fileSearchStores=new fR(this.apiClient)}}const MD=[{day:0,title:"Risotto all'Ortica e Noci",benefits:["Depurativo","Ricco di Ferro","Energizzante"],content:`
### Ingredienti
*   320g Riso Carnaroli o Integrale
*   200g Punte di Ortica fresca (solo le cime tenere)
*   50g Noci tritate
*   Brodo vegetale q.b.
*   Olio EVO e Parmigiano (facoltativo)

### Procedimento
1.  Lavare le ortiche (usando guanti) e sbollentarle per 2 minuti. Scolarle e frullarle grossolanamente.
2.  Tostare il riso con un filo d'olio, sfumare con brodo vegetale.
3.  A met cottura aggiungere la crema di ortiche.
4.  Mantecare a fuoco spento con olio EVO e guarnire con le noci tritate per dare croccantezza e Omega-3.
        `},{day:1,title:"Insalata di Tarassaco e Uova in Camicia",benefits:["Drenante epatico","Proteico","Digestivo"],content:`
### Ingredienti
*   Mazzetto di Tarassaco fresco (foglie giovani)
*   2 Uova fresche
*   Aceto di mele
*   Semi di girasole
*   Olio EVO, sale, pepe

### Procedimento
1.  Lavare accuratamente il tarassaco e asciugarlo. Spezzettarlo in una ciotola.
2.  Preparare le uova in camicia in acqua bollente acidulata con aceto (3-4 minuti).
3.  Condire il tarassaco con olio, sale e una spruzzata di aceto di mele.
4.  Adagiare le uova sull'insalata e cospargere con semi di girasole tostati.
        `},{day:2,title:"Frittata di Borragine al Forno",benefits:["Antinfiammatorio","Ricco di acidi grassi","Leggero"],content:`
### Ingredienti
*   4 Uova
*   150g Foglie di Borragine
*   1 Cipollotto
*   Curcuma in polvere
*   Olio EVO

### Procedimento
1.  Lessare la borragine per pochi minuti, strizzarla bene e tritarla.
2.  Sbattere le uova con un pizzico di sale e mezzo cucchiaino di curcuma.
3.  Unire la borragine e il cipollotto tritato fine.
4.  Versare in una teglia foderata di carta forno. Cuocere a 180C per 20 minuti circa.
        `},{day:3,title:"Pesto di Portulaca e Mandorle su Farro",benefits:["Ricchissimo di Omega-3","Rinfrescante","Energia a lento rilascio"],content:`
### Ingredienti
*   200g Farro perlato o decorticato
*   Mazzetto abbondante di Portulaca (foglie e gambi teneri)
*   50g Mandorle pelate
*   Aglio (facoltativo), Olio EVO
*   Scorza di limone

### Procedimento
1.  Cuocere il farro in acqua salata e lasciarlo raffreddare.
2.  Nel mortaio o mixer, pestare la portulaca cruda con le mandorle, olio e poco aglio fino a ottenere una crema grezza.
3.  Condire il farro con il pesto e grattugiare scorza di limone fresco sopra.
        `},{day:4,title:"Zuppa di Malva e Patate Dolci",benefits:["Lenitivo per l'intestino","Emolliente","Carboidrati complessi"],content:`
### Ingredienti
*   Foglie e fiori di Malva
*   2 Patate dolci medie
*   1 Porro
*   Zenzero fresco
*   Olio EVO

### Procedimento
1.  Stufare il porro affettato con un filo d'olio e zenzero grattugiato.
2.  Aggiungere le patate dolci a cubetti e coprire con acqua/brodo. Cuocere 15 min.
3.  Aggiungere la malva lavata e cuocere altri 5 minuti.
4.  Frullare parzialmente per ottenere una consistenza cremosa ma con pezzi.
        `},{day:5,title:"Filetto di Sgombro con Finocchietto Selvatico",benefits:["Omega-3","Digestivo","Depurativo"],content:`
### Ingredienti
*   Filetti di Sgombro fresco
*   Mazzetto di Finocchietto selvatico
*   Arancia biologica
*   Olive taggiasche

### Procedimento
1.  Disporre i filetti in una pirofila.
2.  Preparare un'emulsione con olio, succo d'arancia e finocchietto tritato.
3.  Spennellare il pesce, aggiungere le olive e fettine d'arancia.
4.  Cuocere in forno a 180C per 10-15 minuti.
        `},{day:6,title:"Cicoria Ripassata con Peperoncino e Aglio",benefits:["Amaro digestivo","Stimolante metabolico","Detox"],content:`
### Ingredienti
*   Cicoria di campo o catalogna
*   Aglio, Peperoncino
*   Olio EVO
*   Pane integrale tostato

### Procedimento
1.  Sbollentare la cicoria in acqua salata, scolarla e strizzarla bene (conservare un po' d'acqua di cottura se piace l'amaro).
2.  In padella, rosolare aglio e peperoncino in olio EVO.
3.  Aggiungere la cicoria e farla insaporire a fuoco vivace per 5 minuti.
4.  Servire su fette di pane integrale tostato strofinato con aglio.
        `}],ND=({customSleepFormulation:t})=>{const[e,n]=O.useState(null),[i,o]=O.useState(!1),[s,r]=O.useState(!1),a=[{id:"sleep",title:"Sonno",icon:Ad,color:"text-indigo-600",bg:"bg-indigo-50",border:"border-indigo-100",foods:[{name:"Kiwi",desc:"Serotonina"},{name:"Mandorle",desc:"Magnesio"},{name:"Yogurt",desc:"Triptofano"}],supplements:"Melatonina, Magnesio, L-teanina",emoji:""},{id:"stress",title:"Ansia & Stress",icon:Md,color:"text-orange-600",bg:"bg-orange-50",border:"border-orange-100",foods:[{name:"T Verde",desc:"EGCG calmante"},{name:"Cioccolato 70%",desc:"Flavonoidi"},{name:"Semi di Zucca",desc:"Zinco"}],supplements:"Ashwagandha, Rhodiola, Magnesio",emoji:""},{id:"microbiome",title:"Microbioma",icon:tv,color:"text-emerald-600",bg:"bg-emerald-50",border:"border-emerald-100",foods:[{name:"Kefir/Yogurt",desc:"Probiotici"},{name:"Legumi",desc:"Prebiotici"},{name:"Verdure Ferm.",desc:"Diversit"}],supplements:"Probiotici multiceppo, Inulina",emoji:""},{id:"activity",title:"Attivit Fisica",icon:Ca,color:"text-red-600",bg:"bg-red-50",border:"border-red-100",foods:[{name:"Banane",desc:"Potassio rapido"},{name:"Uova",desc:"Proteine nobili"},{name:"Pesce Azzurro",desc:"Recupero"}],supplements:"Proteine Whey, Creatina, BCAA",emoji:""},{id:"diet",title:"Nutrizione Base",icon:Nd,color:"text-sky-600",bg:"bg-sky-50",border:"border-sky-100",foods:[{name:"Frutta/Verdura",desc:"Polifenoli"},{name:"Cereali Int.",desc:"Energia stabile"},{name:"Olio EVO",desc:"Grassi sani"}],supplements:"Multivitaminico, Vitamina D",emoji:""}],c=[...[{name:"Formulazione Zen Night",target:"Sonno & Stress",ingredients:"Melatonina, Escolzia, Magnesio Bisglicinato",desc:"Indicata per chi ha difficolt ad addormentarsi a causa di pensieri ricorrenti.",isCustom:!1},{name:"Formulazione Gut Repair",target:"Microbioma & Digestione",ingredients:"L-Glutammina, Boswellia, Curcuma Fitosoma",desc:"Supporto mirato per la permeabilit intestinale e stati infiammatori.",isCustom:!1},{name:"Formulazione Energy React",target:"Stanchezza Fisica & Mentale",ingredients:"Rodiola Rosea, Vitamine B Coenzimate, Coenzima Q10",desc:"Sostegno energetico senza caffeina per periodi di forte carico lavorativo o sportivo.",isCustom:!1}]];t&&(c[0]={name:"Formulazione Galenica Personalizzata",target:`Sonno (Target: ${t.phases.join(", ")})`,ingredients:t.ingredients.join(", "),desc:`Basata sul tuo test. Posologia: ${t.dosage}`,isCustom:!0});const u=async()=>{o(!0),n(null);const p=new Date().getDay(),g=MD[p];try{const w=((await new AD({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:`Crea una ricetta del giorno sana, bilanciata e gustosa, ideale per migliorare il benessere generale. 
            Includi obbligatoriamente un'erba spontanea commestibile (es. tarassaco, ortica, borragine, malva, portulaca) tipica della tradizione.
            La ricetta deve essere facile da preparare.
            
            IMPORTANTE: Rispondi SOLO con un oggetto JSON valido (senza markdown \`\`\`json) con questa struttura:
            {
                "title": "Nome Ricetta",
                "benefits": ["beneficio 1", "beneficio 2"],
                "content": "Testo completo in markdown con Ingredienti e Procedimento"
            }`}]},config:{responseMimeType:"application/json"}})).text||"").trim().replace(/^```json/,"").replace(/```$/,""),b=JSON.parse(w);n(b),r(!0)}catch(x){console.warn("AI generation failed, falling back to static recipe:",x),n({title:g.title,benefits:g.benefits,content:g.content}),r(!0)}finally{o(!1)}},h=(p,g)=>{const x=g?`Buongiorno, vorrei richiedere informazioni sulla preparazione della: ${g}.`:"Buongiorno, vorrei richiedere una consulenza per una formulazione galenica personalizzata.";p==="email"?window.open(`mailto:${Rd}?subject=Richiesta Galenica: ${g||"Consulenza"}&body=${x}`,"_blank"):window.open(`https://wa.me/${Dd}?text=${encodeURIComponent(x)}`,"_blank")};return m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[m.jsxs("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:m.jsx(At,{className:"w-6 h-6 text-yellow-600"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Mappa Alimentare Funzionale"}),m.jsx("p",{className:"text-slate-500 text-sm",children:"Nutrizione strategica e integrazione mirata per i 5 Pilastri della salute."})]})]}),m.jsxs("button",{onClick:u,disabled:i,className:"bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-bold py-2 px-4 rounded-lg shadow-md transition-all flex items-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[m.jsx(At,{className:"w-4 h-4"}),i?"Elaborazione Chef AI...":"Genera Ricetta del Giorno"]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 divide-y md:divide-y-0 md:divide-x divide-slate-100",children:a.map(p=>m.jsxs("div",{className:"p-4 hover:bg-slate-50 transition-colors flex flex-col h-full group",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("span",{className:"text-2xl filter drop-shadow-sm group-hover:scale-110 transition-transform",children:p.emoji}),m.jsx("h3",{className:`font-bold ${p.color}`,children:p.title})]}),m.jsxs("div",{className:"mb-4 flex-grow",children:[m.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Nel piatto"}),m.jsx("ul",{className:"space-y-2",children:p.foods.map((g,x)=>m.jsxs("li",{className:"flex flex-col text-sm",children:[m.jsx("span",{className:"font-semibold text-slate-700",children:g.name}),m.jsx("span",{className:"text-xs text-slate-500",children:g.desc})]},x))})]}),m.jsxs("div",{className:`mt-auto p-3 rounded-xl ${p.bg} border ${p.border}`,children:[m.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Integrazione"}),m.jsx("p",{className:`text-xs font-medium ${p.color} leading-snug`,children:p.supplements})]})]},p.id))})]}),m.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[m.jsx("div",{className:"p-6 border-b border-slate-200",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:m.jsx(Ia,{className:"w-6 h-6 text-indigo-600"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Laboratorio Galenico & Integrazione Personalizzata"}),m.jsx("p",{className:"text-slate-500 text-sm",children:"Formulazioni su misura preparate dai nostri farmacisti specializzati."})]})]})}),m.jsxs("div",{className:"p-6",children:[m.jsxs("p",{className:"text-slate-600 mb-6 text-sm",children:["Ogni persona  unica. Presso la Farmacia Centrale Montesilvano, possiamo creare integratori dosati sulle tue specifiche necessit analizzando i tuoi test. ",m.jsx("br",{}),m.jsx("span",{className:"italic text-xs text-slate-400",children:"*Nota: Le formulazioni qui proposte sono esempi di preparati officinali o integratori personalizzabili. Le quantit saranno definite dal farmacista in base alle normative vigenti."})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:c.map((p,g)=>m.jsxs("div",{className:`p-4 rounded-xl border shadow-sm transition-all hover:shadow-md cursor-pointer relative overflow-hidden ${p.isCustom?"bg-indigo-50 border-indigo-200 ring-2 ring-indigo-100":"bg-white border-slate-200"}`,onClick:()=>h("whatsapp",p.name),children:[p.isCustom&&m.jsx("div",{className:"absolute top-0 right-0 bg-indigo-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg",children:"SU MISURA"}),m.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full mb-2 inline-block ${p.isCustom?"text-indigo-700 bg-white":"text-indigo-600 bg-indigo-50"}`,children:p.target}),m.jsxs("h3",{className:"font-bold text-slate-800 mb-1 flex items-center gap-2",children:[p.name,p.isCustom&&m.jsx(At,{className:"w-4 h-4 text-indigo-500"})]}),m.jsx("p",{className:"text-xs text-slate-500 italic mb-3",children:p.ingredients}),m.jsx("p",{className:"text-sm text-slate-600",children:p.desc}),m.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100/50 flex justify-end",children:m.jsxs("span",{className:"text-xs font-bold text-emerald-600 flex items-center gap-1 hover:underline",children:["Richiedi info ",m.jsx(av,{className:"w-3 h-3"})]})})]},g))}),m.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4 border-t border-slate-100 pt-6",children:[m.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Non trovi quello che cerchi?"}),m.jsxs("button",{onClick:()=>h("email"),className:"flex items-center gap-2 px-4 py-2 bg-sky-100 text-sky-700 rounded-lg font-bold hover:bg-sky-200 transition-colors text-sm",children:[m.jsx(rv,{className:"w-4 h-4"})," Consulenza Email"]})]})]})]}),s&&e&&m.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[m.jsxs("div",{className:"p-6 bg-emerald-600 text-white flex justify-between items-start sticky top-0 z-10",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-2xl font-bold",children:e.title}),m.jsx("div",{className:"flex gap-2 mt-2",children:e.benefits.map((p,g)=>m.jsx("span",{className:"text-xs bg-emerald-700 px-2 py-1 rounded-full font-medium border border-emerald-500",children:p},g))})]}),m.jsx("button",{onClick:()=>r(!1),className:"text-white/80 hover:text-white p-1",children:m.jsx(sv,{className:"w-6 h-6"})})]}),m.jsx("div",{className:"p-6",children:m.jsx("div",{className:"prose prose-sm max-w-none text-slate-700",dangerouslySetInnerHTML:{__html:ne.parse(e.content)}})}),m.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-100 text-center",children:m.jsx("button",{onClick:()=>r(!1),className:"px-6 py-2 bg-slate-200 text-slate-700 font-bold rounded-lg hover:bg-slate-300 transition-colors",children:"Chiudi Ricetta"})})]})})]})},PD={sleep:{focus:"Migliorare il Riposo",missions:["start_d_new_7","start_d_new_2","start_d_new_6","start_d_new_9"]},fitness:{focus:"Attivazione Metabolica",missions:["start_d_new_3","start_d_new_16","start_d_new_1"]},diet:{focus:"Nutrizione Pulita",missions:["start_d_new_13","start_d_new_22","start_d_new_5","start_d_new_21"]},stress:{focus:"Gestione Stress",missions:["start_d_new_0","start_d_new_17","start_d_new_18","start_d_new_15"]},microbiome:{focus:"Equilibrio Intestinale",missions:["start_d_new_22","start_d_new_4","start_d_new_13"]}},RD={sleep:{rhythm:"4-7-8 Sonno",frequency:"Relax (Healing)",description:"Favorisci il sonno profondo rallentando il respiro e usando frequenze rigenerative."},fitness:{rhythm:"6-6 Allenamento",frequency:"Mind (Attivazione)",description:"Attiva la mente e il corpo con un ritmo energizzante."},diet:{rhythm:"Coerenza Cardiaca",frequency:"Relax (Healing)",description:"Riduci lo stress digestivo riportando equilibrio tra cuore e cervello."},stress:{rhythm:"Vagotonia",frequency:"Introspection (Profondit)",description:"Stimola il nervo vago per una calma profonda e gestione emotiva."},microbiome:{rhythm:"Vagotonia",frequency:"Introspection (Profondit)",description:"L'asse intestino-cervello beneficia di stati di profonda quiete interiore."}},DD=({user:t,onNavigate:e})=>{const[n,i]=O.useState({fitness:null,sleep:null,diet:null,stress:null,microbiome:null}),[o,s]=O.useState(!1),[r,a]=O.useState(""),[l,c]=O.useState(!1),[u,h]=O.useState(null),[p,g]=O.useState(null),[x,y]=O.useState(null);O.useEffect(()=>{const D=fe=>{const Qe=Oe(`assessmentHistory_${t.email}_${fe}`,[]);return Qe.length>0?Qe[Qe.length-1].score:0},M={fitness:D("fitness"),sleep:D("sleep"),diet:D("diet"),stress:D("stress"),microbiome:D("microbiome")},F=Object.values(M).some(fe=>fe>0);s(F),F&&i({fitness:Po(M.fitness,"fitness"),sleep:Po(M.sleep,"sleep"),diet:Po(M.diet,"diet"),stress:Po(M.stress,"stress"),microbiome:Po(M.microbiome,"microbiome")});const z=Oe(`assessmentHistory_${t.email}_sleep`,[]);if(z.length>0){const fe=z[z.length-1];if(fe&&fe.answers){const Qe={"Fase 1":{current:0,max:0},"Fase 2":{current:0,max:0},"Fase 3-4":{current:0,max:0},REM:{current:0,max:0}},yf=un.sleep;yf.questions.forEach((pt,Ct)=>{const Yt=fe.answers[Ct]||0;(pt.phase?pt.phase.split(" / ").map(Sn=>Sn.trim()):[]).forEach(Sn=>{Qe[Sn]&&(Qe[Sn].current+=Yt,Qe[Sn].max+=4)})});const wl=[];Object.keys(Qe).forEach(pt=>{const Ct=Qe[pt],Yt=Ct.max>0?Math.round(Ct.current/Ct.max*100):100;let _n="Adeguato";Yt<60?_n="Insufficienza rilevata":Yt<75&&(_n="Insufficienza lieve"),wl.push({name:pt,percentage:Yt,status:_n})}),wl.sort((pt,Ct)=>pt.percentage-Ct.percentage);const _f=wl.filter(pt=>pt.status!=="Adeguato");if(_f.length>0){const pt=_f.slice(0,2),Ct=new Set;pt.forEach(Yt=>{var Sn;const _n=(Sn=yf.phaseRemedies)==null?void 0:Sn[Yt.name];_n&&_n.remedies&&_n.remedies.forEach(C_=>Ct.add(C_))}),Ct.size>0&&y({ingredients:Array.from(Ct),dosage:"1-2 capsule la sera prima di dormire",phases:pt.map(Yt=>Yt.name)})}else y(null)}else fe.score<48?y({ingredients:["Melatonina Complex","Valeriana","Passiflora"],dosage:"1 capsula 30min prima di dormire",phases:["Generale (Rifai il test per dettagli)"]}):y(null)}const G=localStorage.getItem(`birthDate_${t.email}`);G&&(a(G),c(!0));const H=localStorage.getItem(`motivationalPathStartDate_${t.email}`);h(H);const J=new Date,st=Math.floor((J.getTime()-new Date(J.getFullYear(),0,0).getTime())/1e3/60/60/24)%cm.length;g(cm[st])},[t.email]);const _=D=>{D.preventDefault(),r&&(localStorage.setItem(`birthDate_${t.email}`,r),c(!0))},v=()=>{const D=new Date().toISOString();localStorage.setItem(`motivationalPathStartDate_${t.email}`,D),h(D)},S=()=>{if(confirm("Vuoi ricominciare il percorso guidato dal primo passo?")){const D=new Date().toISOString();localStorage.setItem(`motivationalPathStartDate_${t.email}`,D),h(D)}},w=()=>{localStorage.removeItem(`motivationalPathStartDate_${t.email}`),h(null)},b=O.useMemo(()=>{if(!u)return 0;const D=new Date(u),F=Math.abs(new Date().getTime()-D.getTime());return Math.floor(F/(1e3*60*60*24))+1},[u]),C=O.useMemo(()=>b>0&&b<=lm.length?lm[b-1]:null,[b]),T=D=>{switch(D){case"sleep":return m.jsx(Ad,{className:"w-6 h-6 text-indigo-600"});case"stress":return m.jsx(Md,{className:"w-6 h-6 text-orange-600"});case"diet":return m.jsx(Nd,{className:"w-6 h-6 text-emerald-600"});case"fitness":return m.jsx(Ca,{className:"w-6 h-6 text-red-600"});case"structure":return m.jsx(Ca,{className:"w-6 h-6 text-blue-600"});case"emotion":return m.jsx(At,{className:"w-6 h-6 text-purple-600"});case"maintenance":return m.jsx(wi,{className:"w-6 h-6 text-green-600"});case"beaker":return m.jsx(Ia,{className:"w-6 h-6 text-indigo-600"});default:return m.jsx(At,{className:"w-6 h-6 text-sky-600"})}},E=iC(n);let k=oC(E,n);if(x){k=k.filter(M=>M.title!=="Qualit del Sonno"&&M.title!=="Gestione Ansia & Stress");const D={title:"Formulazione Galenica Personalizzata",status:"critical",description:`Dall'analisi del tuo sonno, abbiamo individuato carenze specifiche nelle fasi: ${x.phases.join(", ")}. Questa formulazione  studiata per agire in modo mirato.`,detailedContent:`
                <h4 class="font-bold text-indigo-700 mb-2">Composizione su Misura</h4>
                <p class="text-sm mb-3">Ingredienti selezionati per le tue fasi critiche:</p>
                <div class="flex flex-wrap gap-2 mb-4">
                    ${x.ingredients.map(M=>`<span class="px-2 py-1 bg-indigo-100 text-indigo-800 rounded-md text-xs font-bold">${M}</span>`).join("")}
                </div>
                <p class="text-sm font-bold text-slate-700">Posologia consigliata:</p>
                <p class="text-sm text-slate-600 mb-3">${x.dosage}</p>
                <p class="text-xs italic text-slate-500">Puoi richiedere la preparazione di questa formula direttamente al nostro laboratorio.</p>
                ${x.phases[0].includes("Generale")?'<p class="text-xs font-bold text-red-500 mt-2">NOTA: Per una formula pi precisa, rifai il Test del Sonno.</p>':""}
            `,therapies:["Richiedi preparazione in Farmacia","Monitora il sonno dopo 30gg"],actionLink:"prescriptions",iconKey:"beaker"};k.unshift(D)}const A=new Date,I=l&&r?{physical:Math.round(to(new Date(r),A,23)),emotional:Math.round(to(new Date(r),A,28)),intellectual:Math.round(to(new Date(r),A,33))}:null,L=()=>{const D=new Date().toLocaleDateString("it-IT");let M=`CLINICAL WELLNESS SPA - REPORT OLISTICO
Data: ${D}
Utente: ${t.name}

`;M+=`--- PUNTEGGI BASE ---
`,M+=`Fitness: ${n.fitness??"-"}%
`,M+=`Sonno: ${n.sleep??"-"}%
`,M+=`Dietetica: ${n.diet??"-"}%
`,M+=`Stress: ${n.stress??"-"}%
`,M+=`Microbioma: ${n.microbiome??"-"}%

`,M+=`--- INDICI SINERGICI ---
`,M+=`Mente: ${E.mind??"-"}%
`,M+=`Energia: ${E.body??"-"}%
`,M+=`Emozioni: ${E.emotions??"-"}%

`,I&&(M+=`--- BIORITMI (Oggi) ---
`,M+=`Fisico: ${I.physical>0?"+":""}${I.physical}%
`,M+=`Emozionale: ${I.emotional>0?"+":""}${I.emotional}%
`,M+=`Intellettuale: ${I.intellectual>0?"+":""}${I.intellectual}%

`),P&&(M+=`--- FOCUS CONSIGLIATO ---
`,M+=`Area: ${P.area.toUpperCase()}
`,M+=`Obiettivo: ${P.focus}

`),x&&(M+=`--- FORMULAZIONE GALENICA ---
`,M+=`Target: ${x.phases.join(", ")}
`,M+=`Ingredienti: ${x.ingredients.join(", ")}
`,M+=`Posologia: ${x.dosage}

`),k.length>0&&(M+=`--- PIANO TERAPEUTICO ---
`,k.forEach(H=>{M+=`
[${H.title}] - ${H.status.toUpperCase()}
`,M+=`${H.description}
`,M+=`Terapie consigliate:
`,H.therapies.forEach(J=>M+=` - ${J}
`)}));const F=new Blob(["\uFEFF"+M],{type:"text/plain;charset=utf-8"}),z=URL.createObjectURL(F),G=document.createElement("a");G.href=z,G.download=`Wellness_Report_${D.replace(/\//g,"-")}.txt`,document.body.appendChild(G),G.click(),document.body.removeChild(G)},P=(()=>{const D=Object.entries(n).filter(([J,re])=>re!==null);if(D.length===0)return null;const F=D.sort((J,re)=>J[1]-re[1])[0];if(F[1]>70)return null;const z=PD[F[0]],G=RD[F[0]];if(!z)return null;const H=z.missions.map(J=>{var re;return(re=vI.start.daily)==null?void 0:re.find(st=>st.id===J)}).filter(Boolean);return{area:F[0],score:F[1],focus:z.focus,missions:H.slice(0,2),meditation:G}})(),Y=()=>{const D=[{name:"Fitness",val:n.fitness},{name:"Sonno",val:n.sleep},{name:"Dietetica",val:n.diet},{name:"Stress",val:n.stress},{name:"Microbioma",val:n.microbiome}].filter(H=>H.val!==null);if(D.length===0)return m.jsx("p",{className:"text-slate-500 italic",children:"Completa i test per vedere l'analisi."});const M=[...D].sort((H,J)=>J.val-H.val),F=M[0],z=M[M.length-1],G=Math.round(D.reduce((H,J)=>H+J.val,0)/D.length);return m.jsxs("p",{className:"text-slate-600 text-sm leading-relaxed",children:["Il tuo ",m.jsx("strong",{children:"Wellness Index"})," attuale  ",m.jsxs("strong",{children:[G,"%"]}),". Il tuo punto di forza  l'area ",m.jsx("strong",{children:F.name})," (",F.val,"%), continua cos!",F.name!==z.name&&m.jsxs(m.Fragment,{children:["L'area che richiede pi attenzione  ",m.jsx("strong",{children:z.name})," (",z.val,"%), che potrebbe influenzare negativamente il tuo equilibrio. Consulta il Piano Terapeutico qui sotto per strategie mirate."]})]})},j=(D,M,F)=>{const z=M>20?"high":M<-20?"low":"critical",G=F===null?"unknown":F>60?"strong":"weak";let H="",J="";return D==="physical"?z==="high"&&G==="strong"?(H="Performance Ottimale",J="Oggi  il giorno giusto per allenamenti intensi o sfide fisiche."):z==="high"&&G==="weak"?(H="Spinta Energetica",J="Il bioritmo ti sostiene nonostante la stanchezza di fondo. Buon momento per riprendere l'attivit."):z==="low"&&G==="strong"?(H="Mantenimento",J="Hai buone riserve, ma il ciclo  basso. Non esagerare con gli sforzi."):z==="low"&&G==="weak"?(H="Riposo Necessario",J="Doppia criticit. Dedicati al recupero, stretching o sonno extra."):(H="Fase di Transizione",J="Attenzione agli infortuni, evita sforzi improvvisi."):D==="emotional"?z==="high"&&G==="strong"?(H="Carisma e Socialit",J="Ottimo momento per relazioni e creativit."):z==="high"&&G==="weak"?(H="Resilienza",J="Il bioritmo ti aiuta a gestire lo stress accumulato. Giornata buona per risolvere conflitti."):z==="low"?(H="Introspezione",J="Potresti sentirti pi sensibile. Evita discussioni importanti oggi."):(H="Equilibrio Instabile",J="Umore variabile, pratica la coerenza cardiaca."):D==="intellectual"&&(z==="high"?(H="Focus Mentale",J="Capacit di apprendimento e concentrazione al massimo."):z==="low"?(H="Routine",J="Evita decisioni complesse o studio intenso. Meglio attivit ripetitive."):(H="Criticit",J="Possibili distrazioni. Rivedi due volte il tuo lavoro.")),{title:H,body:J}},$=({type:D,label:M,compositeValue:F,bioValue:z,borderClass:G,bgClass:H,iconColorClass:J})=>{const re=I?j(D,z,F):null;return m.jsxs("div",{className:`p-4 rounded-xl border-2 ${G} ${H} shadow-md h-full flex flex-col justify-between`,children:[m.jsxs("div",{children:[m.jsx("h3",{className:`font-bold text-sm uppercase tracking-wider mb-4 ${J}`,children:M}),m.jsxs("div",{className:"space-y-3 mb-4",children:[m.jsxs("div",{className:"flex justify-between items-center border-b border-slate-200/50 pb-2",children:[m.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Livello Base"}),m.jsx("span",{className:"text-xl font-black text-slate-700",children:F!==null?`${F}%`:"-"})]}),I&&m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Bioritmo Oggi"}),m.jsxs("span",{className:`text-xl font-black ${z>=0?"text-green-600":"text-red-500"}`,children:[z>0?"+":"",z,"%"]})]})]})]}),m.jsx("div",{className:"mt-auto pt-3 border-t border-slate-200/60",children:re?m.jsxs(m.Fragment,{children:[m.jsx("p",{className:`font-bold text-xs mb-1 ${J}`,children:re.title}),m.jsx("p",{className:"text-xs text-slate-600 leading-relaxed font-medium",children:re.body})]}):m.jsx("p",{className:"text-xs text-slate-400 italic",children:"Inserisci la data di nascita per i consigli giornalieri."})})]})};return o?m.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-32 max-w-7xl mx-auto",children:[m.jsxs("header",{className:"mb-8 flex flex-col md:flex-row md:items-end justify-between gap-4",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-4xl font-bold text-slate-800",children:"Wellness Dashboard"}),m.jsx("p",{className:"text-xl text-slate-600",children:"Analisi olistica del tuo stato di salute e longevit."})]}),m.jsxs("div",{className:"text-right hidden md:block",children:[m.jsx("p",{className:"text-sm text-slate-500",children:"Ultimo aggiornamento"}),m.jsx("p",{className:"font-mono font-semibold text-slate-700",children:new Date().toLocaleDateString()}),m.jsxs("button",{onClick:L,className:"mt-2 text-xs flex items-center justify-end gap-1 text-sky-600 hover:text-sky-800 font-bold w-full",children:[m.jsx(Ud,{className:"w-4 h-4"})," Scarica Report (.txt)"]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-slate-100",children:[m.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[m.jsx("span",{className:"w-2 h-6 bg-sky-500 rounded-full"}),"Radar Benessere"]}),m.jsx("div",{className:"flex justify-center relative",children:m.jsx(mI,{scores:n,composites:E})}),m.jsxs("div",{className:"mt-6 bg-slate-50 rounded-xl p-4 border border-slate-200",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(At,{className:"w-4 h-4 text-sky-600"}),m.jsx("h3",{className:"font-bold text-sm text-slate-700 uppercase tracking-wide",children:"Analisi Sintetica"})]}),Y()]})]}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[m.jsx($,{type:"physical",label:"Energia & Fisico",compositeValue:E.body,bioValue:I==null?void 0:I.physical,bgClass:"bg-emerald-50",borderClass:"border-emerald-500",iconColorClass:"text-emerald-800"}),m.jsx($,{type:"intellectual",label:"Mente & Intelletto",compositeValue:E.mind,bioValue:I==null?void 0:I.intellectual,bgClass:"bg-sky-50",borderClass:"border-sky-500",iconColorClass:"text-sky-800"}),m.jsx($,{type:"emotional",label:"Cuore & Emozioni",compositeValue:E.emotions,bioValue:I==null?void 0:I.emotional,bgClass:"bg-orange-50",borderClass:"border-orange-500",iconColorClass:"text-orange-800"})]})]}),m.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-slate-100 h-full flex flex-col",children:[m.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[m.jsx("span",{className:"w-2 h-6 bg-emerald-500 rounded-full"}),"Mappa del Benessere"]}),m.jsx("div",{className:"flex-grow",children:m.jsx(gI,{scores:n,composites:E,gender:t.gender||"female"})})]})]}),P&&m.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-2xl shadow-lg border border-indigo-100 mb-12 animate-fade-in",children:m.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-6",children:[m.jsx("div",{className:"flex-shrink-0 p-4 bg-white rounded-full shadow-sm",children:m.jsx(At,{className:"w-8 h-8 text-purple-600"})}),m.jsxs("div",{className:"flex-grow w-full",children:[m.jsxs("h2",{className:"text-lg font-bold text-slate-800 mb-1",children:["Focus Consigliato: ",m.jsx("span",{className:"text-purple-700 uppercase",children:P.focus})]}),m.jsxs("p",{className:"text-slate-600 mb-4 text-sm leading-relaxed",children:["Il tuo punteggio in ",m.jsx("strong",{children:P.area.toUpperCase()}),"  basso (",P.score,'%). Questo influenza negativamente la tua energia "Base".']}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:P.missions.map(D=>m.jsx("div",{className:"bg-white p-3 rounded-xl border border-indigo-100 shadow-sm flex items-center justify-between",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"text-2xl",children:D.Icon}),m.jsxs("div",{children:[m.jsx("p",{className:"font-bold text-slate-700 text-sm",children:D.title}),m.jsx("p",{className:"text-xs text-slate-500",children:D.description})]})]})},D.id))}),P.meditation&&m.jsxs("div",{className:"mt-4 bg-white/60 p-4 rounded-xl border border-indigo-200",children:[m.jsxs("h3",{className:"font-bold text-indigo-800 text-sm flex items-center gap-2 mb-2",children:[m.jsx(nv,{className:"w-4 h-4"})," Protocollo Meditativo Consigliato"]}),m.jsx("p",{className:"text-sm text-slate-700 mb-2",children:P.meditation.description}),m.jsxs("div",{className:"flex flex-wrap gap-2 text-xs font-semibold",children:[m.jsxs("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full",children:["Ritmo: ",P.meditation.rhythm]}),m.jsxs("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full",children:["Frequenza: ",P.meditation.frequency]})]}),m.jsx("button",{onClick:()=>e("breathing"),className:"mt-3 text-xs font-bold text-indigo-600 hover:text-indigo-800 underline",children:"Vai alla Meditazione Guidata "})]}),m.jsx("div",{className:"mt-4 text-right",children:m.jsx("button",{onClick:()=>e("wellnessRoutine"),className:"text-sm font-bold text-purple-600 hover:text-purple-800 underline",children:"Vai alla Routine Completa "})})]})]})}),m.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-8 mb-12 border border-purple-100",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[m.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:m.jsx(iv,{className:"w-6 h-6 text-purple-600"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"BioPulse: Onda Temporale"}),m.jsx("p",{className:"text-slate-500 text-sm",children:"Visualizza l'andamento dei tuoi cicli nei prossimi giorni."})]})]}),l?m.jsxs("div",{children:[m.jsx(xI,{birthDate:new Date(r),targetDate:new Date}),m.jsxs("div",{className:"mt-6 flex flex-wrap justify-center gap-4 md:gap-8",children:[m.jsxs("div",{className:"flex items-center gap-2 bg-green-50 px-3 py-1.5 rounded-lg border border-green-200",children:[m.jsx(My,{className:"w-5 h-5 text-green-600"}),m.jsx("span",{className:"text-xs font-bold text-green-800",children:"Fisico (23gg)"})]}),m.jsxs("div",{className:"flex items-center gap-2 bg-orange-50 px-3 py-1.5 rounded-lg border border-orange-200",children:[m.jsx(Ny,{className:"w-5 h-5 text-orange-500"}),m.jsx("span",{className:"text-xs font-bold text-orange-800",children:"Emotivo (28gg)"})]}),m.jsxs("div",{className:"flex items-center gap-2 bg-sky-50 px-3 py-1.5 rounded-lg border border-sky-200",children:[m.jsx(Ay,{className:"w-5 h-5 text-sky-600"}),m.jsx("span",{className:"text-xs font-bold text-sky-800",children:"Intellettuale (33gg)"})]})]})]}):m.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl text-center",children:[m.jsx("p",{className:"text-slate-600 mb-4",children:"Per calcolare i tuoi bioritmi, abbiamo bisogno della tua data di nascita."}),m.jsxs("form",{onSubmit:_,className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[m.jsx("input",{type:"date",required:!0,value:r,onChange:D=>a(D.target.value),className:"p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-white"}),m.jsx("button",{type:"submit",className:"px-6 py-3 bg-purple-600 text-white font-bold rounded-lg hover:bg-purple-700 transition-colors",children:"Calcola Bioritmi"})]})]})]}),m.jsx("div",{className:"mb-12",children:m.jsx(ND,{customSleepFormulation:x})}),m.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl shadow-xl p-8 mb-12 text-white overflow-hidden relative",children:[m.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:m.jsx(At,{className:"w-32 h-32 text-white"})}),u?m.jsxs("div",{className:"relative z-10",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:" Percorso Guidato al Cambiamento"}),b>14?m.jsxs("div",{className:"text-center py-6",children:[m.jsx("h3",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-600 mb-4",children:" Missione Compiuta!"}),m.jsx("p",{className:"text-slate-300 mb-2",children:"Hai completato i 14 giorni di attivazione. Queste nuove abitudini sono ora parte di te."}),m.jsx("p",{className:"text-slate-400 mb-8 text-sm",children:"Ora puoi scegliere se mantenere queste abitudini con l'ispirazione quotidiana o ricominciare il ciclo per rafforzarle."}),p&&m.jsxs("div",{className:"bg-white/10 p-4 rounded-xl mb-8 max-w-lg mx-auto",children:[m.jsx("p",{className:"text-sm text-sky-200 mb-2",children:"La tua ispirazione finale:"}),m.jsxs("p",{className:"italic",children:['"',p.text,'"']})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[m.jsx("button",{onClick:w,className:"bg-white text-slate-900 font-bold py-3 px-6 rounded-full shadow-lg hover:bg-slate-100 transition-colors",children:"Vai al Mantenimento (Ispirazione Quotidiana)"}),m.jsx("button",{onClick:S,className:"text-slate-400 hover:text-white underline text-sm",children:"Ricomincia il ciclo dal Giorno 1"})]})]}):m.jsxs("div",{children:[C&&m.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/10",children:m.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center",children:[m.jsxs("div",{className:"flex-grow text-center md:text-left",children:[m.jsx("h3",{className:"text-lg font-medium text-sky-200 mb-2 uppercase tracking-wider",children:"Messaggio del Giorno"}),m.jsxs("p",{className:"text-xl md:text-2xl font-bold text-white mb-4 leading-relaxed",children:['"',C.message,'"']}),m.jsxs("div",{className:"inline-block bg-slate-800 px-4 py-2 rounded-lg border border-slate-600",children:[m.jsx("p",{className:"text-sm text-slate-400 italic mb-1",children:C.category}),m.jsx("p",{className:"text-md text-sky-100 font-serif",children:C.quote})]})]}),m.jsxs("div",{className:"flex-shrink-0 text-center",children:[m.jsx("div",{className:"w-20 h-20 rounded-full bg-sky-500/20 border-2 border-sky-500 flex items-center justify-center text-2xl font-bold text-white mb-2 mx-auto",children:b}),m.jsx("span",{className:"text-xs uppercase text-slate-400 font-bold tracking-widest",children:"Passo"})]})]})}),m.jsx("div",{className:"mt-4 text-right",children:m.jsx("button",{onClick:S,className:"text-xs text-slate-500 hover:text-slate-300",children:"Reset Percorso"})})]})]}):m.jsxs("div",{className:"relative z-10 text-center",children:[m.jsx("h2",{className:"text-xl font-bold text-sky-200 mb-2 uppercase tracking-wide",children:" Ispirazione Quotidiana"}),p?m.jsxs("div",{className:"py-6",children:[m.jsxs("p",{className:"text-2xl md:text-3xl font-bold text-white mb-6 leading-relaxed font-serif italic",children:['"',p.text,'"']}),m.jsx("span",{className:"inline-block bg-white/20 px-4 py-1 rounded-full text-sm text-sky-100 font-semibold",children:p.category})]}):m.jsx("p",{children:"Caricamento..."}),m.jsxs("div",{className:"mt-8 border-t border-white/10 pt-6",children:[m.jsx("p",{className:"text-lg text-slate-300 mb-4",children:"Vuoi un cambiamento radicale? Inizia il percorso guidato."}),m.jsx("button",{onClick:v,className:"bg-sky-500 hover:bg-sky-400 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-transform hover:scale-105",children:"Inizia il Percorso di Trasformazione"})]})]})]}),m.jsxs("div",{className:"bg-gradient-to-r from-slate-100 to-slate-200 rounded-2xl shadow-xl p-8 mb-12 text-slate-800 flex flex-col md:flex-row items-center justify-between gap-6 border border-slate-300",children:[m.jsxs("div",{children:[m.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center gap-3",children:[m.jsx(ov,{className:"w-8 h-8 text-sky-600"}),"Analisi Cliniche Consigliate"]}),m.jsx("p",{className:"text-slate-600 max-w-2xl",children:"Hai completato i test di autovalutazione. Per ottenere un quadro clinico completo e personalizzato, prenota le analisi specifiche consigliate per i tuoi obiettivi di salute in CLINICAL WELLNESS SPA presso Farmacia Centrale Montesilvano."})]}),m.jsxs("button",{onClick:()=>e("analysisQuote"),className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-3 px-8 rounded-lg transition-colors shadow-lg whitespace-nowrap flex items-center gap-2",children:[m.jsx("span",{children:"Scegli i tuoi obiettivi"}),m.jsx(_u,{className:"w-5 h-5 rotate-180"})]})]}),m.jsxs("div",{className:"space-y-8",children:[m.jsx("h2",{className:"text-3xl font-bold text-slate-800 border-b border-slate-200 pb-4",children:"Piano Terapeutico Integrato"}),m.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:k.map((D,M)=>m.jsx("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden border-t-4 ${D.status==="critical"?"border-red-500":D.status==="moderate"?"border-yellow-500":"border-green-500"}`,children:m.jsxs("div",{className:"p-6 flex flex-col h-full",children:[m.jsxs("div",{className:"flex justify-between items-start mb-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:`p-2 rounded-lg ${D.status==="critical"?"bg-red-50":D.status==="moderate"?"bg-yellow-50":"bg-green-50"}`,children:T(D.iconKey)}),m.jsx("h3",{className:"text-xl font-bold text-slate-800",children:D.title})]}),D.status==="critical"&&m.jsxs("div",{className:"flex items-center gap-1 text-red-600 font-bold bg-red-50 px-2 py-1 rounded text-sm",children:[m.jsx(zd,{className:"w-4 h-4"})," ",m.jsx("span",{children:"Critico"})]}),D.status==="moderate"&&m.jsxs("div",{className:"flex items-center gap-1 text-yellow-600 font-bold bg-yellow-50 px-2 py-1 rounded text-sm",children:[m.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500"})," ",m.jsx("span",{children:"Moderato"})]}),D.status==="optimal"&&m.jsxs("div",{className:"flex items-center gap-1 text-green-600 font-bold bg-green-50 px-2 py-1 rounded text-sm",children:[m.jsx(wi,{className:"w-4 h-4"})," ",m.jsx("span",{children:"Ottimale"})]})]}),m.jsx("p",{className:"text-slate-600 mb-6 text-sm leading-relaxed",children:D.description}),m.jsx("div",{className:"flex-grow",children:D.detailedContent?m.jsx("div",{className:"bg-slate-50 rounded-xl p-5 border border-slate-100 prose prose-sm max-w-none mb-4",dangerouslySetInnerHTML:{__html:D.detailedContent}}):m.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 mb-4",children:[m.jsx("h4",{className:"font-bold text-xs text-slate-500 uppercase tracking-wider mb-3",children:"Protocollo Consigliato"}),m.jsx("ul",{className:"space-y-2",children:D.therapies.map((F,z)=>m.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-700",children:[m.jsx("span",{className:"w-1.5 h-1.5 bg-sky-500 rounded-full mt-1.5 flex-shrink-0"}),F]},z))})]})}),D.actionLink&&m.jsxs("button",{onClick:()=>e(D.actionLink),className:"w-full mt-auto py-2 px-4 bg-sky-100 text-sky-700 font-semibold rounded-lg hover:bg-sky-200 transition-colors text-sm flex items-center justify-center gap-2",children:["Vai alla risorsa consigliata ",m.jsx(_u,{className:"w-4 h-4 rotate-180"})]})]})},M))})]}),m.jsx("div",{className:"mt-12 text-center text-slate-400 text-sm",children:m.jsx("p",{children:"Analisi basata su algoritmi di intelligenza artificiale clinica. I risultati non sostituiscono il parere medico."})})]}):m.jsx("div",{className:"p-8 animate-fade-in text-center",children:m.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow-xl p-10",children:[m.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-4",children:"Wellness Dashboard"}),m.jsx("p",{className:"text-slate-600 mb-8",children:"Non hai ancora dati sufficienti per generare la tua mappa della longevit. Completa i test di autovalutazione per sbloccare questa funzione."}),m.jsx("button",{onClick:()=>e("assessments"),className:"bg-sky-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-sky-700 transition-colors shadow-lg",children:"Vai ai Test "})]})})},LD=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),m.jsx("path",{d:"M12 12v9"}),m.jsx("path",{d:"m16 16-4-4-4 4"})]}),FD=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),m.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),m.jsx("path",{d:"M10 9H8"}),m.jsx("path",{d:"M16 13H8"}),m.jsx("path",{d:"M16 17H8"})]}),zD=({user:t})=>m.jsxs("div",{className:"p-4 md:p-8 animate-fade-in relative",children:[m.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Analisi Referti Sanguigni con AI"}),m.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Carica una foto del tuo referto per ottenere un'analisi dettagliata."}),m.jsx("div",{className:"absolute inset-0 z-10 bg-white/60 backdrop-blur-sm flex flex-col items-center justify-center rounded-2xl",children:m.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl border-4 border-sky-500 text-center max-w-md mx-4",children:[m.jsx(At,{className:"w-16 h-16 text-sky-500 mx-auto mb-4 animate-pulse"}),m.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Presto Attivo!"}),m.jsx("p",{className:"text-slate-600 mb-6",children:"Stiamo perfezionando l'Intelligenza Artificiale per offrirti un'analisi clinica ancora pi precisa. Questa funzionalit sar disponibile nel prossimo aggiornamento."}),m.jsx("button",{className:"bg-slate-200 text-slate-500 font-bold py-3 px-6 rounded-lg cursor-not-allowed",children:"Coming Soon"})]})}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 opacity-50 pointer-events-none",children:[m.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg flex flex-col",children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:"1. Carica il tuo referto"}),m.jsx("div",{className:"relative border-2 border-dashed border-slate-300 rounded-lg p-12 text-center flex-grow flex flex-col justify-center",children:m.jsxs("div",{className:"flex flex-col items-center text-slate-500",children:[m.jsx(LD,{className:"w-12 h-12 mb-2"}),m.jsx("p",{className:"font-semibold",children:"Trascina un file qui o clicca per caricare"}),m.jsx("p",{className:"text-sm",children:"Immagini (PNG, JPG) o PDF"})]})})]}),m.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg flex flex-col",children:[m.jsx("div",{className:"flex justify-between items-center mb-4",children:m.jsx("h2",{className:"text-2xl font-bold text-slate-700",children:"2. Risultati dell'Analisi"})}),m.jsxs("div",{className:"text-center text-slate-500 py-16",children:[m.jsx(FD,{className:"w-16 h-16 mx-auto mb-4 text-slate-400"}),m.jsx("p",{children:"I risultati della tua analisi appariranno qui."})]})]})]})]}),UD=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),OD=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"7.5",cy:"15.5",r:"5.5"}),m.jsx("path",{d:"m21 2-9.6 9.6"}),m.jsx("path",{d:"m15.5 7.5 3 3L22 7l-3-3"})]}),VD=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),m.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),BD=({user:t,onLogout:e,onNavigate:n})=>m.jsxs("div",{className:"p-4 md:p-8 animate-fade-in",children:[m.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-8",children:"Profilo Utente"}),m.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg max-w-md mx-auto",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("div",{className:"w-24 h-24 rounded-full bg-sky-100 mx-auto flex items-center justify-center mb-4",children:m.jsx(UD,{className:"w-12 h-12 text-sky-600"})}),m.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t.name}),m.jsx("p",{className:"text-slate-500",children:t.email})]}),m.jsxs("div",{className:"border-t border-slate-200 pt-6 space-y-4",children:[m.jsxs("button",{onClick:()=>n("adminSettings"),className:"w-full bg-slate-600 text-white font-semibold py-3 rounded-lg hover:bg-slate-700 transition-colors shadow-md flex items-center justify-center gap-2",children:[m.jsx(VD,{className:"w-5 h-5"}),m.jsx("span",{children:"Impostazioni Punteggi"})]}),m.jsxs("button",{onClick:()=>n("manualUnlock"),className:"w-full bg-sky-600 text-white font-semibold py-3 rounded-lg hover:bg-sky-700 transition-colors shadow-md flex items-center justify-center gap-2",children:[m.jsx(OD,{className:"w-5 h-5"}),m.jsx("span",{children:"Sblocco Manuale Livelli"})]}),m.jsx("button",{onClick:e,className:"w-full bg-red-500 text-white font-semibold py-3 rounded-lg hover:bg-red-600 transition-colors shadow-md",children:"Logout"})]})]})]}),HD=({assessment:t,onComplete:e})=>{const[n,i]=O.useState({}),[o,s]=O.useState(0),[r,a]=O.useState(t.id==="fitness");console.log("QuizScreen avviato per:",t.id);const l=(x,y)=>{i(_=>({..._,[x]:y}))},c=x=>{x?a(!1):e(20,{})};if(O.useEffect(()=>{if(r)return;const x=t.questions.length;if(Object.keys(n).length===x&&x>0){const _=Object.values(n).reduce((S,w)=>S+w,0);console.log("Quiz completato. Score:",_,"Answers:",n);const v=setTimeout(()=>{e(_,n)},350);return()=>clearTimeout(v)}},[n,t.questions.length,e,r]),O.useEffect(()=>{if(!r&&n[o]!==void 0&&!(o===t.questions.length-1)){const y=setTimeout(()=>{s(_=>_+1)},300);return()=>clearTimeout(y)}},[n,o,t.questions.length,r]),r)return m.jsx("div",{className:"p-4 md:p-8 animate-fade-in flex flex-col items-center justify-center min-h-[50vh]",children:m.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[m.jsx("div",{className:"p-4 bg-sky-100 rounded-full inline-block mb-4",children:m.jsx(t.Icon,{className:"w-12 h-12 text-sky-600"})}),m.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Analisi Fitness"}),m.jsxs("p",{className:"text-lg text-slate-600 mb-8",children:["Prima di iniziare, una domanda veloce: ",m.jsx("br",{}),m.jsx("strong",{children:"Pratichi regolarmente attivit fisica?"})]}),m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsx("button",{onClick:()=>c(!0),className:"w-full py-3 bg-sky-600 text-white font-bold rounded-xl hover:bg-sky-700 transition-colors shadow-md",children:"S, mi alleno"}),m.jsx("button",{onClick:()=>c(!1),className:"w-full py-3 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition-colors border border-slate-200",children:"No, sono sedentario"})]})]})});const u=t.questions.length;if(Object.keys(n).length===u)return m.jsx("div",{className:"p-4 md:p-8 text-center animate-fade-in",children:m.jsx("h2",{className:"text-2xl font-bold text-slate-700",children:"Calcolo dei risultati..."})});const p=t.questions[o],g=o/u*100;return m.jsxs("div",{className:"p-4 md:p-8 animate-fade-in",children:[m.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:t.title}),m.jsxs("p",{className:"text-slate-600 mb-6",children:["Domanda ",o+1," di ",u]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-8",children:m.jsx("div",{className:"bg-sky-500 h-2.5 rounded-full",style:{width:`${g}%`,transition:"width 0.5s ease-in-out"}})}),m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-slide-in-up",children:[m.jsx("h3",{className:"text-xl font-semibold text-slate-700 mb-6",children:p.text}),m.jsx("div",{className:"space-y-3",children:p.options.map((x,y)=>m.jsx("button",{onClick:()=>l(o,x.value),className:`w-full text-left p-4 rounded-lg border-2 transition-all duration-200 text-slate-700 ${n[o]===x.value?"bg-sky-100 border-sky-500 font-semibold ring-2 ring-sky-300":"bg-slate-50 border-slate-200 hover:bg-sky-50 hover:border-sky-400"}`,children:x.text},y))})]},o)]})},$D=({user:t,onNavigate:e,showNotification:n,wellnessData:i})=>{const[o,s]=O.useState({}),[r,a]=O.useState(!1),[l,c]=O.useState(""),u="CWSPA",h=x=>{const y=o[x],_=pb[x];if(y===_){const v=`manualUnlocks_${t.email}`,S=Oe(v,[]),w=[...new Set([...S,x])];localStorage.setItem(v,JSON.stringify(w)),n("Livello sbloccato con successo!","success")}else n("Password errata. Riprova.","error")},p=()=>{l.trim()===u?a(!0):(n("Password per il riepilogo errata.","error"),c(""))},g=Object.values(i).filter(x=>x.unlocksAt);return m.jsxs("div",{className:"p-4 md:p-8 animate-fade-in",children:[m.jsxs("button",{onClick:()=>e("profile"),className:"flex items-center gap-2 text-sky-600 font-semibold mb-6 hover:text-sky-800 transition-colors",children:[m.jsx(_u,{className:"w-5 h-5"}),m.jsx("span",{children:"Torna al Profilo"})]}),m.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Sblocco Manuale Livelli"}),m.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Inserisci la password per accedere direttamente a un livello."}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[m.jsx("div",{children:m.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg space-y-6",children:g.map(x=>m.jsxs("div",{children:[m.jsxs("h3",{className:"font-bold text-slate-700",children:[x.name," - ",x.subtitle]}),m.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[m.jsx("input",{type:"password",placeholder:"Inserisci la password",value:o[x.id]||"",onChange:y=>s({...o,[x.id]:y.target.value}),className:"flex-grow p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-sky-500"}),m.jsx("button",{onClick:()=>h(x.id),className:"px-4 py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition-colors",children:"Sblocca"})]})]},x.id))})}),m.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:" Riepilogo Password"}),r?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full text-sm text-left text-slate-600",children:[m.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-100",children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",className:"px-4 py-3",children:"Programma"}),m.jsx("th",{scope:"col",className:"px-4 py-3",children:"Livello"}),m.jsx("th",{scope:"col",className:"px-4 py-3",children:"Password"})]})}),m.jsx("tbody",{children:mb.map(x=>m.jsxs("tr",{className:"bg-white border-b hover:bg-slate-50",children:[m.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:x.program}),m.jsx("td",{className:"px-4 py-3",children:x.level}),m.jsx("td",{className:"px-4 py-3",children:m.jsx("code",{className:"bg-slate-100 p-1 rounded-md text-sky-700 font-mono",children:x.password})})]},x.level))})]})}),m.jsx("button",{onClick:()=>{a(!1),c("")},className:"mt-4 w-full px-4 py-2 bg-slate-200 text-slate-800 font-semibold rounded-lg hover:bg-slate-300 transition-colors",children:"Nascondi Riepilogo"})]}):m.jsxs("div",{className:"p-4 text-center",children:[m.jsx(Pd,{className:"w-10 h-10 mx-auto text-slate-400 mb-4"}),m.jsx("p",{className:"text-slate-600 mb-4",children:"Questa sezione  protetta da password."}),m.jsxs("div",{className:"flex items-center gap-2 max-w-sm mx-auto",children:[m.jsx("input",{type:"password",placeholder:"Password riepilogo",value:l,onChange:x=>c(x.target.value),onKeyPress:x=>x.key==="Enter"&&p(),className:"flex-grow p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-sky-500"}),m.jsx("button",{onClick:p,className:"px-4 py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition-colors",children:"Mostra"})]})]})]})]})]})},GD=t=>m.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("circle",{cx:"12",cy:"10",r:"3"}),m.jsx("path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"})]}),qD=({onLogin:t})=>{const[e,n]=O.useState(""),[i,o]=O.useState(""),s=r=>{if(r.preventDefault(),e.trim()&&i.trim()){const a={name:e.trim(),email:i.trim()};t(a)}};return m.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-100 p-4",children:m.jsxs("div",{className:"w-full max-w-md",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h1",{className:"text-4xl font-bold text-slate-800",children:"Clinical Wellness Spa"}),m.jsx("p",{className:"mt-2 text-lg text-slate-600",children:"Il tuo percorso verso il benessere inizia qui."})]}),m.jsxs("div",{className:"bg-white shadow-2xl rounded-2xl p-8 animate-fade-in",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx(GD,{className:"mx-auto h-16 w-16 text-sky-600 mb-4"}),m.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Area Riservata"}),m.jsx("p",{className:"mt-1 text-slate-500",children:"Accedi per continuare"})]}),m.jsxs("form",{className:"space-y-6",onSubmit:s,children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome"}),m.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:e,onChange:r=>n(r.target.value),className:"appearance-none relative block w-full px-3 py-3 border border-slate-300 placeholder-slate-500 text-slate-900 rounded-md focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm",placeholder:"Il tuo nome"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-slate-700 mb-1",children:"Indirizzo Email"}),m.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:r=>o(r.target.value),className:"appearance-none relative block w-full px-3 py-3 border border-slate-300 placeholder-slate-500 text-slate-900 rounded-md focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm",placeholder:"indirizzo@esempio.com"})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:!e.trim()||!i.trim(),className:"group relative w-full flex justify-center py-3 px-4 mt-4 border border-transparent text-sm font-medium rounded-md text-white bg-sky-600 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 disabled:bg-slate-400 disabled:cursor-not-allowed transition-colors",children:"Accedi"})})]})]}),m.jsxs("p",{className:"mt-6 text-center text-sm text-slate-500",children:[" ",new Date().getFullYear()," Clinical Wellness Spa. Tutti i diritti riservati."]})]})})};function jD(){const[t]=je.useState({name:"Paolo",email:"farmaxya@gmail.com"}),[e,n]=je.useState("home"),i=r=>{console.log("Navigazione verso:",r),n(r)},o=r=>{console.log("Avvio test:",r),n(`quiz-${r}`)},s=()=>{switch(e){case"quiz-fitness":case"quiz-sleep":case"quiz-stress":case"quiz-diet":case"quiz-microbiome":{const r=e.replace("quiz-",""),a=un[r];return a?m.jsx(HD,{assessment:a,onComplete:(l,c)=>{const u=`assessmentHistory_${t.email}_${r}`,h=JSON.parse(localStorage.getItem(u)||"[]");h.push({score:l,answers:c,date:new Date().toISOString()}),localStorage.setItem(u,JSON.stringify(h)),console.log("Salvato:",u,h),n("dashboard")}}):(console.warn("Assessment non trovato per ID:",r),m.jsxs("div",{style:{padding:"20px"},children:[m.jsx("h2",{children:"Errore: Test non trovato"}),m.jsxs("p",{children:["ID ricevuto: ",r]}),m.jsx("button",{onClick:()=>n("assessments"),children:"Torna ai test"})]}))}case"home":return m.jsx(ab,{user:t,onNavigate:i});case"assessments":return m.jsx(cb,{user:t,onNavigate:i,onStartAssessment:o});case"wellnessRoutine":return m.jsx(fb,{});case"breathing":return m.jsx(hb,{});case"spaBookings":return m.jsx(gb,{user:t,showNotification:()=>{}});case"analysisQuote":return m.jsx(yb,{});case"prescriptions":return m.jsx(tC,{user:t});case"pharmacyServices":return m.jsx(nC,{user:t});case"dashboard":return m.jsx(DD,{user:t,onNavigate:i});case"bloodAnalysis":return m.jsx(zD,{user:t});case"profile":return m.jsx(BD,{user:t});case"manualUnlock":return m.jsx($D,{});case"login":return m.jsx(qD,{});default:return m.jsxs("div",{style:{padding:"20px"},children:[m.jsxs("h1",{children:["Schermata: ",e]}),m.jsx("p",{children:"Questa sezione non  ancora stata implementata."}),m.jsx("button",{onClick:()=>n("home"),style:{marginTop:"20px",padding:"10px 20px",background:"#0ea5e9",color:"white",borderRadius:"8px",border:"none",cursor:"pointer"},children:"Torna alla Home"})]})}};return m.jsx(m.Fragment,{children:s()})}dc.createRoot(document.getElementById("root")).render(m.jsx(jD,{}));
