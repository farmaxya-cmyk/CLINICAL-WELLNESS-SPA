var W_=Object.defineProperty;var Hf=t=>{throw TypeError(t)};var J_=(t,e,n)=>e in t?W_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var H=(t,e,n)=>J_(t,typeof e!="symbol"?e+"":e,n),Y_=(t,e,n)=>e.has(t)||Hf("Cannot "+n);var $f=(t,e,n)=>e.has(t)?Hf("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);var Ho=(t,e,n)=>(Y_(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var K_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function h0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var m0={exports:{}},ll={},g0={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sr=Symbol.for("react.element"),Q_=Symbol.for("react.portal"),X_=Symbol.for("react.fragment"),Z_=Symbol.for("react.strict_mode"),eb=Symbol.for("react.profiler"),tb=Symbol.for("react.provider"),nb=Symbol.for("react.context"),ib=Symbol.for("react.forward_ref"),ob=Symbol.for("react.suspense"),sb=Symbol.for("react.memo"),rb=Symbol.for("react.lazy"),Gf=Symbol.iterator;function ab(t){return t===null||typeof t!="object"?null:(t=Gf&&t[Gf]||t["@@iterator"],typeof t=="function"?t:null)}var x0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v0=Object.assign,y0={};function Mo(t,e,n){this.props=t,this.context=e,this.refs=y0,this.updater=n||x0}Mo.prototype.isReactComponent={};Mo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _0(){}_0.prototype=Mo.prototype;function ed(t,e,n){this.props=t,this.context=e,this.refs=y0,this.updater=n||x0}var td=ed.prototype=new _0;td.constructor=ed;v0(td,Mo.prototype);td.isPureReactComponent=!0;var qf=Array.isArray,b0=Object.prototype.hasOwnProperty,nd={current:null},w0={key:!0,ref:!0,__self:!0,__source:!0};function S0(t,e,n){var i,o={},s=null,r=null;if(e!=null)for(i in e.ref!==void 0&&(r=e.ref),e.key!==void 0&&(s=""+e.key),e)b0.call(e,i)&&!w0.hasOwnProperty(i)&&(o[i]=e[i]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];o.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)o[i]===void 0&&(o[i]=a[i]);return{$$typeof:sr,type:t,key:s,ref:r,props:o,_owner:nd.current}}function lb(t,e){return{$$typeof:sr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function id(t){return typeof t=="object"&&t!==null&&t.$$typeof===sr}function cb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Wf=/\/+/g;function $l(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cb(""+t.key):e.toString(36)}function Qr(t,e,n,i,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var r=!1;if(t===null)r=!0;else switch(s){case"string":case"number":r=!0;break;case"object":switch(t.$$typeof){case sr:case Q_:r=!0}}if(r)return r=t,o=o(r),t=i===""?"."+$l(r,0):i,qf(o)?(n="",t!=null&&(n=t.replace(Wf,"$&/")+"/"),Qr(o,e,n,"",function(u){return u})):o!=null&&(id(o)&&(o=lb(o,n+(!o.key||r&&r.key===o.key?"":(""+o.key).replace(Wf,"$&/")+"/")+t)),e.push(o)),1;if(r=0,i=i===""?".":i+":",qf(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+$l(s,a);r+=Qr(s,e,n,l,o)}else if(l=ab(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+$l(s,a++),r+=Qr(s,e,n,l,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return r}function hr(t,e,n){if(t==null)return t;var i=[],o=0;return Qr(t,i,"","",function(s){return e.call(n,s,o++)}),i}function ub(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var lt={current:null},Xr={transition:null},db={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:Xr,ReactCurrentOwner:nd};function C0(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:hr,forEach:function(t,e,n){hr(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hr(t,function(){e++}),e},toArray:function(t){return hr(t,function(e){return e})||[]},only:function(t){if(!id(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=Mo;ie.Fragment=X_;ie.Profiler=eb;ie.PureComponent=ed;ie.StrictMode=Z_;ie.Suspense=ob;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=db;ie.act=C0;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=v0({},t.props),o=t.key,s=t.ref,r=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,r=nd.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)b0.call(e,l)&&!w0.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:sr,type:t.type,key:o,ref:s,props:i,_owner:r}};ie.createContext=function(t){return t={$$typeof:nb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tb,_context:t},t.Consumer=t};ie.createElement=S0;ie.createFactory=function(t){var e=S0.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:ib,render:t}};ie.isValidElement=id;ie.lazy=function(t){return{$$typeof:rb,_payload:{_status:-1,_result:t},_init:ub}};ie.memo=function(t,e){return{$$typeof:sb,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Xr.transition;Xr.transition={};try{t()}finally{Xr.transition=e}};ie.unstable_act=C0;ie.useCallback=function(t,e){return lt.current.useCallback(t,e)};ie.useContext=function(t){return lt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return lt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return lt.current.useEffect(t,e)};ie.useId=function(){return lt.current.useId()};ie.useImperativeHandle=function(t,e,n){return lt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return lt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return lt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return lt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return lt.current.useReducer(t,e,n)};ie.useRef=function(t){return lt.current.useRef(t)};ie.useState=function(t){return lt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return lt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return lt.current.useTransition()};ie.version="18.3.1";g0.exports=ie;var J=g0.exports;const z=h0(J);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb=J,pb=Symbol.for("react.element"),hb=Symbol.for("react.fragment"),mb=Object.prototype.hasOwnProperty,gb=fb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xb={key:!0,ref:!0,__self:!0,__source:!0};function k0(t,e,n){var i,o={},s=null,r=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(r=e.ref);for(i in e)mb.call(e,i)&&!xb.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:pb,type:t,key:s,ref:r,props:o,_owner:gb.current}}ll.Fragment=hb;ll.jsx=k0;ll.jsxs=k0;m0.exports=ll;var c=m0.exports,Mc={},E0={exports:{}},Tt={},T0={exports:{}},I0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,D){var U=A.length;A.push(D);e:for(;0<U;){var R=U-1>>>1,O=A[R];if(0<o(O,D))A[R]=D,A[U]=O,U=R;else break e}}function n(A){return A.length===0?null:A[0]}function i(A){if(A.length===0)return null;var D=A[0],U=A.pop();if(U!==D){A[0]=U;e:for(var R=0,O=A.length,F=O>>>1;R<F;){var Y=2*(R+1)-1,X=A[Y],Q=Y+1,ve=A[Q];if(0>o(X,U))Q<O&&0>o(ve,X)?(A[R]=ve,A[Q]=U,R=Q):(A[R]=X,A[Y]=U,R=Y);else if(Q<O&&0>o(ve,U))A[R]=ve,A[Q]=U,R=Q;else break e}}return D}function o(A,D){var U=A.sortIndex-D.sortIndex;return U!==0?U:A.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var r=Date,a=r.now();t.unstable_now=function(){return r.now()-a}}var l=[],u=[],d=1,h=null,m=3,g=!1,v=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var D=n(u);D!==null;){if(D.callback===null)i(u);else if(D.startTime<=A)i(u),D.sortIndex=D.expirationTime,e(l,D);else break;D=n(u)}}function C(A){if(_=!1,w(A),!v)if(n(l)!==null)v=!0,q(E);else{var D=n(u);D!==null&&j(C,D.startTime-A)}}function E(A,D){v=!1,_&&(_=!1,y(S),S=-1),g=!0;var U=m;try{for(w(D),h=n(l);h!==null&&(!(h.expirationTime>D)||A&&!P());){var R=h.callback;if(typeof R=="function"){h.callback=null,m=h.priorityLevel;var O=R(h.expirationTime<=D);D=t.unstable_now(),typeof O=="function"?h.callback=O:h===n(l)&&i(l),w(D)}else i(l);h=n(l)}if(h!==null)var F=!0;else{var Y=n(u);Y!==null&&j(C,Y.startTime-D),F=!1}return F}finally{h=null,m=U,g=!1}}var N=!1,T=null,S=-1,k=5,I=-1;function P(){return!(t.unstable_now()-I<k)}function L(){if(T!==null){var A=t.unstable_now();I=A;var D=!0;try{D=T(!0,A)}finally{D?M():(N=!1,T=null)}}else N=!1}var M;if(typeof b=="function")M=function(){b(L)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,W=V.port2;V.port1.onmessage=L,M=function(){W.postMessage(null)}}else M=function(){x(L,0)};function q(A){T=A,N||(N=!0,M())}function j(A,D){S=x(function(){A(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,q(E))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(A){switch(m){case 1:case 2:case 3:var D=3;break;default:D=m}var U=m;m=D;try{return A()}finally{m=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,D){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var U=m;m=A;try{return D()}finally{m=U}},t.unstable_scheduleCallback=function(A,D,U){var R=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?R+U:R):U=R,A){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=U+O,A={id:d++,callback:D,priorityLevel:A,startTime:U,expirationTime:O,sortIndex:-1},U>R?(A.sortIndex=U,e(u,A),n(l)===null&&A===n(u)&&(_?(y(S),S=-1):_=!0,j(C,U-R))):(A.sortIndex=O,e(l,A),v||g||(v=!0,q(E))),A},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(A){var D=m;return function(){var U=m;m=D;try{return A.apply(this,arguments)}finally{m=U}}}})(I0);T0.exports=I0;var vb=T0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb=J,Et=vb;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var N0=new Set,Ls={};function ji(t,e){bo(t,e),bo(t+"Capture",e)}function bo(t,e){for(Ls[t]=e,t=0;t<e.length;t++)N0.add(e[t])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lc=Object.prototype.hasOwnProperty,_b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jf={},Yf={};function bb(t){return Lc.call(Yf,t)?!0:Lc.call(Jf,t)?!1:_b.test(t)?Yf[t]=!0:(Jf[t]=!0,!1)}function wb(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Sb(t,e,n,i){if(e===null||typeof e>"u"||wb(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ct(t,e,n,i,o,s,r){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=r}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var od=/[\-:]([a-z])/g;function sd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(od,sd);We[e]=new ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(od,sd);We[e]=new ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(od,sd);We[e]=new ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new ct(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function rd(t,e,n,i){var o=We.hasOwnProperty(e)?We[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Sb(e,n,o,i)&&(n=null),i||o===null?bb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,i=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var An=yb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mr=Symbol.for("react.element"),Wi=Symbol.for("react.portal"),Ji=Symbol.for("react.fragment"),ad=Symbol.for("react.strict_mode"),Dc=Symbol.for("react.profiler"),A0=Symbol.for("react.provider"),P0=Symbol.for("react.context"),ld=Symbol.for("react.forward_ref"),zc=Symbol.for("react.suspense"),jc=Symbol.for("react.suspense_list"),cd=Symbol.for("react.memo"),zn=Symbol.for("react.lazy"),R0=Symbol.for("react.offscreen"),Kf=Symbol.iterator;function $o(t){return t===null||typeof t!="object"?null:(t=Kf&&t[Kf]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,Gl;function cs(t){if(Gl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gl=e&&e[1]||""}return`
`+Gl+t}var ql=!1;function Wl(t,e){if(!t||ql)return"";ql=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),s=i.stack.split(`
`),r=o.length-1,a=s.length-1;1<=r&&0<=a&&o[r]!==s[a];)a--;for(;1<=r&&0<=a;r--,a--)if(o[r]!==s[a]){if(r!==1||a!==1)do if(r--,a--,0>a||o[r]!==s[a]){var l=`
`+o[r].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=r&&0<=a);break}}}finally{ql=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cs(t):""}function Cb(t){switch(t.tag){case 5:return cs(t.type);case 16:return cs("Lazy");case 13:return cs("Suspense");case 19:return cs("SuspenseList");case 0:case 2:case 15:return t=Wl(t.type,!1),t;case 11:return t=Wl(t.type.render,!1),t;case 1:return t=Wl(t.type,!0),t;default:return""}}function Fc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ji:return"Fragment";case Wi:return"Portal";case Dc:return"Profiler";case ad:return"StrictMode";case zc:return"Suspense";case jc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case P0:return(t.displayName||"Context")+".Consumer";case A0:return(t._context.displayName||"Context")+".Provider";case ld:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cd:return e=t.displayName||null,e!==null?e:Fc(t.type)||"Memo";case zn:e=t._payload,t=t._init;try{return Fc(t(e))}catch{}}return null}function kb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fc(e);case 8:return e===ad?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ni(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function M0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Eb(t){var e=M0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(r){i=""+r,s.call(this,r)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(r){i=""+r},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gr(t){t._valueTracker||(t._valueTracker=Eb(t))}function L0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=M0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function va(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Oc(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qf(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ni(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function D0(t,e){e=e.checked,e!=null&&rd(t,"checked",e,!1)}function Uc(t,e){D0(t,e);var n=ni(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bc(t,e.type,ni(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bc(t,e,n){(e!=="number"||va(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var us=Array.isArray;function lo(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ni(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Vc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(us(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ni(n)}}function z0(t,e){var n=ni(e.value),i=ni(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function ep(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function j0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?j0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xr,F0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xr=xr||document.createElement("div"),xr.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ds(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tb=["Webkit","ms","Moz","O"];Object.keys(vs).forEach(function(t){Tb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vs[e]=vs[t]})});function O0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vs.hasOwnProperty(t)&&vs[t]?(""+e).trim():e+"px"}function U0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=O0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,o):t[n]=o}}var Ib=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $c(t,e){if(e){if(Ib[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Gc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qc=null;function ud(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wc=null,co=null,uo=null;function tp(t){if(t=lr(t)){if(typeof Wc!="function")throw Error(B(280));var e=t.stateNode;e&&(e=pl(e),Wc(t.stateNode,t.type,e))}}function B0(t){co?uo?uo.push(t):uo=[t]:co=t}function V0(){if(co){var t=co,e=uo;if(uo=co=null,tp(t),e)for(t=0;t<e.length;t++)tp(e[t])}}function H0(t,e){return t(e)}function $0(){}var Jl=!1;function G0(t,e,n){if(Jl)return t(e,n);Jl=!0;try{return H0(t,e,n)}finally{Jl=!1,(co!==null||uo!==null)&&($0(),V0())}}function zs(t,e){var n=t.stateNode;if(n===null)return null;var i=pl(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Jc=!1;if(wn)try{var Go={};Object.defineProperty(Go,"passive",{get:function(){Jc=!0}}),window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{Jc=!1}function Nb(t,e,n,i,o,s,r,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var ys=!1,ya=null,_a=!1,Yc=null,Ab={onError:function(t){ys=!0,ya=t}};function Pb(t,e,n,i,o,s,r,a,l){ys=!1,ya=null,Nb.apply(Ab,arguments)}function Rb(t,e,n,i,o,s,r,a,l){if(Pb.apply(this,arguments),ys){if(ys){var u=ya;ys=!1,ya=null}else throw Error(B(198));_a||(_a=!0,Yc=u)}}function Fi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function q0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function np(t){if(Fi(t)!==t)throw Error(B(188))}function Mb(t){var e=t.alternate;if(!e){if(e=Fi(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return np(o),t;if(s===i)return np(o),e;s=s.sibling}throw Error(B(188))}if(n.return!==i.return)n=o,i=s;else{for(var r=!1,a=o.child;a;){if(a===n){r=!0,n=o,i=s;break}if(a===i){r=!0,i=o,n=s;break}a=a.sibling}if(!r){for(a=s.child;a;){if(a===n){r=!0,n=s,i=o;break}if(a===i){r=!0,i=s,n=o;break}a=a.sibling}if(!r)throw Error(B(189))}}if(n.alternate!==i)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function W0(t){return t=Mb(t),t!==null?J0(t):null}function J0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=J0(t);if(e!==null)return e;t=t.sibling}return null}var Y0=Et.unstable_scheduleCallback,ip=Et.unstable_cancelCallback,Lb=Et.unstable_shouldYield,Db=Et.unstable_requestPaint,Le=Et.unstable_now,zb=Et.unstable_getCurrentPriorityLevel,dd=Et.unstable_ImmediatePriority,K0=Et.unstable_UserBlockingPriority,ba=Et.unstable_NormalPriority,jb=Et.unstable_LowPriority,Q0=Et.unstable_IdlePriority,cl=null,ln=null;function Fb(t){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(cl,t,void 0,(t.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:Bb,Ob=Math.log,Ub=Math.LN2;function Bb(t){return t>>>=0,t===0?32:31-(Ob(t)/Ub|0)|0}var vr=64,yr=4194304;function ds(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wa(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,s=t.pingedLanes,r=n&268435455;if(r!==0){var a=r&~o;a!==0?i=ds(a):(s&=r,s!==0&&(i=ds(s)))}else r=n&~o,r!==0?i=ds(r):s!==0&&(i=ds(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-$t(e),o=1<<n,i|=t[n],e&=~o;return i}function Vb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hb(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var r=31-$t(s),a=1<<r,l=o[r];l===-1?(!(a&n)||a&i)&&(o[r]=Vb(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Kc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function X0(){var t=vr;return vr<<=1,!(vr&4194240)&&(vr=64),t}function Yl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rr(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$t(e),t[e]=n}function $b(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-$t(n),s=1<<o;e[o]=0,i[o]=-1,t[o]=-1,n&=~s}}function fd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-$t(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}var me=0;function Z0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ex,pd,tx,nx,ix,Qc=!1,_r=[],Wn=null,Jn=null,Yn=null,js=new Map,Fs=new Map,Fn=[],Gb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function op(t,e){switch(t){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":js.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fs.delete(e.pointerId)}}function qo(t,e,n,i,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},e!==null&&(e=lr(e),e!==null&&pd(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function qb(t,e,n,i,o){switch(e){case"focusin":return Wn=qo(Wn,t,e,n,i,o),!0;case"dragenter":return Jn=qo(Jn,t,e,n,i,o),!0;case"mouseover":return Yn=qo(Yn,t,e,n,i,o),!0;case"pointerover":var s=o.pointerId;return js.set(s,qo(js.get(s)||null,t,e,n,i,o)),!0;case"gotpointercapture":return s=o.pointerId,Fs.set(s,qo(Fs.get(s)||null,t,e,n,i,o)),!0}return!1}function ox(t){var e=_i(t.target);if(e!==null){var n=Fi(e);if(n!==null){if(e=n.tag,e===13){if(e=q0(n),e!==null){t.blockedOn=e,ix(t.priority,function(){tx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);qc=i,n.target.dispatchEvent(i),qc=null}else return e=lr(n),e!==null&&pd(e),t.blockedOn=n,!1;e.shift()}return!0}function sp(t,e,n){Zr(t)&&n.delete(e)}function Wb(){Qc=!1,Wn!==null&&Zr(Wn)&&(Wn=null),Jn!==null&&Zr(Jn)&&(Jn=null),Yn!==null&&Zr(Yn)&&(Yn=null),js.forEach(sp),Fs.forEach(sp)}function Wo(t,e){t.blockedOn===e&&(t.blockedOn=null,Qc||(Qc=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,Wb)))}function Os(t){function e(o){return Wo(o,t)}if(0<_r.length){Wo(_r[0],t);for(var n=1;n<_r.length;n++){var i=_r[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Wn!==null&&Wo(Wn,t),Jn!==null&&Wo(Jn,t),Yn!==null&&Wo(Yn,t),js.forEach(e),Fs.forEach(e),n=0;n<Fn.length;n++)i=Fn[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Fn.length&&(n=Fn[0],n.blockedOn===null);)ox(n),n.blockedOn===null&&Fn.shift()}var fo=An.ReactCurrentBatchConfig,Sa=!0;function Jb(t,e,n,i){var o=me,s=fo.transition;fo.transition=null;try{me=1,hd(t,e,n,i)}finally{me=o,fo.transition=s}}function Yb(t,e,n,i){var o=me,s=fo.transition;fo.transition=null;try{me=4,hd(t,e,n,i)}finally{me=o,fo.transition=s}}function hd(t,e,n,i){if(Sa){var o=Xc(t,e,n,i);if(o===null)sc(t,e,i,Ca,n),op(t,i);else if(qb(o,t,e,n,i))i.stopPropagation();else if(op(t,i),e&4&&-1<Gb.indexOf(t)){for(;o!==null;){var s=lr(o);if(s!==null&&ex(s),s=Xc(t,e,n,i),s===null&&sc(t,e,i,Ca,n),s===o)break;o=s}o!==null&&i.stopPropagation()}else sc(t,e,i,null,n)}}var Ca=null;function Xc(t,e,n,i){if(Ca=null,t=ud(i),t=_i(t),t!==null)if(e=Fi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=q0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ca=t,null}function sx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zb()){case dd:return 1;case K0:return 4;case ba:case jb:return 16;case Q0:return 536870912;default:return 16}default:return 16}}var Un=null,md=null,ea=null;function rx(){if(ea)return ea;var t,e=md,n=e.length,i,o="value"in Un?Un.value:Un.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var r=n-t;for(i=1;i<=r&&e[n-i]===o[s-i];i++);return ea=o.slice(t,1<i?1-i:void 0)}function ta(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function br(){return!0}function rp(){return!1}function It(t){function e(n,i,o,s,r){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?br:rp,this.isPropagationStopped=rp,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),e}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gd=It(Lo),ar=Ae({},Lo,{view:0,detail:0}),Kb=It(ar),Kl,Ql,Jo,ul=Ae({},ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jo&&(Jo&&t.type==="mousemove"?(Kl=t.screenX-Jo.screenX,Ql=t.screenY-Jo.screenY):Ql=Kl=0,Jo=t),Kl)},movementY:function(t){return"movementY"in t?t.movementY:Ql}}),ap=It(ul),Qb=Ae({},ul,{dataTransfer:0}),Xb=It(Qb),Zb=Ae({},ar,{relatedTarget:0}),Xl=It(Zb),ew=Ae({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),tw=It(ew),nw=Ae({},Lo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),iw=It(nw),ow=Ae({},Lo,{data:0}),lp=It(ow),sw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aw[t])?!!e[t]:!1}function xd(){return lw}var cw=Ae({},ar,{key:function(t){if(t.key){var e=sw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ta(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xd,charCode:function(t){return t.type==="keypress"?ta(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ta(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uw=It(cw),dw=Ae({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cp=It(dw),fw=Ae({},ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xd}),pw=It(fw),hw=Ae({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),mw=It(hw),gw=Ae({},ul,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xw=It(gw),vw=[9,13,27,32],vd=wn&&"CompositionEvent"in window,_s=null;wn&&"documentMode"in document&&(_s=document.documentMode);var yw=wn&&"TextEvent"in window&&!_s,ax=wn&&(!vd||_s&&8<_s&&11>=_s),up=" ",dp=!1;function lx(t,e){switch(t){case"keyup":return vw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yi=!1;function _w(t,e){switch(t){case"compositionend":return cx(e);case"keypress":return e.which!==32?null:(dp=!0,up);case"textInput":return t=e.data,t===up&&dp?null:t;default:return null}}function bw(t,e){if(Yi)return t==="compositionend"||!vd&&lx(t,e)?(t=rx(),ea=md=Un=null,Yi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ax&&e.locale!=="ko"?null:e.data;default:return null}}var ww={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ww[t.type]:e==="textarea"}function ux(t,e,n,i){B0(i),e=ka(e,"onChange"),0<e.length&&(n=new gd("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var bs=null,Us=null;function Sw(t){bx(t,0)}function dl(t){var e=Xi(t);if(L0(e))return t}function Cw(t,e){if(t==="change")return e}var dx=!1;if(wn){var Zl;if(wn){var ec="oninput"in document;if(!ec){var pp=document.createElement("div");pp.setAttribute("oninput","return;"),ec=typeof pp.oninput=="function"}Zl=ec}else Zl=!1;dx=Zl&&(!document.documentMode||9<document.documentMode)}function hp(){bs&&(bs.detachEvent("onpropertychange",fx),Us=bs=null)}function fx(t){if(t.propertyName==="value"&&dl(Us)){var e=[];ux(e,Us,t,ud(t)),G0(Sw,e)}}function kw(t,e,n){t==="focusin"?(hp(),bs=e,Us=n,bs.attachEvent("onpropertychange",fx)):t==="focusout"&&hp()}function Ew(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dl(Us)}function Tw(t,e){if(t==="click")return dl(e)}function Iw(t,e){if(t==="input"||t==="change")return dl(e)}function Nw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jt=typeof Object.is=="function"?Object.is:Nw;function Bs(t,e){if(Jt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!Lc.call(e,o)||!Jt(t[o],e[o]))return!1}return!0}function mp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gp(t,e){var n=mp(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mp(n)}}function px(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?px(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hx(){for(var t=window,e=va();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=va(t.document)}return e}function yd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Aw(t){var e=hx(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&px(n.ownerDocument.documentElement,n)){if(i!==null&&yd(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(i.start,o);i=i.end===void 0?s:Math.min(i.end,o),!t.extend&&s>i&&(o=i,i=s,s=o),o=gp(n,s);var r=gp(n,i);o&&r&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==r.node||t.focusOffset!==r.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(r.node,r.offset)):(e.setEnd(r.node,r.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Pw=wn&&"documentMode"in document&&11>=document.documentMode,Ki=null,Zc=null,ws=null,eu=!1;function xp(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;eu||Ki==null||Ki!==va(i)||(i=Ki,"selectionStart"in i&&yd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ws&&Bs(ws,i)||(ws=i,i=ka(Zc,"onSelect"),0<i.length&&(e=new gd("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ki)))}function wr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qi={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},tc={},mx={};wn&&(mx=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function fl(t){if(tc[t])return tc[t];if(!Qi[t])return t;var e=Qi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mx)return tc[t]=e[n];return t}var gx=fl("animationend"),xx=fl("animationiteration"),vx=fl("animationstart"),yx=fl("transitionend"),_x=new Map,vp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(t,e){_x.set(t,e),ji(e,[t])}for(var nc=0;nc<vp.length;nc++){var ic=vp[nc],Rw=ic.toLowerCase(),Mw=ic[0].toUpperCase()+ic.slice(1);si(Rw,"on"+Mw)}si(gx,"onAnimationEnd");si(xx,"onAnimationIteration");si(vx,"onAnimationStart");si("dblclick","onDoubleClick");si("focusin","onFocus");si("focusout","onBlur");si(yx,"onTransitionEnd");bo("onMouseEnter",["mouseout","mouseover"]);bo("onMouseLeave",["mouseout","mouseover"]);bo("onPointerEnter",["pointerout","pointerover"]);bo("onPointerLeave",["pointerout","pointerover"]);ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lw=new Set("cancel close invalid load scroll toggle".split(" ").concat(fs));function yp(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Rb(i,e,void 0,t),t.currentTarget=null}function bx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var r=i.length-1;0<=r;r--){var a=i[r],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;yp(o,a,u),s=l}else for(r=0;r<i.length;r++){if(a=i[r],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;yp(o,a,u),s=l}}}if(_a)throw t=Yc,_a=!1,Yc=null,t}function we(t,e){var n=e[su];n===void 0&&(n=e[su]=new Set);var i=t+"__bubble";n.has(i)||(wx(e,t,2,!1),n.add(i))}function oc(t,e,n){var i=0;e&&(i|=4),wx(n,t,i,e)}var Sr="_reactListening"+Math.random().toString(36).slice(2);function Vs(t){if(!t[Sr]){t[Sr]=!0,N0.forEach(function(n){n!=="selectionchange"&&(Lw.has(n)||oc(n,!1,t),oc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sr]||(e[Sr]=!0,oc("selectionchange",!1,e))}}function wx(t,e,n,i){switch(sx(e)){case 1:var o=Jb;break;case 4:o=Yb;break;default:o=hd}n=o.bind(null,e,n,t),o=void 0,!Jc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function sc(t,e,n,i,o){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var a=i.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(r===4)for(r=i.return;r!==null;){var l=r.tag;if((l===3||l===4)&&(l=r.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;r=r.return}for(;a!==null;){if(r=_i(a),r===null)return;if(l=r.tag,l===5||l===6){i=s=r;continue e}a=a.parentNode}}i=i.return}G0(function(){var u=s,d=ud(n),h=[];e:{var m=_x.get(t);if(m!==void 0){var g=gd,v=t;switch(t){case"keypress":if(ta(n)===0)break e;case"keydown":case"keyup":g=uw;break;case"focusin":v="focus",g=Xl;break;case"focusout":v="blur",g=Xl;break;case"beforeblur":case"afterblur":g=Xl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=ap;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Xb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=pw;break;case gx:case xx:case vx:g=tw;break;case yx:g=mw;break;case"scroll":g=Kb;break;case"wheel":g=xw;break;case"copy":case"cut":case"paste":g=iw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=cp}var _=(e&4)!==0,x=!_&&t==="scroll",y=_?m!==null?m+"Capture":null:m;_=[];for(var b=u,w;b!==null;){w=b;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,y!==null&&(C=zs(b,y),C!=null&&_.push(Hs(b,C,w)))),x)break;b=b.return}0<_.length&&(m=new g(m,v,null,n,d),h.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==qc&&(v=n.relatedTarget||n.fromElement)&&(_i(v)||v[Sn]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?_i(v):null,v!==null&&(x=Fi(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(_=ap,C="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(_=cp,C="onPointerLeave",y="onPointerEnter",b="pointer"),x=g==null?m:Xi(g),w=v==null?m:Xi(v),m=new _(C,b+"leave",g,n,d),m.target=x,m.relatedTarget=w,C=null,_i(d)===u&&(_=new _(y,b+"enter",v,n,d),_.target=w,_.relatedTarget=x,C=_),x=C,g&&v)t:{for(_=g,y=v,b=0,w=_;w;w=Hi(w))b++;for(w=0,C=y;C;C=Hi(C))w++;for(;0<b-w;)_=Hi(_),b--;for(;0<w-b;)y=Hi(y),w--;for(;b--;){if(_===y||y!==null&&_===y.alternate)break t;_=Hi(_),y=Hi(y)}_=null}else _=null;g!==null&&_p(h,m,g,_,!1),v!==null&&x!==null&&_p(h,x,v,_,!0)}}e:{if(m=u?Xi(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var E=Cw;else if(fp(m))if(dx)E=Iw;else{E=Ew;var N=kw}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=Tw);if(E&&(E=E(t,u))){ux(h,E,n,d);break e}N&&N(t,m,u),t==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Bc(m,"number",m.value)}switch(N=u?Xi(u):window,t){case"focusin":(fp(N)||N.contentEditable==="true")&&(Ki=N,Zc=u,ws=null);break;case"focusout":ws=Zc=Ki=null;break;case"mousedown":eu=!0;break;case"contextmenu":case"mouseup":case"dragend":eu=!1,xp(h,n,d);break;case"selectionchange":if(Pw)break;case"keydown":case"keyup":xp(h,n,d)}var T;if(vd)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Yi?lx(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(ax&&n.locale!=="ko"&&(Yi||S!=="onCompositionStart"?S==="onCompositionEnd"&&Yi&&(T=rx()):(Un=d,md="value"in Un?Un.value:Un.textContent,Yi=!0)),N=ka(u,S),0<N.length&&(S=new lp(S,t,null,n,d),h.push({event:S,listeners:N}),T?S.data=T:(T=cx(n),T!==null&&(S.data=T)))),(T=yw?_w(t,n):bw(t,n))&&(u=ka(u,"onBeforeInput"),0<u.length&&(d=new lp("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=T))}bx(h,e)})}function Hs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ka(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=zs(t,n),s!=null&&i.unshift(Hs(t,s,o)),s=zs(t,e),s!=null&&i.push(Hs(t,s,o))),t=t.return}return i}function Hi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _p(t,e,n,i,o){for(var s=e._reactName,r=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,o?(l=zs(n,s),l!=null&&r.unshift(Hs(n,l,a))):o||(l=zs(n,s),l!=null&&r.push(Hs(n,l,a)))),n=n.return}r.length!==0&&t.push({event:e,listeners:r})}var Dw=/\r\n?/g,zw=/\u0000|\uFFFD/g;function bp(t){return(typeof t=="string"?t:""+t).replace(Dw,`
`).replace(zw,"")}function Cr(t,e,n){if(e=bp(e),bp(t)!==e&&n)throw Error(B(425))}function Ea(){}var tu=null,nu=null;function iu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ou=typeof setTimeout=="function"?setTimeout:void 0,jw=typeof clearTimeout=="function"?clearTimeout:void 0,wp=typeof Promise=="function"?Promise:void 0,Fw=typeof queueMicrotask=="function"?queueMicrotask:typeof wp<"u"?function(t){return wp.resolve(null).then(t).catch(Ow)}:ou;function Ow(t){setTimeout(function(){throw t})}function rc(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){t.removeChild(o),Os(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);Os(e)}function Kn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Do=Math.random().toString(36).slice(2),on="__reactFiber$"+Do,$s="__reactProps$"+Do,Sn="__reactContainer$"+Do,su="__reactEvents$"+Do,Uw="__reactListeners$"+Do,Bw="__reactHandles$"+Do;function _i(t){var e=t[on];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sn]||n[on]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sp(t);t!==null;){if(n=t[on])return n;t=Sp(t)}return e}t=n,n=t.parentNode}return null}function lr(t){return t=t[on]||t[Sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function pl(t){return t[$s]||null}var ru=[],Zi=-1;function ri(t){return{current:t}}function Se(t){0>Zi||(t.current=ru[Zi],ru[Zi]=null,Zi--)}function _e(t,e){Zi++,ru[Zi]=t.current,t.current=e}var ii={},tt=ri(ii),mt=ri(!1),Ni=ii;function wo(t,e){var n=t.type.contextTypes;if(!n)return ii;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function gt(t){return t=t.childContextTypes,t!=null}function Ta(){Se(mt),Se(tt)}function Cp(t,e,n){if(tt.current!==ii)throw Error(B(168));_e(tt,e),_e(mt,n)}function Sx(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(B(108,kb(t)||"Unknown",o));return Ae({},n,i)}function Ia(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ii,Ni=tt.current,_e(tt,t),_e(mt,mt.current),!0}function kp(t,e,n){var i=t.stateNode;if(!i)throw Error(B(169));n?(t=Sx(t,e,Ni),i.__reactInternalMemoizedMergedChildContext=t,Se(mt),Se(tt),_e(tt,t)):Se(mt),_e(mt,n)}var gn=null,hl=!1,ac=!1;function Cx(t){gn===null?gn=[t]:gn.push(t)}function Vw(t){hl=!0,Cx(t)}function ai(){if(!ac&&gn!==null){ac=!0;var t=0,e=me;try{var n=gn;for(me=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}gn=null,hl=!1}catch(o){throw gn!==null&&(gn=gn.slice(t+1)),Y0(dd,ai),o}finally{me=e,ac=!1}}return null}var eo=[],to=0,Na=null,Aa=0,At=[],Pt=0,Ai=null,vn=1,yn="";function mi(t,e){eo[to++]=Aa,eo[to++]=Na,Na=t,Aa=e}function kx(t,e,n){At[Pt++]=vn,At[Pt++]=yn,At[Pt++]=Ai,Ai=t;var i=vn;t=yn;var o=32-$t(i)-1;i&=~(1<<o),n+=1;var s=32-$t(e)+o;if(30<s){var r=o-o%5;s=(i&(1<<r)-1).toString(32),i>>=r,o-=r,vn=1<<32-$t(e)+o|n<<o|i,yn=s+t}else vn=1<<s|n<<o|i,yn=t}function _d(t){t.return!==null&&(mi(t,1),kx(t,1,0))}function bd(t){for(;t===Na;)Na=eo[--to],eo[to]=null,Aa=eo[--to],eo[to]=null;for(;t===Ai;)Ai=At[--Pt],At[Pt]=null,yn=At[--Pt],At[Pt]=null,vn=At[--Pt],At[Pt]=null}var Ct=null,wt=null,ke=!1,Ht=null;function Ex(t,e){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ep(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ct=t,wt=Kn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ct=t,wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ai!==null?{id:vn,overflow:yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ct=t,wt=null,!0):!1;default:return!1}}function au(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lu(t){if(ke){var e=wt;if(e){var n=e;if(!Ep(t,e)){if(au(t))throw Error(B(418));e=Kn(n.nextSibling);var i=Ct;e&&Ep(t,e)?Ex(i,n):(t.flags=t.flags&-4097|2,ke=!1,Ct=t)}}else{if(au(t))throw Error(B(418));t.flags=t.flags&-4097|2,ke=!1,Ct=t}}}function Tp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function kr(t){if(t!==Ct)return!1;if(!ke)return Tp(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!iu(t.type,t.memoizedProps)),e&&(e=wt)){if(au(t))throw Tx(),Error(B(418));for(;e;)Ex(t,e),e=Kn(e.nextSibling)}if(Tp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wt=Kn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wt=null}}else wt=Ct?Kn(t.stateNode.nextSibling):null;return!0}function Tx(){for(var t=wt;t;)t=Kn(t.nextSibling)}function So(){wt=Ct=null,ke=!1}function wd(t){Ht===null?Ht=[t]:Ht.push(t)}var Hw=An.ReactCurrentBatchConfig;function Yo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var i=n.stateNode}if(!i)throw Error(B(147,t));var o=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(r){var a=o.refs;r===null?delete a[s]:a[s]=r},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Er(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ip(t){var e=t._init;return e(t._payload)}function Ix(t){function e(y,b){if(t){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function i(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function o(y,b){return y=ei(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function r(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,w,C){return b===null||b.tag!==6?(b=hc(w,y.mode,C),b.return=y,b):(b=o(b,w),b.return=y,b)}function l(y,b,w,C){var E=w.type;return E===Ji?d(y,b,w.props.children,C,w.key):b!==null&&(b.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===zn&&Ip(E)===b.type)?(C=o(b,w.props),C.ref=Yo(y,b,w),C.return=y,C):(C=la(w.type,w.key,w.props,null,y.mode,C),C.ref=Yo(y,b,w),C.return=y,C)}function u(y,b,w,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=mc(w,y.mode,C),b.return=y,b):(b=o(b,w.children||[]),b.return=y,b)}function d(y,b,w,C,E){return b===null||b.tag!==7?(b=ki(w,y.mode,C,E),b.return=y,b):(b=o(b,w),b.return=y,b)}function h(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=hc(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case mr:return w=la(b.type,b.key,b.props,null,y.mode,w),w.ref=Yo(y,null,b),w.return=y,w;case Wi:return b=mc(b,y.mode,w),b.return=y,b;case zn:var C=b._init;return h(y,C(b._payload),w)}if(us(b)||$o(b))return b=ki(b,y.mode,w,null),b.return=y,b;Er(y,b)}return null}function m(y,b,w,C){var E=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return E!==null?null:a(y,b,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case mr:return w.key===E?l(y,b,w,C):null;case Wi:return w.key===E?u(y,b,w,C):null;case zn:return E=w._init,m(y,b,E(w._payload),C)}if(us(w)||$o(w))return E!==null?null:d(y,b,w,C,null);Er(y,w)}return null}function g(y,b,w,C,E){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(w)||null,a(b,y,""+C,E);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case mr:return y=y.get(C.key===null?w:C.key)||null,l(b,y,C,E);case Wi:return y=y.get(C.key===null?w:C.key)||null,u(b,y,C,E);case zn:var N=C._init;return g(y,b,w,N(C._payload),E)}if(us(C)||$o(C))return y=y.get(w)||null,d(b,y,C,E,null);Er(b,C)}return null}function v(y,b,w,C){for(var E=null,N=null,T=b,S=b=0,k=null;T!==null&&S<w.length;S++){T.index>S?(k=T,T=null):k=T.sibling;var I=m(y,T,w[S],C);if(I===null){T===null&&(T=k);break}t&&T&&I.alternate===null&&e(y,T),b=s(I,b,S),N===null?E=I:N.sibling=I,N=I,T=k}if(S===w.length)return n(y,T),ke&&mi(y,S),E;if(T===null){for(;S<w.length;S++)T=h(y,w[S],C),T!==null&&(b=s(T,b,S),N===null?E=T:N.sibling=T,N=T);return ke&&mi(y,S),E}for(T=i(y,T);S<w.length;S++)k=g(T,y,S,w[S],C),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?S:k.key),b=s(k,b,S),N===null?E=k:N.sibling=k,N=k);return t&&T.forEach(function(P){return e(y,P)}),ke&&mi(y,S),E}function _(y,b,w,C){var E=$o(w);if(typeof E!="function")throw Error(B(150));if(w=E.call(w),w==null)throw Error(B(151));for(var N=E=null,T=b,S=b=0,k=null,I=w.next();T!==null&&!I.done;S++,I=w.next()){T.index>S?(k=T,T=null):k=T.sibling;var P=m(y,T,I.value,C);if(P===null){T===null&&(T=k);break}t&&T&&P.alternate===null&&e(y,T),b=s(P,b,S),N===null?E=P:N.sibling=P,N=P,T=k}if(I.done)return n(y,T),ke&&mi(y,S),E;if(T===null){for(;!I.done;S++,I=w.next())I=h(y,I.value,C),I!==null&&(b=s(I,b,S),N===null?E=I:N.sibling=I,N=I);return ke&&mi(y,S),E}for(T=i(y,T);!I.done;S++,I=w.next())I=g(T,y,S,I.value,C),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?S:I.key),b=s(I,b,S),N===null?E=I:N.sibling=I,N=I);return t&&T.forEach(function(L){return e(y,L)}),ke&&mi(y,S),E}function x(y,b,w,C){if(typeof w=="object"&&w!==null&&w.type===Ji&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case mr:e:{for(var E=w.key,N=b;N!==null;){if(N.key===E){if(E=w.type,E===Ji){if(N.tag===7){n(y,N.sibling),b=o(N,w.props.children),b.return=y,y=b;break e}}else if(N.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===zn&&Ip(E)===N.type){n(y,N.sibling),b=o(N,w.props),b.ref=Yo(y,N,w),b.return=y,y=b;break e}n(y,N);break}else e(y,N);N=N.sibling}w.type===Ji?(b=ki(w.props.children,y.mode,C,w.key),b.return=y,y=b):(C=la(w.type,w.key,w.props,null,y.mode,C),C.ref=Yo(y,b,w),C.return=y,y=C)}return r(y);case Wi:e:{for(N=w.key;b!==null;){if(b.key===N)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(y,b.sibling),b=o(b,w.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=mc(w,y.mode,C),b.return=y,y=b}return r(y);case zn:return N=w._init,x(y,b,N(w._payload),C)}if(us(w))return v(y,b,w,C);if($o(w))return _(y,b,w,C);Er(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(y,b.sibling),b=o(b,w),b.return=y,y=b):(n(y,b),b=hc(w,y.mode,C),b.return=y,y=b),r(y)):n(y,b)}return x}var Co=Ix(!0),Nx=Ix(!1),Pa=ri(null),Ra=null,no=null,Sd=null;function Cd(){Sd=no=Ra=null}function kd(t){var e=Pa.current;Se(Pa),t._currentValue=e}function cu(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function po(t,e){Ra=t,Sd=no=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ht=!0),t.firstContext=null)}function jt(t){var e=t._currentValue;if(Sd!==t)if(t={context:t,memoizedValue:e,next:null},no===null){if(Ra===null)throw Error(B(308));no=t,Ra.dependencies={lanes:0,firstContext:t}}else no=no.next=t;return e}var bi=null;function Ed(t){bi===null?bi=[t]:bi.push(t)}function Ax(t,e,n,i){var o=e.interleaved;return o===null?(n.next=n,Ed(e)):(n.next=o.next,o.next=n),e.interleaved=n,Cn(t,i)}function Cn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jn=!1;function Td(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Px(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ce&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,Cn(t,n)}return o=i.interleaved,o===null?(e.next=e,Ed(i)):(e.next=o.next,o.next=e),i.interleaved=e,Cn(t,n)}function na(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,fd(t,n)}}function Np(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var r={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=r:s=s.next=r,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ma(t,e,n,i){var o=t.updateQueue;jn=!1;var s=o.firstBaseUpdate,r=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,u=l.next;l.next=null,r===null?s=u:r.next=u,r=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==r&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=o.baseState;r=0,d=u=l=null,a=s;do{var m=a.lane,g=a.eventTime;if((i&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,_=a;switch(m=e,g=n,_.tag){case 1:if(v=_.payload,typeof v=="function"){h=v.call(g,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,m=typeof v=="function"?v.call(g,h,m):v,m==null)break e;h=Ae({},h,m);break e;case 2:jn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=o.effects,m===null?o.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,l=h):d=d.next=g,r|=m;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;m=a,a=m.next,m.next=null,o.lastBaseUpdate=m,o.shared.pending=null}}while(!0);if(d===null&&(l=h),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=d,e=o.shared.interleaved,e!==null){o=e;do r|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);Ri|=r,t.lanes=r,t.memoizedState=h}}function Ap(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(B(191,o));o.call(i)}}}var cr={},cn=ri(cr),Gs=ri(cr),qs=ri(cr);function wi(t){if(t===cr)throw Error(B(174));return t}function Id(t,e){switch(_e(qs,e),_e(Gs,t),_e(cn,cr),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hc(e,t)}Se(cn),_e(cn,e)}function ko(){Se(cn),Se(Gs),Se(qs)}function Rx(t){wi(qs.current);var e=wi(cn.current),n=Hc(e,t.type);e!==n&&(_e(Gs,t),_e(cn,n))}function Nd(t){Gs.current===t&&(Se(cn),Se(Gs))}var Te=ri(0);function La(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lc=[];function Ad(){for(var t=0;t<lc.length;t++)lc[t]._workInProgressVersionPrimary=null;lc.length=0}var ia=An.ReactCurrentDispatcher,cc=An.ReactCurrentBatchConfig,Pi=0,Ne=null,Fe=null,Ve=null,Da=!1,Ss=!1,Ws=0,$w=0;function Ke(){throw Error(B(321))}function Pd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jt(t[n],e[n]))return!1;return!0}function Rd(t,e,n,i,o,s){if(Pi=s,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ia.current=t===null||t.memoizedState===null?Jw:Yw,t=n(i,o),Ss){s=0;do{if(Ss=!1,Ws=0,25<=s)throw Error(B(301));s+=1,Ve=Fe=null,e.updateQueue=null,ia.current=Kw,t=n(i,o)}while(Ss)}if(ia.current=za,e=Fe!==null&&Fe.next!==null,Pi=0,Ve=Fe=Ne=null,Da=!1,e)throw Error(B(300));return t}function Md(){var t=Ws!==0;return Ws=0,t}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Ne.memoizedState=Ve=t:Ve=Ve.next=t,Ve}function Ft(){if(Fe===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=Ve===null?Ne.memoizedState:Ve.next;if(e!==null)Ve=e,Fe=t;else{if(t===null)throw Error(B(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Ve===null?Ne.memoizedState=Ve=t:Ve=Ve.next=t}return Ve}function Js(t,e){return typeof e=="function"?e(t):e}function uc(t){var e=Ft(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=Fe,o=i.baseQueue,s=n.pending;if(s!==null){if(o!==null){var r=o.next;o.next=s.next,s.next=r}i.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,i=i.baseState;var a=r=null,l=null,u=s;do{var d=u.lane;if((Pi&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,r=i):l=l.next=h,Ne.lanes|=d,Ri|=d}u=u.next}while(u!==null&&u!==s);l===null?r=i:l.next=a,Jt(i,e.memoizedState)||(ht=!0),e.memoizedState=i,e.baseState=r,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){o=t;do s=o.lane,Ne.lanes|=s,Ri|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dc(t){var e=Ft(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var r=o=o.next;do s=t(s,r.action),r=r.next;while(r!==o);Jt(s,e.memoizedState)||(ht=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Mx(){}function Lx(t,e){var n=Ne,i=Ft(),o=e(),s=!Jt(i.memoizedState,o);if(s&&(i.memoizedState=o,ht=!0),i=i.queue,Ld(jx.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Ve!==null&&Ve.memoizedState.tag&1){if(n.flags|=2048,Ys(9,zx.bind(null,n,i,o,e),void 0,null),He===null)throw Error(B(349));Pi&30||Dx(n,e,o)}return o}function Dx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zx(t,e,n,i){e.value=n,e.getSnapshot=i,Fx(e)&&Ox(t)}function jx(t,e,n){return n(function(){Fx(e)&&Ox(t)})}function Fx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jt(t,n)}catch{return!0}}function Ox(t){var e=Cn(t,1);e!==null&&Gt(e,t,1,-1)}function Pp(t){var e=tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:t},e.queue=t,t=t.dispatch=Ww.bind(null,Ne,t),[e.memoizedState,t]}function Ys(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Ux(){return Ft().memoizedState}function oa(t,e,n,i){var o=tn();Ne.flags|=t,o.memoizedState=Ys(1|e,n,void 0,i===void 0?null:i)}function ml(t,e,n,i){var o=Ft();i=i===void 0?null:i;var s=void 0;if(Fe!==null){var r=Fe.memoizedState;if(s=r.destroy,i!==null&&Pd(i,r.deps)){o.memoizedState=Ys(e,n,s,i);return}}Ne.flags|=t,o.memoizedState=Ys(1|e,n,s,i)}function Rp(t,e){return oa(8390656,8,t,e)}function Ld(t,e){return ml(2048,8,t,e)}function Bx(t,e){return ml(4,2,t,e)}function Vx(t,e){return ml(4,4,t,e)}function Hx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $x(t,e,n){return n=n!=null?n.concat([t]):null,ml(4,4,Hx.bind(null,e,t),n)}function Dd(){}function Gx(t,e){var n=Ft();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pd(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function qx(t,e){var n=Ft();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pd(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Wx(t,e,n){return Pi&21?(Jt(n,e)||(n=X0(),Ne.lanes|=n,Ri|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ht=!0),t.memoizedState=n)}function Gw(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var i=cc.transition;cc.transition={};try{t(!1),e()}finally{me=n,cc.transition=i}}function Jx(){return Ft().memoizedState}function qw(t,e,n){var i=Zn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Yx(t))Kx(e,n);else if(n=Ax(t,e,n,i),n!==null){var o=rt();Gt(n,t,i,o),Qx(n,e,i)}}function Ww(t,e,n){var i=Zn(t),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yx(t))Kx(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var r=e.lastRenderedState,a=s(r,n);if(o.hasEagerState=!0,o.eagerState=a,Jt(a,r)){var l=e.interleaved;l===null?(o.next=o,Ed(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}n=Ax(t,e,o,i),n!==null&&(o=rt(),Gt(n,t,i,o),Qx(n,e,i))}}function Yx(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Kx(t,e){Ss=Da=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qx(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,fd(t,n)}}var za={readContext:jt,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},Jw={readContext:jt,useCallback:function(t,e){return tn().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:Rp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,oa(4194308,4,Hx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return oa(4194308,4,t,e)},useInsertionEffect:function(t,e){return oa(4,2,t,e)},useMemo:function(t,e){var n=tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=tn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=qw.bind(null,Ne,t),[i.memoizedState,t]},useRef:function(t){var e=tn();return t={current:t},e.memoizedState=t},useState:Pp,useDebugValue:Dd,useDeferredValue:function(t){return tn().memoizedState=t},useTransition:function(){var t=Pp(!1),e=t[0];return t=Gw.bind(null,t[1]),tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ne,o=tn();if(ke){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),He===null)throw Error(B(349));Pi&30||Dx(i,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,Rp(jx.bind(null,i,s,t),[t]),i.flags|=2048,Ys(9,zx.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=tn(),e=He.identifierPrefix;if(ke){var n=yn,i=vn;n=(i&~(1<<32-$t(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ws++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$w++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Yw={readContext:jt,useCallback:Gx,useContext:jt,useEffect:Ld,useImperativeHandle:$x,useInsertionEffect:Bx,useLayoutEffect:Vx,useMemo:qx,useReducer:uc,useRef:Ux,useState:function(){return uc(Js)},useDebugValue:Dd,useDeferredValue:function(t){var e=Ft();return Wx(e,Fe.memoizedState,t)},useTransition:function(){var t=uc(Js)[0],e=Ft().memoizedState;return[t,e]},useMutableSource:Mx,useSyncExternalStore:Lx,useId:Jx,unstable_isNewReconciler:!1},Kw={readContext:jt,useCallback:Gx,useContext:jt,useEffect:Ld,useImperativeHandle:$x,useInsertionEffect:Bx,useLayoutEffect:Vx,useMemo:qx,useReducer:dc,useRef:Ux,useState:function(){return dc(Js)},useDebugValue:Dd,useDeferredValue:function(t){var e=Ft();return Fe===null?e.memoizedState=t:Wx(e,Fe.memoizedState,t)},useTransition:function(){var t=dc(Js)[0],e=Ft().memoizedState;return[t,e]},useMutableSource:Mx,useSyncExternalStore:Lx,useId:Jx,unstable_isNewReconciler:!1};function Bt(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uu(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gl={isMounted:function(t){return(t=t._reactInternals)?Fi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=rt(),o=Zn(t),s=bn(i,o);s.payload=e,n!=null&&(s.callback=n),e=Qn(t,s,o),e!==null&&(Gt(e,t,o,i),na(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=rt(),o=Zn(t),s=bn(i,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Qn(t,s,o),e!==null&&(Gt(e,t,o,i),na(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rt(),i=Zn(t),o=bn(n,i);o.tag=2,e!=null&&(o.callback=e),e=Qn(t,o,i),e!==null&&(Gt(e,t,i,n),na(e,t,i))}};function Mp(t,e,n,i,o,s,r){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,r):e.prototype&&e.prototype.isPureReactComponent?!Bs(n,i)||!Bs(o,s):!0}function Xx(t,e,n){var i=!1,o=ii,s=e.contextType;return typeof s=="object"&&s!==null?s=jt(s):(o=gt(e)?Ni:tt.current,i=e.contextTypes,s=(i=i!=null)?wo(t,o):ii),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gl,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function Lp(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&gl.enqueueReplaceState(e,e.state,null)}function du(t,e,n,i){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},Td(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=jt(s):(s=gt(e)?Ni:tt.current,o.context=wo(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(uu(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&gl.enqueueReplaceState(o,o.state,null),Ma(t,n,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Eo(t,e){try{var n="",i=e;do n+=Cb(i),i=i.return;while(i);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function fc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Qw=typeof WeakMap=="function"?WeakMap:Map;function Zx(t,e,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Fa||(Fa=!0,wu=i),fu(t,e)},n}function ev(t,e,n){n=bn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;n.payload=function(){return i(o)},n.callback=function(){fu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){fu(t,e),typeof i!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var r=e.stack;this.componentDidCatch(e.value,{componentStack:r!==null?r:""})}),n}function Dp(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Qw;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(o.add(n),t=dS.bind(null,t,e,n),e.then(t,t))}function zp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jp(t,e,n,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bn(-1,1),e.tag=2,Qn(n,e,1))),n.lanes|=1),t)}var Xw=An.ReactCurrentOwner,ht=!1;function ot(t,e,n,i){e.child=t===null?Nx(e,null,n,i):Co(e,t.child,n,i)}function Fp(t,e,n,i,o){n=n.render;var s=e.ref;return po(e,o),i=Rd(t,e,n,i,s,o),n=Md(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,kn(t,e,o)):(ke&&n&&_d(e),e.flags|=1,ot(t,e,i,o),e.child)}function Op(t,e,n,i,o){if(t===null){var s=n.type;return typeof s=="function"&&!Hd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,tv(t,e,s,i,o)):(t=la(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var r=s.memoizedProps;if(n=n.compare,n=n!==null?n:Bs,n(r,i)&&t.ref===e.ref)return kn(t,e,o)}return e.flags|=1,t=ei(s,i),t.ref=e.ref,t.return=e,e.child=t}function tv(t,e,n,i,o){if(t!==null){var s=t.memoizedProps;if(Bs(s,i)&&t.ref===e.ref)if(ht=!1,e.pendingProps=i=s,(t.lanes&o)!==0)t.flags&131072&&(ht=!0);else return e.lanes=t.lanes,kn(t,e,o)}return pu(t,e,n,i,o)}function nv(t,e,n){var i=e.pendingProps,o=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(oo,yt),yt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(oo,yt),yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,_e(oo,yt),yt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,_e(oo,yt),yt|=i;return ot(t,e,o,n),e.child}function iv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function pu(t,e,n,i,o){var s=gt(n)?Ni:tt.current;return s=wo(e,s),po(e,o),n=Rd(t,e,n,i,s,o),i=Md(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,kn(t,e,o)):(ke&&i&&_d(e),e.flags|=1,ot(t,e,n,o),e.child)}function Up(t,e,n,i,o){if(gt(n)){var s=!0;Ia(e)}else s=!1;if(po(e,o),e.stateNode===null)sa(t,e),Xx(e,n,i),du(e,n,i,o),i=!0;else if(t===null){var r=e.stateNode,a=e.memoizedProps;r.props=a;var l=r.context,u=n.contextType;typeof u=="object"&&u!==null?u=jt(u):(u=gt(n)?Ni:tt.current,u=wo(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof r.getSnapshotBeforeUpdate=="function";h||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==i||l!==u)&&Lp(e,r,i,u),jn=!1;var m=e.memoizedState;r.state=m,Ma(e,i,r,o),l=e.memoizedState,a!==i||m!==l||mt.current||jn?(typeof d=="function"&&(uu(e,n,d,i),l=e.memoizedState),(a=jn||Mp(e,n,a,i,m,l,u))?(h||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),r.props=i,r.state=l,r.context=u,i=a):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,Px(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Bt(e.type,a),r.props=u,h=e.pendingProps,m=r.context,l=n.contextType,typeof l=="object"&&l!==null?l=jt(l):(l=gt(n)?Ni:tt.current,l=wo(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==h||m!==l)&&Lp(e,r,i,l),jn=!1,m=e.memoizedState,r.state=m,Ma(e,i,r,o);var v=e.memoizedState;a!==h||m!==v||mt.current||jn?(typeof g=="function"&&(uu(e,n,g,i),v=e.memoizedState),(u=jn||Mp(e,n,u,i,m,v,l)||!1)?(d||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,v,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,v,l)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),r.props=i,r.state=v,r.context=l,i=u):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),i=!1)}return hu(t,e,n,i,s,o)}function hu(t,e,n,i,o,s){iv(t,e);var r=(e.flags&128)!==0;if(!i&&!r)return o&&kp(e,n,!1),kn(t,e,s);i=e.stateNode,Xw.current=e;var a=r&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&r?(e.child=Co(e,t.child,null,s),e.child=Co(e,null,a,s)):ot(t,e,a,s),e.memoizedState=i.state,o&&kp(e,n,!0),e.child}function ov(t){var e=t.stateNode;e.pendingContext?Cp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cp(t,e.context,!1),Id(t,e.containerInfo)}function Bp(t,e,n,i,o){return So(),wd(o),e.flags|=256,ot(t,e,n,i),e.child}var mu={dehydrated:null,treeContext:null,retryLane:0};function gu(t){return{baseLanes:t,cachePool:null,transitions:null}}function sv(t,e,n){var i=e.pendingProps,o=Te.current,s=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),_e(Te,o&1),t===null)return lu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(r=i.children,t=i.fallback,s?(i=e.mode,s=e.child,r={mode:"hidden",children:r},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=r):s=yl(r,i,0,null),t=ki(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=gu(n),e.memoizedState=mu,t):zd(e,r));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return Zw(t,e,r,i,a,o,n);if(s){s=i.fallback,r=e.mode,o=t.child,a=o.sibling;var l={mode:"hidden",children:i.children};return!(r&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ei(o,l),i.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=ei(a,s):(s=ki(s,r,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,r=t.child.memoizedState,r=r===null?gu(n):{baseLanes:r.baseLanes|n,cachePool:null,transitions:r.transitions},s.memoizedState=r,s.childLanes=t.childLanes&~n,e.memoizedState=mu,i}return s=t.child,t=s.sibling,i=ei(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function zd(t,e){return e=yl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tr(t,e,n,i){return i!==null&&wd(i),Co(e,t.child,null,n),t=zd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Zw(t,e,n,i,o,s,r){if(n)return e.flags&256?(e.flags&=-257,i=fc(Error(B(422))),Tr(t,e,r,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,o=e.mode,i=yl({mode:"visible",children:i.children},o,0,null),s=ki(s,o,r,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Co(e,t.child,null,r),e.child.memoizedState=gu(r),e.memoizedState=mu,s);if(!(e.mode&1))return Tr(t,e,r,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(B(419)),i=fc(s,i,void 0),Tr(t,e,r,i)}if(a=(r&t.childLanes)!==0,ht||a){if(i=He,i!==null){switch(r&-r){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|r)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Cn(t,o),Gt(i,t,o,-1))}return Vd(),i=fc(Error(B(421))),Tr(t,e,r,i)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=fS.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,wt=Kn(o.nextSibling),Ct=e,ke=!0,Ht=null,t!==null&&(At[Pt++]=vn,At[Pt++]=yn,At[Pt++]=Ai,vn=t.id,yn=t.overflow,Ai=e),e=zd(e,i.children),e.flags|=4096,e)}function Vp(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),cu(t.return,e,n)}function pc(t,e,n,i,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=o)}function rv(t,e,n){var i=e.pendingProps,o=i.revealOrder,s=i.tail;if(ot(t,e,i.children,n),i=Te.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vp(t,n,e);else if(t.tag===19)Vp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(_e(Te,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&La(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),pc(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&La(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}pc(e,!0,n,null,s);break;case"together":pc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ri|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=ei(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ei(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eS(t,e,n){switch(e.tag){case 3:ov(e),So();break;case 5:Rx(e);break;case 1:gt(e.type)&&Ia(e);break;case 4:Id(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;_e(Pa,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(_e(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?sv(t,e,n):(_e(Te,Te.current&1),t=kn(t,e,n),t!==null?t.sibling:null);_e(Te,Te.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return rv(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),_e(Te,Te.current),i)break;return null;case 22:case 23:return e.lanes=0,nv(t,e,n)}return kn(t,e,n)}var av,xu,lv,cv;av=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xu=function(){};lv=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,wi(cn.current);var s=null;switch(n){case"input":o=Oc(t,o),i=Oc(t,i),s=[];break;case"select":o=Ae({},o,{value:void 0}),i=Ae({},i,{value:void 0}),s=[];break;case"textarea":o=Vc(t,o),i=Vc(t,i),s=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Ea)}$c(n,i);var r;n=null;for(u in o)if(!i.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var a=o[u];for(r in a)a.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ls.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=o!=null?o[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(r in a)!a.hasOwnProperty(r)||l&&l.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in l)l.hasOwnProperty(r)&&a[r]!==l[r]&&(n||(n={}),n[r]=l[r])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ls.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&we("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};cv=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ko(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Qe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function tS(t,e,n){var i=e.pendingProps;switch(bd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(e),null;case 1:return gt(e.type)&&Ta(),Qe(e),null;case 3:return i=e.stateNode,ko(),Se(mt),Se(tt),Ad(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(kr(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ht!==null&&(ku(Ht),Ht=null))),xu(t,e),Qe(e),null;case 5:Nd(e);var o=wi(qs.current);if(n=e.type,t!==null&&e.stateNode!=null)lv(t,e,n,i,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(B(166));return Qe(e),null}if(t=wi(cn.current),kr(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[on]=e,i[$s]=s,t=(e.mode&1)!==0,n){case"dialog":we("cancel",i),we("close",i);break;case"iframe":case"object":case"embed":we("load",i);break;case"video":case"audio":for(o=0;o<fs.length;o++)we(fs[o],i);break;case"source":we("error",i);break;case"img":case"image":case"link":we("error",i),we("load",i);break;case"details":we("toggle",i);break;case"input":Qf(i,s),we("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},we("invalid",i);break;case"textarea":Zf(i,s),we("invalid",i)}$c(n,s),o=null;for(var r in s)if(s.hasOwnProperty(r)){var a=s[r];r==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Cr(i.textContent,a,t),o=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Cr(i.textContent,a,t),o=["children",""+a]):Ls.hasOwnProperty(r)&&a!=null&&r==="onScroll"&&we("scroll",i)}switch(n){case"input":gr(i),Xf(i,s,!0);break;case"textarea":gr(i),ep(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Ea)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{r=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=j0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=r.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=r.createElement(n,{is:i.is}):(t=r.createElement(n),n==="select"&&(r=t,i.multiple?r.multiple=!0:i.size&&(r.size=i.size))):t=r.createElementNS(t,n),t[on]=e,t[$s]=i,av(t,e,!1,!1),e.stateNode=t;e:{switch(r=Gc(n,i),n){case"dialog":we("cancel",t),we("close",t),o=i;break;case"iframe":case"object":case"embed":we("load",t),o=i;break;case"video":case"audio":for(o=0;o<fs.length;o++)we(fs[o],t);o=i;break;case"source":we("error",t),o=i;break;case"img":case"image":case"link":we("error",t),we("load",t),o=i;break;case"details":we("toggle",t),o=i;break;case"input":Qf(t,i),o=Oc(t,i),we("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=Ae({},i,{value:void 0}),we("invalid",t);break;case"textarea":Zf(t,i),o=Vc(t,i),we("invalid",t);break;default:o=i}$c(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?U0(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&F0(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ds(t,l):typeof l=="number"&&Ds(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ls.hasOwnProperty(s)?l!=null&&s==="onScroll"&&we("scroll",t):l!=null&&rd(t,s,l,r))}switch(n){case"input":gr(t),Xf(t,i,!1);break;case"textarea":gr(t),ep(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ni(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?lo(t,!!i.multiple,s,!1):i.defaultValue!=null&&lo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Ea)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qe(e),null;case 6:if(t&&e.stateNode!=null)cv(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(B(166));if(n=wi(qs.current),wi(cn.current),kr(e)){if(i=e.stateNode,n=e.memoizedProps,i[on]=e,(s=i.nodeValue!==n)&&(t=Ct,t!==null))switch(t.tag){case 3:Cr(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cr(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[on]=e,e.stateNode=i}return Qe(e),null;case 13:if(Se(Te),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&wt!==null&&e.mode&1&&!(e.flags&128))Tx(),So(),e.flags|=98560,s=!1;else if(s=kr(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[on]=e}else So(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qe(e),s=!1}else Ht!==null&&(ku(Ht),Ht=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Oe===0&&(Oe=3):Vd())),e.updateQueue!==null&&(e.flags|=4),Qe(e),null);case 4:return ko(),xu(t,e),t===null&&Vs(e.stateNode.containerInfo),Qe(e),null;case 10:return kd(e.type._context),Qe(e),null;case 17:return gt(e.type)&&Ta(),Qe(e),null;case 19:if(Se(Te),s=e.memoizedState,s===null)return Qe(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)Ko(s,!1);else{if(Oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=La(t),r!==null){for(e.flags|=128,Ko(s,!1),i=r.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,r=s.alternate,r===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=r.childLanes,s.lanes=r.lanes,s.child=r.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=r.memoizedProps,s.memoizedState=r.memoizedState,s.updateQueue=r.updateQueue,s.type=r.type,t=r.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Te,Te.current&1|2),e.child}t=t.sibling}s.tail!==null&&Le()>To&&(e.flags|=128,i=!0,Ko(s,!1),e.lanes=4194304)}else{if(!i)if(t=La(r),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ko(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!ke)return Qe(e),null}else 2*Le()-s.renderingStartTime>To&&n!==1073741824&&(e.flags|=128,i=!0,Ko(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(n=s.last,n!==null?n.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Le(),e.sibling=null,n=Te.current,_e(Te,i?n&1|2:n&1),e):(Qe(e),null);case 22:case 23:return Bd(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?yt&1073741824&&(Qe(e),e.subtreeFlags&6&&(e.flags|=8192)):Qe(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function nS(t,e){switch(bd(e),e.tag){case 1:return gt(e.type)&&Ta(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ko(),Se(mt),Se(tt),Ad(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Nd(e),null;case 13:if(Se(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));So()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(Te),null;case 4:return ko(),null;case 10:return kd(e.type._context),null;case 22:case 23:return Bd(),null;case 24:return null;default:return null}}var Ir=!1,Ze=!1,iS=typeof WeakSet=="function"?WeakSet:Set,G=null;function io(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Pe(t,e,i)}else n.current=null}function vu(t,e,n){try{n()}catch(i){Pe(t,e,i)}}var Hp=!1;function oS(t,e){if(tu=Sa,t=hx(),yd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var r=0,a=-1,l=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var g;h!==n||o!==0&&h.nodeType!==3||(a=r+o),h!==s||i!==0&&h.nodeType!==3||(l=r+i),h.nodeType===3&&(r+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===t)break t;if(m===n&&++u===o&&(a=r),m===s&&++d===i&&(l=r),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(nu={focusedElem:t,selectionRange:n},Sa=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,x=v.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?_:Bt(e.type,_),x);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(C){Pe(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return v=Hp,Hp=!1,v}function Cs(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&vu(e,n,s)}o=o.next}while(o!==i)}}function xl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function yu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function uv(t){var e=t.alternate;e!==null&&(t.alternate=null,uv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[on],delete e[$s],delete e[su],delete e[Uw],delete e[Bw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dv(t){return t.tag===5||t.tag===3||t.tag===4}function $p(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _u(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ea));else if(i!==4&&(t=t.child,t!==null))for(_u(t,e,n),t=t.sibling;t!==null;)_u(t,e,n),t=t.sibling}function bu(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(bu(t,e,n),t=t.sibling;t!==null;)bu(t,e,n),t=t.sibling}var Ge=null,Vt=!1;function Mn(t,e,n){for(n=n.child;n!==null;)fv(t,e,n),n=n.sibling}function fv(t,e,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(cl,n)}catch{}switch(n.tag){case 5:Ze||io(n,e);case 6:var i=Ge,o=Vt;Ge=null,Mn(t,e,n),Ge=i,Vt=o,Ge!==null&&(Vt?(t=Ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(Vt?(t=Ge,n=n.stateNode,t.nodeType===8?rc(t.parentNode,n):t.nodeType===1&&rc(t,n),Os(t)):rc(Ge,n.stateNode));break;case 4:i=Ge,o=Vt,Ge=n.stateNode.containerInfo,Vt=!0,Mn(t,e,n),Ge=i,Vt=o;break;case 0:case 11:case 14:case 15:if(!Ze&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var s=o,r=s.destroy;s=s.tag,r!==void 0&&(s&2||s&4)&&vu(n,e,r),o=o.next}while(o!==i)}Mn(t,e,n);break;case 1:if(!Ze&&(io(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Pe(n,e,a)}Mn(t,e,n);break;case 21:Mn(t,e,n);break;case 22:n.mode&1?(Ze=(i=Ze)||n.memoizedState!==null,Mn(t,e,n),Ze=i):Mn(t,e,n);break;default:Mn(t,e,n)}}function Gp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iS),e.forEach(function(i){var o=pS.bind(null,t,i);n.has(i)||(n.add(i),i.then(o,o))})}}function Ut(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var s=t,r=e,a=r;e:for(;a!==null;){switch(a.tag){case 5:Ge=a.stateNode,Vt=!1;break e;case 3:Ge=a.stateNode.containerInfo,Vt=!0;break e;case 4:Ge=a.stateNode.containerInfo,Vt=!0;break e}a=a.return}if(Ge===null)throw Error(B(160));fv(s,r,o),Ge=null,Vt=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(u){Pe(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pv(e,t),e=e.sibling}function pv(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ut(e,t),Zt(t),i&4){try{Cs(3,t,t.return),xl(3,t)}catch(_){Pe(t,t.return,_)}try{Cs(5,t,t.return)}catch(_){Pe(t,t.return,_)}}break;case 1:Ut(e,t),Zt(t),i&512&&n!==null&&io(n,n.return);break;case 5:if(Ut(e,t),Zt(t),i&512&&n!==null&&io(n,n.return),t.flags&32){var o=t.stateNode;try{Ds(o,"")}catch(_){Pe(t,t.return,_)}}if(i&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,r=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&D0(o,s),Gc(a,r);var u=Gc(a,s);for(r=0;r<l.length;r+=2){var d=l[r],h=l[r+1];d==="style"?U0(o,h):d==="dangerouslySetInnerHTML"?F0(o,h):d==="children"?Ds(o,h):rd(o,d,h,u)}switch(a){case"input":Uc(o,s);break;case"textarea":z0(o,s);break;case"select":var m=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?lo(o,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?lo(o,!!s.multiple,s.defaultValue,!0):lo(o,!!s.multiple,s.multiple?[]:"",!1))}o[$s]=s}catch(_){Pe(t,t.return,_)}}break;case 6:if(Ut(e,t),Zt(t),i&4){if(t.stateNode===null)throw Error(B(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(_){Pe(t,t.return,_)}}break;case 3:if(Ut(e,t),Zt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Os(e.containerInfo)}catch(_){Pe(t,t.return,_)}break;case 4:Ut(e,t),Zt(t);break;case 13:Ut(e,t),Zt(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Od=Le())),i&4&&Gp(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ze=(u=Ze)||d,Ut(e,t),Ze=u):Ut(e,t),Zt(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(G=t,d=t.child;d!==null;){for(h=G=d;G!==null;){switch(m=G,g=m.child,m.tag){case 0:case 11:case 14:case 15:Cs(4,m,m.return);break;case 1:io(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){i=m,n=m.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){Pe(i,n,_)}}break;case 5:io(m,m.return);break;case 22:if(m.memoizedState!==null){Wp(h);continue}}g!==null?(g.return=m,G=g):Wp(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{o=h.stateNode,u?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,r=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=O0("display",r))}catch(_){Pe(t,t.return,_)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(_){Pe(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ut(e,t),Zt(t),i&4&&Gp(t);break;case 21:break;default:Ut(e,t),Zt(t)}}function Zt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dv(n)){var i=n;break e}n=n.return}throw Error(B(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Ds(o,""),i.flags&=-33);var s=$p(t);bu(t,s,o);break;case 3:case 4:var r=i.stateNode.containerInfo,a=$p(t);_u(t,a,r);break;default:throw Error(B(161))}}catch(l){Pe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sS(t,e,n){G=t,hv(t)}function hv(t,e,n){for(var i=(t.mode&1)!==0;G!==null;){var o=G,s=o.child;if(o.tag===22&&i){var r=o.memoizedState!==null||Ir;if(!r){var a=o.alternate,l=a!==null&&a.memoizedState!==null||Ze;a=Ir;var u=Ze;if(Ir=r,(Ze=l)&&!u)for(G=o;G!==null;)r=G,l=r.child,r.tag===22&&r.memoizedState!==null?Jp(o):l!==null?(l.return=r,G=l):Jp(o);for(;s!==null;)G=s,hv(s),s=s.sibling;G=o,Ir=a,Ze=u}qp(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,G=s):qp(t)}}function qp(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ze||xl(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ze)if(n===null)i.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Bt(e.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ap(e,s,i);break;case 3:var r=e.updateQueue;if(r!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ap(e,r,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Os(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Ze||e.flags&512&&yu(e)}catch(m){Pe(e,e.return,m)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function Wp(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Jp(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xl(4,e)}catch(l){Pe(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(l){Pe(e,o,l)}}var s=e.return;try{yu(e)}catch(l){Pe(e,s,l)}break;case 5:var r=e.return;try{yu(e)}catch(l){Pe(e,r,l)}}}catch(l){Pe(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var rS=Math.ceil,ja=An.ReactCurrentDispatcher,jd=An.ReactCurrentOwner,Dt=An.ReactCurrentBatchConfig,ce=0,He=null,De=null,qe=0,yt=0,oo=ri(0),Oe=0,Ks=null,Ri=0,vl=0,Fd=0,ks=null,ft=null,Od=0,To=1/0,mn=null,Fa=!1,wu=null,Xn=null,Nr=!1,Bn=null,Oa=0,Es=0,Su=null,ra=-1,aa=0;function rt(){return ce&6?Le():ra!==-1?ra:ra=Le()}function Zn(t){return t.mode&1?ce&2&&qe!==0?qe&-qe:Hw.transition!==null?(aa===0&&(aa=X0()),aa):(t=me,t!==0||(t=window.event,t=t===void 0?16:sx(t.type)),t):1}function Gt(t,e,n,i){if(50<Es)throw Es=0,Su=null,Error(B(185));rr(t,n,i),(!(ce&2)||t!==He)&&(t===He&&(!(ce&2)&&(vl|=n),Oe===4&&On(t,qe)),xt(t,i),n===1&&ce===0&&!(e.mode&1)&&(To=Le()+500,hl&&ai()))}function xt(t,e){var n=t.callbackNode;Hb(t,e);var i=wa(t,t===He?qe:0);if(i===0)n!==null&&ip(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&ip(n),e===1)t.tag===0?Vw(Yp.bind(null,t)):Cx(Yp.bind(null,t)),Fw(function(){!(ce&6)&&ai()}),n=null;else{switch(Z0(i)){case 1:n=dd;break;case 4:n=K0;break;case 16:n=ba;break;case 536870912:n=Q0;break;default:n=ba}n=wv(n,mv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mv(t,e){if(ra=-1,aa=0,ce&6)throw Error(B(327));var n=t.callbackNode;if(ho()&&t.callbackNode!==n)return null;var i=wa(t,t===He?qe:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ua(t,i);else{e=i;var o=ce;ce|=2;var s=xv();(He!==t||qe!==e)&&(mn=null,To=Le()+500,Ci(t,e));do try{cS();break}catch(a){gv(t,a)}while(!0);Cd(),ja.current=s,ce=o,De!==null?e=0:(He=null,qe=0,e=Oe)}if(e!==0){if(e===2&&(o=Kc(t),o!==0&&(i=o,e=Cu(t,o))),e===1)throw n=Ks,Ci(t,0),On(t,i),xt(t,Le()),n;if(e===6)On(t,i);else{if(o=t.current.alternate,!(i&30)&&!aS(o)&&(e=Ua(t,i),e===2&&(s=Kc(t),s!==0&&(i=s,e=Cu(t,s))),e===1))throw n=Ks,Ci(t,0),On(t,i),xt(t,Le()),n;switch(t.finishedWork=o,t.finishedLanes=i,e){case 0:case 1:throw Error(B(345));case 2:gi(t,ft,mn);break;case 3:if(On(t,i),(i&130023424)===i&&(e=Od+500-Le(),10<e)){if(wa(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){rt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=ou(gi.bind(null,t,ft,mn),e);break}gi(t,ft,mn);break;case 4:if(On(t,i),(i&4194240)===i)break;for(e=t.eventTimes,o=-1;0<i;){var r=31-$t(i);s=1<<r,r=e[r],r>o&&(o=r),i&=~s}if(i=o,i=Le()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*rS(i/1960))-i,10<i){t.timeoutHandle=ou(gi.bind(null,t,ft,mn),i);break}gi(t,ft,mn);break;case 5:gi(t,ft,mn);break;default:throw Error(B(329))}}}return xt(t,Le()),t.callbackNode===n?mv.bind(null,t):null}function Cu(t,e){var n=ks;return t.current.memoizedState.isDehydrated&&(Ci(t,e).flags|=256),t=Ua(t,e),t!==2&&(e=ft,ft=n,e!==null&&ku(e)),t}function ku(t){ft===null?ft=t:ft.push.apply(ft,t)}function aS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],s=o.getSnapshot;o=o.value;try{if(!Jt(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function On(t,e){for(e&=~Fd,e&=~vl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$t(e),i=1<<n;t[n]=-1,e&=~i}}function Yp(t){if(ce&6)throw Error(B(327));ho();var e=wa(t,0);if(!(e&1))return xt(t,Le()),null;var n=Ua(t,e);if(t.tag!==0&&n===2){var i=Kc(t);i!==0&&(e=i,n=Cu(t,i))}if(n===1)throw n=Ks,Ci(t,0),On(t,e),xt(t,Le()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gi(t,ft,mn),xt(t,Le()),null}function Ud(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(To=Le()+500,hl&&ai())}}function Mi(t){Bn!==null&&Bn.tag===0&&!(ce&6)&&ho();var e=ce;ce|=1;var n=Dt.transition,i=me;try{if(Dt.transition=null,me=1,t)return t()}finally{me=i,Dt.transition=n,ce=e,!(ce&6)&&ai()}}function Bd(){yt=oo.current,Se(oo)}function Ci(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jw(n)),De!==null)for(n=De.return;n!==null;){var i=n;switch(bd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ta();break;case 3:ko(),Se(mt),Se(tt),Ad();break;case 5:Nd(i);break;case 4:ko();break;case 13:Se(Te);break;case 19:Se(Te);break;case 10:kd(i.type._context);break;case 22:case 23:Bd()}n=n.return}if(He=t,De=t=ei(t.current,null),qe=yt=e,Oe=0,Ks=null,Fd=vl=Ri=0,ft=ks=null,bi!==null){for(e=0;e<bi.length;e++)if(n=bi[e],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,s=n.pending;if(s!==null){var r=s.next;s.next=o,i.next=r}n.pending=i}bi=null}return t}function gv(t,e){do{var n=De;try{if(Cd(),ia.current=za,Da){for(var i=Ne.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Da=!1}if(Pi=0,Ve=Fe=Ne=null,Ss=!1,Ws=0,jd.current=null,n===null||n.return===null){Oe=1,Ks=e,De=null;break}e:{var s=t,r=n.return,a=n,l=e;if(e=qe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=zp(r);if(g!==null){g.flags&=-257,jp(g,r,a,s,e),g.mode&1&&Dp(s,u,e),e=g,l=u;var v=e.updateQueue;if(v===null){var _=new Set;_.add(l),e.updateQueue=_}else v.add(l);break e}else{if(!(e&1)){Dp(s,u,e),Vd();break e}l=Error(B(426))}}else if(ke&&a.mode&1){var x=zp(r);if(x!==null){!(x.flags&65536)&&(x.flags|=256),jp(x,r,a,s,e),wd(Eo(l,a));break e}}s=l=Eo(l,a),Oe!==4&&(Oe=2),ks===null?ks=[s]:ks.push(s),s=r;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Zx(s,l,e);Np(s,y);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Xn===null||!Xn.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=ev(s,a,e);Np(s,C);break e}}s=s.return}while(s!==null)}yv(n)}catch(E){e=E,De===n&&n!==null&&(De=n=n.return);continue}break}while(!0)}function xv(){var t=ja.current;return ja.current=za,t===null?za:t}function Vd(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),He===null||!(Ri&268435455)&&!(vl&268435455)||On(He,qe)}function Ua(t,e){var n=ce;ce|=2;var i=xv();(He!==t||qe!==e)&&(mn=null,Ci(t,e));do try{lS();break}catch(o){gv(t,o)}while(!0);if(Cd(),ce=n,ja.current=i,De!==null)throw Error(B(261));return He=null,qe=0,Oe}function lS(){for(;De!==null;)vv(De)}function cS(){for(;De!==null&&!Lb();)vv(De)}function vv(t){var e=bv(t.alternate,t,yt);t.memoizedProps=t.pendingProps,e===null?yv(t):De=e,jd.current=null}function yv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nS(n,e),n!==null){n.flags&=32767,De=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oe=6,De=null;return}}else if(n=tS(n,e,yt),n!==null){De=n;return}if(e=e.sibling,e!==null){De=e;return}De=e=t}while(e!==null);Oe===0&&(Oe=5)}function gi(t,e,n){var i=me,o=Dt.transition;try{Dt.transition=null,me=1,uS(t,e,n,i)}finally{Dt.transition=o,me=i}return null}function uS(t,e,n,i){do ho();while(Bn!==null);if(ce&6)throw Error(B(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if($b(t,s),t===He&&(De=He=null,qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nr||(Nr=!0,wv(ba,function(){return ho(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dt.transition,Dt.transition=null;var r=me;me=1;var a=ce;ce|=4,jd.current=null,oS(t,n),pv(n,t),Aw(nu),Sa=!!tu,nu=tu=null,t.current=n,sS(n),Db(),ce=a,me=r,Dt.transition=s}else t.current=n;if(Nr&&(Nr=!1,Bn=t,Oa=o),s=t.pendingLanes,s===0&&(Xn=null),Fb(n.stateNode),xt(t,Le()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(Fa)throw Fa=!1,t=wu,wu=null,t;return Oa&1&&t.tag!==0&&ho(),s=t.pendingLanes,s&1?t===Su?Es++:(Es=0,Su=t):Es=0,ai(),null}function ho(){if(Bn!==null){var t=Z0(Oa),e=Dt.transition,n=me;try{if(Dt.transition=null,me=16>t?16:t,Bn===null)var i=!1;else{if(t=Bn,Bn=null,Oa=0,ce&6)throw Error(B(331));var o=ce;for(ce|=4,G=t.current;G!==null;){var s=G,r=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(G=u;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:Cs(8,d,s)}var h=d.child;if(h!==null)h.return=d,G=h;else for(;G!==null;){d=G;var m=d.sibling,g=d.return;if(uv(d),d===u){G=null;break}if(m!==null){m.return=g,G=m;break}G=g}}}var v=s.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var x=_.sibling;_.sibling=null,_=x}while(_!==null)}}G=s}}if(s.subtreeFlags&2064&&r!==null)r.return=s,G=r;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cs(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,G=y;break e}G=s.return}}var b=t.current;for(G=b;G!==null;){r=G;var w=r.child;if(r.subtreeFlags&2064&&w!==null)w.return=r,G=w;else e:for(r=b;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xl(9,a)}}catch(E){Pe(a,a.return,E)}if(a===r){G=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,G=C;break e}G=a.return}}if(ce=o,ai(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(cl,t)}catch{}i=!0}return i}finally{me=n,Dt.transition=e}}return!1}function Kp(t,e,n){e=Eo(n,e),e=Zx(t,e,1),t=Qn(t,e,1),e=rt(),t!==null&&(rr(t,1,e),xt(t,e))}function Pe(t,e,n){if(t.tag===3)Kp(t,t,n);else for(;e!==null;){if(e.tag===3){Kp(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Xn===null||!Xn.has(i))){t=Eo(n,t),t=ev(e,t,1),e=Qn(e,t,1),t=rt(),e!==null&&(rr(e,1,t),xt(e,t));break}}e=e.return}}function dS(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=rt(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(qe&n)===n&&(Oe===4||Oe===3&&(qe&130023424)===qe&&500>Le()-Od?Ci(t,0):Fd|=n),xt(t,e)}function _v(t,e){e===0&&(t.mode&1?(e=yr,yr<<=1,!(yr&130023424)&&(yr=4194304)):e=1);var n=rt();t=Cn(t,e),t!==null&&(rr(t,e,n),xt(t,n))}function fS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_v(t,n)}function pS(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(B(314))}i!==null&&i.delete(e),_v(t,n)}var bv;bv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mt.current)ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ht=!1,eS(t,e,n);ht=!!(t.flags&131072)}else ht=!1,ke&&e.flags&1048576&&kx(e,Aa,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;sa(t,e),t=e.pendingProps;var o=wo(e,tt.current);po(e,n),o=Rd(null,e,i,t,o,n);var s=Md();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gt(i)?(s=!0,Ia(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Td(e),o.updater=gl,e.stateNode=o,o._reactInternals=e,du(e,i,t,n),e=hu(null,e,i,!0,s,n)):(e.tag=0,ke&&s&&_d(e),ot(null,e,o,n),e=e.child),e;case 16:i=e.elementType;e:{switch(sa(t,e),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=mS(i),t=Bt(i,t),o){case 0:e=pu(null,e,i,t,n);break e;case 1:e=Up(null,e,i,t,n);break e;case 11:e=Fp(null,e,i,t,n);break e;case 14:e=Op(null,e,i,Bt(i.type,t),n);break e}throw Error(B(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Bt(i,o),pu(t,e,i,o,n);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Bt(i,o),Up(t,e,i,o,n);case 3:e:{if(ov(e),t===null)throw Error(B(387));i=e.pendingProps,s=e.memoizedState,o=s.element,Px(t,e),Ma(e,i,null,n);var r=e.memoizedState;if(i=r.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:r.cache,pendingSuspenseBoundaries:r.pendingSuspenseBoundaries,transitions:r.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Eo(Error(B(423)),e),e=Bp(t,e,i,n,o);break e}else if(i!==o){o=Eo(Error(B(424)),e),e=Bp(t,e,i,n,o);break e}else for(wt=Kn(e.stateNode.containerInfo.firstChild),Ct=e,ke=!0,Ht=null,n=Nx(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(So(),i===o){e=kn(t,e,n);break e}ot(t,e,i,n)}e=e.child}return e;case 5:return Rx(e),t===null&&lu(e),i=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,r=o.children,iu(i,o)?r=null:s!==null&&iu(i,s)&&(e.flags|=32),iv(t,e),ot(t,e,r,n),e.child;case 6:return t===null&&lu(e),null;case 13:return sv(t,e,n);case 4:return Id(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Co(e,null,i,n):ot(t,e,i,n),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Bt(i,o),Fp(t,e,i,o,n);case 7:return ot(t,e,e.pendingProps,n),e.child;case 8:return ot(t,e,e.pendingProps.children,n),e.child;case 12:return ot(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,s=e.memoizedProps,r=o.value,_e(Pa,i._currentValue),i._currentValue=r,s!==null)if(Jt(s.value,r)){if(s.children===o.children&&!mt.current){e=kn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){r=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=bn(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),cu(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)r=s.type===e.type?null:s.child;else if(s.tag===18){if(r=s.return,r===null)throw Error(B(341));r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),cu(r,n,e),r=s.sibling}else r=s.child;if(r!==null)r.return=s;else for(r=s;r!==null;){if(r===e){r=null;break}if(s=r.sibling,s!==null){s.return=r.return,r=s;break}r=r.return}s=r}ot(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,po(e,n),o=jt(o),i=i(o),e.flags|=1,ot(t,e,i,n),e.child;case 14:return i=e.type,o=Bt(i,e.pendingProps),o=Bt(i.type,o),Op(t,e,i,o,n);case 15:return tv(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Bt(i,o),sa(t,e),e.tag=1,gt(i)?(t=!0,Ia(e)):t=!1,po(e,n),Xx(e,i,o),du(e,i,o,n),hu(null,e,i,!0,t,n);case 19:return rv(t,e,n);case 22:return nv(t,e,n)}throw Error(B(156,e.tag))};function wv(t,e){return Y0(t,e)}function hS(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,e,n,i){return new hS(t,e,n,i)}function Hd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mS(t){if(typeof t=="function")return Hd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ld)return 11;if(t===cd)return 14}return 2}function ei(t,e){var n=t.alternate;return n===null?(n=Rt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function la(t,e,n,i,o,s){var r=2;if(i=t,typeof t=="function")Hd(t)&&(r=1);else if(typeof t=="string")r=5;else e:switch(t){case Ji:return ki(n.children,o,s,e);case ad:r=8,o|=8;break;case Dc:return t=Rt(12,n,e,o|2),t.elementType=Dc,t.lanes=s,t;case zc:return t=Rt(13,n,e,o),t.elementType=zc,t.lanes=s,t;case jc:return t=Rt(19,n,e,o),t.elementType=jc,t.lanes=s,t;case R0:return yl(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case A0:r=10;break e;case P0:r=9;break e;case ld:r=11;break e;case cd:r=14;break e;case zn:r=16,i=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Rt(r,n,e,o),e.elementType=t,e.type=i,e.lanes=s,e}function ki(t,e,n,i){return t=Rt(7,t,i,e),t.lanes=n,t}function yl(t,e,n,i){return t=Rt(22,t,i,e),t.elementType=R0,t.lanes=n,t.stateNode={isHidden:!1},t}function hc(t,e,n){return t=Rt(6,t,null,e),t.lanes=n,t}function mc(t,e,n){return e=Rt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gS(t,e,n,i,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yl(0),this.expirationTimes=Yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function $d(t,e,n,i,o,s,r,a,l){return t=new gS(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Rt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Td(s),t}function xS(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wi,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Sv(t){if(!t)return ii;t=t._reactInternals;e:{if(Fi(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(gt(n))return Sx(t,n,e)}return e}function Cv(t,e,n,i,o,s,r,a,l){return t=$d(n,i,!0,t,o,s,r,a,l),t.context=Sv(null),n=t.current,i=rt(),o=Zn(n),s=bn(i,o),s.callback=e??null,Qn(n,s,o),t.current.lanes=o,rr(t,o,i),xt(t,i),t}function _l(t,e,n,i){var o=e.current,s=rt(),r=Zn(o);return n=Sv(n),e.context===null?e.context=n:e.pendingContext=n,e=bn(s,r),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Qn(o,e,r),t!==null&&(Gt(t,o,r,s),na(t,o,r)),r}function Ba(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gd(t,e){Qp(t,e),(t=t.alternate)&&Qp(t,e)}function vS(){return null}var kv=typeof reportError=="function"?reportError:function(t){console.error(t)};function qd(t){this._internalRoot=t}bl.prototype.render=qd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));_l(t,e,null,null)};bl.prototype.unmount=qd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Mi(function(){_l(null,t,null,null)}),e[Sn]=null}};function bl(t){this._internalRoot=t}bl.prototype.unstable_scheduleHydration=function(t){if(t){var e=nx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fn.length&&e!==0&&e<Fn[n].priority;n++);Fn.splice(n,0,t),n===0&&ox(t)}};function Wd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xp(){}function yS(t,e,n,i,o){if(o){if(typeof i=="function"){var s=i;i=function(){var u=Ba(r);s.call(u)}}var r=Cv(e,i,t,0,null,!1,!1,"",Xp);return t._reactRootContainer=r,t[Sn]=r.current,Vs(t.nodeType===8?t.parentNode:t),Mi(),r}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var a=i;i=function(){var u=Ba(l);a.call(u)}}var l=$d(t,0,!1,null,null,!1,!1,"",Xp);return t._reactRootContainer=l,t[Sn]=l.current,Vs(t.nodeType===8?t.parentNode:t),Mi(function(){_l(e,l,n,i)}),l}function Sl(t,e,n,i,o){var s=n._reactRootContainer;if(s){var r=s;if(typeof o=="function"){var a=o;o=function(){var l=Ba(r);a.call(l)}}_l(e,r,t,o)}else r=yS(n,e,t,o,i);return Ba(r)}ex=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ds(e.pendingLanes);n!==0&&(fd(e,n|1),xt(e,Le()),!(ce&6)&&(To=Le()+500,ai()))}break;case 13:Mi(function(){var i=Cn(t,1);if(i!==null){var o=rt();Gt(i,t,1,o)}}),Gd(t,1)}};pd=function(t){if(t.tag===13){var e=Cn(t,134217728);if(e!==null){var n=rt();Gt(e,t,134217728,n)}Gd(t,134217728)}};tx=function(t){if(t.tag===13){var e=Zn(t),n=Cn(t,e);if(n!==null){var i=rt();Gt(n,t,e,i)}Gd(t,e)}};nx=function(){return me};ix=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};Wc=function(t,e,n){switch(e){case"input":if(Uc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=pl(i);if(!o)throw Error(B(90));L0(i),Uc(i,o)}}}break;case"textarea":z0(t,n);break;case"select":e=n.value,e!=null&&lo(t,!!n.multiple,e,!1)}};H0=Ud;$0=Mi;var _S={usingClientEntryPoint:!1,Events:[lr,Xi,pl,B0,V0,Ud]},Qo={findFiberByHostInstance:_i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bS={bundleType:Qo.bundleType,version:Qo.version,rendererPackageName:Qo.rendererPackageName,rendererConfig:Qo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:An.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=W0(t),t===null?null:t.stateNode},findFiberByHostInstance:Qo.findFiberByHostInstance||vS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ar=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ar.isDisabled&&Ar.supportsFiber)try{cl=Ar.inject(bS),ln=Ar}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_S;Tt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wd(e))throw Error(B(200));return xS(t,e,null,n)};Tt.createRoot=function(t,e){if(!Wd(t))throw Error(B(299));var n=!1,i="",o=kv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=$d(t,1,!1,null,null,n,!1,i,o),t[Sn]=e.current,Vs(t.nodeType===8?t.parentNode:t),new qd(e)};Tt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=W0(e),t=t===null?null:t.stateNode,t};Tt.flushSync=function(t){return Mi(t)};Tt.hydrate=function(t,e,n){if(!wl(e))throw Error(B(200));return Sl(null,t,e,!0,n)};Tt.hydrateRoot=function(t,e,n){if(!Wd(t))throw Error(B(405));var i=n!=null&&n.hydratedSources||null,o=!1,s="",r=kv;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(r=n.onRecoverableError)),e=Cv(e,null,t,1,n??null,o,!1,s,r),t[Sn]=e.current,Vs(t),i)for(t=0;t<i.length;t++)n=i[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new bl(e)};Tt.render=function(t,e,n){if(!wl(e))throw Error(B(200));return Sl(null,t,e,!1,n)};Tt.unmountComponentAtNode=function(t){if(!wl(t))throw Error(B(40));return t._reactRootContainer?(Mi(function(){Sl(null,null,t,!1,function(){t._reactRootContainer=null,t[Sn]=null})}),!0):!1};Tt.unstable_batchedUpdates=Ud;Tt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!wl(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Sl(t,e,n,!1,i)};Tt.version="18.3.1-next-f1338f8080-20240426";function Ev(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ev)}catch(t){console.error(t)}}Ev(),E0.exports=Tt;var wS=E0.exports,Zp=wS;Mc.createRoot=Zp.createRoot,Mc.hydrateRoot=Zp.hydrateRoot;var Tv={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,i)=>{t.exports=i()})(K_,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},o,s=!i.document&&!!i.postMessage,r=i.IS_PAPA_WORKER||!1,a={},l=0,u={};function d(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(k){var I=E(k);I.chunkSize=parseInt(I.chunkSize),k.step||k.chunk||(I.chunkSize=null),this._handle=new _(I),(this._handle.streamer=this)._config=I}).call(this,S),this.parseChunk=function(k,I){var P=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<P){let M=this._config.newline;M||(L=this._config.quoteChar||'"',M=this._handle.guessLineEndings(k,L)),k=[...k.split(M).slice(P)].join(M)}this.isFirstChunk&&T(this._config.beforeFirstChunk)&&(L=this._config.beforeFirstChunk(k))!==void 0&&(k=L),this.isFirstChunk=!1,this._halted=!1;var P=this._partialLine+k,L=(this._partialLine="",this._handle.parse(P,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(k=L.meta.cursor,P=(this._finished||(this._partialLine=P.substring(k-this._baseIndex),this._baseIndex=k),L&&L.data&&(this._rowCount+=L.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),r)i.postMessage({results:L,workerId:u.WORKER_ID,finished:P});else if(T(this._config.chunk)&&!I){if(this._config.chunk(L,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=L=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(L.data),this._completeResults.errors=this._completeResults.errors.concat(L.errors),this._completeResults.meta=L.meta),this._completed||!P||!T(this._config.complete)||L&&L.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),P||L&&L.meta.paused||this._nextChunk(),L}this._halted=!0},this._sendError=function(k){T(this._config.error)?this._config.error(k):r&&this._config.error&&i.postMessage({workerId:u.WORKER_ID,error:k,finished:!1})}}function h(S){var k;(S=S||{}).chunkSize||(S.chunkSize=u.RemoteChunkSize),d.call(this,S),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(I){this._input=I,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(k=new XMLHttpRequest,this._config.withCredentials&&(k.withCredentials=this._config.withCredentials),s||(k.onload=N(this._chunkLoaded,this),k.onerror=N(this._chunkError,this)),k.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var I,P=this._config.downloadRequestHeaders;for(I in P)k.setRequestHeader(I,P[I])}var L;this._config.chunkSize&&(L=this._start+this._config.chunkSize-1,k.setRequestHeader("Range","bytes="+this._start+"-"+L));try{k.send(this._config.downloadRequestBody)}catch(M){this._chunkError(M.message)}s&&k.status===0&&this._chunkError()}},this._chunkLoaded=function(){k.readyState===4&&(k.status<200||400<=k.status?this._chunkError():(this._start+=this._config.chunkSize||k.responseText.length,this._finished=!this._config.chunkSize||this._start>=(I=>(I=I.getResponseHeader("Content-Range"))!==null?parseInt(I.substring(I.lastIndexOf("/")+1)):-1)(k),this.parseChunk(k.responseText)))},this._chunkError=function(I){I=k.statusText||I,this._sendError(new Error(I))}}function m(S){(S=S||{}).chunkSize||(S.chunkSize=u.LocalChunkSize),d.call(this,S);var k,I,P=typeof FileReader<"u";this.stream=function(L){this._input=L,I=L.slice||L.webkitSlice||L.mozSlice,P?((k=new FileReader).onload=N(this._chunkLoaded,this),k.onerror=N(this._chunkError,this)):k=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var L=this._input,M=(this._config.chunkSize&&(M=Math.min(this._start+this._config.chunkSize,this._input.size),L=I.call(L,this._start,M)),k.readAsText(L,this._config.encoding));P||this._chunkLoaded({target:{result:M}})},this._chunkLoaded=function(L){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(L.target.result)},this._chunkError=function(){this._sendError(k.error)}}function g(S){var k;d.call(this,S=S||{}),this.stream=function(I){return k=I,this._nextChunk()},this._nextChunk=function(){var I,P;if(!this._finished)return I=this._config.chunkSize,k=I?(P=k.substring(0,I),k.substring(I)):(P=k,""),this._finished=!k,this.parseChunk(P)}}function v(S){d.call(this,S=S||{});var k=[],I=!0,P=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(L){this._input=L,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){P&&k.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),k.length?this.parseChunk(k.shift()):I=!0},this._streamData=N(function(L){try{k.push(typeof L=="string"?L:L.toString(this._config.encoding)),I&&(I=!1,this._checkIsFinished(),this.parseChunk(k.shift()))}catch(M){this._streamError(M)}},this),this._streamError=N(function(L){this._streamCleanUp(),this._sendError(L)},this),this._streamEnd=N(function(){this._streamCleanUp(),P=!0,this._streamData("")},this),this._streamCleanUp=N(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function _(S){var k,I,P,L,M=Math.pow(2,53),V=-M,W=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,j=this,A=0,D=0,U=!1,R=!1,O=[],F={data:[],errors:[],meta:{}};function Y(te){return S.skipEmptyLines==="greedy"?te.join("").trim()==="":te.length===1&&te[0].length===0}function X(){if(F&&P&&(ve("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),P=!1),S.skipEmptyLines&&(F.data=F.data.filter(function(oe){return!Y(oe)})),Q()){let oe=function(ge,le){T(S.transformHeader)&&(ge=S.transformHeader(ge,le)),O.push(ge)};var K=oe;if(F)if(Array.isArray(F.data[0])){for(var te=0;Q()&&te<F.data.length;te++)F.data[te].forEach(oe);F.data.splice(0,1)}else F.data.forEach(oe)}function re(oe,ge){for(var le=S.header?{}:[],ne=0;ne<oe.length;ne++){var ee=ne,Je=oe[ne],Je=((de,Ce)=>(je=>(S.dynamicTypingFunction&&S.dynamicTyping[je]===void 0&&(S.dynamicTyping[je]=S.dynamicTypingFunction(je)),(S.dynamicTyping[je]||S.dynamicTyping)===!0))(de)?Ce==="true"||Ce==="TRUE"||Ce!=="false"&&Ce!=="FALSE"&&((je=>{if(W.test(je)&&(je=parseFloat(je),V<je&&je<M))return 1})(Ce)?parseFloat(Ce):q.test(Ce)?new Date(Ce):Ce===""?null:Ce):Ce)(ee=S.header?ne>=O.length?"__parsed_extra":O[ne]:ee,Je=S.transform?S.transform(Je,ee):Je);ee==="__parsed_extra"?(le[ee]=le[ee]||[],le[ee].push(Je)):le[ee]=Je}return S.header&&(ne>O.length?ve("FieldMismatch","TooManyFields","Too many fields: expected "+O.length+" fields but parsed "+ne,D+ge):ne<O.length&&ve("FieldMismatch","TooFewFields","Too few fields: expected "+O.length+" fields but parsed "+ne,D+ge)),le}var be;F&&(S.header||S.dynamicTyping||S.transform)&&(be=1,!F.data.length||Array.isArray(F.data[0])?(F.data=F.data.map(re),be=F.data.length):F.data=re(F.data,0),S.header&&F.meta&&(F.meta.fields=O),D+=be)}function Q(){return S.header&&O.length===0}function ve(te,re,be,K){te={type:te,code:re,message:be},K!==void 0&&(te.row=K),F.errors.push(te)}T(S.step)&&(L=S.step,S.step=function(te){F=te,Q()?X():(X(),F.data.length!==0&&(A+=te.data.length,S.preview&&A>S.preview?I.abort():(F.data=F.data[0],L(F,j))))}),this.parse=function(te,re,be){var K=S.quoteChar||'"',K=(S.newline||(S.newline=this.guessLineEndings(te,K)),P=!1,S.delimiter?T(S.delimiter)&&(S.delimiter=S.delimiter(te),F.meta.delimiter=S.delimiter):((K=((oe,ge,le,ne,ee)=>{var Je,de,Ce,je;ee=ee||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var Bi=0;Bi<ee.length;Bi++){for(var Kt,Bo=ee[Bi],Ye=0,Qt=0,Be=0,ut=(Ce=void 0,new y({comments:ne,delimiter:Bo,newline:ge,preview:10}).parse(oe)),dn=0;dn<ut.data.length;dn++)le&&Y(ut.data[dn])?Be++:(Kt=ut.data[dn].length,Qt+=Kt,Ce===void 0?Ce=Kt:0<Kt&&(Ye+=Math.abs(Kt-Ce),Ce=Kt));0<ut.data.length&&(Qt/=ut.data.length-Be),(de===void 0||Ye<=de)&&(je===void 0||je<Qt)&&1.99<Qt&&(de=Ye,Je=Bo,je=Qt)}return{successful:!!(S.delimiter=Je),bestDelimiter:Je}})(te,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess)).successful?S.delimiter=K.bestDelimiter:(P=!0,S.delimiter=u.DefaultDelimiter),F.meta.delimiter=S.delimiter),E(S));return S.preview&&S.header&&K.preview++,k=te,I=new y(K),F=I.parse(k,re,be),X(),U?{meta:{paused:!0}}:F||{meta:{paused:!1}}},this.paused=function(){return U},this.pause=function(){U=!0,I.abort(),k=T(S.chunk)?"":k.substring(I.getCharIndex())},this.resume=function(){j.streamer._halted?(U=!1,j.streamer.parseChunk(k,!0)):setTimeout(j.resume,3)},this.aborted=function(){return R},this.abort=function(){R=!0,I.abort(),F.meta.aborted=!0,T(S.complete)&&S.complete(F),k=""},this.guessLineEndings=function(oe,K){oe=oe.substring(0,1048576);var K=new RegExp(x(K)+"([^]*?)"+x(K),"gm"),be=(oe=oe.replace(K,"")).split("\r"),K=oe.split(`
`),oe=1<K.length&&K[0].length<be[0].length;if(be.length===1||oe)return`
`;for(var ge=0,le=0;le<be.length;le++)be[le][0]===`
`&&ge++;return ge>=be.length/2?`\r
`:"\r"}}function x(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(S){var k=(S=S||{}).delimiter,I=S.newline,P=S.comments,L=S.step,M=S.preview,V=S.fastMode,W=null,q=!1,j=S.quoteChar==null?'"':S.quoteChar,A=j;if(S.escapeChar!==void 0&&(A=S.escapeChar),(typeof k!="string"||-1<u.BAD_DELIMITERS.indexOf(k))&&(k=","),P===k)throw new Error("Comment character same as delimiter");P===!0?P="#":(typeof P!="string"||-1<u.BAD_DELIMITERS.indexOf(P))&&(P=!1),I!==`
`&&I!=="\r"&&I!==`\r
`&&(I=`
`);var D=0,U=!1;this.parse=function(R,O,F){if(typeof R!="string")throw new Error("Input must be a string");var Y=R.length,X=k.length,Q=I.length,ve=P.length,te=T(L),re=[],be=[],K=[],oe=D=0;if(!R)return Ye();if(V||V!==!1&&R.indexOf(j)===-1){for(var ge=R.split(I),le=0;le<ge.length;le++){if(K=ge[le],D+=K.length,le!==ge.length-1)D+=I.length;else if(F)return Ye();if(!P||K.substring(0,ve)!==P){if(te){if(re=[],je(K.split(k)),Qt(),U)return Ye()}else je(K.split(k));if(M&&M<=le)return re=re.slice(0,M),Ye(!0)}}return Ye()}for(var ne=R.indexOf(k,D),ee=R.indexOf(I,D),Je=new RegExp(x(A)+x(j),"g"),de=R.indexOf(j,D);;)if(R[D]===j)for(de=D,D++;;){if((de=R.indexOf(j,de+1))===-1)return F||be.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:re.length,index:D}),Kt();if(de===Y-1)return Kt(R.substring(D,de).replace(Je,j));if(j===A&&R[de+1]===A)de++;else if(j===A||de===0||R[de-1]!==A){ne!==-1&&ne<de+1&&(ne=R.indexOf(k,de+1));var Ce=Bi((ee=ee!==-1&&ee<de+1?R.indexOf(I,de+1):ee)===-1?ne:Math.min(ne,ee));if(R.substr(de+1+Ce,X)===k){K.push(R.substring(D,de).replace(Je,j)),R[D=de+1+Ce+X]!==j&&(de=R.indexOf(j,D)),ne=R.indexOf(k,D),ee=R.indexOf(I,D);break}if(Ce=Bi(ee),R.substring(de+1+Ce,de+1+Ce+Q)===I){if(K.push(R.substring(D,de).replace(Je,j)),Bo(de+1+Ce+Q),ne=R.indexOf(k,D),de=R.indexOf(j,D),te&&(Qt(),U))return Ye();if(M&&re.length>=M)return Ye(!0);break}be.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:re.length,index:D}),de++}}else if(P&&K.length===0&&R.substring(D,D+ve)===P){if(ee===-1)return Ye();D=ee+Q,ee=R.indexOf(I,D),ne=R.indexOf(k,D)}else if(ne!==-1&&(ne<ee||ee===-1))K.push(R.substring(D,ne)),D=ne+X,ne=R.indexOf(k,D);else{if(ee===-1)break;if(K.push(R.substring(D,ee)),Bo(ee+Q),te&&(Qt(),U))return Ye();if(M&&re.length>=M)return Ye(!0)}return Kt();function je(Be){re.push(Be),oe=D}function Bi(Be){var ut=0;return ut=Be!==-1&&(Be=R.substring(de+1,Be))&&Be.trim()===""?Be.length:ut}function Kt(Be){return F||(Be===void 0&&(Be=R.substring(D)),K.push(Be),D=Y,je(K),te&&Qt()),Ye()}function Bo(Be){D=Be,je(K),K=[],ee=R.indexOf(I,D)}function Ye(Be){if(S.header&&!O&&re.length&&!q){var ut=re[0],dn=Object.create(null),Hl=new Set(ut);let Bf=!1;for(let Vi=0;Vi<ut.length;Vi++){let Xt=ut[Vi];if(dn[Xt=T(S.transformHeader)?S.transformHeader(Xt,Vi):Xt]){let Vo,Vf=dn[Xt];for(;Vo=Xt+"_"+Vf,Vf++,Hl.has(Vo););Hl.add(Vo),ut[Vi]=Vo,dn[Xt]++,Bf=!0,(W=W===null?{}:W)[Vo]=Xt}else dn[Xt]=1,ut[Vi]=Xt;Hl.add(Xt)}Bf&&console.warn("Duplicate headers found and renamed."),q=!0}return{data:re,errors:be,meta:{delimiter:k,linebreak:I,aborted:U,truncated:!!Be,cursor:oe+(O||0),renamedHeaders:W}}}function Qt(){L(Ye()),re=[],be=[]}},this.abort=function(){U=!0},this.getCharIndex=function(){return D}}function b(S){var k=S.data,I=a[k.workerId],P=!1;if(k.error)I.userError(k.error,k.file);else if(k.results&&k.results.data){var L={abort:function(){P=!0,w(k.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:C,resume:C};if(T(I.userStep)){for(var M=0;M<k.results.data.length&&(I.userStep({data:k.results.data[M],errors:k.results.errors,meta:k.results.meta},L),!P);M++);delete k.results}else T(I.userChunk)&&(I.userChunk(k.results,L,k.file),delete k.results)}k.finished&&!P&&w(k.workerId,k.results)}function w(S,k){var I=a[S];T(I.userComplete)&&I.userComplete(k),I.terminate(),delete a[S]}function C(){throw new Error("Not implemented.")}function E(S){if(typeof S!="object"||S===null)return S;var k,I=Array.isArray(S)?[]:{};for(k in S)I[k]=E(S[k]);return I}function N(S,k){return function(){S.apply(k,arguments)}}function T(S){return typeof S=="function"}return u.parse=function(S,k){var I=(k=k||{}).dynamicTyping||!1;if(T(I)&&(k.dynamicTypingFunction=I,I={}),k.dynamicTyping=I,k.transform=!!T(k.transform)&&k.transform,!k.worker||!u.WORKERS_SUPPORTED)return I=null,u.NODE_STREAM_INPUT,typeof S=="string"?(S=(P=>P.charCodeAt(0)!==65279?P:P.slice(1))(S),I=new(k.download?h:g)(k)):S.readable===!0&&T(S.read)&&T(S.on)?I=new v(k):(i.File&&S instanceof File||S instanceof Object)&&(I=new m(k)),I.stream(S);(I=(()=>{var P;return!!u.WORKERS_SUPPORTED&&(P=(()=>{var L=i.URL||i.webkitURL||null,M=n.toString();return u.BLOB_URL||(u.BLOB_URL=L.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",M,")();"],{type:"text/javascript"})))})(),(P=new i.Worker(P)).onmessage=b,P.id=l++,a[P.id]=P)})()).userStep=k.step,I.userChunk=k.chunk,I.userComplete=k.complete,I.userError=k.error,k.step=T(k.step),k.chunk=T(k.chunk),k.complete=T(k.complete),k.error=T(k.error),delete k.worker,I.postMessage({input:S,config:k,workerId:I.id})},u.unparse=function(S,k){var I=!1,P=!0,L=",",M=`\r
`,V='"',W=V+V,q=!1,j=null,A=!1,D=((()=>{if(typeof k=="object"){if(typeof k.delimiter!="string"||u.BAD_DELIMITERS.filter(function(O){return k.delimiter.indexOf(O)!==-1}).length||(L=k.delimiter),typeof k.quotes!="boolean"&&typeof k.quotes!="function"&&!Array.isArray(k.quotes)||(I=k.quotes),typeof k.skipEmptyLines!="boolean"&&typeof k.skipEmptyLines!="string"||(q=k.skipEmptyLines),typeof k.newline=="string"&&(M=k.newline),typeof k.quoteChar=="string"&&(V=k.quoteChar),typeof k.header=="boolean"&&(P=k.header),Array.isArray(k.columns)){if(k.columns.length===0)throw new Error("Option columns is empty");j=k.columns}k.escapeChar!==void 0&&(W=k.escapeChar+V),k.escapeFormulae instanceof RegExp?A=k.escapeFormulae:typeof k.escapeFormulae=="boolean"&&k.escapeFormulae&&(A=/^[=+\-@\t\r].*$/)}})(),new RegExp(x(V),"g"));if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return U(null,S,q);if(typeof S[0]=="object")return U(j||Object.keys(S[0]),S,q)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||j),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),U(S.fields||[],S.data||[],q);throw new Error("Unable to serialize unrecognized input");function U(O,F,Y){var X="",Q=(typeof O=="string"&&(O=JSON.parse(O)),typeof F=="string"&&(F=JSON.parse(F)),Array.isArray(O)&&0<O.length),ve=!Array.isArray(F[0]);if(Q&&P){for(var te=0;te<O.length;te++)0<te&&(X+=L),X+=R(O[te],te);0<F.length&&(X+=M)}for(var re=0;re<F.length;re++){var be=(Q?O:F[re]).length,K=!1,oe=Q?Object.keys(F[re]).length===0:F[re].length===0;if(Y&&!Q&&(K=Y==="greedy"?F[re].join("").trim()==="":F[re].length===1&&F[re][0].length===0),Y==="greedy"&&Q){for(var ge=[],le=0;le<be;le++){var ne=ve?O[le]:le;ge.push(F[re][ne])}K=ge.join("").trim()===""}if(!K){for(var ee=0;ee<be;ee++){0<ee&&!oe&&(X+=L);var Je=Q&&ve?O[ee]:ee;X+=R(F[re][Je],ee)}re<F.length-1&&(!Y||0<be&&!oe)&&(X+=M)}}return X}function R(O,F){var Y,X;return O==null?"":O.constructor===Date?JSON.stringify(O).slice(1,25):(X=!1,A&&typeof O=="string"&&A.test(O)&&(O="'"+O,X=!0),Y=O.toString().replace(D,W),(X=X||I===!0||typeof I=="function"&&I(O,F)||Array.isArray(I)&&I[F]||((Q,ve)=>{for(var te=0;te<ve.length;te++)if(-1<Q.indexOf(ve[te]))return!0;return!1})(Y,u.BAD_DELIMITERS)||-1<Y.indexOf(L)||Y.charAt(0)===" "||Y.charAt(Y.length-1)===" ")?V+Y+V:Y)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!s&&!!i.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=y,u.ParserHandle=_,u.NetworkStreamer=h,u.FileStreamer=m,u.StringStreamer=g,u.ReadableStreamStreamer=v,i.jQuery&&((o=i.jQuery).fn.parse=function(S){var k=S.config||{},I=[];return this.each(function(M){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var V=0;V<this.files.length;V++)I.push({file:this.files[V],inputElem:this,instanceConfig:o.extend({},k)})}),P(),this;function P(){if(I.length===0)T(S.complete)&&S.complete();else{var M,V,W,q,j=I[0];if(T(S.before)){var A=S.before(j.file,j.inputElem);if(typeof A=="object"){if(A.action==="abort")return M="AbortError",V=j.file,W=j.inputElem,q=A.reason,void(T(S.error)&&S.error({name:M},V,W,q));if(A.action==="skip")return void L();typeof A.config=="object"&&(j.instanceConfig=o.extend(j.instanceConfig,A.config))}else if(A==="skip")return void L()}var D=j.instanceConfig.complete;j.instanceConfig.complete=function(U){T(D)&&D(U,j.file,j.inputElem),L()},u.parse(j.file,j.instanceConfig)}}function L(){I.splice(0,1),P()}}),r&&(i.onmessage=function(S){S=S.data,u.WORKER_ID===void 0&&S&&(u.WORKER_ID=S.workerId),typeof S.input=="string"?i.postMessage({workerId:u.WORKER_ID,results:u.parse(S.input,S.config),finished:!0}):(i.File&&S.input instanceof File||S.input instanceof Object)&&(S=u.parse(S.input,S.config))&&i.postMessage({workerId:u.WORKER_ID,results:S,finished:!0})}),(h.prototype=Object.create(d.prototype)).constructor=h,(m.prototype=Object.create(d.prototype)).constructor=m,(g.prototype=Object.create(g.prototype)).constructor=g,(v.prototype=Object.create(d.prototype)).constructor=v,u})})(Tv);var SS=Tv.exports;const CS=h0(SS),kS={hrv_analysis:{states:[{id:"prevalenza_vagale",label:"Prevalenza vagale (Recupero)",objective:"Favorire il tono parasimpatico e sostenere il recupero fisiologico.",severity:{level:"basso",score:1,color:"green"},recommended_treatments:["recupero_profondo","coerenza_6_6"],audio_tracks:["oceano_rilassamento","meditazione_epsilon"],professional:"none"},{id:"meditativo_profondo",label:"Stato meditativo profondo",objective:"Approfondire la mindfulness e stabilizzare la coerenza autonomica.",severity:{level:"basso",score:1,color:"green"},recommended_treatments:["coerenza_6_6","rilassamento_guidato"],audio_tracks:["meditazione_theta","theta_healing"],professional:"coach_respirazione"},{id:"rilassamento_emotivo",label:"Rilassamento emotivo",objective:"Facilitare lelaborazione emotiva e calmare il sistema limbico.",severity:{level:"basso",score:1,color:"green"},recommended_treatments:["rilascio_emotivo","rilassamento_guidato"],audio_tracks:["perdono","chakra"],professional:"psicologo"},{id:"rilascio_dello_stress",label:"Rilascio dello stress",objective:"Scaricare la tensione fisiologica accumulata e prevenire lattivazione simpatica.",severity:{level:"lieve",score:2,color:"yellow"},recommended_treatments:["rilassamento_guidato","coerenza_5_5"],audio_tracks:["oceano_rilassamento","rigenerazione"],professional:"osteopata"},{id:"neutro",label:"Stato neutro",objective:"Mantenere lomeostasi e monitorare la flessibilit autonomica.",severity:{level:"nessuno",score:0,color:"grey"},recommended_treatments:["coerenza_5_5"],audio_tracks:["nervosismo","healing_432hz"],professional:"none"},{id:"attivazione_lieve",label:"Attivazione simpatica lieve",objective:"Canalizzare lattivazione verso un focus produttivo evitando escalation.",severity:{level:"lieve",score:2,color:"yellow"},recommended_treatments:["coerenza_4_4","grounding_autonomico"],audio_tracks:["chiarezza_cognitiva","gamma_rivavio"],professional:"coach_mentale"},{id:"attivazione_intensa",label:"Attivazione simpatica intensa",objective:"Ridurre leccessiva attivazione simpatica e ripristinare lequilibrio autonomico.",severity:{level:"moderato",score:3,color:"orange"},recommended_treatments:["grounding_autonomico","reset_simpatico"],audio_tracks:["neuromassaggi","ansia"],professional:"psicologo"},{id:"sovraccarico_simpatico",label:"Sovraccarico simpatico",objective:"Ridurre rapidamente liperattivazione per prevenire esaurimento acuto.",severity:{level:"alto",score:4,color:"red"},recommended_treatments:["reset_simpatico","grounding_autonomico"],audio_tracks:["ansia","oceano_rilassamento"],professional:"medico_farmacista"},{id:"collasso_parasimpatico",label:"Collasso parasimpatico (Burnout)",objective:"Stabilizzare il sistema e avviare un recupero metabolico graduale.",severity:{level:"critico",score:5,color:"darkred"},recommended_treatments:["recupero_profondo","rilassamento_guidato"],audio_tracks:["rigenerazione","archetipo_d"],professional:"medico_farmacista"}]},treatments:{by_id:{coerenza_4_4:{id:"coerenza_4_4",label:"Respirazione di coerenza 4-4",category:"respirazione",steps:["Siediti con la schiena dritta.","Inspira per 4 secondi.","Espira per 4 secondi.","Mantieni un ritmo costante."],duration_minutes:5},coerenza_5_5:{id:"coerenza_5_5",label:"Respirazione di coerenza 5-5",category:"respirazione",steps:["Trova una posizione comoda.","Inspira per 5 secondi.","Espira per 5 secondi.","Rimani concentrato sul respiro."],duration_minutes:10},coerenza_6_6:{id:"coerenza_6_6",label:"Respirazione di coerenza 6-6",category:"respirazione",steps:["Mantieni la schiena rilassata ma dritta.","Inspira lentamente per 6 secondi.","Espira lentamente per 6 secondi.","Lascia che il corpo si ammorbidisca."],duration_minutes:15},rilassamento_guidato:{id:"rilassamento_guidato",label:"Rilassamento muscolare guidato",category:"rilassamento",steps:["Chiudi gli occhi e respira profondamente.","Tendi e rilascia i muscoli dalla testa ai piedi.","Percepisci calore e leggerezza.","Rimani in quiete."],duration_minutes:12},reset_simpatico:{id:"reset_simpatico",label:"Reset del sistema simpatico",category:"respirazione",steps:["Inspira brevemente per 3 secondi.","Espira a lungo per 8 secondi.","Fai una breve pausa.","Immagina lenergia scendere verso laddome."],duration_minutes:8},recupero_profondo:{id:"recupero_profondo",label:"Recupero profondo",category:"recupero",steps:["Sdraiati in un ambiente tranquillo.","Usa una coperta pesata se disponibile.","Respira senza sforzo.","Immagina il corpo rigenerarsi."],duration_minutes:20},rilascio_emotivo:{id:"rilascio_emotivo",label:"Rilascio emotivo",category:"emozioni",steps:["Individua dove senti tensione.","Respira in quella zona.","Emetti un suono morbido durante lespirazione.","Accogli le emozioni che emergono."],duration_minutes:15},grounding_autonomico:{id:"grounding_autonomico",label:"Grounding autonomico",category:"rilassamento",steps:["Premi i piedi a terra.","Osserva 5 cose che vedi e 3 che senti.","Percepisci la gravit che ti sostiene.","Respira lentamente nei piedi."],duration_minutes:7}}},audio_tracks:{by_id:{ansia:{id:"ansia",title:"Ansia",description:"Suoni rilassanti per calmare la mente.",duration_seconds:600,category:"relaxation",audio_url:"/audio/ansia.mp3"},perdono:{id:"perdono",title:"Perdono",description:"Musica dolce per il rilascio emotivo.",duration_seconds:600,category:"relaxation",audio_url:"/audio/Perdono.mp3"},neuromassaggi:{id:"neuromassaggi",title:"Neuromassaggi",description:"Droni profondi per un massaggio neurale.",duration_seconds:600,category:"relaxation",audio_url:"/audio/Neuromassage.mp3"},oceano_rilassamento:{id:"oceano_rilassamento",title:"Oceano Rilassamento",description:"Onde oceaniche per il rilassamento profondo.",duration_seconds:600,category:"relaxation",audio_url:"/audio/Oceano-rilassamento.mp3"},meditazione_epsilon:{id:"meditazione_epsilon",title:"Meditazione Epsilon",description:"Frequenze epsilon per calma profonda.",duration_seconds:600,category:"relaxation",audio_url:"/audio/La_meditazione_epsilon.mp3"},meditazione_theta:{id:"meditazione_theta",title:"Meditazione Theta",description:"Onde theta per meditazione profonda.",duration_seconds:600,category:"relaxation",audio_url:"/audio/Meditazione_theta.mp3"},archetipo_d:{id:"archetipo_d",title:"Archetipo D",description:"Composizione minimalista theta-delta.",duration_seconds:600,category:"relaxation",audio_url:"/audio/ARCHETIPO D  Minimalista (Theta-Delta profondo).mp3"},theta_healing:{id:"theta_healing",title:"Theta Healing della Natura",description:"Binaurali theta per rilassamento profondo.",duration_seconds:600,category:"relaxation",audio_url:"/audio/Il_Theta-Healing_Della_Natura.mp3"},nervosismo:{id:"nervosismo",title:"Nervosismo",description:"Suoni bilanciati per uno stato neutro.",duration_seconds:600,category:"neutral",audio_url:"/audio/nervosismo.mp3"},chiarezza_cognitiva:{id:"chiarezza_cognitiva",title:"Chiarezza Cognitiva",description:"Ritmi leggeri per focus mentale.",duration_seconds:600,category:"focus",audio_url:"/audio/ansia.mp3"},chakra:{id:"chakra",title:"7 Chakra",description:"Frequenze armoniche per lequilibrio energetico.",duration_seconds:600,category:"energy",audio_url:"/audio/7-chakra.mp3"},healing_432hz:{id:"healing_432hz",title:"Guarigione 432Hz",description:"Frequenze a 432Hz per riequilibrio cellulare.",duration_seconds:600,category:"healing",audio_url:"/audio/432hz_healing.mp3"},gamma_rivavio:{id:"gamma_rivavio",title:"Gamma Rivavio",description:"Onde gamma per attivazione mentale.",duration_seconds:600,category:"activation",audio_url:"/audio/Gamma_rivavio.mp3"},rigenerazione:{id:"rigenerazione",title:"Rigenerazione",description:"Musica rigenerativa per recupero profondo.",duration_seconds:600,category:"recovery",audio_url:"/audio/Rigenerazione.mp3"}}},professionals:{by_id:{coach_respirazione:{id:"coach_respirazione",label:"Coach Respiratorio",description:"Esperto in meccaniche respiratorie e coerenza cardiaca."},psicologo:{id:"psicologo",label:"Psicologo",description:"Specializzato in regolazione emotiva e stress."},medico_farmacista:{id:"medico_farmacista",label:"Medico / Farmacista",description:"Supporto clinico e valutazione sintomatologica."},osteopata:{id:"osteopata",label:"Osteopata",description:"Lavora sullallineamento muscolo-scheletrico."},osteopata_viscerale:{id:"osteopata_viscerale",label:"Osteopata Viscerale",description:"Specializzato in tensioni viscerali e nervo vago."},coach_mentale:{id:"coach_mentale",label:"Mental Coach",description:"Supporto al focus e alla performance mentale."},none:{id:"none",label:"Nessun professionista richiesto",description:"Questo intervento non richiede supervisione."}}}},Pr={modules:kS};function Jd(){const t=Pr.modules.hrv_analysis.states,e=Pr.modules.treatments.by_id,n=Pr.modules.audio_tracks.by_id,i=Pr.modules.professionals.by_id;function o(u){return t.find(d=>d.id===u)}function s(u){return u.recommended_treatments.map(d=>e[d])}function r(u){return u.audio_tracks.map(d=>n[d])}function a(u){return i[u.professional]}function l(u){const d=o(u);if(!d)return null;const h=d.recommended_treatments[0],m=d.audio_tracks[0],g=e[h],v=n[m];return{state_label:d.label,objective:d.objective,treatment_label:g.label,treatment_steps:g.steps,treatment_duration_minutes:g.duration_minutes,audio_title:v.title,audio_description:v.description,audio_duration_seconds:v.duration_seconds,audio_url:v.audio_url}}return{getStateNode:o,getTreatments:s,getAudioTracks:r,getProfessional:a,buildPlayerPayload:l}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ur(t){return t+.5|0}const Vn=(t,e,n)=>Math.max(Math.min(t,n),e);function ps(t){return Vn(ur(t*2.55),0,255)}function ti(t){return Vn(ur(t*255),0,255)}function xn(t){return Vn(ur(t/2.55)/100,0,1)}function eh(t){return Vn(ur(t*100),0,100)}const Nt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Eu=[..."0123456789ABCDEF"],ES=t=>Eu[t&15],TS=t=>Eu[(t&240)>>4]+Eu[t&15],Rr=t=>(t&240)>>4===(t&15),IS=t=>Rr(t.r)&&Rr(t.g)&&Rr(t.b)&&Rr(t.a);function NS(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Nt[t[1]]*17,g:255&Nt[t[2]]*17,b:255&Nt[t[3]]*17,a:e===5?Nt[t[4]]*17:255}:(e===7||e===9)&&(n={r:Nt[t[1]]<<4|Nt[t[2]],g:Nt[t[3]]<<4|Nt[t[4]],b:Nt[t[5]]<<4|Nt[t[6]],a:e===9?Nt[t[7]]<<4|Nt[t[8]]:255})),n}const AS=(t,e)=>t<255?e(t):"";function PS(t){var e=IS(t)?ES:TS;return t?"#"+e(t.r)+e(t.g)+e(t.b)+AS(t.a,e):void 0}const RS=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Iv(t,e,n){const i=e*Math.min(n,1-n),o=(s,r=(s+t/30)%12)=>n-i*Math.max(Math.min(r-3,9-r,1),-1);return[o(0),o(8),o(4)]}function MS(t,e,n){const i=(o,s=(o+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function LS(t,e,n){const i=Iv(t,1,.5);let o;for(e+n>1&&(o=1/(e+n),e*=o,n*=o),o=0;o<3;o++)i[o]*=1-e-n,i[o]+=e;return i}function DS(t,e,n,i,o){return t===o?(e-n)/i+(e<n?6:0):e===o?(n-t)/i+2:(t-e)/i+4}function Yd(t){const n=t.r/255,i=t.g/255,o=t.b/255,s=Math.max(n,i,o),r=Math.min(n,i,o),a=(s+r)/2;let l,u,d;return s!==r&&(d=s-r,u=a>.5?d/(2-s-r):d/(s+r),l=DS(n,i,o,d,s),l=l*60+.5),[l|0,u||0,a]}function Kd(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(ti)}function Qd(t,e,n){return Kd(Iv,t,e,n)}function zS(t,e,n){return Kd(LS,t,e,n)}function jS(t,e,n){return Kd(MS,t,e,n)}function Nv(t){return(t%360+360)%360}function FS(t){const e=RS.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?ps(+e[5]):ti(+e[5]));const o=Nv(+e[2]),s=+e[3]/100,r=+e[4]/100;return e[1]==="hwb"?i=zS(o,s,r):e[1]==="hsv"?i=jS(o,s,r):i=Qd(o,s,r),{r:i[0],g:i[1],b:i[2],a:n}}function OS(t,e){var n=Yd(t);n[0]=Nv(n[0]+e),n=Qd(n),t.r=n[0],t.g=n[1],t.b=n[2]}function US(t){if(!t)return;const e=Yd(t),n=e[0],i=eh(e[1]),o=eh(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${o}%, ${xn(t.a)})`:`hsl(${n}, ${i}%, ${o}%)`}const th={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},nh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function BS(){const t={},e=Object.keys(nh),n=Object.keys(th);let i,o,s,r,a;for(i=0;i<e.length;i++){for(r=a=e[i],o=0;o<n.length;o++)s=n[o],a=a.replace(s,th[s]);s=parseInt(nh[r],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Mr;function VS(t){Mr||(Mr=BS(),Mr.transparent=[0,0,0,0]);const e=Mr[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const HS=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function $S(t){const e=HS.exec(t);let n=255,i,o,s;if(e){if(e[7]!==i){const r=+e[7];n=e[8]?ps(r):Vn(r*255,0,255)}return i=+e[1],o=+e[3],s=+e[5],i=255&(e[2]?ps(i):Vn(i,0,255)),o=255&(e[4]?ps(o):Vn(o,0,255)),s=255&(e[6]?ps(s):Vn(s,0,255)),{r:i,g:o,b:s,a:n}}}function GS(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${xn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const gc=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,$i=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function qS(t,e,n){const i=$i(xn(t.r)),o=$i(xn(t.g)),s=$i(xn(t.b));return{r:ti(gc(i+n*($i(xn(e.r))-i))),g:ti(gc(o+n*($i(xn(e.g))-o))),b:ti(gc(s+n*($i(xn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Lr(t,e,n){if(t){let i=Yd(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Qd(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Av(t,e){return t&&Object.assign(e||{},t)}function ih(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ti(t[3]))):(e=Av(t,{r:0,g:0,b:0,a:1}),e.a=ti(e.a)),e}function WS(t){return t.charAt(0)==="r"?$S(t):FS(t)}class Qs{constructor(e){if(e instanceof Qs)return e;const n=typeof e;let i;n==="object"?i=ih(e):n==="string"&&(i=NS(e)||VS(e)||WS(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Av(this._rgb);return e&&(e.a=xn(e.a)),e}set rgb(e){this._rgb=ih(e)}rgbString(){return this._valid?GS(this._rgb):void 0}hexString(){return this._valid?PS(this._rgb):void 0}hslString(){return this._valid?US(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,o=e.rgb;let s;const r=n===s?.5:n,a=2*r-1,l=i.a-o.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,i.r=255&u*i.r+s*o.r+.5,i.g=255&u*i.g+s*o.g+.5,i.b=255&u*i.b+s*o.b+.5,i.a=r*i.a+(1-r)*o.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=qS(this._rgb,e._rgb,n)),this}clone(){return new Qs(this.rgb)}alpha(e){return this._rgb.a=ti(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=ur(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Lr(this._rgb,2,e),this}darken(e){return Lr(this._rgb,2,-e),this}saturate(e){return Lr(this._rgb,1,e),this}desaturate(e){return Lr(this._rgb,1,-e),this}rotate(e){return OS(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function fn(){}const JS=(()=>{let t=0;return()=>t++})();function fe(t){return t==null}function Ie(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ae(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Re(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function vt(t,e){return Re(t)?t:e}function se(t,e){return typeof t>"u"?e:t}const YS=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ye(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function he(t,e,n,i){let o,s,r;if(Ie(t))for(s=t.length,o=0;o<s;o++)e.call(n,t[o],o);else if(ae(t))for(r=Object.keys(t),s=r.length,o=0;o<s;o++)e.call(n,t[r[o]],r[o])}function Va(t,e){let n,i,o,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(o=t[n],s=e[n],o.datasetIndex!==s.datasetIndex||o.index!==s.index)return!1;return!0}function Ha(t){if(Ie(t))return t.map(Ha);if(ae(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let o=0;for(;o<i;++o)e[n[o]]=Ha(t[n[o]]);return e}return t}function Pv(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function KS(t,e,n,i){if(!Pv(t))return;const o=e[t],s=n[t];ae(o)&&ae(s)?Xs(o,s,i):e[t]=Ha(s)}function Xs(t,e,n){const i=Ie(e)?e:[e],o=i.length;if(!ae(t))return t;n=n||{};const s=n.merger||KS;let r;for(let a=0;a<o;++a){if(r=i[a],!ae(r))continue;const l=Object.keys(r);for(let u=0,d=l.length;u<d;++u)s(l[u],t,r,n)}return t}function Ts(t,e){return Xs(t,e,{merger:QS})}function QS(t,e,n){if(!Pv(t))return;const i=e[t],o=n[t];ae(i)&&ae(o)?Ts(i,o):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ha(o))}const oh={"":t=>t,x:t=>t.x,y:t=>t.y};function XS(t){const e=t.split("."),n=[];let i="";for(const o of e)i+=o,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function ZS(t){const e=XS(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Zs(t,e){return(oh[e]||(oh[e]=ZS(e)))(t)}function Xd(t){return t.charAt(0).toUpperCase()+t.slice(1)}const $a=t=>typeof t<"u",oi=t=>typeof t=="function",sh=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function e1(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ze=Math.PI,kt=2*ze,t1=kt+ze,Ga=Number.POSITIVE_INFINITY,n1=ze/180,St=ze/2,ui=ze/4,rh=ze*2/3,Hn=Math.log10,Io=Math.sign;function Is(t,e,n){return Math.abs(t-e)<n}function ah(t){const e=Math.round(t);t=Is(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Hn(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function i1(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((o,s)=>o-s).pop(),e}function o1(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function No(t){return!o1(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function s1(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Rv(t,e,n){let i,o,s;for(i=0,o=t.length;i<o;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function $n(t){return t*(ze/180)}function Zd(t){return t*(180/ze)}function lh(t){if(!Re(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function r1(t,e){const n=e.x-t.x,i=e.y-t.y,o=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*ze&&(s+=kt),{angle:s,distance:o}}function Tu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function a1(t,e){return(t-e+t1)%kt-ze}function _t(t){return(t%kt+kt)%kt}function Mv(t,e,n,i){const o=_t(t),s=_t(e),r=_t(n),a=_t(s-o),l=_t(r-o),u=_t(o-s),d=_t(o-r);return o===s||o===r||i&&s===r||a>l&&u<d}function Mt(t,e,n){return Math.max(e,Math.min(n,t))}function l1(t){return Mt(t,-32768,32767)}function so(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function ef(t,e,n){n=n||(r=>t[r]<e);let i=t.length-1,o=0,s;for(;i-o>1;)s=o+i>>1,n(s)?o=s:i=s;return{lo:o,hi:i}}const Si=(t,e,n,i)=>ef(t,n,i?o=>{const s=t[o][e];return s<n||s===n&&t[o+1][e]===n}:o=>t[o][e]<n),c1=(t,e,n)=>ef(t,n,i=>t[i][e]>=n);function u1(t,e,n){let i=0,o=t.length;for(;i<o&&t[i]<e;)i++;for(;o>i&&t[o-1]>n;)o--;return i>0||o<t.length?t.slice(i,o):t}const Lv=["push","pop","shift","splice","unshift"];function d1(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Lv.forEach(n=>{const i="_onData"+Xd(n),o=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const r=o.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),r}})})}function ch(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,o=i.indexOf(e);o!==-1&&i.splice(o,1),!(i.length>0)&&(Lv.forEach(s=>{delete t[s]}),delete t._chartjs)}function f1(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Dv=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function zv(t,e){let n=[],i=!1;return function(...o){n=o,i||(i=!0,Dv.call(window,()=>{i=!1,t.apply(e,n)}))}}function p1(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const tf=t=>t==="start"?"left":t==="end"?"right":"center",Xe=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,h1=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function jv(t,e,n){const i=e.length;let o=0,s=i;if(t._sorted){const{iScale:r,vScale:a,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,d=r.axis,{min:h,max:m,minDefined:g,maxDefined:v}=r.getUserBounds();if(g){if(o=Math.min(Si(l,d,h).lo,n?i:Si(e,d,r.getPixelForValue(h)).lo),u){const _=l.slice(0,o+1).reverse().findIndex(x=>!fe(x[a.axis]));o-=Math.max(0,_)}o=Mt(o,0,i-1)}if(v){let _=Math.max(Si(l,r.axis,m,!0).hi+1,n?0:Si(e,d,r.getPixelForValue(m),!0).hi+1);if(u){const x=l.slice(_-1).findIndex(y=>!fe(y[a.axis]));_+=Math.max(0,x)}s=Mt(_,o,i)-o}else s=i-o}return{start:o,count:s}}function Fv(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,o={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=o,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,o),s}const Dr=t=>t===0||t===1,uh=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*kt/n)),dh=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*kt/n)+1,Ns={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*St)+1,easeOutSine:t=>Math.sin(t*St),easeInOutSine:t=>-.5*(Math.cos(ze*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Dr(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Dr(t)?t:uh(t,.075,.3),easeOutElastic:t=>Dr(t)?t:dh(t,.075,.3),easeInOutElastic(t){return Dr(t)?t:t<.5?.5*uh(t*2,.1125,.45):.5+.5*dh(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ns.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ns.easeInBounce(t*2)*.5:Ns.easeOutBounce(t*2-1)*.5+.5};function nf(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function fh(t){return nf(t)?t:new Qs(t)}function xc(t){return nf(t)?t:new Qs(t).saturate(.5).darken(.1).hexString()}const m1=["x","y","borderWidth","radius","tension"],g1=["color","borderColor","backgroundColor"];function x1(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:g1},numbers:{type:"number",properties:m1}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function v1(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ph=new Map;function y1(t,e){e=e||{};const n=t+JSON.stringify(e);let i=ph.get(n);return i||(i=new Intl.NumberFormat(t,e),ph.set(n,i)),i}function of(t,e,n){return y1(e,n).format(t)}const Ov={values(t){return Ie(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let o,s=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(o="scientific"),s=_1(t,n)}const r=Hn(Math.abs(s)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),of(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Hn(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?Ov.numeric.call(this,t,e,n):""}};function _1(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Cl={formatters:Ov};function b1(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Cl.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Li=Object.create(null),Iu=Object.create(null);function As(t,e){if(!e)return t;const n=e.split(".");for(let i=0,o=n.length;i<o;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function vc(t,e,n){return typeof e=="string"?Xs(As(t,e),n):Xs(As(t,""),e)}class w1{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,o)=>xc(o.backgroundColor),this.hoverBorderColor=(i,o)=>xc(o.borderColor),this.hoverColor=(i,o)=>xc(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return vc(this,e,n)}get(e){return As(this,e)}describe(e,n){return vc(Iu,e,n)}override(e,n){return vc(Li,e,n)}route(e,n,i,o){const s=As(this,e),r=As(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=r[o];return ae(l)?Object.assign({},u,l):se(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Me=new w1({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[x1,v1,b1]);function S1(t){return!t||fe(t.size)||fe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function qa(t,e,n,i,o){let s=e[o];return s||(s=e[o]=t.measureText(o).width,n.push(o)),s>i&&(i=s),i}function C1(t,e,n,i){i=i||{};let o=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(o=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let r=0;const a=n.length;let l,u,d,h,m;for(l=0;l<a;l++)if(h=n[l],h!=null&&!Ie(h))r=qa(t,o,s,r,h);else if(Ie(h))for(u=0,d=h.length;u<d;u++)m=h[u],m!=null&&!Ie(m)&&(r=qa(t,o,s,r,m));t.restore();const g=s.length/2;if(g>n.length){for(l=0;l<g;l++)delete o[s[l]];s.splice(0,g)}return r}function di(t,e,n){const i=t.currentDevicePixelRatio,o=n!==0?Math.max(n/2,.5):0;return Math.round((e-o)*i)/i+o}function hh(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Nu(t,e,n,i){Uv(t,e,n,i,null)}function Uv(t,e,n,i,o){let s,r,a,l,u,d,h,m;const g=e.pointStyle,v=e.rotation,_=e.radius;let x=(v||0)*n1;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(x),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),g){default:o?t.ellipse(n,i,o/2,_,0,0,kt):t.arc(n,i,_,0,kt),t.closePath();break;case"triangle":d=o?o/2:_,t.moveTo(n+Math.sin(x)*d,i-Math.cos(x)*_),x+=rh,t.lineTo(n+Math.sin(x)*d,i-Math.cos(x)*_),x+=rh,t.lineTo(n+Math.sin(x)*d,i-Math.cos(x)*_),t.closePath();break;case"rectRounded":u=_*.516,l=_-u,r=Math.cos(x+ui)*l,h=Math.cos(x+ui)*(o?o/2-u:l),a=Math.sin(x+ui)*l,m=Math.sin(x+ui)*(o?o/2-u:l),t.arc(n-h,i-a,u,x-ze,x-St),t.arc(n+m,i-r,u,x-St,x),t.arc(n+h,i+a,u,x,x+St),t.arc(n-m,i+r,u,x+St,x+ze),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*_,d=o?o/2:l,t.rect(n-d,i-l,2*d,2*l);break}x+=ui;case"rectRot":h=Math.cos(x)*(o?o/2:_),r=Math.cos(x)*_,a=Math.sin(x)*_,m=Math.sin(x)*(o?o/2:_),t.moveTo(n-h,i-a),t.lineTo(n+m,i-r),t.lineTo(n+h,i+a),t.lineTo(n-m,i+r),t.closePath();break;case"crossRot":x+=ui;case"cross":h=Math.cos(x)*(o?o/2:_),r=Math.cos(x)*_,a=Math.sin(x)*_,m=Math.sin(x)*(o?o/2:_),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+m,i-r),t.lineTo(n-m,i+r);break;case"star":h=Math.cos(x)*(o?o/2:_),r=Math.cos(x)*_,a=Math.sin(x)*_,m=Math.sin(x)*(o?o/2:_),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+m,i-r),t.lineTo(n-m,i+r),x+=ui,h=Math.cos(x)*(o?o/2:_),r=Math.cos(x)*_,a=Math.sin(x)*_,m=Math.sin(x)*(o?o/2:_),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+m,i-r),t.lineTo(n-m,i+r);break;case"line":r=o?o/2:Math.cos(x)*_,a=Math.sin(x)*_,t.moveTo(n-r,i-a),t.lineTo(n+r,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(x)*(o?o/2:_),i+Math.sin(x)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function _n(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function kl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function El(t){t.restore()}function k1(t,e,n,i,o){if(!e)return t.lineTo(n.x,n.y);if(o==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else o==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function E1(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function T1(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),fe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function I1(t,e,n,i,o){if(o.strikethrough||o.underline){const s=t.measureText(i),r=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,u=n+s.actualBoundingBoxDescent,d=o.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=o.decorationWidth||2,t.moveTo(r,d),t.lineTo(a,d),t.stroke()}}function N1(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Di(t,e,n,i,o,s={}){const r=Ie(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(t.save(),t.font=o.string,T1(t,s),l=0;l<r.length;++l)u=r[l],s.backdrop&&N1(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),fe(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(u,n,i,s.maxWidth)),t.fillText(u,n,i,s.maxWidth),I1(t,n,i,u,s),i+=Number(o.lineHeight);t.restore()}function Wa(t,e){const{x:n,y:i,w:o,h:s,radius:r}=e;t.arc(n+r.topLeft,i+r.topLeft,r.topLeft,1.5*ze,ze,!0),t.lineTo(n,i+s-r.bottomLeft),t.arc(n+r.bottomLeft,i+s-r.bottomLeft,r.bottomLeft,ze,St,!0),t.lineTo(n+o-r.bottomRight,i+s),t.arc(n+o-r.bottomRight,i+s-r.bottomRight,r.bottomRight,St,0,!0),t.lineTo(n+o,i+r.topRight),t.arc(n+o-r.topRight,i+r.topRight,r.topRight,0,-St,!0),t.lineTo(n+r.topLeft,i)}const A1=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,P1=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function R1(t,e){const n=(""+t).match(A1);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const M1=t=>+t||0;function Bv(t,e){const n={},i=ae(e),o=i?Object.keys(e):e,s=ae(t)?i?r=>se(t[r],t[e[r]]):r=>t[r]:()=>t;for(const r of o)n[r]=M1(s(r));return n}function L1(t){return Bv(t,{top:"y",right:"x",bottom:"y",left:"x"})}function mo(t){return Bv(t,["topLeft","topRight","bottomLeft","bottomRight"])}function nt(t){const e=L1(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ue(t,e){t=t||{},e=e||Me.font;let n=se(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=se(t.style,e.style);i&&!(""+i).match(P1)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const o={family:se(t.family,e.family),lineHeight:R1(se(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:se(t.weight,e.weight),string:""};return o.string=S1(o),o}function zr(t,e,n,i){let o,s,r;for(o=0,s=t.length;o<s;++o)if(r=t[o],r!==void 0&&r!==void 0)return r}function D1(t,e,n){const{min:i,max:o}=t,s=YS(e,(o-i)/2),r=(a,l)=>n&&a===0?0:a+l;return{min:r(i,-Math.abs(s)),max:r(o,s)}}function li(t,e){return Object.assign(Object.create(t),e)}function sf(t,e=[""],n,i,o=()=>t[0]){const s=n||t;typeof i>"u"&&(i=Gv("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:o,override:a=>sf([a,...t],e,s,i)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Hv(a,l,()=>H1(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return gh(a).includes(l)},ownKeys(a){return gh(a)},set(a,l,u){const d=a._storage||(a._storage=o());return a[l]=d[l]=u,delete a._keys,!0}})}function Ao(t,e,n,i){const o={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Vv(t,i),setContext:s=>Ao(t,s,n,i),override:s=>Ao(t.override(s),e,n,i)};return new Proxy(o,{deleteProperty(s,r){return delete s[r],delete t[r],!0},get(s,r,a){return Hv(s,r,()=>j1(s,r,a))},getOwnPropertyDescriptor(s,r){return s._descriptors.allKeys?Reflect.has(t,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,r)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,r){return Reflect.has(t,r)},ownKeys(){return Reflect.ownKeys(t)},set(s,r,a){return t[r]=a,delete s[r],!0}})}function Vv(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:o=e.allKeys}=t;return{allKeys:o,scriptable:n,indexable:i,isScriptable:oi(n)?n:()=>n,isIndexable:oi(i)?i:()=>i}}const z1=(t,e)=>t?t+Xd(e):e,rf=(t,e)=>ae(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Hv(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function j1(t,e,n){const{_proxy:i,_context:o,_subProxy:s,_descriptors:r}=t;let a=i[e];return oi(a)&&r.isScriptable(e)&&(a=F1(e,a,t,n)),Ie(a)&&a.length&&(a=O1(e,a,t,r.isIndexable)),rf(e,a)&&(a=Ao(a,o,s&&s[e],r)),a}function F1(t,e,n,i){const{_proxy:o,_context:s,_subProxy:r,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,r||i);return a.delete(t),rf(t,l)&&(l=af(o._scopes,o,t,l)),l}function O1(t,e,n,i){const{_proxy:o,_context:s,_subProxy:r,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(ae(e[0])){const l=e,u=o._scopes.filter(d=>d!==l);e=[];for(const d of l){const h=af(u,o,t,d);e.push(Ao(h,s,r&&r[t],a))}}return e}function $v(t,e,n){return oi(t)?t(e,n):t}const U1=(t,e)=>t===!0?e:typeof t=="string"?Zs(e,t):void 0;function B1(t,e,n,i,o){for(const s of e){const r=U1(n,s);if(r){t.add(r);const a=$v(r._fallback,n,o);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(r===!1&&typeof i<"u"&&n!==i)return null}return!1}function af(t,e,n,i){const o=e._rootScopes,s=$v(e._fallback,n,i),r=[...t,...o],a=new Set;a.add(i);let l=mh(a,r,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=mh(a,r,s,l,i),l===null)?!1:sf(Array.from(a),[""],o,s,()=>V1(e,n,i))}function mh(t,e,n,i,o){for(;n;)n=B1(t,e,n,i,o);return n}function V1(t,e,n){const i=t._getTarget();e in i||(i[e]={});const o=i[e];return Ie(o)&&ae(n)?n:o||{}}function H1(t,e,n,i){let o;for(const s of e)if(o=Gv(z1(s,t),n),typeof o<"u")return rf(t,o)?af(n,i,t,o):o}function Gv(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function gh(t){let e=t._keys;return e||(e=t._keys=$1(t._scopes)),e}function $1(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(o=>!o.startsWith("_")))e.add(i);return Array.from(e)}function G1(t,e,n,i){const{iScale:o}=t,{key:s="r"}=this._parsing,r=new Array(i);let a,l,u,d;for(a=0,l=i;a<l;++a)u=a+n,d=e[u],r[a]={r:o.parse(Zs(d,s),u)};return r}const q1=Number.EPSILON||1e-14,Po=(t,e)=>e<t.length&&!t[e].skip&&t[e],qv=t=>t==="x"?"y":"x";function W1(t,e,n,i){const o=t.skip?e:t,s=e,r=n.skip?e:n,a=Tu(s,o),l=Tu(r,s);let u=a/(a+l),d=l/(a+l);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const h=i*u,m=i*d;return{previous:{x:s.x-h*(r.x-o.x),y:s.y-h*(r.y-o.y)},next:{x:s.x+m*(r.x-o.x),y:s.y+m*(r.y-o.y)}}}function J1(t,e,n){const i=t.length;let o,s,r,a,l,u=Po(t,0);for(let d=0;d<i-1;++d)if(l=u,u=Po(t,d+1),!(!l||!u)){if(Is(e[d],0,q1)){n[d]=n[d+1]=0;continue}o=n[d]/e[d],s=n[d+1]/e[d],a=Math.pow(o,2)+Math.pow(s,2),!(a<=9)&&(r=3/Math.sqrt(a),n[d]=o*r*e[d],n[d+1]=s*r*e[d])}}function Y1(t,e,n="x"){const i=qv(n),o=t.length;let s,r,a,l=Po(t,0);for(let u=0;u<o;++u){if(r=a,a=l,l=Po(t,u+1),!a)continue;const d=a[n],h=a[i];r&&(s=(d-r[n])/3,a[`cp1${n}`]=d-s,a[`cp1${i}`]=h-s*e[u]),l&&(s=(l[n]-d)/3,a[`cp2${n}`]=d+s,a[`cp2${i}`]=h+s*e[u])}}function K1(t,e="x"){const n=qv(e),i=t.length,o=Array(i).fill(0),s=Array(i);let r,a,l,u=Po(t,0);for(r=0;r<i;++r)if(a=l,l=u,u=Po(t,r+1),!!l){if(u){const d=u[e]-l[e];o[r]=d!==0?(u[n]-l[n])/d:0}s[r]=a?u?Io(o[r-1])!==Io(o[r])?0:(o[r-1]+o[r])/2:o[r-1]:o[r]}J1(t,o,s),Y1(t,s,e)}function jr(t,e,n){return Math.max(Math.min(t,n),e)}function Q1(t,e){let n,i,o,s,r,a=_n(t[0],e);for(n=0,i=t.length;n<i;++n)r=s,s=a,a=n<i-1&&_n(t[n+1],e),s&&(o=t[n],r&&(o.cp1x=jr(o.cp1x,e.left,e.right),o.cp1y=jr(o.cp1y,e.top,e.bottom)),a&&(o.cp2x=jr(o.cp2x,e.left,e.right),o.cp2y=jr(o.cp2y,e.top,e.bottom)))}function X1(t,e,n,i,o){let s,r,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")K1(t,o);else{let u=i?t[t.length-1]:t[0];for(s=0,r=t.length;s<r;++s)a=t[s],l=W1(u,a,t[Math.min(s+1,r-(i?0:1))%r],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&Q1(t,n)}function lf(){return typeof window<"u"&&typeof document<"u"}function cf(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ja(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Tl=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Z1(t,e){return Tl(t).getPropertyValue(e)}const eC=["top","right","bottom","left"];function Ei(t,e,n){const i={};n=n?"-"+n:"";for(let o=0;o<4;o++){const s=eC[o];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const tC=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function nC(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:o,offsetY:s}=i;let r=!1,a,l;if(tC(o,s,t.target))a=o,l=s;else{const u=e.getBoundingClientRect();a=i.clientX-u.left,l=i.clientY-u.top,r=!0}return{x:a,y:l,box:r}}function xi(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,o=Tl(n),s=o.boxSizing==="border-box",r=Ei(o,"padding"),a=Ei(o,"border","width"),{x:l,y:u,box:d}=nC(t,n),h=r.left+(d&&a.left),m=r.top+(d&&a.top);let{width:g,height:v}=e;return s&&(g-=r.width+a.width,v-=r.height+a.height),{x:Math.round((l-h)/g*n.width/i),y:Math.round((u-m)/v*n.height/i)}}function iC(t,e,n){let i,o;if(e===void 0||n===void 0){const s=t&&cf(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const r=s.getBoundingClientRect(),a=Tl(s),l=Ei(a,"border","width"),u=Ei(a,"padding");e=r.width-u.width-l.width,n=r.height-u.height-l.height,i=Ja(a.maxWidth,s,"clientWidth"),o=Ja(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Ga,maxHeight:o||Ga}}const Gn=t=>Math.round(t*10)/10;function oC(t,e,n,i){const o=Tl(t),s=Ei(o,"margin"),r=Ja(o.maxWidth,t,"clientWidth")||Ga,a=Ja(o.maxHeight,t,"clientHeight")||Ga,l=iC(t,e,n);let{width:u,height:d}=l;if(o.boxSizing==="content-box"){const m=Ei(o,"border","width"),g=Ei(o,"padding");u-=g.width+m.width,d-=g.height+m.height}return u=Math.max(0,u-s.width),d=Math.max(0,i?u/i:d-s.height),u=Gn(Math.min(u,r,l.maxWidth)),d=Gn(Math.min(d,a,l.maxHeight)),u&&!d&&(d=Gn(u/2)),(e!==void 0||n!==void 0)&&i&&l.height&&d>l.height&&(d=l.height,u=Gn(Math.floor(d*i))),{width:u,height:d}}function xh(t,e,n){const i=e||1,o=Gn(t.height*i),s=Gn(t.width*i);t.height=Gn(t.height),t.width=Gn(t.width);const r=t.canvas;return r.style&&(n||!r.style.height&&!r.style.width)&&(r.style.height=`${t.height}px`,r.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||r.height!==o||r.width!==s?(t.currentDevicePixelRatio=i,r.height=o,r.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const sC=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};lf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function vh(t,e){const n=Z1(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function vi(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function rC(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function aC(t,e,n,i){const o={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},r=vi(t,o,n),a=vi(o,s,n),l=vi(s,e,n),u=vi(r,a,n),d=vi(a,l,n);return vi(u,d,n)}const lC=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},cC=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function go(t,e,n){return t?lC(e,n):cC()}function Wv(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Jv(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Yv(t){return t==="angle"?{between:Mv,compare:a1,normalize:_t}:{between:so,compare:(e,n)=>e-n,normalize:e=>e}}function yh({start:t,end:e,count:n,loop:i,style:o}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:o}}function uC(t,e,n){const{property:i,start:o,end:s}=n,{between:r,normalize:a}=Yv(i),l=e.length;let{start:u,end:d,loop:h}=t,m,g;if(h){for(u+=l,d+=l,m=0,g=l;m<g&&r(a(e[u%l][i]),o,s);++m)u--,d--;u%=l,d%=l}return d<u&&(d+=l),{start:u,end:d,loop:h,style:t.style}}function Kv(t,e,n){if(!n)return[t];const{property:i,start:o,end:s}=n,r=e.length,{compare:a,between:l,normalize:u}=Yv(i),{start:d,end:h,loop:m,style:g}=uC(t,e,n),v=[];let _=!1,x=null,y,b,w;const C=()=>l(o,w,y)&&a(o,w)!==0,E=()=>a(s,y)===0||l(s,w,y),N=()=>_||C(),T=()=>!_||E();for(let S=d,k=d;S<=h;++S)b=e[S%r],!b.skip&&(y=u(b[i]),y!==w&&(_=l(y,o,s),x===null&&N()&&(x=a(y,o)===0?S:k),x!==null&&T()&&(v.push(yh({start:x,end:S,loop:m,count:r,style:g})),x=null),k=S,w=y));return x!==null&&v.push(yh({start:x,end:h,loop:m,count:r,style:g})),v}function Qv(t,e){const n=[],i=t.segments;for(let o=0;o<i.length;o++){const s=Kv(i[o],t.points,e);s.length&&n.push(...s)}return n}function dC(t,e,n,i){let o=0,s=e-1;if(n&&!i)for(;o<e&&!t[o].skip;)o++;for(;o<e&&t[o].skip;)o++;for(o%=e,n&&(s+=o);s>o&&t[s%e].skip;)s--;return s%=e,{start:o,end:s}}function fC(t,e,n,i){const o=t.length,s=[];let r=e,a=t[e],l;for(l=e+1;l<=n;++l){const u=t[l%o];u.skip||u.stop?a.skip||(i=!1,s.push({start:e%o,end:(l-1)%o,loop:i}),e=r=u.stop?l:null):(r=l,a.skip&&(e=l)),a=u}return r!==null&&s.push({start:e%o,end:r%o,loop:i}),s}function pC(t,e){const n=t.points,i=t.options.spanGaps,o=n.length;if(!o)return[];const s=!!t._loop,{start:r,end:a}=dC(n,o,s,i);if(i===!0)return _h(t,[{start:r,end:a,loop:s}],n,e);const l=a<r?a+o:a,u=!!t._fullLoop&&r===0&&a===o-1;return _h(t,fC(n,r,l,u),n,e)}function _h(t,e,n,i){return!i||!i.setContext||!n?e:hC(t,e,n,i)}function hC(t,e,n,i){const o=t._chart.getContext(),s=bh(t.options),{_datasetIndex:r,options:{spanGaps:a}}=t,l=n.length,u=[];let d=s,h=e[0].start,m=h;function g(v,_,x,y){const b=a?-1:1;if(v!==_){for(v+=l;n[v%l].skip;)v-=b;for(;n[_%l].skip;)_+=b;v%l!==_%l&&(u.push({start:v%l,end:_%l,loop:x,style:y}),d=y,h=_%l)}}for(const v of e){h=a?h:v.start;let _=n[h%l],x;for(m=h+1;m<=v.end;m++){const y=n[m%l];x=bh(i.setContext(li(o,{type:"segment",p0:_,p1:y,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:r}))),mC(x,d)&&g(h,m-1,v.loop,d),_=y,d=x}h<m-1&&g(h,m-1,v.loop,d)}return u}function bh(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function mC(t,e){if(!e)return!1;const n=[],i=function(o,s){return nf(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Fr(t,e,n){return t.options.clip?t[n]:e[n]}function gC(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Fr(n,e,"left"),right:Fr(n,e,"right"),top:Fr(i,e,"top"),bottom:Fr(i,e,"bottom")}:e}function Xv(t,e){const n=e._clip;if(n.disabled)return!1;const i=gC(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class xC{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,o){const s=n.listeners[o],r=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:r,currentStep:Math.min(i-n.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Dv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,o)=>{if(!i.running||!i.items.length)return;const s=i.items;let r=s.length-1,a=!1,l;for(;r>=0;--r)l=s[r],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[r]=s[s.length-1],s.pop());a&&(o.draw(),this._notify(o,i,e,"progress")),s.length||(i.running=!1,this._notify(o,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,o)=>Math.max(i,o._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let o=i.length-1;for(;o>=0;--o)i[o].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var pn=new xC;const wh="transparent",vC={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=fh(t||wh),o=i.valid&&fh(e||wh);return o&&o.valid?o.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class yC{constructor(e,n,i,o){const s=n[i];o=zr([e.to,o,s,e.from]);const r=zr([e.from,s,o]);this._active=!0,this._fn=e.fn||vC[e.type||typeof r],this._easing=Ns[e.easing]||Ns.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=r,this._to=o,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const o=this._target[this._prop],s=i-this._start,r=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=zr([e.to,n,o,e.from]),this._from=zr([e.from,o,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,o=this._prop,s=this._from,r=this._loop,a=this._to;let l;if(this._active=s!==a&&(r||n<i),!this._active){this._target[o]=a,this._notify(!0);return}if(n<0){this._target[o]=s;return}l=n/i%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[o]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let o=0;o<i.length;o++)i[o][n]()}}class Zv{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ae(e))return;const n=Object.keys(Me.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(o=>{const s=e[o];if(!ae(s))return;const r={};for(const a of n)r[a]=s[a];(Ie(s.properties)&&s.properties||[o]).forEach(a=>{(a===o||!i.has(a))&&i.set(a,r)})})}_animateOptions(e,n){const i=n.options,o=bC(e,i);if(!o)return[];const s=this._createAnimations(o,i);return i.$shared&&_C(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,o=[],s=e.$animations||(e.$animations={}),r=Object.keys(n),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const u=r[l];if(u.charAt(0)==="$")continue;if(u==="options"){o.push(...this._animateOptions(e,n));continue}const d=n[u];let h=s[u];const m=i.get(u);if(h)if(m&&h.active()){h.update(m,d,a);continue}else h.cancel();if(!m||!m.duration){e[u]=d;continue}s[u]=h=new yC(m,e,u,d),o.push(h)}return o}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return pn.add(this._chart,i),!0}}function _C(t,e){const n=[],i=Object.keys(e);for(let o=0;o<i.length;o++){const s=t[i[o]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function bC(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Sh(t,e){const n=t&&t.options||{},i=n.reverse,o=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:o,end:i?o:s}}function wC(t,e,n){if(n===!1)return!1;const i=Sh(t,n),o=Sh(e,n);return{top:o.end,right:i.end,bottom:o.start,left:i.start}}function SC(t){let e,n,i,o;return ae(t)?(e=t.top,n=t.right,i=t.bottom,o=t.left):e=n=i=o=t,{top:e,right:n,bottom:i,left:o,disabled:t===!1}}function ey(t,e){const n=[],i=t._getSortedDatasetMetas(e);let o,s;for(o=0,s=i.length;o<s;++o)n.push(i[o].index);return n}function Ch(t,e,n,i={}){const o=t.keys,s=i.mode==="single";let r,a,l,u;if(e===null)return;let d=!1;for(r=0,a=o.length;r<a;++r){if(l=+o[r],l===n){if(d=!0,i.all)continue;break}u=t.values[l],Re(u)&&(s||e===0||Io(e)===Io(u))&&(e+=u)}return!d&&!i.all?0:e}function CC(t,e){const{iScale:n,vScale:i}=e,o=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",r=Object.keys(t),a=new Array(r.length);let l,u,d;for(l=0,u=r.length;l<u;++l)d=r[l],a[l]={[o]:d,[s]:t[d]};return a}function yc(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function kC(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function EC(t){const{min:e,max:n,minDefined:i,maxDefined:o}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:o?n:Number.POSITIVE_INFINITY}}function TC(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function kh(t,e,n,i){for(const o of e.getMatchingVisibleMetas(i).reverse()){const s=t[o.index];if(n&&s>0||!n&&s<0)return o.index}return null}function Eh(t,e){const{chart:n,_cachedMeta:i}=t,o=n._stacks||(n._stacks={}),{iScale:s,vScale:r,index:a}=i,l=s.axis,u=r.axis,d=kC(s,r,i),h=e.length;let m;for(let g=0;g<h;++g){const v=e[g],{[l]:_,[u]:x}=v,y=v._stacks||(v._stacks={});m=y[u]=TC(o,d,_),m[a]=x,m._top=kh(m,r,!0,i.type),m._bottom=kh(m,r,!1,i.type);const b=m._visualValues||(m._visualValues={});b[a]=x}}function _c(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function IC(t,e){return li(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function NC(t,e,n){return li(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Xo(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const o of e){const s=o._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const bc=t=>t==="reset"||t==="none",Th=(t,e)=>e?t:Object.assign({},t),AC=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:ey(n,!0),values:null};class Ti{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=yc(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Xo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),o=(h,m,g,v)=>h==="x"?m:h==="r"?v:g,s=n.xAxisID=se(i.xAxisID,_c(e,"x")),r=n.yAxisID=se(i.yAxisID,_c(e,"y")),a=n.rAxisID=se(i.rAxisID,_c(e,"r")),l=n.indexAxis,u=n.iAxisID=o(l,s,r,a),d=n.vAxisID=o(l,r,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(r),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&ch(this._data,this),e._stacked&&Xo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ae(n)){const o=this._cachedMeta;this._data=CC(n,o)}else if(i!==n){if(i){ch(i,this);const o=this._cachedMeta;Xo(o),o._parsed=[]}n&&Object.isExtensible(n)&&d1(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let o=!1;this._dataCheck();const s=n._stacked;n._stacked=yc(n.vScale,n),n.stack!==i.stack&&(o=!0,Xo(n),n.stack=i.stack),this._resyncElements(e),(o||s!==n._stacked)&&(Eh(this,n._parsed),n._stacked=yc(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:o}=this,{iScale:s,_stacked:r}=i,a=s.axis;let l=e===0&&n===o.length?!0:i._sorted,u=e>0&&i._parsed[e-1],d,h,m;if(this._parsing===!1)i._parsed=o,i._sorted=!0,m=o;else{Ie(o[e])?m=this.parseArrayData(i,o,e,n):ae(o[e])?m=this.parseObjectData(i,o,e,n):m=this.parsePrimitiveData(i,o,e,n);const g=()=>h[a]===null||u&&h[a]<u[a];for(d=0;d<n;++d)i._parsed[d+e]=h=m[d],l&&(g()&&(l=!1),u=h);i._sorted=l}r&&Eh(this,m)}parsePrimitiveData(e,n,i,o){const{iScale:s,vScale:r}=e,a=s.axis,l=r.axis,u=s.getLabels(),d=s===r,h=new Array(o);let m,g,v;for(m=0,g=o;m<g;++m)v=m+i,h[m]={[a]:d||s.parse(u[v],v),[l]:r.parse(n[v],v)};return h}parseArrayData(e,n,i,o){const{xScale:s,yScale:r}=e,a=new Array(o);let l,u,d,h;for(l=0,u=o;l<u;++l)d=l+i,h=n[d],a[l]={x:s.parse(h[0],d),y:r.parse(h[1],d)};return a}parseObjectData(e,n,i,o){const{xScale:s,yScale:r}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(o);let d,h,m,g;for(d=0,h=o;d<h;++d)m=d+i,g=n[m],u[d]={x:s.parse(Zs(g,a),m),y:r.parse(Zs(g,l),m)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const o=this.chart,s=this._cachedMeta,r=n[e.axis],a={keys:ey(o,!0),values:n._stacks[e.axis]._visualValues};return Ch(a,r,s.index,{mode:i})}updateRangeFromParsed(e,n,i,o){const s=i[n.axis];let r=s===null?NaN:s;const a=o&&i._stacks[n.axis];o&&a&&(o.values=a,r=Ch(o,s,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,n){const i=this._cachedMeta,o=i._parsed,s=i._sorted&&e===i.iScale,r=o.length,a=this._getOtherScale(e),l=AC(n,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=EC(a);let m,g;function v(){g=o[m];const _=g[a.axis];return!Re(g[e.axis])||d>_||h<_}for(m=0;m<r&&!(!v()&&(this.updateRangeFromParsed(u,e,g,l),s));++m);if(s){for(m=r-1;m>=0;--m)if(!v()){this.updateRangeFromParsed(u,e,g,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let o,s,r;for(o=0,s=n.length;o<s;++o)r=n[o][e.axis],Re(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,o=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:o?""+o.getLabelForValue(s[o.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=SC(se(this.options.clip,wC(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,o=i.data||[],s=n.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||o.length-a,u=this.options.drawActiveElementsOnTop;let d;for(i.dataset&&i.dataset.draw(e,s,a,l),d=a;d<a+l;++d){const h=o[d];h.hidden||(h.active&&u?r.push(h):h.draw(e,s))}for(d=0;d<r.length;++d)r[d].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const o=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const r=this._cachedMeta.data[e];s=r.$context||(r.$context=NC(this.getContext(),e,r)),s.parsed=this.getParsed(e),s.raw=o.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=IC(this.chart.getContext(),this.index)),s.dataset=o,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const o=n==="active",s=this._cachedDataOpts,r=e+"-"+n,a=s[r],l=this.enableOptionSharing&&$a(i);if(a)return Th(a,l);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),h=o?[`${e}Hover`,"hover",e,""]:[e,""],m=u.getOptionScopes(this.getDataset(),d),g=Object.keys(Me.elements[e]),v=()=>this.getContext(i,o,n),_=u.resolveNamedOptions(m,g,v,h);return _.$shared&&(_.$shared=l,s[r]=Object.freeze(Th(_,l))),_}_resolveAnimations(e,n,i){const o=this.chart,s=this._cachedDataOpts,r=`animation-${n}`,a=s[r];if(a)return a;let l;if(o.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),m=d.getOptionScopes(this.getDataset(),h);l=d.createResolver(m,this.getContext(e,i,n))}const u=new Zv(o,l&&l.animations);return l&&l._cacheable&&(s[r]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||bc(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),o=this._sharedOptions,s=this.getSharedOptions(i),r=this.includeOptions(n,s)||s!==o;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:r}}updateElement(e,n,i,o){bc(o)?Object.assign(e,i):this._resolveAnimations(n,o).update(e,i)}updateSharedOptions(e,n,i){e&&!bc(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,o){e.active=o;const s=this.getStyle(n,o);this._resolveAnimations(n,i,o).update(e,{options:!o&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const o=i.length,s=n.length,r=Math.min(s,o);r&&this.parse(0,r),s>o?this._insertElements(o,s-o,e):s<o&&this._removeElements(s,o-s)}_insertElements(e,n,i=!0){const o=this._cachedMeta,s=o.data,r=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=r;a--)u[a]=u[a-n]};for(l(s),a=e;a<r;++a)s[a]=new this.dataElementType;this._parsing&&l(o._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,o){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const o=i._parsed.splice(e,n);i._stacked&&Xo(i,o)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,o]=e;this[n](i,o)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}H(Ti,"defaults",{}),H(Ti,"datasetElementType",null),H(Ti,"dataElementType",null);class ca extends Ti{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:o=[],_dataset:s}=n,r=this.chart._animationsDisabled;let{start:a,count:l}=jv(n,o,r);this._drawStart=a,this._drawCount=l,Fv(n)&&(a=0,l=o.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=o;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:u},e),this.updateElements(o,a,l,e)}updateElements(e,n,i,o){const s=o==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,o),m=r.axis,g=a.axis,{spanGaps:v,segment:_}=this.options,x=No(v)?v:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||o==="none",b=n+i,w=e.length;let C=n>0&&this.getParsed(n-1);for(let E=0;E<w;++E){const N=e[E],T=y?N:{};if(E<n||E>=b){T.skip=!0;continue}const S=this.getParsed(E),k=fe(S[g]),I=T[m]=r.getPixelForValue(S[m],E),P=T[g]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,S,l):S[g],E);T.skip=isNaN(I)||isNaN(P)||k,T.stop=E>0&&Math.abs(S[m]-C[m])>x,_&&(T.parsed=S,T.raw=u.data[E]),h&&(T.options=d||this.resolveDataElementOptions(E,N.active?"active":o)),y||this.updateElement(N,E,T,o),C=S}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,o=e.data||[];if(!o.length)return i;const s=o[0].size(this.resolveDataElementOptions(0)),r=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(i,s,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}H(ca,"id","line"),H(ca,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),H(ca,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ua extends Ti{getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,o){return G1.bind(this)(e,n,i,o)}update(e){const n=this._cachedMeta,i=n.dataset,o=n.data||[],s=n.iScale.getLabels();if(i.points=o,e!=="resize"){const r=this.resolveDatasetElementOptions(e);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===o.length,options:r};this.updateElement(i,void 0,a,e)}this.updateElements(o,0,o.length,e)}updateElements(e,n,i,o){const s=this._cachedMeta.rScale,r=o==="reset";for(let a=n;a<n+i;a++){const l=e[a],u=this.resolveDataElementOptions(a,l.active?"active":o),d=s.getPointPositionForValue(a,this.getParsed(a).r),h=r?s.xCenter:d.x,m=r?s.yCenter:d.y,g={x:h,y:m,angle:d.angle,skip:isNaN(h)||isNaN(m),options:u};this.updateElement(l,a,g,o)}}}H(ua,"id","radar"),H(ua,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),H(ua,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Ps extends Ti{getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=n,r=this.getParsed(e),a=o.getLabelForValue(r.x),l=s.getLabelForValue(r.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:i=[]}=n,o=this.chart._animationsDisabled;let{start:s,count:r}=jv(n,i,o);if(this._drawStart=s,this._drawCount=r,Fv(n)&&(s=0,r=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(a,void 0,{animated:!o,options:u},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(i,s,r,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,i,o){const s=o==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(n,o),h=this.getSharedOptions(d),m=this.includeOptions(o,h),g=r.axis,v=a.axis,{spanGaps:_,segment:x}=this.options,y=No(_)?_:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||s||o==="none";let w=n>0&&this.getParsed(n-1);for(let C=n;C<n+i;++C){const E=e[C],N=this.getParsed(C),T=b?E:{},S=fe(N[v]),k=T[g]=r.getPixelForValue(N[g],C),I=T[v]=s||S?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[v],C);T.skip=isNaN(k)||isNaN(I)||S,T.stop=C>0&&Math.abs(N[g]-w[g])>y,x&&(T.parsed=N,T.raw=u.data[C]),m&&(T.options=h||this.resolveDataElementOptions(C,E.active?"active":o)),b||this.updateElement(E,C,T,o),w=N}this.updateSharedOptions(h,o,d)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,o=i.options&&i.options.borderWidth||0;if(!n.length)return o;const s=n[0].size(this.resolveDataElementOptions(0)),r=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(o,s,r)/2}}H(Ps,"id","scatter"),H(Ps,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),H(Ps,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function fi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class uf{constructor(e){H(this,"options");this.options=e||{}}static override(e){Object.assign(uf.prototype,e)}init(){}formats(){return fi()}parse(){return fi()}format(){return fi()}add(){return fi()}diff(){return fi()}startOf(){return fi()}endOf(){return fi()}}var PC={_date:uf};function RC(t,e,n,i){const{controller:o,data:s,_sorted:r}=t,a=o._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&r&&s.length){const u=a._reversePixels?c1:Si;if(i){if(o._sharedOptions){const d=s[0],h=typeof d.getRange=="function"&&d.getRange(e);if(h){const m=u(s,e,n-h),g=u(s,e,n+h);return{lo:m.lo,hi:g.hi}}}}else{const d=u(s,e,n);if(l){const{vScale:h}=o._cachedMeta,{_parsed:m}=t,g=m.slice(0,d.lo+1).reverse().findIndex(_=>!fe(_[h.axis]));d.lo-=Math.max(0,g);const v=m.slice(d.hi).findIndex(_=>!fe(_[h.axis]));d.hi+=Math.max(0,v)}return d}}return{lo:0,hi:s.length-1}}function Il(t,e,n,i,o){const s=t.getSortedVisibleDatasetMetas(),r=n[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:d}=s[a],{lo:h,hi:m}=RC(s[a],e,r,o);for(let g=h;g<=m;++g){const v=d[g];v.skip||i(v,u,g)}}}function MC(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,o){const s=e?Math.abs(i.x-o.x):0,r=n?Math.abs(i.y-o.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(r,2))}}function wc(t,e,n,i,o){const s=[];return!o&&!t.isPointInArea(e)||Il(t,n,e,function(a,l,u){!o&&!_n(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function LC(t,e,n,i){let o=[];function s(r,a,l){const{startAngle:u,endAngle:d}=r.getProps(["startAngle","endAngle"],i),{angle:h}=r1(r,{x:e.x,y:e.y});Mv(h,u,d)&&o.push({element:r,datasetIndex:a,index:l})}return Il(t,n,e,s),o}function DC(t,e,n,i,o,s){let r=[];const a=MC(n);let l=Number.POSITIVE_INFINITY;function u(d,h,m){const g=d.inRange(e.x,e.y,o);if(i&&!g)return;const v=d.getCenterPoint(o);if(!(!!s||t.isPointInArea(v))&&!g)return;const x=a(e,v);x<l?(r=[{element:d,datasetIndex:h,index:m}],l=x):x===l&&r.push({element:d,datasetIndex:h,index:m})}return Il(t,n,e,u),r}function Sc(t,e,n,i,o,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?LC(t,e,n,o):DC(t,e,n,i,o,s)}function Ih(t,e,n,i,o){const s=[],r=n==="x"?"inXRange":"inYRange";let a=!1;return Il(t,n,e,(l,u,d)=>{l[r]&&l[r](e[n],o)&&(s.push({element:l,datasetIndex:u,index:d}),a=a||l.inRange(e.x,e.y,o))}),i&&!a?[]:s}var zC={modes:{index(t,e,n,i){const o=xi(e,t),s=n.axis||"x",r=n.includeInvisible||!1,a=n.intersect?wc(t,o,s,i,r):Sc(t,o,s,!1,i,r),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const d=a[0].index,h=u.data[d];h&&!h.skip&&l.push({element:h,datasetIndex:u.index,index:d})}),l):[]},dataset(t,e,n,i){const o=xi(e,t),s=n.axis||"xy",r=n.includeInvisible||!1;let a=n.intersect?wc(t,o,s,i,r):Sc(t,o,s,!1,i,r);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let d=0;d<u.length;++d)a.push({element:u[d],datasetIndex:l,index:d})}return a},point(t,e,n,i){const o=xi(e,t),s=n.axis||"xy",r=n.includeInvisible||!1;return wc(t,o,s,i,r)},nearest(t,e,n,i){const o=xi(e,t),s=n.axis||"xy",r=n.includeInvisible||!1;return Sc(t,o,s,n.intersect,i,r)},x(t,e,n,i){const o=xi(e,t);return Ih(t,o,"x",n.intersect,i)},y(t,e,n,i){const o=xi(e,t);return Ih(t,o,"y",n.intersect,i)}}};const ty=["left","top","right","bottom"];function Zo(t,e){return t.filter(n=>n.pos===e)}function Nh(t,e){return t.filter(n=>ty.indexOf(n.pos)===-1&&n.box.axis===e)}function es(t,e){return t.sort((n,i)=>{const o=e?i:n,s=e?n:i;return o.weight===s.weight?o.index-s.index:o.weight-s.weight})}function jC(t){const e=[];let n,i,o,s,r,a;for(n=0,i=(t||[]).length;n<i;++n)o=t[n],{position:s,options:{stack:r,stackWeight:a=1}}=o,e.push({index:n,box:o,pos:s,horizontal:o.isHorizontal(),weight:o.weight,stack:r&&s+r,stackWeight:a});return e}function FC(t){const e={};for(const n of t){const{stack:i,pos:o,stackWeight:s}=n;if(!i||!ty.includes(o))continue;const r=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=s}return e}function OC(t,e){const n=FC(t),{vBoxMaxWidth:i,hBoxMaxHeight:o}=e;let s,r,a;for(s=0,r=t.length;s<r;++s){a=t[s];const{fullSize:l}=a.box,u=n[a.stack],d=u&&a.stackWeight/u.weight;a.horizontal?(a.width=d?d*i:l&&e.availableWidth,a.height=o):(a.width=i,a.height=d?d*o:l&&e.availableHeight)}return n}function UC(t){const e=jC(t),n=es(e.filter(u=>u.box.fullSize),!0),i=es(Zo(e,"left"),!0),o=es(Zo(e,"right")),s=es(Zo(e,"top"),!0),r=es(Zo(e,"bottom")),a=Nh(e,"x"),l=Nh(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:o.concat(l).concat(r).concat(a),chartArea:Zo(e,"chartArea"),vertical:i.concat(o).concat(l),horizontal:s.concat(r).concat(a)}}function Ah(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function ny(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function BC(t,e,n,i){const{pos:o,box:s}=n,r=t.maxPadding;if(!ae(o)){n.size&&(t[o]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,t[o]+=n.size}s.getPadding&&ny(r,s.getPadding());const a=Math.max(0,e.outerWidth-Ah(r,t,"left","right")),l=Math.max(0,e.outerHeight-Ah(r,t,"top","bottom")),u=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:d}:{same:d,other:u}}function VC(t){const e=t.maxPadding;function n(i){const o=Math.max(e[i]-t[i],0);return t[i]+=o,o}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function HC(t,e){const n=e.maxPadding;function i(o){const s={left:0,top:0,right:0,bottom:0};return o.forEach(r=>{s[r]=Math.max(e[r],n[r])}),s}return i(t?["left","right"]:["top","bottom"])}function hs(t,e,n,i){const o=[];let s,r,a,l,u,d;for(s=0,r=t.length,u=0;s<r;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,HC(a.horizontal,e));const{same:h,other:m}=BC(e,n,a,i);u|=h&&o.length,d=d||m,l.fullSize||o.push(a)}return u&&hs(o,e,n,i)||d}function Or(t,e,n,i,o){t.top=n,t.left=e,t.right=e+i,t.bottom=n+o,t.width=i,t.height=o}function Ph(t,e,n,i){const o=n.padding;let{x:s,y:r}=e;for(const a of t){const l=a.box,u=i[a.stack]||{placed:0,weight:1},d=a.stackWeight/u.weight||1;if(a.horizontal){const h=e.w*d,m=u.size||l.height;$a(u.start)&&(r=u.start),l.fullSize?Or(l,o.left,r,n.outerWidth-o.right-o.left,m):Or(l,e.left+u.placed,r,h,m),u.start=r,u.placed+=h,r=l.bottom}else{const h=e.h*d,m=u.size||l.width;$a(u.start)&&(s=u.start),l.fullSize?Or(l,s,o.top,m,n.outerHeight-o.bottom-o.top):Or(l,s,e.top+u.placed,m,h),u.start=s,u.placed+=h,s=l.right}}e.x=s,e.y=r}var Lt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const o=nt(t.options.layout.padding),s=Math.max(e-o.width,0),r=Math.max(n-o.height,0),a=UC(t.boxes),l=a.vertical,u=a.horizontal;he(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const d=l.reduce((_,x)=>x.box.options&&x.box.options.display===!1?_:_+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:o,availableWidth:s,availableHeight:r,vBoxMaxWidth:s/2/d,hBoxMaxHeight:r/2}),m=Object.assign({},o);ny(m,nt(i));const g=Object.assign({maxPadding:m,w:s,h:r,x:o.left,y:o.top},o),v=OC(l.concat(u),h);hs(a.fullSize,g,h,v),hs(l,g,h,v),hs(u,g,h,v)&&hs(l,g,h,v),VC(g),Ph(a.leftAndTop,g,h,v),g.x+=g.w,g.y+=g.h,Ph(a.rightAndBottom,g,h,v),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},he(a.chartArea,_=>{const x=_.box;Object.assign(x,t.chartArea),x.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class iy{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,o){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,o?Math.floor(n/o):i)}}isAttached(e){return!0}updateConfig(e){}}class $C extends iy{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const da="$chartjs",GC={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Rh=t=>t===null||t==="";function qC(t,e){const n=t.style,i=t.getAttribute("height"),o=t.getAttribute("width");if(t[da]={initial:{height:i,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Rh(o)){const s=vh(t,"width");s!==void 0&&(t.width=s)}if(Rh(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=vh(t,"height");s!==void 0&&(t.height=s)}return t}const oy=sC?{passive:!0}:!1;function WC(t,e,n){t&&t.addEventListener(e,n,oy)}function JC(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,oy)}function YC(t,e){const n=GC[t.type]||t.type,{x:i,y:o}=xi(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:o!==void 0?o:null}}function Ya(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function KC(t,e,n){const i=t.canvas,o=new MutationObserver(s=>{let r=!1;for(const a of s)r=r||Ya(a.addedNodes,i),r=r&&!Ya(a.removedNodes,i);r&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}function QC(t,e,n){const i=t.canvas,o=new MutationObserver(s=>{let r=!1;for(const a of s)r=r||Ya(a.removedNodes,i),r=r&&!Ya(a.addedNodes,i);r&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}const er=new Map;let Mh=0;function sy(){const t=window.devicePixelRatio;t!==Mh&&(Mh=t,er.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function XC(t,e){er.size||window.addEventListener("resize",sy),er.set(t,e)}function ZC(t){er.delete(t),er.size||window.removeEventListener("resize",sy)}function ek(t,e,n){const i=t.canvas,o=i&&cf(i);if(!o)return;const s=zv((a,l)=>{const u=o.clientWidth;n(a,l),u<o.clientWidth&&n()},window),r=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,d=l.contentRect.height;u===0&&d===0||s(u,d)});return r.observe(o),XC(t,s),r}function Cc(t,e,n){n&&n.disconnect(),e==="resize"&&ZC(t)}function tk(t,e,n){const i=t.canvas,o=zv(s=>{t.ctx!==null&&n(YC(s,t))},t);return WC(i,e,o),o}class nk extends iy{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(qC(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[da])return!1;const i=n[da].initial;["height","width"].forEach(s=>{const r=i[s];fe(r)?n.removeAttribute(s):n.setAttribute(s,r)});const o=i.style||{};return Object.keys(o).forEach(s=>{n.style[s]=o[s]}),n.width=n.width,delete n[da],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const o=e.$proxies||(e.$proxies={}),r={attach:KC,detach:QC,resize:ek}[n]||tk;o[n]=r(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),o=i[n];if(!o)return;({attach:Cc,detach:Cc,resize:Cc}[n]||JC)(e,n,o),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,o){return oC(e,n,i,o)}isAttached(e){const n=e&&cf(e);return!!(n&&n.isConnected)}}function ik(t){return!lf()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?$C:nk}class En{constructor(){H(this,"x");H(this,"y");H(this,"active",!1);H(this,"options");H(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return No(this.x)&&No(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const o={};return e.forEach(s=>{o[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),o}}H(En,"defaults",{}),H(En,"defaultRoutes");function ok(t,e){const n=t.options.ticks,i=sk(t),o=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?ak(e):[],r=s.length,a=s[0],l=s[r-1],u=[];if(r>o)return lk(e,u,s,r/o),u;const d=rk(s,e,o);if(r>0){let h,m;const g=r>1?Math.round((l-a)/(r-1)):null;for(Ur(e,u,d,fe(g)?0:a-g,a),h=0,m=r-1;h<m;h++)Ur(e,u,d,s[h],s[h+1]);return Ur(e,u,d,l,fe(g)?e.length:l+g),u}return Ur(e,u,d),u}function sk(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),o=t._maxLength/n;return Math.floor(Math.min(i,o))}function rk(t,e,n){const i=ck(t),o=e.length/n;if(!i)return Math.max(o,1);const s=i1(i);for(let r=0,a=s.length-1;r<a;r++){const l=s[r];if(l>o)return l}return Math.max(o,1)}function ak(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function lk(t,e,n,i){let o=0,s=n[0],r;for(i=Math.ceil(i),r=0;r<t.length;r++)r===s&&(e.push(t[r]),o++,s=n[o*i])}function Ur(t,e,n,i,o){const s=se(i,0),r=Math.min(se(o,t.length),t.length);let a=0,l,u,d;for(n=Math.ceil(n),o&&(l=o-i,n=l/Math.floor(l/n)),d=s;d<0;)a++,d=Math.round(s+a*n);for(u=Math.max(s,0);u<r;u++)u===d&&(e.push(t[u]),a++,d=Math.round(s+a*n))}function ck(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const uk=t=>t==="left"?"right":t==="right"?"left":t,Lh=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Dh=(t,e)=>Math.min(e||t,t);function zh(t,e){const n=[],i=t.length/e,o=t.length;let s=0;for(;s<o;s+=i)n.push(t[Math.floor(s)]);return n}function dk(t,e,n){const i=t.ticks.length,o=Math.min(e,i-1),s=t._startPixel,r=t._endPixel,a=1e-6;let l=t.getPixelForTick(o),u;if(!(n&&(i===1?u=Math.max(l-s,r-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(o-1))/2,l+=o<e?u:-u,l<s-a||l>r+a)))return l}function fk(t,e){he(t,n=>{const i=n.gc,o=i.length/2;let s;if(o>e){for(s=0;s<o;++s)delete n.data[i[s]];i.splice(0,o)}})}function ts(t){return t.drawTicks?t.tickLength:0}function jh(t,e){if(!t.display)return 0;const n=Ue(t.font,e),i=nt(t.padding);return(Ie(t.text)?t.text.length:1)*n.lineHeight+i.height}function pk(t,e){return li(t,{scale:e,type:"scale"})}function hk(t,e,n){return li(t,{tick:n,index:e,type:"tick"})}function mk(t,e,n){let i=tf(t);return(n&&e!=="right"||!n&&e==="right")&&(i=uk(i)),i}function gk(t,e,n,i){const{top:o,left:s,bottom:r,right:a,chart:l}=t,{chartArea:u,scales:d}=l;let h=0,m,g,v;const _=r-o,x=a-s;if(t.isHorizontal()){if(g=Xe(i,s,a),ae(n)){const y=Object.keys(n)[0],b=n[y];v=d[y].getPixelForValue(b)+_-e}else n==="center"?v=(u.bottom+u.top)/2+_-e:v=Lh(t,n,e);m=a-s}else{if(ae(n)){const y=Object.keys(n)[0],b=n[y];g=d[y].getPixelForValue(b)-x+e}else n==="center"?g=(u.left+u.right)/2-x+e:g=Lh(t,n,e);v=Xe(i,r,o),h=n==="left"?-St:St}return{titleX:g,titleY:v,maxWidth:m,rotation:h}}let dr=class ry extends En{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:o}=this;return e=vt(e,Number.POSITIVE_INFINITY),n=vt(n,Number.NEGATIVE_INFINITY),i=vt(i,Number.POSITIVE_INFINITY),o=vt(o,Number.NEGATIVE_INFINITY),{min:vt(e,i),max:vt(n,o),minDefined:Re(e),maxDefined:Re(n)}}getMinMax(e){let{min:n,max:i,minDefined:o,maxDefined:s}=this.getUserBounds(),r;if(o&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)r=a[l].controller.getMinMax(this,e),o||(n=Math.min(n,r.min)),s||(i=Math.max(i,r.max));return n=s&&n>i?i:n,i=o&&n>i?n:i,{min:vt(n,vt(i,n)),max:vt(i,vt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ye(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:o,grace:s,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=D1(this,s,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?zh(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=ok(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ye(this.options.afterUpdate,[this])}beforeSetDimensions(){ye(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ye(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ye(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ye(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,o,s;for(i=0,o=e.length;i<o;i++)s=e[i],s.label=ye(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){ye(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ye(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=Dh(this.ticks.length,e.ticks.maxTicksLimit),o=n.minRotation||0,s=n.maxRotation;let r=o,a,l,u;if(!this._isVisible()||!n.display||o>=s||i<=1||!this.isHorizontal()){this.labelRotation=o;return}const d=this._getLabelSizes(),h=d.widest.width,m=d.highest.height,g=Mt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:g/(i-1),h+6>a&&(a=g/(i-(e.offset?.5:1)),l=this.maxHeight-ts(e.grid)-n.padding-jh(e.title,this.chart.options.font),u=Math.sqrt(h*h+m*m),r=Zd(Math.min(Math.asin(Mt((d.highest.height+6)/a,-1,1)),Math.asin(Mt(l/u,-1,1))-Math.asin(Mt(m/u,-1,1)))),r=Math.max(o,Math.min(s,r))),this.labelRotation=r}afterCalculateLabelRotation(){ye(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ye(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:o,grid:s}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=jh(o,n.options.font);if(a?(e.width=this.maxWidth,e.height=ts(s)+l):(e.height=this.maxHeight,e.width=ts(s)+l),i.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:m}=this._getLabelSizes(),g=i.padding*2,v=$n(this.labelRotation),_=Math.cos(v),x=Math.sin(v);if(a){const y=i.mirror?0:x*h.width+_*m.height;e.height=Math.min(this.maxHeight,e.height+y+g)}else{const y=i.mirror?0:_*h.width+x*m.height;e.width=Math.min(this.maxWidth,e.width+y+g)}this._calculatePadding(u,d,x,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,o){const{ticks:{align:s,padding:r},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,g=0;l?u?(m=o*e.width,g=i*n.height):(m=i*e.height,g=o*n.width):s==="start"?g=n.width:s==="end"?m=e.width:s!=="inner"&&(m=e.width/2,g=n.width/2),this.paddingLeft=Math.max((m-d+r)*this.width/(this.width-d),0),this.paddingRight=Math.max((g-h+r)*this.width/(this.width-h),0)}else{let d=n.height/2,h=e.height/2;s==="start"?(d=0,h=e.height):s==="end"&&(d=n.height,h=0),this.paddingTop=d+r,this.paddingBottom=h+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ye(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)fe(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=zh(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:o,_longestTextCache:s}=this,r=[],a=[],l=Math.floor(n/Dh(n,i));let u=0,d=0,h,m,g,v,_,x,y,b,w,C,E;for(h=0;h<n;h+=l){if(v=e[h].label,_=this._resolveTickFontOptions(h),o.font=x=_.string,y=s[x]=s[x]||{data:{},gc:[]},b=_.lineHeight,w=C=0,!fe(v)&&!Ie(v))w=qa(o,y.data,y.gc,w,v),C=b;else if(Ie(v))for(m=0,g=v.length;m<g;++m)E=v[m],!fe(E)&&!Ie(E)&&(w=qa(o,y.data,y.gc,w,E),C+=b);r.push(w),a.push(C),u=Math.max(w,u),d=Math.max(C,d)}fk(s,n);const N=r.indexOf(u),T=a.indexOf(d),S=k=>({width:r[k]||0,height:a[k]||0});return{first:S(0),last:S(n-1),widest:S(N),highest:S(T),widths:r,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return l1(this._alignToPixels?di(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=hk(this.getContext(),e,i))}return this.$context||(this.$context=pk(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=$n(this.labelRotation),i=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n)),s=this._getLabelSizes(),r=e.autoSkipPadding||0,a=s?s.widest.width+r:0,l=s?s.highest.height+r:0;return this.isHorizontal()?l*i>a*o?a/i:l/o:l*o<a*i?l/i:a/o}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,o=this.options,{grid:s,position:r,border:a}=o,l=s.offset,u=this.isHorizontal(),h=this.ticks.length+(l?1:0),m=ts(s),g=[],v=a.setContext(this.getContext()),_=v.display?v.width:0,x=_/2,y=function(q){return di(i,q,_)};let b,w,C,E,N,T,S,k,I,P,L,M;if(r==="top")b=y(this.bottom),T=this.bottom-m,k=b-x,P=y(e.top)+x,M=e.bottom;else if(r==="bottom")b=y(this.top),P=e.top,M=y(e.bottom)-x,T=b+x,k=this.top+m;else if(r==="left")b=y(this.right),N=this.right-m,S=b-x,I=y(e.left)+x,L=e.right;else if(r==="right")b=y(this.left),I=e.left,L=y(e.right)-x,N=b+x,S=this.left+m;else if(n==="x"){if(r==="center")b=y((e.top+e.bottom)/2+.5);else if(ae(r)){const q=Object.keys(r)[0],j=r[q];b=y(this.chart.scales[q].getPixelForValue(j))}P=e.top,M=e.bottom,T=b+x,k=T+m}else if(n==="y"){if(r==="center")b=y((e.left+e.right)/2);else if(ae(r)){const q=Object.keys(r)[0],j=r[q];b=y(this.chart.scales[q].getPixelForValue(j))}N=b-x,S=N-m,I=e.left,L=e.right}const V=se(o.ticks.maxTicksLimit,h),W=Math.max(1,Math.ceil(h/V));for(w=0;w<h;w+=W){const q=this.getContext(w),j=s.setContext(q),A=a.setContext(q),D=j.lineWidth,U=j.color,R=A.dash||[],O=A.dashOffset,F=j.tickWidth,Y=j.tickColor,X=j.tickBorderDash||[],Q=j.tickBorderDashOffset;C=dk(this,w,l),C!==void 0&&(E=di(i,C,D),u?N=S=I=L=E:T=k=P=M=E,g.push({tx1:N,ty1:T,tx2:S,ty2:k,x1:I,y1:P,x2:L,y2:M,width:D,color:U,borderDash:R,borderDashOffset:O,tickWidth:F,tickColor:Y,tickBorderDash:X,tickBorderDashOffset:Q}))}return this._ticksLength=h,this._borderValue=b,g}_computeLabelItems(e){const n=this.axis,i=this.options,{position:o,ticks:s}=i,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:d,mirror:h}=s,m=ts(i.grid),g=m+d,v=h?-d:g,_=-$n(this.labelRotation),x=[];let y,b,w,C,E,N,T,S,k,I,P,L,M="middle";if(o==="top")N=this.bottom-v,T=this._getXAxisLabelAlignment();else if(o==="bottom")N=this.top+v,T=this._getXAxisLabelAlignment();else if(o==="left"){const W=this._getYAxisLabelAlignment(m);T=W.textAlign,E=W.x}else if(o==="right"){const W=this._getYAxisLabelAlignment(m);T=W.textAlign,E=W.x}else if(n==="x"){if(o==="center")N=(e.top+e.bottom)/2+g;else if(ae(o)){const W=Object.keys(o)[0],q=o[W];N=this.chart.scales[W].getPixelForValue(q)+g}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(o==="center")E=(e.left+e.right)/2-g;else if(ae(o)){const W=Object.keys(o)[0],q=o[W];E=this.chart.scales[W].getPixelForValue(q)}T=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(l==="start"?M="top":l==="end"&&(M="bottom"));const V=this._getLabelSizes();for(y=0,b=a.length;y<b;++y){w=a[y],C=w.label;const W=s.setContext(this.getContext(y));S=this.getPixelForTick(y)+s.labelOffset,k=this._resolveTickFontOptions(y),I=k.lineHeight,P=Ie(C)?C.length:1;const q=P/2,j=W.color,A=W.textStrokeColor,D=W.textStrokeWidth;let U=T;r?(E=S,T==="inner"&&(y===b-1?U=this.options.reverse?"left":"right":y===0?U=this.options.reverse?"right":"left":U="center"),o==="top"?u==="near"||_!==0?L=-P*I+I/2:u==="center"?L=-V.highest.height/2-q*I+I:L=-V.highest.height+I/2:u==="near"||_!==0?L=I/2:u==="center"?L=V.highest.height/2-q*I:L=V.highest.height-P*I,h&&(L*=-1),_!==0&&!W.showLabelBackdrop&&(E+=I/2*Math.sin(_))):(N=S,L=(1-P)*I/2);let R;if(W.showLabelBackdrop){const O=nt(W.backdropPadding),F=V.heights[y],Y=V.widths[y];let X=L-O.top,Q=0-O.left;switch(M){case"middle":X-=F/2;break;case"bottom":X-=F;break}switch(T){case"center":Q-=Y/2;break;case"right":Q-=Y;break;case"inner":y===b-1?Q-=Y:y>0&&(Q-=Y/2);break}R={left:Q,top:X,width:Y+O.width,height:F+O.height,color:W.backdropColor}}x.push({label:C,font:k,textOffset:L,options:{rotation:_,color:j,strokeColor:A,strokeWidth:D,textAlign:U,textBaseline:M,translation:[E,N],backdrop:R}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-$n(this.labelRotation))return e==="top"?"left":"right";let o="center";return n.align==="start"?o="left":n.align==="end"?o="right":n.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:o,padding:s}}=this.options,r=this._getLabelSizes(),a=e+s,l=r.widest.width;let u,d;return n==="left"?o?(d=this.right+s,i==="near"?u="left":i==="center"?(u="center",d+=l/2):(u="right",d+=l)):(d=this.right-a,i==="near"?u="right":i==="center"?(u="center",d-=l/2):(u="left",d=this.left)):n==="right"?o?(d=this.left+s,i==="near"?u="right":i==="center"?(u="center",d-=l/2):(u="left",d-=l)):(d=this.left+a,i==="near"?u="left":i==="center"?(u="center",d+=l/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:o,width:s,height:r}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,o,s,r),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const o=this.ticks.findIndex(s=>s.value===e);return o>=0?n.setContext(this.getContext(o)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,r;const a=(l,u,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(n.display)for(s=0,r=o.length;s<r;++s){const l=o[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:o}}=this,s=i.setContext(this.getContext()),r=i.display?s.width:0;if(!r)return;const a=o.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,d,h,m;this.isHorizontal()?(u=di(e,this.left,r)-r/2,d=di(e,this.right,a)+a/2,h=m=l):(h=di(e,this.top,r)-r/2,m=di(e,this.bottom,a)+a/2,u=d=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(u,h),n.lineTo(d,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,o=this._computeLabelArea();o&&kl(i,o);const s=this.getLabelItems(e);for(const r of s){const a=r.options,l=r.font,u=r.label,d=r.textOffset;Di(i,u,0,d,l,a)}o&&El(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:o}}=this;if(!i.display)return;const s=Ue(i.font),r=nt(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ae(n)?(l+=r.bottom,Ie(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=r.top;const{titleX:u,titleY:d,maxWidth:h,rotation:m}=gk(this,l,n,a);Di(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:m,textAlign:mk(a,n,o),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=se(e.grid&&e.grid.z,-1),o=se(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ry.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",o=[];let s,r;for(s=0,r=n.length;s<r;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&o.push(a)}return o}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ue(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}};class Br{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;yk(n)&&(i=this.register(n));const o=this.items,s=e.id,r=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in o||(o[s]=e,xk(e,r,i),this.override&&Me.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,o=this.scope;i in n&&delete n[i],o&&i in Me[o]&&(delete Me[o][i],this.override&&delete Li[i])}}function xk(t,e,n){const i=Xs(Object.create(null),[n?Me.get(n):{},Me.get(e),t.defaults]);Me.set(e,i),t.defaultRoutes&&vk(e,t.defaultRoutes),t.descriptors&&Me.describe(e,t.descriptors)}function vk(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),o=i.pop(),s=[t].concat(i).join("."),r=e[n].split("."),a=r.pop(),l=r.join(".");Me.route(s,o,l,a)})}function yk(t){return"id"in t&&"defaults"in t}class _k{constructor(){this.controllers=new Br(Ti,"datasets",!0),this.elements=new Br(En,"elements"),this.plugins=new Br(Object,"plugins"),this.scales=new Br(dr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(o=>{const s=i||this._getRegistryForType(o);i||s.isForType(o)||s===this.plugins&&o.id?this._exec(e,s,o):he(o,r=>{const a=i||this._getRegistryForType(r);this._exec(e,a,r)})})}_exec(e,n,i){const o=Xd(e);ye(i["before"+o],[],i),n[e](i),ye(i["after"+o],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const o=n.get(e);if(o===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return o}}var nn=new _k;class bk{constructor(){this._init=void 0}notify(e,n,i,o){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=o?this._descriptors(e).filter(o):this._descriptors(e),r=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),r}_notify(e,n,i,o){o=o||{};for(const s of e){const r=s.plugin,a=r[i],l=[n,o,s.options];if(ye(a,l,r)===!1&&o.cancelable)return!1}return!0}invalidate(){fe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,o=se(i.options&&i.options.plugins,{}),s=wk(i);return o===!1&&!n?[]:Ck(e,s,o,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,o=(s,r)=>s.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(o(n,i),e,"stop"),this._notify(o(i,n),e,"start")}}function wk(t){const e={},n=[],i=Object.keys(nn.plugins.items);for(let s=0;s<i.length;s++)n.push(nn.getPlugin(i[s]));const o=t.plugins||[];for(let s=0;s<o.length;s++){const r=o[s];n.indexOf(r)===-1&&(n.push(r),e[r.id]=!0)}return{plugins:n,localIds:e}}function Sk(t,e){return!e&&t===!1?null:t===!0?{}:t}function Ck(t,{plugins:e,localIds:n},i,o){const s=[],r=t.getContext();for(const a of e){const l=a.id,u=Sk(i[l],o);u!==null&&s.push({plugin:a,options:kk(t.config,{plugin:a,local:n[l]},u,r)})}return s}function kk(t,{plugin:e,local:n},i,o){const s=t.pluginScopeKeys(e),r=t.getOptionScopes(i,s);return n&&e.defaults&&r.push(e.defaults),t.createResolver(r,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Au(t,e){const n=Me.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Ek(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Tk(t,e){return t===e?"_index_":"_value_"}function Fh(t){if(t==="x"||t==="y"||t==="r")return t}function Ik(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Pu(t,...e){if(Fh(t))return t;for(const n of e){const i=n.axis||Ik(n.position)||t.length>1&&Fh(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Oh(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Nk(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Oh(t,"x",n[0])||Oh(t,"y",n[0])}return{}}function Ak(t,e){const n=Li[t.type]||{scales:{}},i=e.scales||{},o=Au(t.type,e),s=Object.create(null);return Object.keys(i).forEach(r=>{const a=i[r];if(!ae(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=Pu(r,a,Nk(r,t),Me.scales[a.type]),u=Tk(l,o),d=n.scales||{};s[r]=Ts(Object.create(null),[{axis:l},a,d[l],d[u]])}),t.data.datasets.forEach(r=>{const a=r.type||t.type,l=r.indexAxis||Au(a,e),d=(Li[a]||{}).scales||{};Object.keys(d).forEach(h=>{const m=Ek(h,l),g=r[m+"AxisID"]||m;s[g]=s[g]||Object.create(null),Ts(s[g],[{axis:m},i[g],d[h]])})}),Object.keys(s).forEach(r=>{const a=s[r];Ts(a,[Me.scales[a.type],Me.scale])}),s}function ay(t){const e=t.options||(t.options={});e.plugins=se(e.plugins,{}),e.scales=Ak(t,e)}function ly(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Pk(t){return t=t||{},t.data=ly(t.data),ay(t),t}const Uh=new Map,cy=new Set;function Vr(t,e){let n=Uh.get(t);return n||(n=e(),Uh.set(t,n),cy.add(n)),n}const ns=(t,e,n)=>{const i=Zs(e,n);i!==void 0&&t.add(i)};class Rk{constructor(e){this._config=Pk(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ly(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ay(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Vr(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Vr(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Vr(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Vr(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let o=i.get(e);return(!o||n)&&(o=new Map,i.set(e,o)),o}getOptionScopes(e,n,i){const{options:o,type:s}=this,r=this._cachedScopes(e,i),a=r.get(n);if(a)return a;const l=new Set;n.forEach(d=>{e&&(l.add(e),d.forEach(h=>ns(l,e,h))),d.forEach(h=>ns(l,o,h)),d.forEach(h=>ns(l,Li[s]||{},h)),d.forEach(h=>ns(l,Me,h)),d.forEach(h=>ns(l,Iu,h))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),cy.has(n)&&r.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,Li[n]||{},Me.datasets[n]||{},{type:n},Me,Iu]}resolveNamedOptions(e,n,i,o=[""]){const s={$shared:!0},{resolver:r,subPrefixes:a}=Bh(this._resolverCache,e,o);let l=r;if(Lk(r,n)){s.$shared=!1,i=oi(i)?i():i;const u=this.createResolver(e,i,a);l=Ao(r,i,u)}for(const u of n)s[u]=l[u];return s}createResolver(e,n,i=[""],o){const{resolver:s}=Bh(this._resolverCache,e,i);return ae(n)?Ao(s,n,void 0,o):s}}function Bh(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const o=n.join();let s=i.get(o);return s||(s={resolver:sf(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(o,s)),s}const Mk=t=>ae(t)&&Object.getOwnPropertyNames(t).some(e=>oi(t[e]));function Lk(t,e){const{isScriptable:n,isIndexable:i}=Vv(t);for(const o of e){const s=n(o),r=i(o),a=(r||s)&&t[o];if(s&&(oi(a)||Mk(a))||r&&Ie(a))return!0}return!1}var Dk="4.5.1";const zk=["top","bottom","left","right","chartArea"];function Vh(t,e){return t==="top"||t==="bottom"||zk.indexOf(t)===-1&&e==="x"}function Hh(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function $h(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ye(n&&n.onComplete,[t],e)}function jk(t){const e=t.chart,n=e.options.animation;ye(n&&n.onProgress,[t],e)}function uy(t){return lf()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const fa={},Gh=t=>{const e=uy(t);return Object.values(fa).filter(n=>n.canvas===e).pop()};function Fk(t,e,n){const i=Object.keys(t);for(const o of i){const s=+o;if(s>=e){const r=t[o];delete t[o],(n>0||s>e)&&(t[s+n]=r)}}}function Ok(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var Ln;let zo=(Ln=class{static register(...e){nn.add(...e),qh()}static unregister(...e){nn.remove(...e),qh()}constructor(e,n){const i=this.config=new Rk(n),o=uy(e),s=Gh(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const r=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||ik(o)),this.platform.updateConfig(i);const a=this.platform.acquireContext(o,r.aspectRatio),l=a&&a.canvas,u=l&&l.height,d=l&&l.width;if(this.id=JS(),this.ctx=a,this.canvas=l,this.width=d,this.height=u,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=p1(h=>this.update(h),r.resizeDelay||0),this._dataChanges=[],fa[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}pn.listen(this,"complete",$h),pn.listen(this,"progress",jk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:o,_aspectRatio:s}=this;return fe(e)?n&&s?s:o?i/o:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return nn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():xh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return hh(this.canvas,this.ctx),this}stop(){return pn.stop(this),this}resize(e,n){pn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,o=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(o,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,xh(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),ye(i.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};he(n,(i,o)=>{i.id=o})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,o=Object.keys(i).reduce((r,a)=>(r[a]=!1,r),{});let s=[];n&&(s=s.concat(Object.keys(n).map(r=>{const a=n[r],l=Pu(r,a),u=l==="r",d=l==="x";return{options:a,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),he(s,r=>{const a=r.options,l=a.id,u=Pu(l,a),d=se(a.type,r.dtype);(a.position===void 0||Vh(a.position,u)!==Vh(r.dposition))&&(a.position=r.dposition),o[l]=!0;let h=null;if(l in i&&i[l].type===d)h=i[l];else{const m=nn.getScale(d);h=new m({id:l,type:d,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),he(o,(r,a)=>{r||delete i[a]}),he(i,r=>{Lt.configure(this,r,r.options),Lt.addBox(this,r)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((o,s)=>o.index-s.index),i>n){for(let o=n;o<i;++o)this._destroyDatasetMeta(o);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Hh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,o)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,o;for(this._removeUnreferencedMetasets(),i=0,o=n.length;i<o;i++){const s=n[i];let r=this.getDatasetMeta(i);const a=s.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(i),r=this.getDatasetMeta(i)),r.type=a,r.indexAxis=s.indexAxis||Au(a,this.options),r.order=s.order||0,r.index=i,r.label=""+s.label,r.visible=this.isDatasetVisible(i),r.controller)r.controller.updateIndex(i),r.controller.linkScales();else{const l=nn.getController(a),{datasetElementType:u,dataElementType:d}=Me.datasets[a];Object.assign(l,{dataElementType:nn.getElement(d),datasetElementType:u&&nn.getElement(u)}),r.controller=new l(this,i),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){he(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),m=!o&&s.indexOf(h)===-1;h.buildOrUpdateElements(m),r=Math.max(+h.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),o||he(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Hh("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){he(this.scales,e=>{Lt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!sh(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:o,count:s}of n){const r=i==="_removeElements"?-s:s;Fk(e,o,r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(r=>r[0]===s).map((r,a)=>a+","+r.splice(1).join(","))),o=i(0);for(let s=1;s<n;s++)if(!sh(o,i(s)))return;return Array.from(o).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Lt.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],he(this.boxes,o=>{i&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,s)=>{o._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,oi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),o={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(i.controller._update(n),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(pn.has(this)?this.attached&&!pn.running(this)&&pn.start(this):(this.draw(),$h({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let o,s;for(o=0,s=n.length;o<s;++o){const r=n[o];(!e||r.visible)&&i.push(r)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},o=Xv(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&kl(n,o),e.controller.draw(),o&&El(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return _n(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,o){const s=zC.modes[n];return typeof s=="function"?s(this,e,i,o):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let o=i.filter(s=>s&&s._dataset===n).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(o)),o}getContext(){return this.$context||(this.$context=li(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const o=i?"show":"hide",s=this.getDatasetMeta(e),r=s.controller._resolveAnimations(void 0,o);$a(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),r.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?o:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),pn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),hh(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete fa[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,r)=>{n.addEventListener(this,s,r),e[s]=r},o=(s,r,a)=>{s.offsetX=r,s.offsetY=a,this._eventHandler(s)};he(this.options.events,s=>i(s,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},o=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let r;const a=()=>{o("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",r)};r=()=>{this.attached=!1,o("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():r()}unbindEvents(){he(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},he(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const o=i?"set":"remove";let s,r,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+o+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){r=e[a];const u=r&&this.getDatasetMeta(r.datasetIndex).controller;u&&u[o+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:r})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[r],index:r}});!Va(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const o=this.options.hover,s=(l,u)=>l.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),r=s(n,e),a=i?e:s(e,n);r.length&&this.updateHoverStyle(r,o.mode,!1),a.length&&o.mode&&this.updateHoverStyle(a,o.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},o=r=>(r.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,o)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,o),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:o=[],options:s}=this,r=n,a=this._getActiveElements(e,o,i,r),l=e1(e),u=Ok(e,this._lastEvent,i,l);i&&(this._lastEvent=null,ye(s.onHover,[e,a,this],this),l&&ye(s.onClick,[e,a,this],this));const d=!Va(a,o);return(d||n)&&(this._active=a,this._updateHoverStyles(a,o,n)),this._lastEvent=u,d}_getActiveElements(e,n,i,o){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,o)}},H(Ln,"defaults",Me),H(Ln,"instances",fa),H(Ln,"overrides",Li),H(Ln,"registry",nn),H(Ln,"version",Dk),H(Ln,"getChart",Gh),Ln);function qh(){return he(zo.instances,t=>t._plugins.invalidate())}function dy(t,e,n=e){t.lineCap=se(n.borderCapStyle,e.borderCapStyle),t.setLineDash(se(n.borderDash,e.borderDash)),t.lineDashOffset=se(n.borderDashOffset,e.borderDashOffset),t.lineJoin=se(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=se(n.borderWidth,e.borderWidth),t.strokeStyle=se(n.borderColor,e.borderColor)}function Uk(t,e,n){t.lineTo(n.x,n.y)}function Bk(t){return t.stepped?k1:t.tension||t.cubicInterpolationMode==="monotone"?E1:Uk}function fy(t,e,n={}){const i=t.length,{start:o=0,end:s=i-1}=n,{start:r,end:a}=e,l=Math.max(o,r),u=Math.min(s,a),d=o<r&&s<r||o>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:u<l&&!d?i+u-l:u-l}}function Vk(t,e,n,i){const{points:o,options:s}=e,{count:r,start:a,loop:l,ilen:u}=fy(o,n,i),d=Bk(s);let{move:h=!0,reverse:m}=i||{},g,v,_;for(g=0;g<=u;++g)v=o[(a+(m?u-g:g))%r],!v.skip&&(h?(t.moveTo(v.x,v.y),h=!1):d(t,_,v,m,s.stepped),_=v);return l&&(v=o[(a+(m?u:0))%r],d(t,_,v,m,s.stepped)),!!l}function Hk(t,e,n,i){const o=e.points,{count:s,start:r,ilen:a}=fy(o,n,i),{move:l=!0,reverse:u}=i||{};let d=0,h=0,m,g,v,_,x,y;const b=C=>(r+(u?a-C:C))%s,w=()=>{_!==x&&(t.lineTo(d,x),t.lineTo(d,_),t.lineTo(d,y))};for(l&&(g=o[b(0)],t.moveTo(g.x,g.y)),m=0;m<=a;++m){if(g=o[b(m)],g.skip)continue;const C=g.x,E=g.y,N=C|0;N===v?(E<_?_=E:E>x&&(x=E),d=(h*d+C)/++h):(w(),t.lineTo(C,E),v=N,h=0,_=x=E),y=E}w()}function Ru(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Hk:Vk}function $k(t){return t.stepped?rC:t.tension||t.cubicInterpolationMode==="monotone"?aC:vi}function Gk(t,e,n,i){let o=e._path;o||(o=e._path=new Path2D,e.path(o,n,i)&&o.closePath()),dy(t,e.options),t.stroke(o)}function qk(t,e,n,i){const{segments:o,options:s}=e,r=Ru(e);for(const a of o)dy(t,s,a.style),t.beginPath(),r(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const Wk=typeof Path2D=="function";function Jk(t,e,n,i){Wk&&!e.options.segment?Gk(t,e,n,i):qk(t,e,n,i)}class sn extends En{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const o=i.spanGaps?this._loop:this._fullLoop;X1(this._points,i,e,o,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=pC(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,o=e[n],s=this.points,r=Qv(this,{property:n,start:o,end:o});if(!r.length)return;const a=[],l=$k(i);let u,d;for(u=0,d=r.length;u<d;++u){const{start:h,end:m}=r[u],g=s[h],v=s[m];if(g===v){a.push(g);continue}const _=Math.abs((o-g[n])/(v[n]-g[n])),x=l(g,v,_,i.stepped);x[n]=e[n],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,n,i){return Ru(this)(e,this,n,i)}path(e,n,i){const o=this.segments,s=Ru(this);let r=this._loop;n=n||0,i=i||this.points.length-n;for(const a of o)r&=s(e,this,a,{start:n,end:n+i-1});return!!r}draw(e,n,i,o){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Jk(e,this,i,o),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}H(sn,"id","line"),H(sn,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),H(sn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),H(sn,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Wh(t,e,n,i){const o=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<o.radius+o.hitRadius}class xo extends En{constructor(n){super();H(this,"parsed");H(this,"skip");H(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,o){const s=this.options,{x:r,y:a}=this.getProps(["x","y"],o);return Math.pow(n-r,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return Wh(this,n,"x",i)}inYRange(n,i){return Wh(this,n,"y",i)}getCenterPoint(n){const{x:i,y:o}=this.getProps(["x","y"],n);return{x:i,y:o}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const o=i&&n.borderWidth||0;return(i+o)*2}draw(n,i){const o=this.options;this.skip||o.radius<.1||!_n(this,i,this.size(o)/2)||(n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.fillStyle=o.backgroundColor,Nu(n,o,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}H(xo,"id","point"),H(xo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),H(xo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Yk(t,e,n){const i=t.segments,o=t.points,s=e.points,r=[];for(const a of i){let{start:l,end:u}=a;u=Nl(l,u,o);const d=Mu(n,o[l],o[u],a.loop);if(!e.segments){r.push({source:a,target:d,start:o[l],end:o[u]});continue}const h=Qv(e,d);for(const m of h){const g=Mu(n,s[m.start],s[m.end],m.loop),v=Kv(a,o,g);for(const _ of v)r.push({source:_,target:m,start:{[n]:Jh(d,g,"start",Math.max)},end:{[n]:Jh(d,g,"end",Math.min)}})}}return r}function Mu(t,e,n,i){if(i)return;let o=e[t],s=n[t];return t==="angle"&&(o=_t(o),s=_t(s)),{property:t,start:o,end:s}}function Kk(t,e){const{x:n=null,y:i=null}=t||{},o=e.points,s=[];return e.segments.forEach(({start:r,end:a})=>{a=Nl(r,a,o);const l=o[r],u=o[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:u.x,y:i})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:u.y}))}),s}function Nl(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function Jh(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function py(t,e){let n=[],i=!1;return Ie(t)?(i=!0,n=t):n=Kk(t,e),n.length?new sn({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function Yh(t){return t&&t.fill!==!1}function Qk(t,e,n){let o=t[e].fill;const s=[e];let r;if(!n)return o;for(;o!==!1&&s.indexOf(o)===-1;){if(!Re(o))return o;if(r=t[o],!r)return!1;if(r.visible)return o;s.push(o),o=r.fill}return!1}function Xk(t,e,n){const i=nE(t);if(ae(i))return isNaN(i.value)?!1:i;let o=parseFloat(i);return Re(o)&&Math.floor(o)===o?Zk(i[0],e,o,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Zk(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function eE(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:ae(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function tE(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:ae(t)?i=t.value:i=e.getBaseValue(),i}function nE(t){const e=t.options,n=e.fill;let i=se(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function iE(t){const{scale:e,index:n,line:i}=t,o=[],s=i.segments,r=i.points,a=oE(e,n);a.push(py({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const u=s[l];for(let d=u.start;d<=u.end;d++)sE(o,r[d],a)}return new sn({points:o,options:{}})}function oE(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let o=0;o<i.length;o++){const s=i[o];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function sE(t,e,n){const i=[];for(let o=0;o<n.length;o++){const s=n[o],{first:r,last:a,point:l}=rE(s,e,"x");if(!(!l||r&&a)){if(r)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function rE(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const o=i[n],s=t.segments,r=t.points;let a=!1,l=!1;for(let u=0;u<s.length;u++){const d=s[u],h=r[d.start][n],m=r[d.end][n];if(so(o,h,m)){a=o===h,l=o===m;break}}return{first:a,last:l,point:i}}class hy{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:o,y:s,radius:r}=this;return n=n||{start:0,end:kt},e.arc(o,s,r,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:o}=this,s=e.angle;return{x:n+Math.cos(s)*o,y:i+Math.sin(s)*o,angle:s}}}function aE(t){const{chart:e,fill:n,line:i}=t;if(Re(n))return lE(e,n);if(n==="stack")return iE(t);if(n==="shape")return!0;const o=cE(t);return o instanceof hy?o:py(o,i)}function lE(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function cE(t){return(t.scale||{}).getPointPositionForValue?dE(t):uE(t)}function uE(t){const{scale:e={},fill:n}=t,i=eE(n,e);if(Re(i)){const o=e.isHorizontal();return{x:o?i:null,y:o?null:i}}return null}function dE(t){const{scale:e,fill:n}=t,i=e.options,o=e.getLabels().length,s=i.reverse?e.max:e.min,r=tE(n,e,s),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new hy({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(r)})}for(let l=0;l<o;++l)a.push(e.getPointPositionForValue(l,r));return a}function kc(t,e,n){const i=aE(e),{chart:o,index:s,line:r,scale:a,axis:l}=e,u=r.options,d=u.fill,h=u.backgroundColor,{above:m=h,below:g=h}=d||{},v=o.getDatasetMeta(s),_=Xv(o,v);i&&r.points.length&&(kl(t,n),fE(t,{line:r,target:i,above:m,below:g,area:n,scale:a,axis:l,clip:_}),El(t))}function fE(t,e){const{line:n,target:i,above:o,below:s,area:r,scale:a,clip:l}=e,u=n._loop?"angle":e.axis;t.save();let d=s;s!==o&&(u==="x"?(Kh(t,i,r.top),Ec(t,{line:n,target:i,color:o,scale:a,property:u,clip:l}),t.restore(),t.save(),Kh(t,i,r.bottom)):u==="y"&&(Qh(t,i,r.left),Ec(t,{line:n,target:i,color:s,scale:a,property:u,clip:l}),t.restore(),t.save(),Qh(t,i,r.right),d=o)),Ec(t,{line:n,target:i,color:d,scale:a,property:u,clip:l}),t.restore()}function Kh(t,e,n){const{segments:i,points:o}=e;let s=!0,r=!1;t.beginPath();for(const a of i){const{start:l,end:u}=a,d=o[l],h=o[Nl(l,u,o)];s?(t.moveTo(d.x,d.y),s=!1):(t.lineTo(d.x,n),t.lineTo(d.x,d.y)),r=!!e.pathSegment(t,a,{move:r}),r?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Qh(t,e,n){const{segments:i,points:o}=e;let s=!0,r=!1;t.beginPath();for(const a of i){const{start:l,end:u}=a,d=o[l],h=o[Nl(l,u,o)];s?(t.moveTo(d.x,d.y),s=!1):(t.lineTo(n,d.y),t.lineTo(d.x,d.y)),r=!!e.pathSegment(t,a,{move:r}),r?t.closePath():t.lineTo(n,h.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Ec(t,e){const{line:n,target:i,property:o,color:s,scale:r,clip:a}=e,l=Yk(n,i,o);for(const{source:u,target:d,start:h,end:m}of l){const{style:{backgroundColor:g=s}={}}=u,v=i!==!0;t.save(),t.fillStyle=g,pE(t,r,a,v&&Mu(o,h,m)),t.beginPath();const _=!!n.pathSegment(t,u);let x;if(v){_?t.closePath():Xh(t,i,m,o);const y=!!i.pathSegment(t,d,{move:_,reverse:!0});x=_&&y,x||Xh(t,i,h,o)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function pE(t,e,n,i){const o=e.chart.chartArea,{property:s,start:r,end:a}=i||{};if(s==="x"||s==="y"){let l,u,d,h;s==="x"?(l=r,u=o.top,d=a,h=o.bottom):(l=o.left,u=r,d=o.right,h=a),t.beginPath(),n&&(l=Math.max(l,n.left),d=Math.min(d,n.right),u=Math.max(u,n.top),h=Math.min(h,n.bottom)),t.rect(l,u,d-l,h-u),t.clip()}}function Xh(t,e,n,i){const o=e.interpolate(n,i);o&&t.lineTo(o.x,o.y)}var my={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,o=[];let s,r,a,l;for(r=0;r<i;++r)s=t.getDatasetMeta(r),a=s.dataset,l=null,a&&a.options&&a instanceof sn&&(l={visible:t.isDatasetVisible(r),index:r,fill:Xk(a,r,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,o.push(l);for(r=0;r<i;++r)l=o[r],!(!l||l.fill===!1)&&(l.fill=Qk(o,r,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",o=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let r=o.length-1;r>=0;--r){const a=o[r].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&kc(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let o=i.length-1;o>=0;--o){const s=i[o].$filler;Yh(s)&&kc(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!Yh(i)||n.drawTime!=="beforeDatasetDraw"||kc(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Zh=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},hE=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class em extends En{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ye(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,o)=>e.sort(i,o,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,o=Ue(i.font),s=o.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Zh(i,s);let u,d;n.font=o.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(r,s,a,l)+10):(d=this.maxHeight,u=this._fitCols(r,o,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,o){const{ctx:s,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],d=o+a;let h=e;s.textAlign="left",s.textBaseline="middle";let m=-1,g=-d;return this.legendItems.forEach((v,_)=>{const x=i+n/2+s.measureText(v.text).width;(_===0||u[u.length-1]+x+2*a>r)&&(h+=d,u[u.length-(_>0?0:1)]=0,g+=d,m++),l[_]={left:0,top:g,row:m,width:x,height:o},u[u.length-1]+=x+a}),h}_fitCols(e,n,i,o){const{ctx:s,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],d=r-e;let h=a,m=0,g=0,v=0,_=0;return this.legendItems.forEach((x,y)=>{const{itemWidth:b,itemHeight:w}=mE(i,n,s,x,o);y>0&&g+w+2*a>d&&(h+=m+a,u.push({width:m,height:g}),v+=m+a,_++,m=g=0),l[y]={left:v,top:g,col:_,width:b,height:w},m=Math.max(m,b),g+=w+a}),h+=m,u.push({width:m,height:g}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:o},rtl:s}}=this,r=go(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Xe(i,this.left+o,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=Xe(i,this.left+o,this.right-this.lineWidths[a])),u.top+=this.top+e+o,u.left=r.leftForLtr(r.x(l),u.width),l+=u.width+o}else{let a=0,l=Xe(i,this.top+e+o,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=Xe(i,this.top+e+o,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+o,u.left=r.leftForLtr(r.x(u.left),u.width),l+=u.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;kl(e,this),this._draw(),El(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:o}=this,{align:s,labels:r}=e,a=Me.color,l=go(e.rtl,this.left,this.width),u=Ue(r.font),{padding:d}=r,h=u.size,m=h/2;let g;this.drawTitle(),o.textAlign=l.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=u.string;const{boxWidth:v,boxHeight:_,itemHeight:x}=Zh(r,h),y=function(N,T,S){if(isNaN(v)||v<=0||isNaN(_)||_<0)return;o.save();const k=se(S.lineWidth,1);if(o.fillStyle=se(S.fillStyle,a),o.lineCap=se(S.lineCap,"butt"),o.lineDashOffset=se(S.lineDashOffset,0),o.lineJoin=se(S.lineJoin,"miter"),o.lineWidth=k,o.strokeStyle=se(S.strokeStyle,a),o.setLineDash(se(S.lineDash,[])),r.usePointStyle){const I={radius:_*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:k},P=l.xPlus(N,v/2),L=T+m;Uv(o,I,P,L,r.pointStyleWidth&&v)}else{const I=T+Math.max((h-_)/2,0),P=l.leftForLtr(N,v),L=mo(S.borderRadius);o.beginPath(),Object.values(L).some(M=>M!==0)?Wa(o,{x:P,y:I,w:v,h:_,radius:L}):o.rect(P,I,v,_),o.fill(),k!==0&&o.stroke()}o.restore()},b=function(N,T,S){Di(o,S.text,N,T+x/2,u,{strikethrough:S.hidden,textAlign:l.textAlign(S.textAlign)})},w=this.isHorizontal(),C=this._computeTitleHeight();w?g={x:Xe(s,this.left+d,this.right-i[0]),y:this.top+d+C,line:0}:g={x:this.left+d,y:Xe(s,this.top+C+d,this.bottom-n[0].height),line:0},Wv(this.ctx,e.textDirection);const E=x+d;this.legendItems.forEach((N,T)=>{o.strokeStyle=N.fontColor,o.fillStyle=N.fontColor;const S=o.measureText(N.text).width,k=l.textAlign(N.textAlign||(N.textAlign=r.textAlign)),I=v+m+S;let P=g.x,L=g.y;l.setWidth(this.width),w?T>0&&P+I+d>this.right&&(L=g.y+=E,g.line++,P=g.x=Xe(s,this.left+d,this.right-i[g.line])):T>0&&L+E>this.bottom&&(P=g.x=P+n[g.line].width+d,g.line++,L=g.y=Xe(s,this.top+C+d,this.bottom-n[g.line].height));const M=l.x(P);if(y(M,L,N),P=h1(k,P+v+m,w?P+I:this.right,e.rtl),b(l.x(P),L,N),w)g.x+=I+d;else if(typeof N.text!="string"){const V=u.lineHeight;g.y+=gy(N,V)+d}else g.y+=E}),Jv(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Ue(n.font),o=nt(n.padding);if(!n.display)return;const s=go(e.rtl,this.left,this.width),r=this.ctx,a=n.position,l=i.size/2,u=o.top+l;let d,h=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),d=this.top+u,h=Xe(e.align,h,this.right-m);else{const v=this.columnSizes.reduce((_,x)=>Math.max(_,x.height),0);d=u+Xe(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const g=Xe(a,h,h+m);r.textAlign=s.textAlign(tf(a)),r.textBaseline="middle",r.strokeStyle=n.color,r.fillStyle=n.color,r.font=i.string,Di(r,n.text,g,d,i)}_computeTitleHeight(){const e=this.options.title,n=Ue(e.font),i=nt(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,o,s;if(so(e,this.left,this.right)&&so(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(o=s[i],so(e,o.left,o.left+o.width)&&so(n,o.top,o.top+o.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!vE(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const o=this._hoveredItem,s=hE(o,i);o&&!s&&ye(n.onLeave,[e,o,this],this),this._hoveredItem=i,i&&!s&&ye(n.onHover,[e,i,this],this)}else i&&ye(n.onClick,[e,i,this],this)}}function mE(t,e,n,i,o){const s=gE(i,t,e,n),r=xE(o,i,e.lineHeight);return{itemWidth:s,itemHeight:r}}function gE(t,e,n,i){let o=t.text;return o&&typeof o!="string"&&(o=o.reduce((s,r)=>s.length>r.length?s:r)),e+n.size/2+i.measureText(o).width}function xE(t,e,n){let i=t;return typeof e.text!="string"&&(i=gy(e,n)),i}function gy(t,e){const n=t.text?t.text.length:0;return e*n}function vE(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var df={id:"legend",_element:em,start(t,e,n){const i=t.legend=new em({ctx:t.ctx,options:n,chart:t});Lt.configure(t,i,n),Lt.addBox(t,i)},stop(t){Lt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Lt.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,o=n.chart;o.isDatasetVisible(i)?(o.hide(i),e.hidden=!0):(o.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:o,color:s,useBorderRadius:r,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),d=nt(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:i||u.pointStyle,rotation:u.rotation,textAlign:o||u.textAlign,borderRadius:r&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class xy extends En{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const o=Ie(i.text)?i.text.length:1;this._padding=nt(i.padding);const s=o*Ue(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:o,right:s,options:r}=this,a=r.align;let l=0,u,d,h;return this.isHorizontal()?(d=Xe(a,i,s),h=n+e,u=s-i):(r.position==="left"?(d=i+e,h=Xe(a,o,n),l=ze*-.5):(d=s-e,h=Xe(a,n,o),l=ze*.5),u=o-n),{titleX:d,titleY:h,maxWidth:u,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=Ue(n.font),s=i.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(s);Di(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:u,textAlign:tf(n.align),textBaseline:"middle",translation:[r,a]})}}function yE(t,e){const n=new xy({ctx:t.ctx,options:e,chart:t});Lt.configure(t,n,e),Lt.addBox(t,n),t.titleBlock=n}var _E={id:"title",_element:xy,start(t,e,n){yE(t,n)},stop(t){const e=t.titleBlock;Lt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Lt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ms={average(t){if(!t.length)return!1;let e,n,i=new Set,o=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),o+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:o/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,o=Number.POSITIVE_INFINITY,s,r,a;for(s=0,r=t.length;s<r;++s){const l=t[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),d=Tu(e,u);d<o&&(o=d,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function en(t,e){return e&&(Ie(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function hn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function bE(t,e){const{element:n,datasetIndex:i,index:o}=e,s=t.getDatasetMeta(i).controller,{label:r,value:a}=s.getLabelAndValue(o);return{chart:t,label:r,parsed:s.getParsed(o),raw:t.data.datasets[i].data[o],formattedValue:a,dataset:s.getDataset(),dataIndex:o,datasetIndex:i,element:n}}function tm(t,e){const n=t.chart.ctx,{body:i,footer:o,title:s}=t,{boxWidth:r,boxHeight:a}=e,l=Ue(e.bodyFont),u=Ue(e.titleFont),d=Ue(e.footerFont),h=s.length,m=o.length,g=i.length,v=nt(e.padding);let _=v.height,x=0,y=i.reduce((C,E)=>C+E.before.length+E.lines.length+E.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(_+=h*u.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const C=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=g*C+(y-g)*l.lineHeight+(y-1)*e.bodySpacing}m&&(_+=e.footerMarginTop+m*d.lineHeight+(m-1)*e.footerSpacing);let b=0;const w=function(C){x=Math.max(x,n.measureText(C).width+b)};return n.save(),n.font=u.string,he(t.title,w),n.font=l.string,he(t.beforeBody.concat(t.afterBody),w),b=e.displayColors?r+2+e.boxPadding:0,he(i,C=>{he(C.before,w),he(C.lines,w),he(C.after,w)}),b=0,n.font=d.string,he(t.footer,w),n.restore(),x+=v.width,{width:x,height:_}}function wE(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function SE(t,e,n,i){const{x:o,width:s}=i,r=n.caretSize+n.caretPadding;if(t==="left"&&o+s+r>e.width||t==="right"&&o-s-r<0)return!0}function CE(t,e,n,i){const{x:o,width:s}=n,{width:r,chartArea:{left:a,right:l}}=t;let u="center";return i==="center"?u=o<=(a+l)/2?"left":"right":o<=s/2?u="left":o>=r-s/2&&(u="right"),SE(u,t,e,n)&&(u="center"),u}function nm(t,e,n){const i=n.yAlign||e.yAlign||wE(t,n);return{xAlign:n.xAlign||e.xAlign||CE(t,e,n,i),yAlign:i}}function kE(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function EE(t,e,n){let{y:i,height:o}=t;return e==="top"?i+=n:e==="bottom"?i-=o+n:i-=o/2,i}function im(t,e,n,i){const{caretSize:o,caretPadding:s,cornerRadius:r}=t,{xAlign:a,yAlign:l}=n,u=o+s,{topLeft:d,topRight:h,bottomLeft:m,bottomRight:g}=mo(r);let v=kE(e,a);const _=EE(e,l,u);return l==="center"?a==="left"?v+=u:a==="right"&&(v-=u):a==="left"?v-=Math.max(d,m)+o:a==="right"&&(v+=Math.max(h,g)+o),{x:Mt(v,0,i.width-e.width),y:Mt(_,0,i.height-e.height)}}function Hr(t,e,n){const i=nt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function om(t){return en([],hn(t))}function TE(t,e,n){return li(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function sm(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const vy={beforeTitle:fn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:fn,beforeBody:fn,beforeLabel:fn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return fe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:fn,afterBody:fn,beforeFooter:fn,footer:fn,afterFooter:fn};function dt(t,e,n,i){const o=t[e].call(n,i);return typeof o>"u"?vy[e].call(n,i):o}var Rc;let rm=(Rc=class extends En{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),o=i.enabled&&n.options.animation&&i.animations,s=new Zv(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=TE(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,o=dt(i,"beforeTitle",this,e),s=dt(i,"title",this,e),r=dt(i,"afterTitle",this,e);let a=[];return a=en(a,hn(o)),a=en(a,hn(s)),a=en(a,hn(r)),a}getBeforeBody(e,n){return om(dt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,o=[];return he(e,s=>{const r={before:[],lines:[],after:[]},a=sm(i,s);en(r.before,hn(dt(a,"beforeLabel",this,s))),en(r.lines,dt(a,"label",this,s)),en(r.after,hn(dt(a,"afterLabel",this,s))),o.push(r)}),o}getAfterBody(e,n){return om(dt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,o=dt(i,"beforeFooter",this,e),s=dt(i,"footer",this,e),r=dt(i,"afterFooter",this,e);let a=[];return a=en(a,hn(o)),a=en(a,hn(s)),a=en(a,hn(r)),a}_createItems(e){const n=this._active,i=this.chart.data,o=[],s=[],r=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(bE(this.chart,n[l]));return e.filter&&(a=a.filter((d,h,m)=>e.filter(d,h,m,i))),e.itemSort&&(a=a.sort((d,h)=>e.itemSort(d,h,i))),he(a,d=>{const h=sm(e.callbacks,d);o.push(dt(h,"labelColor",this,d)),s.push(dt(h,"labelPointStyle",this,d)),r.push(dt(h,"labelTextColor",this,d))}),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=r,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),o=this._active;let s,r=[];if(!o.length)this.opacity!==0&&(s={opacity:0});else{const a=ms[i.position].call(this,o,this._eventPosition);r=this._createItems(i),this.title=this.getTitle(r,i),this.beforeBody=this.getBeforeBody(r,i),this.body=this.getBody(r,i),this.afterBody=this.getAfterBody(r,i),this.footer=this.getFooter(r,i);const l=this._size=tm(this,i),u=Object.assign({},a,l),d=nm(this.chart,i,u),h=im(i,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,o){const s=this.getCaretPosition(e,i,o);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:o,yAlign:s}=this,{caretSize:r,cornerRadius:a}=i,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:h}=mo(a),{x:m,y:g}=e,{width:v,height:_}=n;let x,y,b,w,C,E;return s==="center"?(C=g+_/2,o==="left"?(x=m,y=x-r,w=C+r,E=C-r):(x=m+v,y=x+r,w=C-r,E=C+r),b=x):(o==="left"?y=m+Math.max(l,d)+r:o==="right"?y=m+v-Math.max(u,h)-r:y=this.caretX,s==="top"?(w=g,C=w-r,x=y-r,b=y+r):(w=g+_,C=w+r,x=y+r,b=y-r),E=w),{x1:x,x2:y,x3:b,y1:w,y2:C,y3:E}}drawTitle(e,n,i){const o=this.title,s=o.length;let r,a,l;if(s){const u=go(i.rtl,this.x,this.width);for(e.x=Hr(this,i.titleAlign,i),n.textAlign=u.textAlign(i.titleAlign),n.textBaseline="middle",r=Ue(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=r.string,l=0;l<s;++l)n.fillText(o[l],u.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,o,s){const r=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=s,d=Ue(s.bodyFont),h=Hr(this,"left",s),m=o.x(h),g=l<d.lineHeight?(d.lineHeight-l)/2:0,v=n.y+g;if(s.usePointStyle){const _={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=o.leftForLtr(m,u)+u/2,y=v+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Nu(e,_,x,y),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,Nu(e,_,x,y)}else{e.lineWidth=ae(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const _=o.leftForLtr(m,u),x=o.leftForLtr(o.xPlus(m,1),u-2),y=mo(r.borderRadius);Object.values(y).some(b=>b!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Wa(e,{x:_,y:v,w:u,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),Wa(e,{x,y:v+1,w:u-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(_,v,u,l),e.strokeRect(_,v,u,l),e.fillStyle=r.backgroundColor,e.fillRect(x,v+1,u-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:o}=this,{bodySpacing:s,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:d}=i,h=Ue(i.bodyFont);let m=h.lineHeight,g=0;const v=go(i.rtl,this.x,this.width),_=function(S){n.fillText(S,v.x(e.x+g),e.y+m/2),e.y+=m+s},x=v.textAlign(r);let y,b,w,C,E,N,T;for(n.textAlign=r,n.textBaseline="middle",n.font=h.string,e.x=Hr(this,x,i),n.fillStyle=i.bodyColor,he(this.beforeBody,_),g=a&&x!=="right"?r==="center"?u/2+d:u+2+d:0,C=0,N=o.length;C<N;++C){for(y=o[C],b=this.labelTextColors[C],n.fillStyle=b,he(y.before,_),w=y.lines,a&&w.length&&(this._drawColorBox(n,e,C,v,i),m=Math.max(h.lineHeight,l)),E=0,T=w.length;E<T;++E)_(w[E]),m=h.lineHeight;he(y.after,_)}g=0,m=h.lineHeight,he(this.afterBody,_),e.y-=s}drawFooter(e,n,i){const o=this.footer,s=o.length;let r,a;if(s){const l=go(i.rtl,this.x,this.width);for(e.x=Hr(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",r=Ue(i.footerFont),n.fillStyle=i.footerColor,n.font=r.string,a=0;a<s;++a)n.fillText(o[a],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+i.footerSpacing}}drawBackground(e,n,i,o){const{xAlign:s,yAlign:r}=this,{x:a,y:l}=e,{width:u,height:d}=i,{topLeft:h,topRight:m,bottomLeft:g,bottomRight:v}=mo(o.cornerRadius);n.fillStyle=o.backgroundColor,n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.beginPath(),n.moveTo(a+h,l),r==="top"&&this.drawCaret(e,n,i,o),n.lineTo(a+u-m,l),n.quadraticCurveTo(a+u,l,a+u,l+m),r==="center"&&s==="right"&&this.drawCaret(e,n,i,o),n.lineTo(a+u,l+d-v),n.quadraticCurveTo(a+u,l+d,a+u-v,l+d),r==="bottom"&&this.drawCaret(e,n,i,o),n.lineTo(a+g,l+d),n.quadraticCurveTo(a,l+d,a,l+d-g),r==="center"&&s==="left"&&this.drawCaret(e,n,i,o),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),o.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,o=i&&i.x,s=i&&i.y;if(o||s){const r=ms[e.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=tm(this,e),l=Object.assign({},r,this._size),u=nm(n,e,l),d=im(e,l,u,n);(o._to!==d.x||s._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const o={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const r=nt(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,o,n),Wv(e,n.textDirection),s.y+=r.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),Jv(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,o=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!Va(i,o),r=this._positionChanged(o,n);(s||r)&&(this._active=o,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,s=this._active||[],r=this._getActiveElements(e,s,n,i),a=this._positionChanged(r,e),l=n||!Va(r,s)||a;return l&&(this._active=r,(o.enabled||o.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,o){const s=this.options;if(e.type==="mouseout")return[];if(!o)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&r.reverse(),r}_positionChanged(e,n){const{caretX:i,caretY:o,options:s}=this,r=ms[s.position].call(this,e,n);return r!==!1&&(i!==r.x||o!==r.y)}},H(Rc,"positioners",ms),Rc);var ff={id:"tooltip",_element:rm,positioners:ms,afterInit(t,e,n){n&&(t.tooltip=new rm({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:vy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const IE=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function NE(t,e,n,i){const o=t.indexOf(e);if(o===-1)return IE(t,e,n,i);const s=t.lastIndexOf(e);return o!==s?n:o}const AE=(t,e)=>t===null?null:Mt(Math.round(t),0,e);function am(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Lu extends dr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:o,label:s}of n)i[o]===s&&i.splice(o,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(fe(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:NE(i,e,se(n,e),this._addedLabels),AE(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(o=this.getLabels().length-1)),this.min=i,this.max=o}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,o=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let r=e;r<=n;r++)o.push({value:r});return o}getLabelForValue(e){return am.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}H(Lu,"id","category"),H(Lu,"defaults",{ticks:{callback:am}});function PE(t,e){const n=[],{bounds:o,step:s,min:r,max:a,precision:l,count:u,maxTicks:d,maxDigits:h,includeBounds:m}=t,g=s||1,v=d-1,{min:_,max:x}=e,y=!fe(r),b=!fe(a),w=!fe(u),C=(x-_)/(h+1);let E=ah((x-_)/v/g)*g,N,T,S,k;if(E<1e-14&&!y&&!b)return[{value:_},{value:x}];k=Math.ceil(x/E)-Math.floor(_/E),k>v&&(E=ah(k*E/v/g)*g),fe(l)||(N=Math.pow(10,l),E=Math.ceil(E*N)/N),o==="ticks"?(T=Math.floor(_/E)*E,S=Math.ceil(x/E)*E):(T=_,S=x),y&&b&&s&&s1((a-r)/s,E/1e3)?(k=Math.round(Math.min((a-r)/E,d)),E=(a-r)/k,T=r,S=a):w?(T=y?r:T,S=b?a:S,k=u-1,E=(S-T)/k):(k=(S-T)/E,Is(k,Math.round(k),E/1e3)?k=Math.round(k):k=Math.ceil(k));const I=Math.max(lh(E),lh(T));N=Math.pow(10,fe(l)?I:l),T=Math.round(T*N)/N,S=Math.round(S*N)/N;let P=0;for(y&&(m&&T!==r?(n.push({value:r}),T<r&&P++,Is(Math.round((T+P*E)*N)/N,r,lm(r,C,t))&&P++):T<r&&P++);P<k;++P){const L=Math.round((T+P*E)*N)/N;if(b&&L>a)break;n.push({value:L})}return b&&m&&S!==a?n.length&&Is(n[n.length-1].value,a,lm(a,C,t))?n[n.length-1].value=a:n.push({value:a}):(!b||S===a)&&n.push({value:S}),n}function lm(t,e,{horizontal:n,minRotation:i}){const o=$n(i),s=(n?Math.sin(o):Math.cos(o))||.001,r=.75*e*(""+t).length;return Math.min(e/s,r)}class Ka extends dr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return fe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:o,max:s}=this;const r=l=>o=n?o:l,a=l=>s=i?s:l;if(e){const l=Io(o),u=Io(s);l<0&&u<0?a(0):l>0&&u>0&&r(0)}if(o===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||r(o-l)}this.min=o,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,o;return i?(o=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),n=n||11),n&&(o=Math.min(n,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,r=PE(o,s);return e.bounds==="ticks"&&Rv(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const o=(i-n)/Math.max(e.length-1,1)/2;n-=o,i+=o}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return of(e,this.chart.options.locale,this.options.ticks.format)}}class Qa extends Ka{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Re(e)?e:0,this.max=Re(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=$n(this.options.ticks.minRotation),o=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/o))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}H(Qa,"id","linear"),H(Qa,"defaults",{ticks:{callback:Cl.formatters.numeric}});const tr=t=>Math.floor(Hn(t)),pi=(t,e)=>Math.pow(10,tr(t)+e);function cm(t){return t/Math.pow(10,tr(t))===1}function um(t,e,n){const i=Math.pow(10,n),o=Math.floor(t/i);return Math.ceil(e/i)-o}function RE(t,e){const n=e-t;let i=tr(n);for(;um(t,e,i)>10;)i++;for(;um(t,e,i)<10;)i--;return Math.min(i,tr(t))}function ME(t,{min:e,max:n}){e=vt(t.min,e);const i=[],o=tr(e);let s=RE(e,n),r=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=o>s?Math.pow(10,o):0,u=Math.round((e-l)*r)/r,d=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((u-d)/Math.pow(10,s)),m=vt(t.min,Math.round((l+d+h*Math.pow(10,s))*r)/r);for(;m<n;)i.push({value:m,major:cm(m),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,r=s>=0?1:r),m=Math.round((l+d+h*Math.pow(10,s))*r)/r;const g=vt(t.max,m);return i.push({value:g,major:cm(g),significand:h}),i}class Du extends dr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Ka.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return Re(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Re(e)?Math.max(0,e):null,this.max=Re(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Re(this._userMin)&&(this.min=e===pi(this.min,0)?pi(this.min,-1):pi(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,o=this.max;const s=a=>i=e?i:a,r=a=>o=n?o:a;i===o&&(i<=0?(s(1),r(10)):(s(pi(i,-1)),r(pi(o,1)))),i<=0&&s(pi(o,-1)),o<=0&&r(pi(i,1)),this.min=i,this.max=o}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=ME(n,this);return e.bounds==="ticks"&&Rv(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":of(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Hn(e),this._valueRange=Hn(this.max)-Hn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Hn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}H(Du,"id","logarithmic"),H(Du,"defaults",{ticks:{callback:Cl.formatters.logarithmic,major:{enabled:!0}}});function zu(t){const e=t.ticks;if(e.display&&t.display){const n=nt(e.backdropPadding);return se(e.font&&e.font.size,Me.font.size)+n.height}return 0}function LE(t,e,n){return n=Ie(n)?n:[n],{w:C1(t,e.string,n),h:n.length*e.lineHeight}}function dm(t,e,n,i,o){return t===i||t===o?{start:e-n/2,end:e+n/2}:t<i||t>o?{start:e-n,end:e}:{start:e,end:e+n}}function DE(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],o=[],s=t._pointLabels.length,r=t.options.pointLabels,a=r.centerPointLabels?ze/s:0;for(let l=0;l<s;l++){const u=r.setContext(t.getPointLabelContext(l));o[l]=u.padding;const d=t.getPointPosition(l,t.drawingArea+o[l],a),h=Ue(u.font),m=LE(t.ctx,h,t._pointLabels[l]);i[l]=m;const g=_t(t.getIndexAngle(l)+a),v=Math.round(Zd(g)),_=dm(v,d.x,m.w,0,180),x=dm(v,d.y,m.h,90,270);zE(n,e,g,_,x)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=OE(t,i,o)}function zE(t,e,n,i,o){const s=Math.abs(Math.sin(n)),r=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),o.start<e.t?(l=(e.t-o.start)/r,t.t=Math.min(t.t,e.t-l)):o.end>e.b&&(l=(o.end-e.b)/r,t.b=Math.max(t.b,e.b+l))}function jE(t,e,n){const i=t.drawingArea,{extra:o,additionalAngle:s,padding:r,size:a}=n,l=t.getPointPosition(e,i+o+r,s),u=Math.round(Zd(_t(l.angle+St))),d=VE(l.y,a.h,u),h=UE(u),m=BE(l.x,a.w,h);return{visible:!0,x:l.x,y:d,textAlign:h,left:m,top:d,right:m+a.w,bottom:d+a.h}}function FE(t,e){if(!e)return!0;const{left:n,top:i,right:o,bottom:s}=t;return!(_n({x:n,y:i},e)||_n({x:n,y:s},e)||_n({x:o,y:i},e)||_n({x:o,y:s},e))}function OE(t,e,n){const i=[],o=t._pointLabels.length,s=t.options,{centerPointLabels:r,display:a}=s.pointLabels,l={extra:zu(s)/2,additionalAngle:r?ze/o:0};let u;for(let d=0;d<o;d++){l.padding=n[d],l.size=e[d];const h=jE(t,d,l);i.push(h),a==="auto"&&(h.visible=FE(h,u),h.visible&&(u=h))}return i}function UE(t){return t===0||t===180?"center":t<180?"left":"right"}function BE(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function VE(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function HE(t,e,n){const{left:i,top:o,right:s,bottom:r}=n,{backdropColor:a}=e;if(!fe(a)){const l=mo(e.borderRadius),u=nt(e.backdropPadding);t.fillStyle=a;const d=i-u.left,h=o-u.top,m=s-i+u.width,g=r-o+u.height;Object.values(l).some(v=>v!==0)?(t.beginPath(),Wa(t,{x:d,y:h,w:m,h:g,radius:l}),t.fill()):t.fillRect(d,h,m,g)}}function $E(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let o=e-1;o>=0;o--){const s=t._pointLabelItems[o];if(!s.visible)continue;const r=i.setContext(t.getPointLabelContext(o));HE(n,r,s);const a=Ue(r.font),{x:l,y:u,textAlign:d}=s;Di(n,t._pointLabels[o],l,u+a.lineHeight/2,a,{color:r.color,textAlign:d,textBaseline:"middle"})}}function yy(t,e,n,i){const{ctx:o}=t;if(n)o.arc(t.xCenter,t.yCenter,e,0,kt);else{let s=t.getPointPosition(0,e);o.moveTo(s.x,s.y);for(let r=1;r<i;r++)s=t.getPointPosition(r,e),o.lineTo(s.x,s.y)}}function GE(t,e,n,i,o){const s=t.ctx,r=e.circular,{color:a,lineWidth:l}=e;!r&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(o.dash||[]),s.lineDashOffset=o.dashOffset,s.beginPath(),yy(t,n,r,i),s.closePath(),s.stroke(),s.restore())}function qE(t,e,n){return li(t,{label:n,index:e,type:"pointLabel"})}class gs extends Ka{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=nt(zu(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Re(e)&&!isNaN(e)?e:0,this.max=Re(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/zu(this.options))}generateTickLabels(e){Ka.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const o=ye(this.options.pointLabels.callback,[n,i],this);return o||o===0?o:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?DE(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,o){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,o))}getIndexAngle(e){const n=kt/(this._pointLabels.length||1),i=this.options.startAngle||0;return _t(e*n+$n(i))}getDistanceFromCenterForValue(e){if(fe(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(fe(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return qE(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const o=this.getIndexAngle(e)-St+i;return{x:Math.cos(o)*n+this.xCenter,y:Math.sin(o)*n+this.yCenter,angle:o}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:o,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:o,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),yy(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:o,border:s}=n,r=this._pointLabels.length;let a,l,u;if(n.pointLabels.display&&$E(this,r),o.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(d.value);const m=this.getContext(h),g=o.setContext(m),v=s.setContext(m);GE(this,g,l,r,v)}}),i.display){for(e.save(),a=r-1;a>=0;a--){const d=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:m}=d;!m||!h||(e.lineWidth=m,e.strokeStyle=h,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),u=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const o=this.getIndexAngle(0);let s,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(o),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const u=i.setContext(this.getContext(l)),d=Ue(u.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){e.font=d.string,r=e.measureText(a.label).width,e.fillStyle=u.backdropColor;const h=nt(u.backdropPadding);e.fillRect(-r/2-h.left,-s-d.size/2-h.top,r+h.width,d.size+h.height)}Di(e,a.label,0,-s,d,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}}H(gs,"id","radialLinear"),H(gs,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Cl.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),H(gs,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),H(gs,"descriptors",{angleLines:{_fallback:"grid"}});const Al={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},pt=Object.keys(Al);function fm(t,e){return t-e}function pm(t,e){if(fe(e))return null;const n=t._adapter,{parser:i,round:o,isoWeekday:s}=t._parseOpts;let r=e;return typeof i=="function"&&(r=i(r)),Re(r)||(r=typeof i=="string"?n.parse(r,i):n.parse(r)),r===null?null:(o&&(r=o==="week"&&(No(s)||s===!0)?n.startOf(r,"isoWeek",s):n.startOf(r,o)),+r)}function hm(t,e,n,i){const o=pt.length;for(let s=pt.indexOf(t);s<o-1;++s){const r=Al[pt[s]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((n-e)/(a*r.size))<=i)return pt[s]}return pt[o-1]}function WE(t,e,n,i,o){for(let s=pt.length-1;s>=pt.indexOf(n);s--){const r=pt[s];if(Al[r].common&&t._adapter.diff(o,i,r)>=e-1)return r}return pt[n?pt.indexOf(n):0]}function JE(t){for(let e=pt.indexOf(t)+1,n=pt.length;e<n;++e)if(Al[pt[e]].common)return pt[e]}function mm(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:o}=ef(n,e),s=n[i]>=e?n[i]:n[o];t[s]=!0}}function YE(t,e,n,i){const o=t._adapter,s=+o.startOf(e[0].value,i),r=e[e.length-1].value;let a,l;for(a=s;a<=r;a=+o.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function gm(t,e,n){const i=[],o={},s=e.length;let r,a;for(r=0;r<s;++r)a=e[r],o[a]=r,i.push({value:a,major:!1});return s===0||!n?i:YE(t,i,o,n)}class Xa extends dr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),o=this._adapter=new PC._date(e.adapters.date);o.init(n),Ts(i.displayFormats,o.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:pm(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:o,max:s,minDefined:r,maxDefined:a}=this.getUserBounds();function l(u){!r&&!isNaN(u.min)&&(o=Math.min(o,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!r||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),o=Re(o)&&!isNaN(o)?o:+n.startOf(Date.now(),i),s=Re(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(o,s-1),this.max=Math.max(o+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,o=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const s=this.min,r=this.max,a=u1(o,s,r);return this._unit=n.unit||(i.autoSkip?hm(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):WE(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:JE(this._unit),this.initOffsets(o),e.reverse&&a.reverse(),gm(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,o,s;this.options.offset&&e.length&&(o=this.getDecimalForValue(e[0]),e.length===1?n=1-o:n=(this.getDecimalForValue(e[1])-o)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const r=e.length<3?.5:.25;n=Mt(n,0,r),i=Mt(i,0,r),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,o=this.options,s=o.time,r=s.unit||hm(s.minUnit,n,i,this._getLabelCapacity(n)),a=se(o.ticks.stepSize,1),l=r==="week"?s.isoWeekday:!1,u=No(l)||l===!0,d={};let h=n,m,g;if(u&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,u?"day":r),e.diff(i,n,r)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+r);const v=o.ticks.source==="data"&&this.getDataTimestamps();for(m=h,g=0;m<i;m=+e.add(m,a,r),g++)mm(d,m,v);return(m===i||o.bounds==="ticks"||g===1)&&mm(d,m,v),Object.keys(d).sort(fm).map(_=>+_)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const o=this.options.time.displayFormats,s=this._unit,r=n||o[s];return this._adapter.format(e,r)}_tickFormatFunction(e,n,i,o){const s=this.options,r=s.ticks.callback;if(r)return ye(r,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&a[l],h=u&&a[u],m=i[n],g=u&&h&&m&&m.major;return this._adapter.format(e,o||(g?h:d))}generateTickLabels(e){let n,i,o;for(n=0,i=e.length;n<i;++n)o=e[n],o.label=this._tickFormatFunction(o.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,o=$n(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(o),r=Math.sin(o),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*r,h:i*r+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,o=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,gm(this,[e],this._majorUnit),o),r=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(n=0,i=o.length;n<i;++n)e=e.concat(o[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const o=this.getLabels();for(n=0,i=o.length;n<i;++n)e.push(pm(this,o[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return f1(e.sort(fm))}}H(Xa,"id","time"),H(Xa,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function $r(t,e,n){let i=0,o=t.length-1,s,r,a,l;n?(e>=t[i].pos&&e<=t[o].pos&&({lo:i,hi:o}=Si(t,"pos",e)),{pos:s,time:a}=t[i],{pos:r,time:l}=t[o]):(e>=t[i].time&&e<=t[o].time&&({lo:i,hi:o}=Si(t,"time",e)),{time:s,pos:a}=t[i],{time:r,pos:l}=t[o]);const u=r-s;return u?a+(l-a)*(e-s)/u:a}class xm extends Xa{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=$r(n,this.min),this._tableRange=$r(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,o=[],s=[];let r,a,l,u,d;for(r=0,a=e.length;r<a;++r)u=e[r],u>=n&&u<=i&&o.push(u);if(o.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(r=0,a=o.length;r<a;++r)d=o[r+1],l=o[r-1],u=o[r],Math.round((d+l)/2)!==u&&s.push({time:u,pos:r/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((o,s)=>o-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return($r(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return $r(this._table,i*this._tableRange+this._minPos,!0)}}H(xm,"id","timeseries"),H(xm,"defaults",Xa.defaults);const _y="label";function vm(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function KE(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function by(t,e){t.labels=e}function wy(t,e,n=_y){const i=[];t.datasets=e.map(o=>{const s=t.datasets.find(r=>r[n]===o[n]);return!s||!o.data||i.includes(s)?{...o}:(i.push(s),Object.assign(s,o),s)})}function QE(t,e=_y){const n={labels:[],datasets:[]};return by(n,t.labels),wy(n,t.datasets,e),n}function XE(t,e){const{height:n=150,width:i=300,redraw:o=!1,datasetIdKey:s,type:r,data:a,options:l,plugins:u=[],fallbackContent:d,updateMode:h,...m}=t,g=J.useRef(null),v=J.useRef(null),_=()=>{g.current&&(v.current=new zo(g.current,{type:r,data:QE(a,s),options:l&&{...l},plugins:u}),vm(e,v.current))},x=()=>{vm(e,null),v.current&&(v.current.destroy(),v.current=null)};return J.useEffect(()=>{!o&&v.current&&l&&KE(v.current,l)},[o,l]),J.useEffect(()=>{!o&&v.current&&by(v.current.config.data,a.labels)},[o,a.labels]),J.useEffect(()=>{!o&&v.current&&a.datasets&&wy(v.current.config.data,a.datasets,s)},[o,a.datasets]),J.useEffect(()=>{v.current&&(o?(x(),setTimeout(_)):v.current.update(h))},[o,l,a.labels,a.datasets,h]),J.useEffect(()=>{v.current&&(x(),setTimeout(_))},[r]),J.useEffect(()=>(_(),()=>x()),[]),c.jsx("canvas",{ref:g,role:"img",height:n,width:i,...m,children:d})}const ZE=J.forwardRef(XE);function pf(t,e){return zo.register(e),J.forwardRef((n,i)=>c.jsx(ZE,{...n,ref:i,type:t}))}const Sy=pf("line",ca),eT=pf("radar",ua),tT=pf("scatter",Ps);function nT(t){return t?t<20?10:t<40?30:t<60?50:t<80?70:90:null}function iT(t){return t?t>75?10:t>65?30:t>60?50:t>55?70:90:null}function oT(t){return t==null?null:t>.6?10:t>.3?30:t>.1?50:t>-.1?70:90}function sT(t){return t||null}function rT(t){return t||null}function aT(t){return t||null}function lT(t){return t||null}function Gi(t){const e=t.filter(n=>n!==null);return e.length===0?50:e.reduce((n,i)=>n+i,0)/e.length}function cT(t){const e=Gi([nT(t.rmssd),iT(t.resting_heart_rate)]),n=Gi([oT(t.temperature_deviation),t.respiratory_rate?100-t.respiratory_rate:null]),i=Gi([sT(t.readiness_score)]),o=Gi([rT(t.sleep_score),t.deep_sleep_duration?Math.min(t.deep_sleep_duration/60*10,100):null,t.rem_sleep_duration?Math.min(t.rem_sleep_duration/60*10,100):null,t.sleep_latency?100-t.sleep_latency:null]),s=Gi([aT(t.activity_score),t.steps?Math.min(t.steps/100,100):null,t.inactive_time?100-Math.min(t.inactive_time/10,100):null]),r=Gi([lT(t.sleep_timing)]);return{stress:e,inflammation:n,recovery:i,sleep:o,activity:s,circadian:r}}function uT(t){return t.stress*.3+t.sleep*.25+t.recovery*.2+t.inflammation*.1+t.activity*.1+t.circadian*.05}function dT(t){return t>=81?{level:1,label:"Recupero Parasimpatico",color:"green",description:"Tono vagale elevato, ottimo recupero e stabilit autonomica."}:t>=61?{level:2,label:"Equilibrio Autonomico",color:"blue",description:"Buon bilanciamento SNS/PNS, recupero adeguato."}:t>=41?{level:3,label:"Zona Neutra",color:"yellow",description:"Stato autonomico stabile, nessun segnale critico."}:t>=21?{level:4,label:"Attivazione Simpatica",color:"orange",description:"Aumento del tono simpatico, stress moderato."}:{level:5,label:"Sovraccarico / Burnout",color:"red",description:"Iperattivazione o collasso autonomico, priorit al recupero."}}function fT(t){return t>=81?"prevalenza_vagale":t>=70?"meditativo_profondo":t>=60?"rilassamento_emotivo":t>=50?"neutro":t>=40?"rilascio_dello_stress":t>=30?"attivazione_lieve":t>=20?"attivazione_intensa":t>=10?"sovraccarico_simpatico":"collasso_parasimpatico"}function Cy(t){const e=cT(t),n=uT(e);return{stateId:fT(n),badge:Math.round(n),badgeClass:dT(n),clusters:e}}function pT(t){return new Promise((e,n)=>{CS.parse(t,{header:!0,dynamicTyping:!0,complete:i=>{const s=i.data.filter(r=>r.date).map(r=>({date:r.date,rmssd:Number(r["Average HRV"])||0,rhr:Number(r["Lowest Resting Heart Rate"])||0,temperature:Number(r["Temperature Deviation (C)"])||0,respiratory_rate:Number(r["Respiratory Rate"])||0,readiness:Number(r["Readiness Score"])||0,sleep_score:Number(r["Sleep Score"])||0,deep_sleep:Number(r["Deep Sleep Duration"])||0,rem_sleep:Number(r["REM Sleep Duration"])||0,activity_score:Number(r["Activity Score"])||0,steps:Number(r.Steps)||0,inactive_time:Number(r["Inactive Time"])||0,sleep_latency:Number(r["Sleep Latency"])||0,sleep_timing:Number(r["Sleep Timin Score"])||0}));e(s)},error:i=>n(i)})})}function hT(t){const e=t.map(v=>v.rmssd),n=t.map(v=>v.rhr),i=t.map(v=>v.temperature),o=v=>v.reduce((_,x)=>_+x,0)/v.length,s=o(e),r=o(n),a=o(i),l=e[e.length-1]-e[0],u=n[n.length-1]-n[0],d=i[i.length-1]-i[0];let h="neutro",m=[],g=[];return l<-5&&(h="sovraccarico_simpatico",m.push("Trend HRV in calo: stress cumulativo."),g.push("Riduci carico fisico per 48 ore.")),u>3&&(m.push("RHR in aumento: attivazione simpatica."),g.push("Aumenta idratazione e sonno.")),d>.2&&(m.push("Temperatura in aumento: possibile infiammazione."),g.push("Evita allenamenti intensi.")),{rmssdAvg:s,rhrAvg:r,tempAvg:a,rmssdTrend:l,rhrTrend:u,tempTrend:d,state:h,warnings:m,suggestions:g}}const mT=({state:t})=>{const e={collasso_parasimpatico:"bg-red-600",sovraccarico_simpatico:"bg-orange-500",neutro:"bg-emerald-600",prevalenza_vagale:"bg-sky-600"},n={collasso_parasimpatico:"Collasso Parasimpatico",sovraccarico_simpatico:"Sovraccarico Simpatico",neutro:"Equilibrio Neutro",prevalenza_vagale:"Prevalenza Vagale"};return c.jsx("span",{className:`inline-block px-3 py-1 text-white text-xs font-bold rounded-full ${e[t]}`,children:n[t]})},gT=({period:t,setPeriod:e})=>{const n=[{label:"1g",value:1},{label:"7g",value:7},{label:"14g",value:14},{label:"30g",value:30}];return c.jsx("div",{className:"flex gap-3 mb-6",children:n.map(i=>c.jsx("button",{onClick:()=>e(i.value),className:`px-4 py-2 rounded-full font-bold transition-all ${t===i.value?"bg-sky-600 text-white shadow":"bg-white border border-slate-300 text-slate-500 hover:bg-slate-100"}`,children:i.label},i.value))})},Tc=({label:t,data:e,dates:n})=>{const i={labels:n,datasets:[{label:t,data:e,borderColor:"#0284c7",backgroundColor:"rgba(2,132,199,0.2)",tension:.3}]};return c.jsx("div",{className:"bg-white p-4 rounded-2xl shadow border border-slate-100 mb-6",children:c.jsx(Sy,{data:i})})},xT=({onNavigate:t})=>{const[e,n]=J.useState(7),[i,o]=J.useState([]),[s,r]=J.useState(null),[a,l]=J.useState(null),{buildPlayerPayload:u}=Jd(),d=async h=>{const m=h.target.files[0];if(!m)return;const g=await pT(m);o(g);const v=g[g.length-1];r(Cy(v));const _=g.slice(-e);l(hT(_))};return c.jsxs("div",{className:"p-6 md:p-10 max-w-6xl mx-auto pb-32",children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Analisi Oura"}),c.jsx("p",{className:"text-slate-600 mb-6 font-medium italic",children:"Carica il tuo file CSV Oura per ottenere unanalisi completa del tuo sistema autonomico."}),c.jsx(gT,{period:e,setPeriod:n}),c.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-lg border border-slate-100 mb-10",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Carica CSV Oura"}),c.jsx("input",{type:"file",accept:".csv",onChange:d,className:"w-full p-3 border border-slate-300 rounded-xl bg-slate-50"}),c.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Carica il file CSV scaricato dal portale Oura."})]}),s&&a&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mb-6",children:c.jsx(mT,{state:a.state})}),c.jsx("div",{className:"bg-white p-6 rounded-3xl shadow-lg border border-slate-100 mb-10",children:c.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:"Analisi del Giorno"})}),c.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-lg border border-slate-100 mb-10",children:[c.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-3",children:["Analisi del Periodo (",e," giorni)"]}),c.jsxs("p",{className:"text-slate-700 mb-4",children:["HRV medio: ",c.jsx("b",{children:a.rmssdAvg.toFixed(1)}),c.jsx("br",{}),"RHR medio: ",c.jsx("b",{children:a.rhrAvg.toFixed(1)}),c.jsx("br",{}),"Temperatura media: ",c.jsx("b",{children:a.tempAvg.toFixed(2)})]}),a.warnings.length>0&&c.jsx("ul",{className:"text-red-600 mb-3",children:a.warnings.map((h,m)=>c.jsxs("li",{children:[" ",h]},m))}),c.jsx("ul",{className:"text-slate-700",children:a.suggestions.map((h,m)=>c.jsxs("li",{children:[" ",h]},m))})]}),c.jsx(Tc,{label:"HRV (RMSSD)",data:i.slice(-e).map(h=>h.rmssd),dates:i.slice(-e).map(h=>h.date)}),c.jsx(Tc,{label:"RHR",data:i.slice(-e).map(h=>h.rhr),dates:i.slice(-e).map(h=>h.date)}),c.jsx(Tc,{label:"Temperatura",data:i.slice(-e).map(h=>h.temperature),dates:i.slice(-e).map(h=>h.date)}),c.jsx("button",{onClick:()=>{const h=u(a.state);t("hrvPlayerPremium",{payload:h})},className:"mt-6 w-full py-4 bg-emerald-600 text-white font-black rounded-2xl shadow-lg hover:bg-emerald-700 transition-all",children:"Mostra Piano Terapeutico"})]})]})},vT=({onNavigate:t,payload:e})=>{const n=J.useRef(null),[i,o]=J.useState(!1);if(!e)return c.jsx("div",{className:"p-6 text-center text-red-600 font-bold",children:"Errore: nessun dato disponibile."});const s=e.clinical_title??e.state_label,r=e.clinical_description??e.objective,a=e.clinical_goal??"",l=e.treatment_label,u=e.treatment_steps,d=e.treatment_duration_minutes,h=e.audio_title,m=e.audio_description,g=e.audio_duration_seconds,v=e.audio_url,_=()=>{n.current&&(i?(n.current.pause(),o(!1)):(n.current.play(),o(!0)))};return c.jsxs("div",{className:"p-6 max-w-3xl mx-auto animate-fade-in pb-32",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-4",children:s}),c.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-5 shadow-md mb-6",children:[c.jsx("p",{className:"text-slate-700 leading-relaxed font-medium",children:r}),c.jsx("p",{className:"mt-4 text-slate-900 font-bold",children:" Obiettivo terapeutico:"}),c.jsx("p",{className:"text-slate-700",children:a})]}),c.jsxs("div",{className:"bg-sky-50 border border-sky-200 rounded-2xl p-5 shadow mb-6",children:[c.jsxs("h2",{className:"text-xl font-bold text-sky-700 mb-2",children:["Routine consigliata: ",l]}),c.jsxs("p",{className:"text-slate-700 mb-3",children:["Durata: ",c.jsxs("strong",{children:[d," minuti"]})]}),c.jsx("ul",{className:"list-disc ml-6 text-slate-700",children:u.map((x,y)=>c.jsx("li",{children:x},y))})]}),c.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-5 shadow mb-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:[" ",h]}),c.jsx("p",{className:"text-slate-600 mb-3",children:m}),c.jsxs("p",{className:"text-slate-700 mb-3",children:["Durata audio: ",c.jsxs("strong",{children:[Math.round(g/60)," min"]})]}),c.jsx("audio",{ref:n,src:`/CLINICAL-WELLNESS-SPA/${v.replace(/^\//,"")}`,controls:!0,className:"w-full mt-2"})]}),c.jsxs("div",{className:"flex flex-col gap-3 mt-6",children:[c.jsx("button",{onClick:_,className:"w-full py-3 bg-sky-600 text-white font-bold rounded-xl shadow hover:bg-sky-700 transition",children:i?"Pausa":"Avvia Audio"}),c.jsx("button",{onClick:()=>t("home"),className:"w-full py-3 bg-red-500 text-white font-bold rounded-xl shadow hover:bg-red-600 transition",children:"Fine Routine"})]})]})};function yT({payload:t}){return t?c.jsxs("div",{className:"player-container",children:[c.jsx("h2",{className:"player-title",children:t.state_label}),c.jsx("p",{className:"player-objective",children:t.objective}),c.jsxs("div",{className:"player-section",children:[c.jsx("h3",{children:"Trattamento"}),c.jsx("p",{className:"player-treatment-label",children:t.treatment_label}),c.jsx("ul",{className:"player-steps",children:t.treatment_steps.map((e,n)=>c.jsx("li",{children:e},n))}),c.jsxs("p",{className:"player-duration",children:["Durata: ",t.treatment_duration_minutes," minuti"]})]}),c.jsxs("div",{className:"player-section",children:[c.jsx("h3",{children:"Audio"}),c.jsx("p",{className:"player-audio-title",children:t.audio_title}),c.jsx("p",{className:"player-audio-description",children:t.audio_description}),c.jsxs("audio",{controls:!0,className:"player-audio",children:[c.jsx("source",{src:`/audio/${t.audio_title}.mp3`,type:"audio/mpeg"}),"Il tuo browser non supporta laudio."]}),c.jsxs("p",{className:"player-duration",children:["Durata audio: ",Math.round(t.audio_duration_seconds/60)," min"]})]})]}):c.jsx("div",{className:"player-container empty",children:c.jsx("p",{children:"Seleziona uno stato HRV per iniziare."})})}const _T=[{id:"routine_5_min",name:"5 minuti per ripartire",rounds:1,steps:[{name:"Marcia sul posto",imageStart:"images/exercises/ex_march_in_place_start.png",imageEnd:"images/exercises/ex_march_in_place_end.png",workSeconds:40,restSeconds:20},{name:"Squat alla sedia",imageStart:"images/exercises/ex_squat_chair_start.png",imageEnd:"images/exercises/ex_squat_chair_end.png",workSeconds:40,restSeconds:20},{name:"Mobilit spalle",imageStart:"images/exercises/ex_shoulder_mobility_wall_start.png",imageEnd:"images/exercises/ex_shoulder_mobility_wall_end.png",workSeconds:40,restSeconds:20}]},{id:"routine_8_min",name:"8 minuti per chi  stanco",rounds:1,steps:[{name:"Step laterali",imageStart:"images/exercises/ex_side_steps_start.png",imageEnd:"images/exercises/ex_side_steps_end.png",workSeconds:45,restSeconds:15},{name:"Glute bridge",imageStart:"images/exercises/ex_glute_bridge_start.png",imageEnd:"images/exercises/ex_glute_bridge_end.png",workSeconds:45,restSeconds:15},{name:"Plank al muro",imageStart:"images/exercises/ex_wall_plank_start.png",imageEnd:"images/exercises/ex_wall_plank_end.png",workSeconds:45,restSeconds:15},{name:"Stretching toracico",imageStart:"images/exercises/ex_chest_opening_wall_start.png",imageEnd:"images/exercises/ex_chest_opening_wall_end.png",workSeconds:45,restSeconds:15}]},{id:"routine_12_min",name:"12 minuti per iniziare a sentirsi meglio",rounds:1,steps:[{name:"Marcia veloce",imageStart:"images/exercises/ex_march_in_place_start.png",imageEnd:"images/exercises/ex_march_in_place_end.png",workSeconds:40,restSeconds:20},{name:"Squat alla sedia",imageStart:"images/exercises/ex_squat_chair_start.png",imageEnd:"images/exercises/ex_squat_chair_end.png",workSeconds:40,restSeconds:20},{name:"Bird-dog in piedi",imageStart:"images/exercises/ex_bird_dog_standing_start.png",imageEnd:"images/exercises/ex_bird_dog_standing_end.png",workSeconds:40,restSeconds:20},{name:"Push-up al muro",imageStart:"images/exercises/ex_wall_pushup_start.png",imageEnd:"images/exercises/ex_wall_pushup_end.png",workSeconds:40,restSeconds:20},{name:"Glute bridge",imageStart:"images/exercises/ex_glute_bridge_start.png",imageEnd:"images/exercises/ex_glute_bridge_end.png",workSeconds:40,restSeconds:20},{name:"Stretching finale",imageStart:"images/exercises/ex_lower_back_stretch_seated_start.png",imageEnd:"images/exercises/ex_lower_back_stretch_seated_end.png",workSeconds:40,restSeconds:20}]},{id:"routine_collo_spalle_5_min",name:"5 minuti collo e spalle",rounds:1,steps:[{name:"Stretching collo",imageStart:"images/exercises/ex_neck_stretch_start.png",imageEnd:"images/exercises/ex_neck_stretch_end.png",workSeconds:40,restSeconds:20},{name:"Mobilit spalle",imageStart:"images/exercises/ex_shoulder_mobility_wall_start.png",imageEnd:"images/exercises/ex_shoulder_mobility_wall_end.png",workSeconds:40,restSeconds:20},{name:"Stretching toracico",imageStart:"images/exercises/ex_chest_opening_wall_start.png",imageEnd:"images/exercises/ex_chest_opening_wall_end.png",workSeconds:40,restSeconds:20},{name:"Stretching collo (ripetizione)",imageStart:"images/exercises/ex_neck_stretch_start.png",imageEnd:"images/exercises/ex_neck_stretch_end.png",workSeconds:40,restSeconds:20},{name:"Mobilit spalle (ripetizione)",imageStart:"images/exercises/ex_shoulder_mobility_wall_start.png",imageEnd:"images/exercises/ex_shoulder_mobility_wall_end.png",workSeconds:40,restSeconds:20}]}],bT={routines:_T};function wT({onNavigate:t}){const e=bT.routines;return c.jsxs("div",{className:"p-6 md:p-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-6",children:"Programmi Fitness"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(n=>c.jsxs("div",{onClick:()=>t("routinePlayer",{routine:n}),className:"bg-white p-6 rounded-xl shadow-md cursor-pointer hover:shadow-xl hover:scale-[1.02] transition-all duration-300",children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:n.name}),c.jsxs("p",{className:"text-slate-500 mt-2",children:[n.steps.length," esercizi  ",n.rounds," round"]})]},n.id))})]})}function ST({onNavigate:t,pageData:e}){const{routine:n}=e,[i,o]=J.useState(0),[s,r]=J.useState(3),[a,l]=J.useState(!1),[u,d]=J.useState(!0),[h,m]=J.useState(!1),[g,v]=J.useState("opacity-0"),_=J.useRef(null),x=n.steps[i],y=n.steps.length;return J.useEffect(()=>{v("opacity-0"),setTimeout(()=>v("opacity-100"),50)},[i,a]),J.useEffect(()=>{if(!u)return;const b=setInterval(()=>{r(w=>w-1)},1e3);return s===0&&(clearInterval(b),d(!1),r(x.workSeconds)),()=>clearInterval(b)},[s,u]),J.useEffect(()=>{if(u||h)return;const b=setInterval(()=>{r(w=>w-1)},1e3);return s===0&&(clearInterval(b),_.current&&_.current.play().catch(()=>{}),v("opacity-0"),setTimeout(()=>{if(!a)r(x.restSeconds),l(!0);else if(i<y-1){const w=n.steps[i+1];o(i+1),r(w.workSeconds),l(!1)}else m(!0)},300)),()=>clearInterval(b)},[s,u,h]),h?c.jsxs("div",{className:"p-10 flex flex-col items-center text-center animate-fade-in",children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-6",children:"Routine completata! "}),c.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Ottimo lavoro! Hai completato tutti gli esercizi."}),c.jsx("img",{src:"/images/fitness/completed.png",alt:"Routine completata",className:"w-64 h-auto mb-10"}),c.jsx("button",{onClick:()=>t("fitness"),className:"px-6 py-3 bg-sky-600 text-white rounded-lg shadow hover:bg-sky-700 transition",children:"Torna ai programmi"})]}):c.jsxs("div",{className:"p-4 flex flex-col items-center",children:[c.jsx("button",{onClick:()=>t("fitness"),className:"self-start mb-4 px-4 py-2 bg-slate-200 rounded-lg hover:bg-slate-300 transition",children:" Indietro"}),c.jsxs("div",{className:"text-base text-slate-600 mb-1",children:["Esercizio ",i+1," / ",y]}),c.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-4 text-center",children:x.name}),c.jsxs("div",{className:"w-full max-w-md bg-white border border-slate-300 rounded-xl p-4 shadow-sm mb-6",children:[c.jsxs("div",{className:"flex flex-row items-start justify-center gap-4",children:[c.jsxs("div",{className:"flex flex-col items-center flex-1",children:[c.jsx("div",{className:"border border-slate-300 rounded-lg p-2 bg-slate-50 w-full flex justify-center",children:c.jsx("img",{src:x.imageStart,alt:`${x.name} - inizio`,className:`h-32 w-auto transition-opacity duration-300 ${g}`})}),c.jsxs("div",{className:"mt-1 flex items-center gap-1 text-slate-700 text-xs font-semibold tracking-wide",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-sky-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 12h14M5 12l6-6m-6 6l6 6"})}),c.jsx("span",{children:"Start"})]})]}),c.jsxs("div",{className:"flex flex-col items-center flex-1",children:[c.jsx("div",{className:"border border-slate-300 rounded-lg p-2 bg-slate-50 w-full flex justify-center",children:c.jsx("img",{src:x.imageEnd,alt:`${x.name} - fine`,className:`h-32 w-auto transition-opacity duration-300 ${g}`})}),c.jsxs("div",{className:"mt-1 flex items-center gap-1 text-slate-700 text-xs font-semibold tracking-wide",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-rose-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 12H5m14 0l-6-6m6 6l-6 6"})}),c.jsx("span",{children:"End"})]})]})]}),c.jsxs("div",{className:"border-t border-slate-200 pt-3 mt-3 text-center text-slate-600 text-xs",children:[c.jsxs("p",{children:["Lavoro: ",c.jsxs("strong",{children:[x.workSeconds,"s"]})]}),c.jsxs("p",{children:["Riposo: ",c.jsxs("strong",{children:[x.restSeconds,"s"]})]})]})]}),c.jsxs("div",{className:"text-5xl font-bold text-slate-800 mb-3",children:[s,"s"]}),c.jsx("div",{className:"text-xl text-slate-600 mb-4",children:u?"Preparati...":a?"Riposo":"Lavoro"}),c.jsxs("audio",{ref:_,children:["//     ",c.jsx("source",{src:"/audio/beep.mp3",type:"audio/mpeg"}),c.jsx("source",{src:"/CLINICAL-WELLNESS-SPA/audio/beep.mp3",type:"audio/mpeg"})]})]})}function Ee(t,e){try{const n=localStorage.getItem(t);return n==="undefined"?e:n?JSON.parse(n):e}catch(n){return console.error(`Error parsing JSON from localStorage key "${t}":`,n),localStorage.removeItem(t),e}}const ky={fermentativo:{label:"Profilo Fermentativo",severity:"moderato",accentColor:"bg-amber-500"},putrefattivo:{label:"Profilo Putrefattivo",severity:"critico",accentColor:"bg-red-500"},"ipo-diverso":{label:"Profilo Ipo-diverso",severity:"moderato",accentColor:"bg-orange-500"},"disbiotico-stress":{label:"Profilo Disbiotico da Stress",severity:"critico",accentColor:"bg-rose-500"},equilibrato:{label:"Profilo Equilibrato",severity:"buono",accentColor:"bg-emerald-500"}};function Ey(t){let e;t<=32?e="disbiotico-stress":t<=44?e="putrefattivo":t<=56?e="fermentativo":t<=68?e="ipo-diverso":e="equilibrato";const n=ky[e];return{profileId:e,profileName:n.label,score:t}}const hf=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 22h6a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h6z"}),c.jsx("path",{d:"M12 2v4"}),c.jsx("path",{d:"M20 12v-2a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"})]}),Za=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 5C12 5 12 5 12 5c-2.2 0-4 1.8-4 4v0c0 1.1.9 2 2 2h4c1.1 0 2-.9 2-2v0c0-2.2-1.8-4-4-4z"}),c.jsx("path",{d:"M12 11v11"}),c.jsx("path",{d:"M10 11H8c-1.1 0-2 .9-2 2v0c0 2.2 1.8 4 4 4h0"}),c.jsx("path",{d:"M14 11h2c1.1 0 2 .9 2 2v0c0 2.2-1.8 4-4 4h0"}),c.jsx("circle",{cx:"12",cy:"5",r:"2"})]}),mf=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 22c-3.3 0-6-2.7-6-6v-2a6 6 0 1 1 12 0v2c0 3.3-2.7 6-6 6z"}),c.jsx("path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),c.jsx("path",{d:"M12 4V2"}),c.jsx("path",{d:"M12 20v2"}),c.jsx("path",{d:"m4.9 4.9 1.4 1.4"}),c.jsx("path",{d:"m17.7 17.7 1.4 1.4"}),c.jsx("path",{d:"M2 12h2"}),c.jsx("path",{d:"M20 12h2"}),c.jsx("path",{d:"m4.9 19.1 1.4-1.4"}),c.jsx("path",{d:"m17.7 6.3 1.4-1.4"})]}),gf=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 22c-3.3 0-6-2.7-6-6v-2a6 6 0 1 1 12 0v2c0 3.3-2.7 6-6 6z"}),c.jsx("path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),c.jsx("path",{d:"M12 4V2"}),c.jsx("path",{d:"M12 20v2"}),c.jsx("path",{d:"m4.9 4.9 1.4 1.4"}),c.jsx("path",{d:"m17.7 17.7 1.4 1.4"}),c.jsx("path",{d:"M2 12h2"}),c.jsx("path",{d:"M20 12h2"}),c.jsx("path",{d:"m4.9 19.1 1.4-1.4"}),c.jsx("path",{d:"m17.7 6.3 1.4-1.4"})]}),Ty=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 22c-3.3 0-6-2.7-6-6v-2a6 6 0 1 1 12 0v2c0 3.3-2.7 6-6 6z"}),c.jsx("path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),c.jsx("path",{d:"M12 4V2"}),c.jsx("path",{d:"M12 20v2"}),c.jsx("path",{d:"m4.9 4.9 1.4 1.4"}),c.jsx("path",{d:"m17.7 17.7 1.4 1.4"}),c.jsx("path",{d:"M2 12h2"}),c.jsx("path",{d:"M20 12h2"}),c.jsx("path",{d:"m4.9 19.1 1.4-1.4"}),c.jsx("path",{d:"m17.7 6.3 1.4-1.4"})]}),un={sleep:{id:"sleep",title:"Analisi del Sonno",Icon:hf,questions:[{text:"Quante ore dormi in media per notte?",phase:"Fase 2",options:[{text:"Meno di 5 ore",value:1},{text:"5-6 ore",value:2},{text:"7-8 ore",value:4},{text:"Pi di 8 ore",value:3}]},{text:"Ti svegli durante la notte?",phase:"Fase 1",options:[{text:"Spesso",value:1},{text:"A volte",value:2},{text:"Raramente",value:3},{text:"Mai",value:4}]},{text:"Come ti senti al risveglio?",phase:"Fase 2",options:[{text:"Stanco e non riposato",value:1},{text:"Leggermente stanco",value:2},{text:"Abbastanza riposato",value:3},{text:"Pieno di energie",value:4}]},{text:"Quanto tempo impieghi per addormentarti?",phase:"Fase 1",options:[{text:"Pi di 60 minuti",value:1},{text:"30-60 minuti",value:2},{text:"15-30 minuti",value:3},{text:"Meno di 15 minuti",value:4}]},{text:"Usi dispositivi elettronici (telefono, TV) prima di dormire?",phase:"Fase 1",options:[{text:"Sempre",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente o mai",value:4}]},{text:"La tua camera da letto  buia e silenziosa?",phase:"REM",options:[{text:"No,  luminosa e/o rumorosa",value:1},{text:"Abbastanza",value:2},{text:"S, per la maggior parte",value:3},{text:"S, completamente",value:4}]},{text:"Ti capita di russare o avere apnee notturne?",phase:"Fase 3-4",options:[{text:"S, mi  stato detto spesso",value:1},{text:"A volte",value:2},{text:"Non che io sappia",value:3},{text:"No, mai",value:4}]},{text:"Hai orari di sonno regolari (anche nel weekend)?",phase:"Fase 2",options:[{text:"No, molto irregolari",value:1},{text:"Abbastanza irregolari",value:2},{text:"Abbastanza regolari",value:3},{text:"S, molto regolari",value:4}]},{text:"Bevi caff o alcolici nelle ore serali?",phase:"REM",options:[{text:"S, regolarmente",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente o mai",value:4}]},{text:"Fai attivit fisica intensa poco prima di coricarti?",phase:"REM",options:[{text:"S, regolarmente",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente o mai",value:4}]},{text:"Ti senti assonnato durante il giorno?",phase:"Fase 2",options:[{text:"Molto, fatico a rimanere sveglio",value:1},{text:"Abbastanza",value:2},{text:"Un po'",value:3},{text:"Per niente",value:4}]},{text:"Fai sonnellini durante il giorno?",phase:"Fase 2",options:[{text:"S, lunghi e spesso",value:1},{text:"S, ma brevi (meno di 30 min)",value:3},{text:"Raramente",value:4},{text:"Quasi mai",value:2}]},{text:"La temperatura della tua camera  confortevole?",phase:"Fase 3-4",options:[{text:"No, troppo calda o troppo fredda",value:1},{text:"A volte s, a volte no",value:2},{text:"Generalmente s",value:3},{text:"S,  ideale",value:4}]},{text:"Il tuo materasso e cuscino sono comodi?",phase:"Fase 3-4",options:[{text:"No, per niente",value:1},{text:"Potrebbero essere migliori",value:2},{text:"S, abbastanza",value:3},{text:"S, molto comodi",value:4}]},{text:"Hai pensieri stressanti o ansiosi quando vai a letto?",phase:"Fase 1 / REM",options:[{text:"S, quasi ogni sera",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Ceni molto tardi o in modo pesante?",phase:"Fase 3-4",options:[{text:"S, quasi sempre",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente o mai",value:4}]},{text:"Ti alzi per andare in bagno durante la notte?",phase:"Fase 3-4",options:[{text:"Pi di due volte",value:1},{text:"Una o due volte",value:2},{text:"Raramente",value:3},{text:"Mai",value:4}]},{text:"Come giudicheresti la qualit generale del tuo sonno?",phase:"Fase 3-4",options:[{text:"Molto scarsa",value:1},{text:"Scarsa",value:2},{text:"Buona",value:3},{text:"Eccellente",value:4}]},{text:"Soffri di crampi o sindrome delle gambe senza riposo?",phase:"Fase 3-4",options:[{text:"S, frequentemente",value:1},{text:"A volte",value:2},{text:"Raramente",value:3},{text:"Mai",value:4}]},{text:"Assumi farmaci o integratori per dormire?",phase:"Fase 1 / REM",options:[{text:"S, regolarmente",value:1},{text:"Occasionalmente",value:2},{text:"Molto raramente",value:3},{text:"Mai",value:4}]}],results:[{scoreMin:20,scoreMax:40,title:"Qualit del sonno molto scarsa",summary:"Il tuo sonno sembra essere significativamente disturbato.  fondamentale indagare le cause e adottare strategie mirate per migliorare il riposo notturno."},{scoreMin:41,scoreMax:60,title:"Qualit del sonno migliorabile",summary:"Ci sono diversi aspetti del tuo sonno che possono essere migliorati. Piccoli cambiamenti nelle tue abitudini potrebbero fare una grande differenza."},{scoreMin:61,scoreMax:80,title:"Buona qualit del sonno",summary:"Hai delle buone abitudini di sonno, ma c' ancora margine per ottimizzare il tuo riposo e massimizzare i benefici per la tua salute."}],phaseRemedies:{"Fase 1":{description:"Sonno leggero, addormentamento e risvegli frequenti",remedies:["Melatonina","Camomilla","Papaver rhoeas"]},"Fase 2":{description:"Sonno leggero, stabilit e riposo percepito",remedies:["Melissa","Passiflora"]},"Fase 3-4":{description:"Sonno profondo, recupero fisico",remedies:["Valeriana","Luppolo","Ashwagandha"]},REM:{description:"Sonno REM, sogni e memoria",remedies:["Lavanda","Escolzia","Bacopa monnieri"]}}},fitness:{id:"fitness",title:"Analisi Fitness",Icon:Za,questions:[{text:"Quante volte a settimana fai attivit fisica aerobica (corsa, nuoto, bici)?",options:[{text:"Mai",value:1},{text:"1-2 volte",value:2},{text:"3-4 volte",value:3},{text:"5 o pi volte",value:4}]},{text:"Quanto dura in media una tua sessione di allenamento?",options:[{text:"Meno di 20 minuti",value:1},{text:"20-40 minuti",value:2},{text:"40-60 minuti",value:3},{text:"Pi di 60 minuti",value:4}]},{text:"Includi esercizi di forza (pesi, corpo libero) nella tua routine?",options:[{text:"Mai",value:1},{text:"Raramente",value:2},{text:"1-2 volte a settimana",value:3},{text:"3 o pi volte a settimana",value:4}]},{text:"Come percepisci l'intensit del tuo allenamento tipico?",options:[{text:"Molto leggera",value:1},{text:"Leggera",value:2},{text:"Moderata",value:3},{text:"Intensa",value:4}]},{text:"Fai stretching o esercizi di flessibilit?",options:[{text:"Mai",value:1},{text:"Raramente",value:2},{text:"Dopo ogni allenamento",value:4},{text:"Alcune volte a settimana",value:3}]},{text:"Quanti passi fai in media al giorno?",options:[{text:"Meno di 3.000",value:1},{text:"3.000 - 6.000",value:2},{text:"6.000 - 10.000",value:3},{text:"Pi di 10.000",value:4}]},{text:"Passi la maggior parte della tua giornata seduto?",options:[{text:"S, quasi tutto il giorno",value:1},{text:"S, pi di met giornata",value:2},{text:"No, sono spesso in movimento",value:3},{text:"No, ho un lavoro molto attivo",value:4}]},{text:"Riesci a salire 3 piani di scale senza affanno eccessivo?",options:[{text:"No, con molta fatica",value:1},{text:"S, ma con un po' di affanno",value:2},{text:"S, abbastanza facilmente",value:3},{text:"S, senza problemi",value:4}]},{text:"Ti dedichi al riscaldamento prima dell'allenamento e al defaticamento dopo?",options:[{text:"Mai",value:1},{text:"Raramente",value:2},{text:"A volte",value:3},{text:"Sempre",value:4}]},{text:"Come ti senti dopo un'attivit fisica?",options:[{text:"Esausto e dolorante per giorni",value:1},{text:"Molto stanco",value:2},{text:"Piacevolmente stanco",value:3},{text:"Energizzato",value:4}]},{text:"Hai un obiettivo di fitness specifico (es. perdere peso, aumentare la massa muscolare)?",options:[{text:"No, nessuno",value:1},{text:"S, ma non lo seguo con costanza",value:2},{text:"S, e lo seguo abbastanza bene",value:3},{text:"S, e sono molto disciplinato",value:4}]},{text:"La tua routine di allenamento  varia?",options:[{text:"No, faccio sempre le stesse cose",value:1},{text:"Non molto, vario raramente",value:2},{text:"S, cerco di variare",value:3},{text:"S,  molto diversificata",value:4}]},{text:"Ti alleni da solo o in compagnia?",options:[{text:"Sempre da solo",value:2},{text:"Preferibilmente in compagnia",value:3},{text:"Dipende, entrambi",value:4},{text:"Non mi alleno",value:1}]},{text:"Quanto  importante l'attivit fisica nella tua vita?",options:[{text:"Per niente",value:1},{text:"Poco",value:2},{text:"Abbastanza",value:3},{text:"Molto",value:4}]},{text:"Hai mai avuto infortuni legati all'attivit fisica?",options:[{text:"S, e mi impedisce di allenarmi",value:1},{text:"S, pi di uno in passato",value:2},{text:"S, ma di lieve entit",value:3},{text:"No, mai",value:4}]},{text:"Come recuperi dopo l'allenamento (sonno, alimentazione)?",options:[{text:"Non ci presto attenzione",value:1},{text:"Potrei fare di pi",value:2},{text:"Ci sto attento",value:3},{text:"Il recupero  una mia priorit",value:4}]},{text:"Ascolti i segnali del tuo corpo (es. ti fermi se senti dolore)?",options:[{text:"No, tendo a ignorarli",value:1},{text:"Non sempre",value:2},{text:"Generalmente s",value:3},{text:"S, sempre",value:4}]},{text:"Ti idrati a sufficienza durante il giorno e l'allenamento?",options:[{text:"No, bevo molto poco",value:1},{text:"Potrei bere di pi",value:2},{text:"S, bevo regolarmente",value:3},{text:"S, sono molto attento all'idratazione",value:4}]},{text:"La tua motivazione ad allenarti  costante?",options:[{text:"No,  molto altalenante",value:1},{text:"A volte c', a volte no",value:2},{text:" abbastanza costante",value:3},{text:"S, sono molto motivato",value:4}]},{text:"Come giudichi il tuo attuale livello di forma fisica?",options:[{text:"Molto scarso",value:1},{text:"Scarsa",value:2},{text:"Buono",value:3},{text:"Eccellente",value:4}]}],results:[{scoreMin:20,scoreMax:40,title:"Livello di fitness da migliorare",summary:"La tua routine di attivit fisica sembra essere limitata. Incrementare gradualmente l'esercizio fisico porterebbe notevoli benefici alla tua salute generale."},{scoreMin:41,scoreMax:60,title:"Livello di fitness discreto",summary:"Hai una base di attivit fisica, ma c' un ampio margine di miglioramento. Aumentare la frequenza, la durata o l'intensit potrebbe essere il prossimo passo."},{scoreMin:61,scoreMax:80,title:"Buon livello di fitness",summary:"Sei una persona attiva e hai un buon livello di forma fisica. Continua cos e valuta di inserire nuove sfide per mantenere alta la motivazione."}]},stress:{id:"stress",title:"Analisi Ansia e Stress",Icon:mf,questions:[{text:"Con che frequenza ti senti nervoso o ansioso?",options:[{text:"Quasi ogni giorno",value:1},{text:"Pi della met dei giorni",value:2},{text:"Alcuni giorni",value:3},{text:"Raramente o mai",value:4}]},{text:"Riesci a controllare le tue preoccupazioni?",options:[{text:"No,  molto difficile",value:1},{text:"A volte, con sforzo",value:2},{text:"Generalmente s",value:3},{text:"S, facilmente",value:4}]},{text:"Ti capita di sentirti improvvisamente spaventato o in preda al panico?",options:[{text:"Spesso",value:1},{text:"A volte",value:2},{text:"Raramente",value:3},{text:"Mai",value:4}]},{text:"Hai difficolt a rilassarti?",options:[{text:"S, quasi sempre",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Ti senti irritabile o ti arrabbi facilmente?",options:[{text:"Molto spesso",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Hai difficolt di concentrazione?",options:[{text:"S, quasi sempre",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Soffri di mal di testa, mal di stomaco o tensioni muscolari inspiegabili?",options:[{text:"S, frequentemente",value:1},{text:"A volte",value:2},{text:"Raramente",value:3},{text:"Mai",value:4}]},{text:"Dedichi del tempo ad attivit che ti rilassano (hobby, meditazione, ecc.)?",options:[{text:"Mai",value:1},{text:"Raramente",value:2},{text:"A volte",value:3},{text:"Regolarmente",value:4}]},{text:"Ti senti sopraffatto dalle tue responsabilit?",options:[{text:"Quasi sempre",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Hai qualcuno con cui parlare apertamente dei tuoi problemi?",options:[{text:"No, nessuno",value:1},{text:"Poche persone",value:2},{text:"S, alcuni amici/familiari",value:3},{text:"S, una solida rete di supporto",value:4}]},{text:"Come gestisci le situazioni impreviste o i cambiamenti?",options:[{text:"Vado in panico",value:1},{text:"Con molta difficolt",value:2},{text:"Mi adatto, anche se con fatica",value:3},{text:"Con flessibilit",value:4}]},{text:"Ti senti ottimista riguardo al futuro?",options:[{text:"No, per niente",value:1},{text:"Poco",value:2},{text:"Abbastanza",value:3},{text:"S, molto",value:4}]},{text:"Hai problemi a prendere decisioni?",options:[{text:"S, anche per le piccole cose",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Ti senti stanco o senza energie anche senza sforzo fisico?",options:[{text:"Quasi sempre",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Il tuo appetito  cambiato a causa dello stress (mangi di pi o di meno)?",options:[{text:"S,  cambiato notevolmente",value:1},{text:"Un po'",value:2},{text:"Non che io abbia notato",value:3},{text:"No,  rimasto uguale",value:4}]},{text:"Riesci a dire 'no' quando ti vengono chieste troppe cose?",options:[{text:"No, mai",value:1},{text:"Raramente, mi sento in colpa",value:2},{text:"A volte, ma con difficolt",value:3},{text:"S, riesco a stabilire i miei limiti",value:4}]},{text:"Pensi in modo catastrofico, immaginando sempre il peggio?",options:[{text:"S,  il mio modo di pensare abituale",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Come giudichi la tua capacit di gestire lo stress?",options:[{text:"Molto bassa",value:1},{text:"Bassa",value:2},{text:"Discreta",value:3},{text:"Buona",value:4}]},{text:"Ti senti disconnesso dagli altri o isolato?",options:[{text:"S, molto spesso",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Hai perso interesse o piacere nelle attivit che prima ti piacevano?",options:[{text:"S, in quasi tutto",value:1},{text:"In molte cose",value:2},{text:"In alcune cose",value:3},{text:"No, per niente",value:4}]}],results:[{scoreMin:20,scoreMax:40,title:"Livello di stress e ansia elevato",summary:"I risultati indicano un livello significativo di stress e ansia. Potrebbe essere molto utile esplorare tecniche di gestione dello stress e, se necessario, consultare un professionista."},{scoreMin:41,scoreMax:60,title:"Livello di stress e ansia moderato",summary:"Sperimenti periodi di stress e ansia che influenzano il tuo benessere. Imparare nuove strategie di coping potrebbe aiutarti a gestire meglio queste situazioni."},{scoreMin:61,scoreMax:80,title:"Buona gestione dello stress",summary:"Sembra che tu abbia delle buone strategie per gestire lo stress e l'ansia. Continua a prenderti cura del tuo benessere mentale e a coltivare le tue risorse."}]},diet:{id:"diet",title:"Analisi Dietetica",Icon:gf,questions:[{text:"Quante porzioni di frutta e verdura consumi al giorno?",options:[{text:"0-1",value:1},{text:"2-3",value:2},{text:"4-5",value:3},{text:"Pi di 5",value:4}]},{text:"Che tipo di carboidrati scegli prevalentemente?",options:[{text:"Raffinati (pane bianco, pasta, riso bianco)",value:1},{text:"Un mix di raffinati e integrali",value:2},{text:"Prevalentemente integrali",value:3},{text:"Integrali e legumi",value:4}]},{text:"Quante volte a settimana mangi pesce, specialmente quello azzurro?",options:[{text:"Mai",value:1},{text:"Meno di una volta",value:2},{text:"1-2 volte",value:4},{text:"Pi di 2 volte",value:3}]},{text:"Qual  la tua principale fonte di proteine?",options:[{text:"Carne rossa e processata",value:1},{text:"Carne bianca e formaggi",value:2},{text:"Un mix che include legumi e pesce",value:3},{text:"Prevalentemente fonti vegetali (legumi, tofu)",value:4}]},{text:"Consumi bevande zuccherate (bibite, succhi di frutta confezionati)?",options:[{text:"Ogni giorno",value:1},{text:"Diverse volte a settimana",value:2},{text:"Raramente",value:3},{text:"Mai",value:4}]},{text:"Quanti caff bevi al giorno?",options:[{text:"Pi di 4",value:1},{text:"3-4",value:2},{text:"1-2",value:3},{text:"Nessuno o decaffeinato",value:4}]},{text:"Fai regolarmente colazione?",options:[{text:"No, mai",value:1},{text:"A volte",value:2},{text:"S, ma con prodotti confezionati/zuccherati",value:3},{text:"S, una colazione equilibrata",value:4}]},{text:"Consumi cibi fritti o molto processati (fast food, snack confezionati)?",options:[{text:"Spesso, pi volte a settimana",value:1},{text:"Circa una volta a settimana",value:2},{text:"Un paio di volte al mese",value:3},{text:"Molto raramente o mai",value:4}]},{text:"Quanta acqua bevi al giorno?",options:[{text:"Meno di 1 litro",value:1},{text:"Circa 1 litro",value:2},{text:"1.5 - 2 litri",value:3},{text:"Pi di 2 litri",value:4}]},{text:"Soffri di gonfiore, pesantezza o altri disturbi digestivi dopo i pasti?",options:[{text:"S, molto spesso",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente",value:4}]},{text:"Quante volte a settimana consumi legumi (fagioli, lenticchie, ceci)?",options:[{text:"Mai",value:1},{text:"Meno di una volta",value:2},{text:"1-2 volte",value:3},{text:"3 o pi volte",value:4}]},{text:"Che tipo di grassi usi per cucinare?",options:[{text:"Burro, margarina, strutto",value:1},{text:"Oli di semi vari (girasole, mais)",value:2},{text:"Principalmente olio extra vergine d'oliva",value:4},{text:"Un mix, con prevalenza di olio EVO",value:3}]},{text:"Leggi le etichette nutrizionali dei prodotti che acquisti?",options:[{text:"No, mai",value:1},{text:"Raramente",value:2},{text:"A volte, per alcuni prodotti",value:3},{text:"S, quasi sempre",value:4}]},{text:"I tuoi pasti sono regolari o tendi a saltarli?",options:[{text:"Spesso salto i pasti",value:1},{text:"A volte ne salto uno",value:2},{text:"Cerco di essere regolare",value:3},{text:"Ho orari molto regolari",value:4}]},{text:"Mangi di fretta, magari in piedi o davanti a uno schermo?",options:[{text:"S, quasi sempre",value:1},{text:"Spesso",value:2},{text:"A volte",value:3},{text:"Raramente, mi prendo il mio tempo",value:4}]},{text:"Consumi dolci, torte o biscotti?",options:[{text:"Ogni giorno",value:1},{text:"Diverse volte a settimana",value:2},{text:"Solo nel weekend o in occasioni speciali",value:3},{text:"Molto raramente",value:4}]},{text:"Includi frutta secca e semi nella tua dieta?",options:[{text:"No, mai",value:1},{text:"Raramente",value:2},{text:"Qualche volta a settimana",value:3},{text:"S, una piccola porzione quasi ogni giorno",value:4}]},{text:"Quante volte a settimana mangi carne rossa?",options:[{text:"Pi di 3 volte",value:1},{text:"2-3 volte",value:2},{text:"Una volta",value:3},{text:"Raramente o mai",value:4}]},{text:"Assumi integratori alimentari?",options:[{text:"S, diversi e senza consulto medico",value:1},{text:"S, su consiglio del medico/farmacista",value:4},{text:"A volte, quando mi sento stanco",value:2},{text:"No, mai",value:3}]},{text:"Come descriveresti la tua dieta nel complesso?",options:[{text:"Poco sana e sbilanciata",value:1},{text:"Potrebbe essere molto migliore",value:2},{text:"Abbastanza sana ed equilibrata",value:3},{text:"Molto sana e varia",value:4}]}],results:[{scoreMin:20,scoreMax:40,title:"Abitudini alimentari da rivedere",summary:"La tua dieta attuale presenta diverse aree di miglioramento. Potrebbe essere utile concentrarsi sull'introduzione di cibi pi freschi e nutrienti e sulla riduzione di quelli processati."},{scoreMin:41,scoreMax:60,title:"Abitudini alimentari discrete",summary:"Hai una buona base, ma ci sono alcuni aspetti della tua alimentazione che, se modificati, potrebbero portare a un maggiore benessere generale."},{scoreMin:61,scoreMax:80,title:"Buone abitudini alimentari",summary:"Segui una dieta generalmente sana ed equilibrata. Continua a fare scelte consapevoli per mantenere il tuo stato di salute ottimale."}]},microbiome:{id:"microbiome",title:"Analisi del Microbioma",Icon:Ty,questions:[{text:"Quanta fibra assumi giornalmente (da frutta, verdura, legumi, cereali integrali)?",options:[{text:"Molto poca",value:1},{text:"Una quantit moderata",value:2},{text:"Una buona quantit",value:3},{text:"Molta, ad ogni pasto",value:4}]},{text:"Consumi cibi fermentati (yogurt con fermenti vivi, kefir, crauti, kombucha)?",options:[{text:"Mai",value:1},{text:"Raramente",value:2},{text:"Qualche volta a settimana",value:3},{text:"Quasi ogni giorno",value:4}]},{text:"La tua dieta  varia o tendi a mangiare sempre le stesse cose?",options:[{text:"Mangio sempre le stesse cose",value:1},{text:"Poco varia",value:2},{text:"Abbastanza varia",value:3},{text:"Molto varia, provo spesso nuovi alimenti",value:4}]},{text:"Hai fatto uso di antibiotici negli ultimi 6 mesi?",options:[{text:"S, per un lungo periodo o pi cicli",value:1},{text:"S, un ciclo breve",value:2},{text:"No",value:4},{text:"Non ricordo",value:3}]},{text:"La tua regolarit intestinale :",options:[{text:"Molto irregolare (stitichezza o diarrea frequenti)",value:1},{text:"A volte irregolare",value:2},{text:"Generalmente regolare",value:3},{text:"Molto regolare",value:4}]},{text:"Soffri di intolleranze o sensibilit alimentari (glutine, lattosio, ecc.)?",options:[{text:"S, a diversi alimenti",value:1},{text:"S, a uno o due alimenti",value:2},{text:"Sospetto di averne, ma non ho diagnosi",value:3},{text:"No, che io sappia",value:4}]},{text:"Consumi dolcificanti artificiali (aspartame, sucralosio)?",options:[{text:"S, quotidianamente",value:1},{text:"Spesso",value:2},{text:"Raramente",value:3},{text:"Mai",value:4}]},{text:"Includi nella tua dieta polifenoli (presenti in t verde, caff, cioccolato fondente, frutti di bosco)?",options:[{text:"Raramente o mai",value:1},{text:"A volte",value:2},{text:"Spesso",value:3},{text:"S, regolarmente",value:4}]},{text:"Il tuo livello di stress quotidiano :",options:[{text:"Molto alto",value:1},{text:"Alto",value:2},{text:"Moderato",value:3},{text:"Basso",value:4}]},{text:"Passi del tempo all'aria aperta o a contatto con la natura?",options:[{text:"Molto raramente",value:1},{text:"A volte, nel weekend",value:2},{text:"Abbastanza spesso",value:3},{text:"S, quotidianamente",value:4}]},{text:"Consumi aglio, cipolle, porri o asparagi (fonti di prebiotici)?",options:[{text:"Mai o quasi mai",value:1},{text:"Raramente",value:2},{text:"Qualche volta a settimana",value:3},{text:"Spesso",value:4}]},{text:"Hai animali domestici in casa?",options:[{text:"S",value:4},{text:"No",value:2},{text:"Ne ho avuti in passato",value:3},{text:"Non risponde",value:1}]},{text:"La tua nascita  avvenuta con parto naturale o cesareo?",options:[{text:"Cesareo",value:2},{text:"Naturale",value:4},{text:"Non lo so",value:3},{text:"Non risponde",value:1}]},{text:"Sei stato allattato al seno da bambino?",options:[{text:"No",value:2},{text:"S, per alcuni mesi",value:3},{text:"S, per pi di 6 mesi",value:4},{text:"Non lo so",value:1}]},{text:"Soffri di malattie infiammatorie croniche intestinali (es. Crohn, colite ulcerosa) o sindrome dell'intestino irritabile (IBS)?",options:[{text:"S, ho una diagnosi",value:1},{text:"Ho sintomi ma nessuna diagnosi",value:2},{text:"No",value:4},{text:"Non risponde",value:3}]},{text:"Fumi?",options:[{text:"S, regolarmente",value:1},{text:"Occasionalmente",value:2},{text:"Ho smesso da poco",value:3},{text:"No, non fumo",value:4}]},{text:"Bevi alcolici?",options:[{text:"Ogni giorno",value:1},{text:"Diverse volte a settimana",value:2},{text:"Solo occasionalmente (es. nel weekend)",value:3},{text:"Molto raramente o mai",value:4}]},{text:"Dormi un numero sufficiente di ore per notte?",options:[{text:"No, dormo poco e male",value:1},{text:"A volte non abbastanza",value:2},{text:"Generalmente s",value:3},{text:"S, dormo bene e a sufficienza",value:4}]},{text:"Fai attivit fisica regolarmente?",options:[{text:"No, sono sedentario",value:1},{text:"Raramente",value:2},{text:"Qualche volta a settimana",value:3},{text:"S, regolarmente",value:4}]},{text:"Soffri di allergie o malattie autoimmuni?",options:[{text:"S, pi di una",value:1},{text:"S, una",value:2},{text:"No",value:4},{text:"Non che io sappia",value:3}]}],results:[{scoreMin:20,scoreMax:40,title:"Microbioma potenzialmente in disbiosi",summary:"Diversi fattori nel tuo stile di vita potrebbero non supportare un microbioma sano. Potrebbe essere utile concentrarsi su una dieta pi varia e ricca di fibre e prebiotici."},{scoreMin:41,scoreMax:60,title:"Equilibrio del microbioma migliorabile",summary:"Ci sono buone basi, ma alcuni aspetti possono essere ottimizzati per favorire ulteriormente la salute del tuo intestino e, di conseguenza, di tutto l'organismo."},{scoreMin:61,scoreMax:80,title:"Buon supporto al microbioma",summary:"Il tuo stile di vita sembra essere generalmente favorevole a un microbioma sano ed equilibrato. Continua a prenderti cura del tuo intestino con scelte alimentari consapevoli."}]}},Ii={start:{id:"start",name:" Programma Start: Routine del Benessere",subtitle:" La Settimana del Successo",description:"Completa le attivit giornaliere e settimanali per costruire abitudini sane e accumulare punti.",Icon:"",numWeeks:10,daily:[{id:"start_d_new_0",title:"Meditare regolarmente",Icon:"",description:"1520 minuti prima di dormire.",points:5,remindable:!0,reminderConfig:{type:"daily",time:"22:00"}},{id:"start_d_new_1",title:"Orari regolari (mattina)",Icon:"",description:"Sveglia costante.",points:5},{id:"start_d_new_2",title:"Orari regolari (sera)",Icon:"",description:"Orario fisso per dormire.",points:5},{id:"start_d_new_3",title:"Stretching o movimento",Icon:"",description:"Durante la giornata.",points:5},{id:"start_d_new_4",title:"Evitare caffeina",Icon:"",description:"Nel pomeriggio e sera.",points:5},{id:"start_d_new_5",title:"Evitare alcol",Icon:"",description:"Nel pomeriggio e sera.",points:5},{id:"start_d_new_6",title:"Rilassamento muscolare",Icon:"",description:"Prima di dormire.",points:5},{id:"start_d_new_7",title:"Spegnere dispositivi",Icon:"",description:"Almeno 1h prima di dormire.",points:5},{id:"start_d_new_8",title:"Leggere un libro",Icon:"",description:"Attivit serale.",points:5},{id:"start_d_new_9",title:"Bagno caldo",Icon:"",description:"Relax serale.",points:5},{id:"start_d_new_10",title:"Tracciare abitudini",Icon:"",description:"Diario del sonno.",points:5},{id:"start_d_new_11",title:"Terapia binaurale",Icon:"",description:"Onde Alpha/Delta.",points:5},{id:"start_d_new_12",title:"Fitoterapia",Icon:"",description:"Se indicata.",points:5},{id:"start_d_new_13",title:"Idratazione",Icon:"",description:"8 bicchieri dacqua.",points:5,remindable:!0,reminderConfig:{type:"interval",hours:2,startHour:9,endHour:19}},{id:"start_d_new_14",title:"Oli essenziali",Icon:"",description:"Relax serale.",points:5},{id:"start_d_new_15",title:"Autocompassione",Icon:"",description:"Gentilezza verso s.",points:5},{id:"start_d_new_16",title:"Passeggiata allaperto",Icon:"",description:"1020 minuti.",points:5},{id:"start_d_new_17",title:"Gratitudine",Icon:"",description:"Esercizi positivi.",points:5},{id:"start_d_new_18",title:"Musica rilassante",Icon:"",description:"Ascolto consapevole.",points:5},{id:"start_d_new_19",title:"Creativit",Icon:"",description:"Disegno, scrittura, ecc.",points:5},{id:"start_d_new_20",title:"Limitare social media",Icon:"",description:"<30 min al giorno.",points:5},{id:"start_d_new_21",title:"Pianificare pasti",Icon:"",description:"Organizzazione settimanale.",points:5},{id:"start_d_new_22",title:"Verdure a foglia verde",Icon:"",description:"Almeno una porzione.",points:5},{id:"start_d_new_23",title:"Detox digitale",Icon:"",description:"1 giorno senza schermi.",points:10},{id:"start_d_new_24",title:"Meditazione serale (ripetuta)",Icon:"",description:"Seconda sessione.",points:5}],weekly:[{id:"start_w_s3_1",title:"Weekend con alimentazione salutare",description:"Frutta, verdura, omega-3, proteine magre per almeno 2 giorni.",points:30,Icon:""},{id:"start_w_s3_2",title:"Terapia Cranio-Sacrale",description:"1 sessione settimanale per rilassare il sistema nervoso.",points:25,Icon:""},{id:"start_w_s3_3",title:"Cibi ricchi di omega-3",description:"Almeno 3 volte a settimana (es. salmone, noci, semi di lino).",points:15,Icon:""},{id:"start_w_s3_4",title:"Settimana senza Alcol",description:"Evita completamente il consumo di alcolici per 7 giorni.",points:20,Icon:""},{id:"start_w_s3_5",title:"Meal Prep",description:"Prepara i pasti in lotti per la settimana.",points:10,Icon:""},{id:"start_w_s3_6",title:"Yoga o Pilates",description:"Partecipa ad almeno 1 sessione settimanale.",points:20,Icon:""},{id:"start_w_s3_7",title:"Sauna infrarossi",description:"1 sessione per rilassare corpo e mente.",points:30,Icon:""},{id:"start_w_s3_8",title:"Zona 2  Attivit fisica",description:"2 sessioni di movimento aerobico a bassa intensit.",points:80,Icon:""},{id:"start_w_s3_9",title:"Tisana Detox",description:"Bevi almeno 3 tisane depurative durante la settimana.",points:20,Icon:""},{id:"start_w_s3_10",title:"Terapia binaurale/mindfulness",description:"2 sessioni di ascolto consapevole o meditazione guidata.",points:40,Icon:""},{id:"start_w_s3_11",title:"Massaggio rilassante",description:"1 sessione settimanale per sciogliere tensioni muscolari.",points:50,Icon:""},{id:"start_w_s3_12",title:"Biofeedback",description:"1 sessione con coerenza cardiaca.",points:30,Icon:""},{id:"start_w_s3_13",title:"Stimolazione Nervo Vago",description:"Tecnica di rilassamento vagale (es. vocalizzi, respirazione lenta).",points:30,Icon:""},{id:"start_w_s3_14",title:"Programma combinato",description:"Sauna + massaggio + terapia binaurale + fitoterapia in ununica sessione.",points:150,Icon:""}]},food_level_1:{id:"food_level_1",name:"Missione Alimentare: Livello 1",subtitle:"La Festa dei Sapori",description:"Migliora le tue abitudini con queste missioni giornaliere e settimanali.",Icon:"",dailyTarget:35,numWeeks:10,daily:[{id:"food1_d_1",title:"Riduzione dello Zucchero (1 giorno)",Icon:"",description:"Evita dolci e bevande zuccherate per tutta la giornata.",points:10},{id:"food1_d_2",title:"Introduzione dei Legumi",Icon:"",description:"Integra legumi in almeno un pasto del giorno.",points:10},{id:"food1_d_3",title:"Colazione Equilibrata",Icon:"",description:"Yogurt greco, frutta fresca, granola integrale. Bevanda: t verde.",points:5},{id:"food1_d_4",title:"Smoothie Detox",Icon:"",description:"Spinaci, banana, ananas, semi di chia. Bevanda: acqua di cocco.",points:5},{id:"food1_d_5",title:"Spuntino Sano",Icon:"",description:"Carote e sedano con guacamole. Bevanda: tisana al finocchio.",points:5},{id:"food1_d_6",title:"Cena Light",Icon:"",description:"Pesce al vapore, patate dolci, asparagi. Bevanda: t alla menta.",points:10},{id:"food1_d_7",title:"Insalata Proteica",Icon:"",description:"Pollo grigliato, avocado, pomodorini, semi di zucca. Bevanda: infuso ai frutti di bosco.",points:10}],weekly:[{id:"food1_w_1",title:" Riduzione dello Zucchero",description:"Evitare bevande zuccherate e dolci in almeno due pasti.",points:20,Icon:""},{id:"food1_w_2",title:" Introduzione dei Legumi",description:"Integrare lenticchie, fagioli o ceci in almeno tre pasti.",points:30,Icon:""},{id:"food1_w_3",title:" Cottura al Forno",description:"Sostituire cibi fritti con cottura al forno.",points:20,Icon:""},{id:"food1_w_4",title:" Snack Sani",description:"Frutta secca, noci e semi al posto di snack industriali.",points:20,Icon:""},{id:"food1_w_5",title:" Pasti Bilanciati",description:"Proteine magre, carboidrati complessi e verdure colorate.",points:30,Icon:""},{id:"food1_w_6",title:" Colazione Equilibrata",description:"Yogurt greco, frutta fresca, granola integrale. Bevanda: t verde.",points:20,Icon:""},{id:"food1_w_7",title:" Pranzo Vegetariano",description:"Insalata di quinoa, verdure grigliate, hummus. Bevanda: acqua al limone.",points:30,Icon:""},{id:"food1_w_8",title:" Smoothie Detox",description:"Spinaci, banana, ananas, semi di chia. Bevanda: acqua di cocco.",points:10,Icon:""},{id:"food1_w_9",title:" Spuntino Sano",description:"Carote e sedano con guacamole. Bevanda: tisana al finocchio.",points:10,Icon:""},{id:"food1_w_10",title:" Cena Light",description:"Pesce al vapore, patate dolci, asparagi. Bevanda: t alla menta.",points:30,Icon:""},{id:"food1_w_11",title:" Insalata Proteica",description:"Pollo grigliato, avocado, pomodorini, semi di zucca. Bevanda: infuso ai frutti di bosco.",points:30,Icon:""},{id:"food1_w_12",title:" Giornata di Frutta",description:"Solo frutta fresca (mele, pere, fragole, uva). Bevanda: smoothie di frutta mista.",points:30,Icon:""}]},food_level_2:{id:"food_level_2",name:"Missione Alimentare: Livello 2",subtitle:"Energia in Cucina",description:"Potenzia le tue abitudini con queste missioni giornaliere.",Icon:"",dailyTarget:35,unlocksAt:250,dependsOn:"food_level_1",numWeeks:10,daily:[{id:"food2_d_1",title:"Riduzione dello Zucchero (2 giorni)",Icon:"",description:"Evita dolci e bevande zuccherate per almeno 2 giorni.",points:10},{id:"food2_d_2",title:"Introduzione dei Legumi (2 pasti)",Icon:"",description:"Integra legumi in almeno due pasti.",points:10},{id:"food2_d_3",title:"Colazione Equilibrata (2 volte)",Icon:"",description:"Yogurt, frutta, granola. Bevanda: t verde.",points:5},{id:"food2_d_4",title:"Smoothie Detox (2 volte)",Icon:"",description:"Spinaci, banana, ananas, semi di chia.",points:5},{id:"food2_d_5",title:"Spuntino Sano",Icon:"",description:"Carote e sedano con guacamole.",points:5},{id:"food2_d_6",title:"Cena Light",Icon:"",description:"Pesce al vapore, patate dolci, asparagi.",points:10},{id:"food2_d_7",title:"Cottura al Forno",Icon:"",description:"Sostituisci frittura con cottura al forno.",points:10},{id:"food2_d_8",title:"Snack Sani",Icon:"",description:"Frutta secca, noci, semi.",points:10}],weekly:[]},food_level_3:{id:"food_level_3",name:"Missione Alimentare: Livello 3",subtitle:"Sfida del Gourmet",description:"Diventa un maestro della nutrizione con missioni avanzate.",Icon:"",dailyTarget:35,unlocksAt:300,dependsOn:"food_level_2",numWeeks:10,daily:[{id:"food3_d_1",title:"Riduzione dello Zucchero (5 giorni)",Icon:"",description:"Evita dolci e bevande zuccherate per almeno 5 giorni a settimana.",points:10},{id:"food3_d_2",title:"Introduzione dei Legumi (2 pasti)",Icon:"",description:"Integra legumi in almeno due pasti.",points:10},{id:"food3_d_3",title:"Colazione Equilibrata (4 volte)",Icon:"",description:"Yogurt, frutta, granola. Bevanda: t verde.",points:5},{id:"food3_d_4",title:"Smoothie Detox (4 volte)",Icon:"",description:"Spinaci, banana, ananas, semi di chia.",points:5},{id:"food3_d_5",title:"Spuntino Sano",Icon:"",description:"Carote e sedano con guacamole.",points:5},{id:"food3_d_6",title:"Cena Light",Icon:"",description:"Pesce al vapore, patate dolci, asparagi.",points:10},{id:"food3_d_7",title:"Cottura al Forno",Icon:"",description:"Sostituisci frittura con cottura al forno.",points:10},{id:"food3_d_8",title:"Snack Sani (4 volte)",Icon:"",description:"Frutta secca, noci, semi almeno 4 volte a settimana.",points:10},{id:"food3_d_9",title:"Pasti Bilanciati (4 volte)",Icon:"",description:"Proteine magre, carboidrati complessi, verdure colorate.",points:10},{id:"food3_d_10",title:"Colazione Equilibrata (2 volte)",Icon:"",description:"Seconda sessione settimanale di colazione equilibrata.",points:5},{id:"food3_d_11",title:"Pranzo Vegetariano (4 volte)",Icon:"",description:"Quinoa, verdure grigliate, hummus. Bevanda: acqua aromatizzata.",points:10}],weekly:[]},sleep_level_1:{id:"sleep_level_1",name:"Missione Sonno Giornaliera: Livello 1",subtitle:"Alba Tranquilla",description:"Include tutte le Attivit Giornaliere di base come mantenere orari regolari di sonno e praticare la respirazione profonda prima di dormire.",Icon:"",numWeeks:10,dailyTarget:35,dailyMaxTarget:60,weekly:[],daily:[{id:"sl1_d_1",title:"Orari Regolari di Sonno",Icon:"",description:"Andare a letto e svegliarsi alla stessa ora ogni giorno.",points:10},{id:"sl1_d_2",title:"Respirazione Profonda",Icon:"",description:"Pratica di 1015 minuti prima di dormire.",points:10},{id:"sl1_d_3",title:"No Dispositivi Elettronici",Icon:"",description:"Evita schermi almeno 1 ora prima di dormire.",points:10},{id:"sl1_d_4",title:"Fitoterapici (fase 1)",Icon:"",description:"Assunzione di rimedi naturali se indicati.",points:15},{id:"sl1_d_5",title:"Rilassamento Muscolare",Icon:"",description:"Esercizi di rilassamento per 1015 minuti.",points:10},{id:"sl1_d_6",title:"No Caffeina",Icon:"",description:"Evita caff e t nel pomeriggio e sera.",points:10}]},sleep_level_2:{id:"sleep_level_2",name:"Missione Sonno Giornaliera: Livello 2",subtitle:"Sogno Calmo",description:"Attivit focalizzate sul rilassamento profondo per migliorare la qualit del riposo notturno.",Icon:"",numWeeks:10,dailyTarget:40,dailyMaxTarget:60,unlocksAt:300,dependsOn:"sleep_level_1",weekly:[],daily:[{id:"sl2_d_1",title:"Rilassamento Muscolare Progressivo",Icon:"",description:"20 minuti di rilascio graduale della tensione muscolare.",points:15},{id:"sl2_d_2",title:"Musica Rilassante",Icon:"",description:"Ascolta musica tranquilla per 2030 minuti prima di dormire.",points:10},{id:"sl2_d_3",title:"Fitoterapici (fase 2)",Icon:"",description:"Assunzione di rimedi naturali se indicati per la fase 2 del sonno.",points:15},{id:"sl2_d_4",title:"Visualizzazione Tranquilla",Icon:"",description:"Immagina un luogo sereno per 1015 minuti.",points:15},{id:"sl2_d_5",title:"Bagno Caldo Serale",Icon:"",description:"30 minuti di bagno rilassante prima di dormire.",points:10}]},sleep_level_3:{id:"sleep_level_3",name:"Missione Sonno Giornaliera: Livello 3",subtitle:"Notte Magica",description:"Include tutte le Attivit giornaliere avanzate quali meditazione profonda e tecniche di rilassamento per un riposo ottimale.",Icon:"",numWeeks:10,dailyTarget:45,dailyMaxTarget:60,unlocksAt:300,dependsOn:"sleep_level_2",weekly:[],daily:[{id:"sl3_d_1",title:"Meditazione Guidata per il Sonno",Icon:"",description:"20 minuti di meditazione profonda per favorire il rilassamento.",points:20},{id:"sl3_d_2",title:"Mindfulness Serale",Icon:"",description:"20 minuti di consapevolezza prima di dormire.",points:15},{id:"sl3_d_3",title:"Fitoterapici (fasi 34)",Icon:"",description:"Rimedi naturali per il sonno profondo, se indicati.",points:15},{id:"sl3_d_4",title:"Oli Essenziali di Lavanda",Icon:"",description:"20 minuti di aromaterapia rilassante.",points:15},{id:"sl3_d_5",title:"Stretching Leggero",Icon:"",description:"20 minuti di esercizi dolci prima di coricarsi.",points:15},{id:"sl3_d_6",title:"Visualizzazione Positiva",Icon:"",description:"10 minuti di immagini mentali serene e rassicuranti.",points:15}]},sleep_level_4:{id:"sleep_level_4",name:"Missione Sonno Giornaliera: Livello 4",subtitle:"Sonno Profondo",description:"Include tutte le Attivit giornaliere con tecniche avanzate di gestione del sonno come l'utilizzo di fitoterapici e routine di rilassamento complesse per garantire un sonno ristoratore.",Icon:"",numWeeks:10,dailyTarget:55,dailyMaxTarget:70,unlocksAt:400,dependsOn:"sleep_level_3",weekly:[],daily:[{id:"sl4_d_1",title:"Diario del Sonno",Icon:"",description:"Monitoraggio quotidiano delle abitudini di sonno.",points:15},{id:"sl4_d_2",title:"Fitoterapici (fase REM)",Icon:"",description:"Rimedi naturali per migliorare la fase REM, se indicati.",points:15},{id:"sl4_d_3",title:"Yoga Rilassante",Icon:"",description:"30 minuti di yoga dolce prima di dormire.",points:20},{id:"sl4_d_4",title:"Rilassamento Profondo",Icon:"",description:"20 minuti di tecniche avanzate di rilassamento.",points:20},{id:"sl4_d_5",title:"Gestione del Tempo",Icon:"",description:"Tecniche per ridurre lo stress quotidiano e migliorare la routine serale.",points:15},{id:"sl4_d_6",title:"Attivit Rilassanti Serali",Icon:"",description:"Lettura, scrittura o attivit creative prima di dormire.",points:15}]},anxiety_stress_level_1:{id:"anxiety_stress_level_1",name:"Programma Ansia-Stress: Livello 1",subtitle:"Il Giardino della Serenit",description:"Include tutte le Attivit Settimanali per ridurre Ansia e Stress.",Icon:"",weeklyMinTarget:200,numWeeks:14,daily:[],weekly:[{id:"anxiety1_w_1",title:"Respirazione Profonda",Icon:"",description:"1015 minuti di respirazione lenta e consapevole.",points:10},{id:"anxiety1_w_2",title:"Visualizzazione Rilassante",Icon:"",description:"Immagina un luogo sereno per 1015 minuti.",points:10},{id:"anxiety1_w_3",title:"Camminata Consapevole",Icon:"",description:"30 minuti focalizzati su respiro e ambiente.",points:20},{id:"anxiety1_w_4",title:"Mindfulness",Icon:"",description:"20 minuti di consapevolezza e presenza mentale.",points:20},{id:"anxiety1_w_5",title:"Bagno con Sali di Epsom",Icon:"",description:"20 minuti per rilassare muscoli e tensione.",points:30},{id:"anxiety1_w_6",title:"Diario delle Emozioni",Icon:"",description:"Scrivi pensieri ed emozioni per 15 minuti al giorno.",points:20},{id:"anxiety1_w_7",title:"Terapia dellAbbraccio",Icon:"",description:"Abbraccia una persona cara per almeno 10 minuti.",points:20},{id:"anxiety1_w_8",title:"Aromaterapia",Icon:"",description:"Usa oli essenziali come lavanda o camomilla.",points:20},{id:"anxiety1_w_9",title:"Progresso Graduale",Icon:"",description:"Pianifica e realizza piccoli obiettivi settimanali.",points:20},{id:"anxiety1_w_10",title:"Coping Positivo",Icon:"",description:"Identifica e pratica tecniche di gestione emotiva.",points:20},{id:"anxiety1_w_11",title:"Gratitudine",Icon:"",description:"Scrivi 3 cose per cui sei grato ogni giorno.",points:20},{id:"anxiety1_w_12",title:"Musica Rilassante",Icon:"",description:"Ascolta musica per 2030 minuti focalizzandoti sul rilassamento.",points:10},{id:"anxiety1_w_13",title:"Massaggio ai Piedi",Icon:"",description:"Usa una pallina da tennis o da massaggio.",points:10},{id:"anxiety1_w_14",title:"Grounding",Icon:"",description:"Focalizzati su 5 cose che puoi vedere, toccare, sentire, annusare e gustare.",points:20},{id:"anxiety1_w_15",title:"Espressione Creativa",Icon:"",description:"Disegna, dipingi, scrivi poesie o racconti.",points:20},{id:"anxiety1_w_16",title:"Giornata di Disconnessione",Icon:"",description:"Trascorri una giornata senza dispositivi elettronici.",points:30},{id:"anxiety1_w_17",title:"Yoga Rilassante",Icon:"",description:"Stretching dolce e respirazione consapevole.",points:30},{id:"anxiety1_w_18",title:"Meditazione Guidata per Ansia",Icon:"",description:"Ascolta una meditazione guidata specifica per lansia.",points:20},{id:"anxiety1_w_19",title:"Biofeedback (Ansia)",Icon:"",description:"Sessione di coerenza cardiaca e monitoraggio.",points:60},{id:"anxiety1_w_20",title:"Tai Chi o Qigong",Icon:"",description:"Movimenti lenti e controllati per rilassare corpo e mente.",points:30},{id:"anxiety1_w_21",title:"Stimolazione Nervo Vago",Icon:"",description:"Tecniche vagali per ridurre lo stress.",points:40}]},anxiety_stress_level_2:{id:"anxiety_stress_level_2",name:"Programma Ansia-Stress: Livello 2",subtitle:"Oasi della Tranquillit",description:"Include Attivit Giornaliere pi impegnative per migliorare la gestione di ansia e stress.",Icon:"",dailyTarget:40,unlocksAt:350,dependsOn:"anxiety_stress_level_1",numWeeks:10,daily:[{id:"anxiety2_d_1",title:"Sessione di Mindfulness (20 minuti)",Icon:"",description:"Pratiche di consapevolezza e presenza mentale.",points:20},{id:"anxiety2_d_2",title:"Bagno con Sali di Epsom (20 minuti)",Icon:"",description:"Rilassa i muscoli e allevia la tensione.",points:10},{id:"anxiety2_d_3",title:"Terapia dellAbbraccio (10 minuti)",Icon:"",description:"Abbraccia una persona cara per almeno 10 minuti.",points:5},{id:"anxiety2_d_4",title:"Aromaterapia (20 minuti)",Icon:"",description:"Usa oli essenziali come lavanda o camomilla.",points:10},{id:"anxiety2_d_5",title:"Grounding (cinque sensi)",Icon:"",description:"Focalizzati su ci che puoi vedere, toccare, sentire, annusare e gustare.",points:20}],weekly:[]},anxiety_stress_level_3:{id:"anxiety_stress_level_3",name:"Programma Ansia-Stress: Livello 3",subtitle:"Super Zen",description:"Include Attivit Giornaliere pi avanzate per una gestione ottimale di ansia e stress.",Icon:"",dailyTarget:60,unlocksAt:300,dependsOn:"anxiety_stress_level_2",numWeeks:10,daily:[{id:"anxiety3_d_1",title:"Tecniche di Coping Positivo",Icon:"",description:"Identifica e pratica strategie di gestione emotiva e resilienza.",points:20},{id:"anxiety3_d_2",title:"Espressione Creativa",Icon:"",description:"Disegna, dipingi, scrivi poesie o racconti per liberare le emozioni.",points:20},{id:"anxiety3_d_3",title:"Giornata di Disconnessione",Icon:"",description:"Trascorri una giornata senza dispositivi elettronici.",points:20},{id:"anxiety3_d_4",title:"Meditazione Guidata per Ansia",Icon:"",description:"Ascolta una meditazione guidata specifica per lansia (20 minuti).",points:20},{id:"anxiety3_d_5",title:"Biofeedback per Ansia",Icon:"",description:"Sessione di coerenza cardiaca e monitoraggio per ridurre lo stress.",points:20}],weekly:[]},activity_gold:{id:"activity_gold",name:"Sempre Giovani  Livello Gold",subtitle:"Missione Attivit Fisica Settimanale",description:"Attivit per over 65 con focus su mobilit, forza e resistenza. Sicurezza ed efficacia per il benessere quotidiano.",Icon:"",numWeeks:14,weeklyMinTarget:65,weeklyMaxTarget:150,daily:[],weekly:[{id:"ag_w_1",title:"Passeggiata Attiva",Icon:"",description:"30 minuti a ritmo moderato.",points:30},{id:"ag_w_2",title:"Yoga Dolce",Icon:"",description:"45 minuti di esercizi dolci e respirazione.",points:30},{id:"ag_w_3",title:"Cyclette",Icon:"",description:"2030 minuti a ritmo moderato.",points:40},{id:"ag_w_4",title:"Resistenza Leggera",Icon:"",description:"20 minuti di esercizi con pesi leggeri o elastici.",points:40},{id:"ag_w_5",title:"Camminata in Natura",Icon:"",description:"45 minuti allaperto, in ambiente naturale.",points:45},{id:"ag_w_6",title:"Ginnastica in Acqua",Icon:"",description:"30 minuti di esercizi in piscina.",points:40},{id:"ag_w_7",title:"Stretching e Mobilit",Icon:"",description:"2030 minuti di esercizi di flessibilit e mobilit articolare.",points:25},{id:"ag_w_8",title:"Zona 2  Ciclismo o Camminata",Icon:"",description:"45 minuti a ritmo moderato, 2 volte a settimana.",points:60},{id:"ag_w_9",title:"Nuoto Moderato",Icon:"",description:"20 minuti di nuoto a ritmo costante.",points:45}]},activity_sprint_1:{id:"activity_sprint_1",name:"Inizio Sprint  Livello 1",subtitle:"Missione Attivit Fisica Settimanale",description:"Attivit per iniziare il tuo percorso sportivo, con focus su camminata, resistenza e mobilit. Ideale per i pi giovani o gi allenati.",Icon:"",numWeeks:14,weeklyMinTarget:65,weeklyMaxTarget:100,daily:[],weekly:[{id:"as1_w_1",title:"Camminata Veloce",Icon:"",description:"30 minuti a passo sostenuto.",points:50},{id:"as1_w_2",title:"Circuito di Resistenza",Icon:"",description:"Pesi leggeri, 3 set da 12 ripetizioni.",points:60},{id:"as1_w_3",title:"Yoga Dinamico",Icon:"",description:"60 minuti di yoga attivo e fluido.",points:50},{id:"as1_w_4",title:"Nuoto",Icon:"",description:"30 minuti a ritmo moderato.",points:50},{id:"as1_w_5",title:"Stretching e Mobilit",Icon:"",description:"20 minuti di esercizi per flessibilit e articolazioni.",points:30},{id:"as1_w_6",title:"Cyclette",Icon:"",description:"30 minuti a ritmo costante.",points:40}]},activity_sprint_2:{id:"activity_sprint_2",name:"Energia in Movimento  Livello 2",subtitle:"Missione Attivit Fisica Settimanale",description:"Attivit pi avanzate per aumentare forza e resistenza. Ideale per chi  gi allenato. Livello intermedio.",Icon:"",numWeeks:14,weeklyMinTarget:100,weeklyMaxTarget:160,unlocksAt:210,dependsOn:"activity_sprint_1",daily:[],weekly:[{id:"as2_w_1",title:"Corsa Leggera",Icon:"",description:"30 minuti di corsa a ritmo costante.",points:40},{id:"as2_w_2",title:"Circuito Forza",Icon:"",description:"Pesi medi, 4 set da 10 ripetizioni.",points:50},{id:"as2_w_3",title:"HIIT",Icon:"",description:"20 minuti di allenamento ad alta intensit a intervalli.",points:80},{id:"as2_w_4",title:"Pilates",Icon:"",description:"60 minuti di esercizi per postura, core e flessibilit.",points:40},{id:"as2_w_5",title:"Nuoto Intenso",Icon:"",description:"45 minuti di nuoto a ritmo sostenuto.",points:60}]},activity_sprint_3:{id:"activity_sprint_3",name:"Eccellenza Atletica  Livello 3",subtitle:"Missione Attivit Fisica Settimanale",description:"Attivit avanzate ad alta intensit per performance massime. Livello avanzato.",Icon:"",numWeeks:14,weeklyMinTarget:100,weeklyMaxTarget:180,unlocksAt:200,dependsOn:"activity_sprint_2",daily:[],weekly:[{id:"as3_w_1",title:"Corsa Intensa",Icon:"",description:"45 minuti di corsa a ritmo sostenuto.",points:30},{id:"as3_w_2",title:"Allenamento Pesi Pesanti",Icon:"",description:"5 set da 8 ripetizioni con carico elevato.",points:40},{id:"as3_w_3",title:"HIIT",Icon:"",description:"30 minuti di allenamento ad alta intensit a intervalli.",points:40},{id:"as3_w_4",title:"Yoga di Potenza",Icon:"",description:"75 minuti di yoga intensivo per forza e resistenza.",points:30},{id:"as3_w_5",title:"Nuoto a Stile Libero",Icon:"",description:"60 minuti di nuoto continuo a ritmo sostenuto.",points:40}]},stress:{id:"stress",name:"Stress Management",description:"Missioni mirate a ridurre lo stress, trovare equilibrio e coltivare la calma nella vita quotidiana.",subtitle:"La Settimana del Successo",Icon:"",isSmart:!0,numWeeks:10,dailyTarget:50,weeklyMinTarget:350,daily:[{id:"stress_d_1",title:"Respirazione Profonda",Icon:"",description:"5 minuti di respirazione diaframmatica per calmare il sistema nervoso.",points:15},{id:"stress_d_2",title:"Pausa Consapevole",Icon:"",description:"Ogni 90 minuti, fai una pausa di 2 minuti lontano dagli schermi.",points:10},{id:"stress_d_3",title:"Diario della Gratitudine",Icon:"",description:"Scrivi 3 cose per cui sei grato oggi.",points:10},{id:"stress_d_4",title:"Movimento Dolce",Icon:"",description:"15 minuti di stretching leggero o camminata lenta.",points:10},{id:"stress_d_5",title:"Tisana Rilassante",Icon:"",description:"Bevi una tisana (camomilla, melissa) prima di dormire.",points:5}],weekly:[{id:"stress_w_1",title:"Meditazione o Yoga",Icon:"",description:"Dedica 30 minuti a una sessione di yoga o meditazione guidata.",points:100},{id:"stress_w_2",title:"Tempo nella Natura",Icon:"",description:"Trascorri almeno 1 ora in un parco, bosco o al mare.",points:150},{id:"stress_w_3",title:"Hobby De-Stress",Icon:"",description:"Dedica 1 ora a un hobby che ti rilassa e ti piace (senza schermi).",points:100}]},performance:{id:"performance",name:"Programma Performance",description:"Massimizza la tua energia fisica e mentale, migliora la concentrazione e raggiungi i tuoi obiettivi con pi efficacia.",subtitle:"La Settimana del Successo",Icon:"",isSmart:!0,numWeeks:10,dailyTarget:55,weeklyMinTarget:350,daily:[{id:"perf_d_1",title:"Colazione Energetica",Icon:"",description:"Fai una colazione ricca di proteine e grassi sani.",points:10},{id:"perf_d_2",title:"Idratazione Strategica",Icon:"",description:"Bevi un bicchiere d'acqua ogni ora. Obiettivo: 2 litri.",points:10},{id:"perf_d_3",title:"Allenamento Focus",Icon:"",description:"30 minuti di attivit fisica mirata (corsa, pesi, HIIT).",points:20},{id:"perf_d_4",title:"Micro-Pausa Attiva",Icon:"",description:"Fai 5 minuti di stretching o camminata ogni 90 minuti di lavoro seduto.",points:5},{id:"perf_d_5",title:"Pianificazione del Domani",Icon:"",description:"Dedica 5 minuti la sera a pianificare le 3 priorit del giorno dopo.",points:10}],weekly:[{id:"perf_w_1",title:"Allenamento Intenso",Icon:"",description:"Completa 2 sessioni di allenamento ad alta intensit (HIIT).",points:150},{id:"perf_w_2",title:"Apprendimento Attivo",Icon:"",description:"Dedica 1 ora all'apprendimento di una nuova abilit o argomento.",points:100},{id:"perf_w_3",title:"Revisione Settimanale",Icon:"",description:"Rivedi i progressi della settimana e fissa gli obiettivi per la prossima.",points:100}]},longevity:{id:"longevity",name:"Programma Longevit",description:"Adotta abitudini basate sulla scienza per promuovere un invecchiamento sano, mantenere la vitalit e prevenire le malattie.",subtitle:"La Settimana del Successo",Icon:"",isSmart:!0,numWeeks:10,dailyTarget:45,weeklyMinTarget:400,daily:[{id:"longev_d_1",title:"Dieta Antiossidante",Icon:"",description:"Consuma almeno 2 porzioni di frutti di bosco, verdure a foglia scura o t verde.",points:10},{id:"longev_d_2",title:"10.000 Passi",Icon:"",description:"Raggiungi l'obiettivo di 10.000 passi durante la giornata.",points:15},{id:"longev_d_3",title:"Grassi Sani",Icon:"",description:"Includi una fonte di grassi sani (avocado, noci, olio EVO) nei tuoi pasti.",points:10},{id:"longev_d_4",title:"Allenamento Mentale",Icon:"",description:"Dedica 15 minuti ad attivit che sfidano la mente (puzzle, lettura complessa, nuova lingua).",points:10}],weekly:[{id:"longev_w_1",title:"Forza Muscolare",Icon:"",description:"Completa 2 sessioni di allenamento con i pesi per mantenere la massa muscolare.",points:150},{id:"longev_w_2",title:"Connessione Sociale",Icon:"",description:"Passa del tempo di qualit e significativo con amici o familiari.",points:100},{id:"longev_w_3",title:"Legumi Power",Icon:"",description:"Consuma legumi (fagioli, lenticchie, ceci) almeno 3 volte a settimana.",points:100},{id:"longev_w_4",title:"Finestra Alimentare",Icon:"",description:"Prova a concentrare i pasti in una finestra di 8-10 ore.",points:50}]}},Iy=J.createContext(null),CT=({children:t})=>{const[e,n]=J.useState(null);return c.jsx(Iy.Provider,{value:{impostazioni:e,setImpostazioni:n},children:t})},kT=()=>J.useContext(Iy),ym=t=>c.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("polyline",{points:"3 12 7 12 10 3 14 21 17 12 21 12"})}),ET=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),c.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Ny=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Ay=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),c.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Py=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M3 3v18h18"}),c.jsx("path",{d:"M7 12v5h12V8l-5 5-4-4Z"})]}),st=t=>c.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"m12 3-1.45 4.1-4.1-1.45L8 12l-5.55 1.45 4.1 1.45L12 21l1.45-4.1 4.1 1.45L16 12l5.55-1.45-4.1-1.45Z"})}),Pl=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 21c4-4 6-10 6-14a6 6 0 0 0-12 0c0 4 2 10 6 14Z"}),c.jsx("path",{d:"M12 15v6"}),c.jsx("path",{d:"M8 12c-2-2.5-2.5-6-1-8 1.5-2 4-2.5 6-1"}),c.jsx("path",{d:"M16 12c2-2.5 2.5-6 1-8-1.5-2-4-2.5-6-1"})]}),nr=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M4.5 3h15"}),c.jsx("path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-16V3"}),c.jsx("path",{d:"M6 14h12"})]}),xf=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"}),c.jsx("path",{d:"M16 2v4"}),c.jsx("path",{d:"M8 2v4"}),c.jsx("path",{d:"M3 10h18"}),c.jsx("path",{d:"M18 22a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z"}),c.jsx("path",{d:"M18 16.5V18l.5.5"})]}),Ry=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 12h.01"}),c.jsx("path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"}),c.jsx("path",{d:"M12 18h.01"}),c.jsx("path",{d:"M18 10h-2a2 2 0 0 1-2-2V4H8v4a2 2 0 0 1-2 2H2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V10Z"}),c.jsx("path",{d:"M8 12h.01"})]}),vf=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),c.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),c.jsx("path",{d:"M12 11h4"}),c.jsx("path",{d:"M12 16h4"}),c.jsx("path",{d:"M8 11h.01"}),c.jsx("path",{d:"M8 16h.01"})]}),TT=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),c.jsx("polyline",{points:"10 17 15 12 10 7"}),c.jsx("line",{x1:"15",x2:"3",y1:"12",y2:"12"})]}),My=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),c.jsx("polyline",{points:"14 2 14 8 20 8"}),c.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),c.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),c.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]}),Ly=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"9",cy:"7",r:"4"}),c.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),c.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),IT=({user:t,currentPage:e,onNavigate:n,onLogout:i,isOpen:o,setIsOpen:s})=>{const r=[{id:"home",label:"Home",Icon:ET},{id:"profile",label:"Profilo",Icon:Ny},{id:"autovalutazione",label:"Test Autovalutazione",Icon:Ay},{id:"dashboard",label:"Wellness Dashboard",Icon:Py},{id:"wellnessRoutine",label:"Routine Benessere",Icon:st},{id:"breathing",label:"Meditazione Guidata",Icon:Pl},{id:"community",label:"Community & Coach",Icon:Ly}],a=[{id:"hrvAnalysis",label:"Analisi HRV",Icon:ym},{id:"ouraAnalysis",label:"Analisi Oura",Icon:ym},{id:"analysisQuote",label:"Analisi & Preventivi",Icon:vf},{id:"spaBookings",label:"Percorsi SPA",Icon:xf},{id:"bloodAnalysis",label:"Analisi Referti (Coming Soon)",Icon:nr}],l=[{id:"prescriptions",label:"Invio Ricette",Icon:My},{id:"pharmacyServices",label:"Servizi Farmacia",Icon:Ry}],u=({item:h})=>c.jsx("li",{children:c.jsxs("a",{href:"#",onClick:m=>{m.preventDefault(),n(h.id),window.innerWidth<768&&s(!1)},className:`flex items-center gap-3 p-3 my-1 rounded-md text-lg transition-colors ${e===h.id?"bg-sky-500 text-white shadow-md":"text-sky-100 hover:bg-sky-600"}`,children:[c.jsx(h.Icon,{className:"sidebar-icon"}),c.jsx("span",{children:h.label})]})}),d=c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-4 border-b border-sky-700",children:[c.jsx("img",{src:"/oura.png",alt:"Oura",className:"h-10 mx-auto mb-2"}),t&&c.jsxs("p",{className:"text-sky-200 text-sm",children:["Benvenuto, ",t.name]})]}),c.jsxs("nav",{className:"flex-grow p-2 overflow-y-auto",children:[c.jsx("ul",{children:r.map(h=>c.jsx(u,{item:h},h.id))}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-sky-700",children:[c.jsx("h2",{className:"px-3 py-1 text-sm font-semibold text-sky-300 uppercase tracking-wider",children:"Clinical Wellness SPA"}),c.jsx("ul",{children:a.map(h=>c.jsx(u,{item:h},h.id))})]}),c.jsx("div",{className:"my-2 border-t border-sky-700"}),c.jsxs("div",{className:"mt-2 pt-2",children:[c.jsx("h2",{className:"px-3 py-1 text-sm font-semibold text-sky-300 uppercase tracking-wider",children:"Servizi Farmacia Centrale"}),c.jsx("ul",{children:l.map(h=>c.jsx(u,{item:h},h.id))})]})]}),c.jsx("div",{className:"p-4 border-t border-sky-700 mt-auto",children:c.jsxs("a",{href:"#",onClick:h=>{h.preventDefault(),i(),window.innerWidth<768&&s(!1)},className:"flex items-center gap-3 p-3 rounded-md text-lg text-sky-100 hover:bg-sky-600 transition-colors",children:[c.jsx(TT,{className:"sidebar-icon"}),c.jsx("span",{children:"Logout"})]})})]});return c.jsxs(c.Fragment,{children:[o&&c.jsx("div",{className:"fixed inset-0 bg-black opacity-50 z-30 md:hidden",onClick:()=>s(!1)}),c.jsx("aside",{className:`fixed top-0 left-0 h-full w-64 bg-sky-800 text-white flex flex-col shadow-lg z-40 transform transition-transform duration-300 ease-in-out ${o?"translate-x-0":"-translate-x-full"} md:translate-x-0`,children:d})]})},Tn=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),c.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),jo=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),c.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),Rl=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M18 6 6 18"}),c.jsx("path",{d:"m6 6 12 12"})]}),NT=({notification:t,onClose:e})=>{const[n,i]=z.useState(!1);z.useEffect(()=>{const r=setTimeout(()=>{i(!0)},3e3);return()=>clearTimeout(r)},[]),z.useEffect(()=>{if(n){const r=setTimeout(e,300);return()=>clearTimeout(r)}},[n,e]);const o={success:{bg:"bg-green-500",icon:c.jsx(Tn,{className:"w-6 h-6 text-white"})},error:{bg:"bg-red-500",icon:c.jsx(jo,{className:"w-6 h-6 text-white"})}},s=o[t.type]||o.success;return c.jsxs("div",{className:`fixed top-5 right-5 z-50 flex items-center p-4 rounded-lg shadow-lg text-white ${s.bg} ${n?"animate-toast-out":"animate-toast-in"}`,children:[c.jsx("div",{className:"mr-3",children:s.icon}),c.jsx("div",{className:"font-semibold",children:t.message}),c.jsx("button",{onClick:()=>i(!0),className:"ml-4 -mr-2 p-1 rounded-full hover:bg-white/20 transition-colors",children:c.jsx(Rl,{className:"w-5 h-5"})})]})},AT=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"4",x2:"20",y1:"12",y2:"12"}),c.jsx("line",{x1:"4",x2:"20",y1:"6",y2:"6"}),c.jsx("line",{x1:"4",x2:"20",y1:"18",y2:"18"})]}),PT=({user:t,onSave:e})=>{const[n,i]=z.useState(""),[o,s]=z.useState(""),[r,a]=z.useState(""),[l,u]=z.useState(""),d=h=>{h.preventDefault(),n&&o&&r&&l&&e({...t,gender:n,age:parseInt(o),height:parseInt(r),weight:parseInt(l)})};return c.jsx("div",{className:"fixed inset-0 bg-slate-900/90 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden",children:[c.jsxs("div",{className:"bg-sky-600 p-6 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Benvenuto in Clinical Wellness"}),c.jsx("p",{className:"text-sky-100 mt-2",children:"Configuriamo il tuo profilo biometrico per iniziare."})]}),c.jsxs("form",{onSubmit:d,className:"p-8 space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Sesso Biologico"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("label",{className:`flex-1 cursor-pointer p-4 rounded-xl border-2 flex flex-col items-center transition-all ${n==="male"?"border-sky-500 bg-sky-50 text-sky-700":"border-slate-200 hover:border-slate-300"}`,children:[c.jsx("input",{type:"radio",name:"gender",value:"male",checked:n==="male",onChange:()=>i("male"),className:"hidden"}),c.jsx("span",{className:"text-2xl mb-1",children:""}),c.jsx("span",{className:"font-semibold",children:"Uomo"})]}),c.jsxs("label",{className:`flex-1 cursor-pointer p-4 rounded-xl border-2 flex flex-col items-center transition-all ${n==="female"?"border-pink-500 bg-pink-50 text-pink-700":"border-slate-200 hover:border-slate-300"}`,children:[c.jsx("input",{type:"radio",name:"gender",value:"female",checked:n==="female",onChange:()=>i("female"),className:"hidden"}),c.jsx("span",{className:"text-2xl mb-1",children:""}),c.jsx("span",{className:"font-semibold",children:"Donna"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Et"}),c.jsx("input",{type:"number",min:"1",max:"120",value:o,onChange:h=>s(h.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 outline-none text-center font-bold text-slate-800",placeholder:"Anni",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Altezza"}),c.jsx("input",{type:"number",min:"50",max:"250",value:r,onChange:h=>a(h.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 outline-none text-center font-bold text-slate-800",placeholder:"CM",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Peso"}),c.jsx("input",{type:"number",min:"20",max:"300",value:l,onChange:h=>u(h.target.value),className:"w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 outline-none text-center font-bold text-slate-800",placeholder:"KG",required:!0})]})]}),c.jsxs("button",{type:"submit",disabled:!n||!o||!r||!l,className:"w-full bg-sky-600 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-sky-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:[c.jsx("span",{children:"Crea il mio Profilo Salute"}),c.jsx(Tn,{className:"w-5 h-5"})]})]})]})})},RT=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10"}),c.jsx("circle",{cx:"12",cy:"10",r:"3"}),c.jsx("path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"})]}),MT=({onLogin:t})=>{const[e,n]=z.useState(""),[i,o]=z.useState(""),s=r=>{if(r.preventDefault(),e.trim()&&i.trim()){const a={name:e.trim(),email:i.trim()};t(a)}};return c.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-100 p-4",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800",children:"Clinical Wellness Spa"}),c.jsx("p",{className:"mt-2 text-lg text-slate-600",children:"Il tuo percorso verso il benessere inizia qui."})]}),c.jsxs("div",{className:"bg-white shadow-2xl rounded-2xl p-8 animate-fade-in",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx(RT,{className:"mx-auto h-16 w-16 text-sky-600 mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Area Riservata"}),c.jsx("p",{className:"mt-1 text-slate-500",children:"Accedi per continuare"})]}),c.jsxs("form",{className:"space-y-6",onSubmit:s,children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome"}),c.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:e,onChange:r=>n(r.target.value),className:"appearance-none relative block w-full px-3 py-3 border border-slate-300 placeholder-slate-500 text-slate-900 rounded-md focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm",placeholder:"Il tuo nome"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-slate-700 mb-1",children:"Indirizzo Email"}),c.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:r=>o(r.target.value),className:"appearance-none relative block w-full px-3 py-3 border border-slate-300 placeholder-slate-500 text-slate-900 rounded-md focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm",placeholder:"indirizzo@esempio.com"})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",disabled:!e.trim()||!i.trim(),className:"group relative w-full flex justify-center py-3 px-4 mt-4 border border-transparent text-sm font-medium rounded-md text-white bg-sky-600 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 disabled:bg-slate-400 disabled:cursor-not-allowed transition-colors",children:"Accedi"})})]})]}),c.jsxs("p",{className:"mt-6 text-center text-sm text-slate-500",children:[" ",new Date().getFullYear()," Clinical Wellness Spa. Tutti i diritti riservati."]})]})})},LT=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7"}),c.jsx("polyline",{points:"16 17 22 17 22 11"})]}),DT=({user:t,onNavigate:e})=>{const[n,i]=z.useState(null);if(z.useEffect(()=>{let l=[];for(const u of Object.keys(un)){const d=Ee(`assessmentHistory_${t.email}_${u}`,[]);if(d.length>0){const h=d[d.length-1];l.push({id:u,title:un[u].title.replace("Analisi ",""),score:h.score,Icon:un[u].Icon})}}l.length>0&&(l.sort((u,d)=>u.score-d.score),i(l[0]))},[t.email]),!n)return c.jsxs("div",{className:"bg-sky-600 text-white rounded-xl shadow-lg p-6 mb-8 animate-fade-in",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(st,{className:"w-10 h-10 text-sky-300 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold",children:"Inizia il tuo percorso di benessere!"}),c.jsx("p",{className:"text-sky-200",children:"Completa il tuo primo test di autovalutazione per scoprire i tuoi punti di forza."})]})]}),c.jsx("button",{onClick:()=>e("assessments"),className:"mt-4 w-full bg-white text-sky-700 font-bold py-2 px-4 rounded-lg hover:bg-sky-100 transition-colors",children:"Inizia il primo test"})]});const{Icon:o,title:s,score:r,id:a}=n;return c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8 animate-fade-in border border-slate-200",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 mb-2",children:"Focus Benessere"}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:c.jsx(LT,{className:"w-6 h-6 text-red-600"})}),c.jsxs("div",{className:"flex-grow",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800",children:["Area da Migliorare: ",s]}),c.jsxs("p",{className:"text-slate-600",children:["Il tuo ultimo punteggio  ",c.jsx("span",{className:"font-bold text-red-600",children:r}),". Concentrati su quest'area per migliorare il tuo benessere generale."]}),c.jsx("button",{onClick:()=>e("assessments"),className:"mt-3 text-sky-600 font-semibold hover:text-sky-800 transition-colors text-sm",children:"Vai ai test di valutazione "})]})]})]})},zT=({className:t=""})=>c.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M2 10h2v4H2v-4zm18 0h2v4h-2v-4zM6 9h2v6H6V9zm10 0h2v6h-2V9zM10 11h4v2h-4v-2z"})}),_m=({user:t,onNavigate:e})=>{const n=[{id:"assessments",title:"Test Autovalutazione",subtitle:"Scopri il tuo benessere",Icon:Ay},{id:"dashboard",title:"Dashboard Benessere",subtitle:"Visualizza i tuoi progressi",Icon:Py},{id:"wellnessRoutine",title:"Routine Benessere",subtitle:"Completa le tue missioni",Icon:st},{id:"breathing",title:"Meditazione Guidata",subtitle:"Esercizi di respirazione",Icon:Pl},{id:"spaBookings",title:"Percorsi SPA",subtitle:"Scopri i percorsi benessere",Icon:xf},{id:"analysisQuote",title:"Analisi & Preventivi",subtitle:"Crea il tuo piano di analisi",Icon:vf},{id:"prescriptions",title:"Invio Ricette Mediche",subtitle:"Invia ricette alla farmacia",Icon:My},{id:"pharmacyServices",title:"Servizi Farmacia",subtitle:"Telemedicina e altro",Icon:Ry},{id:"fitness",title:"Fitness",subtitle:"Allenamenti guidati",Icon:zT}];return c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in",children:[c.jsxs("header",{className:"mb-8",children:[c.jsxs("h1",{className:"text-4xl font-bold text-slate-800",children:["Bentornato, ",t.name,"!"]}),c.jsx("p",{className:"text-xl text-slate-600",children:"Il tuo coach personale per il benessere."})]}),c.jsx(DT,{user:t,onNavigate:e}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(i=>c.jsx("div",{onClick:()=>e(i.id),className:"bg-white rounded-xl shadow-md p-6 flex flex-col justify-between items-start cursor-pointer hover:shadow-xl hover:scale-105 transition-all duration-300 animate-slide-in-up",children:c.jsxs("div",{children:[c.jsx("div",{className:"p-3 bg-sky-100 rounded-full mb-4 inline-block",children:c.jsx(i.Icon,{className:"w-8 h-8 text-sky-600"})}),c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:i.title}),c.jsx("p",{className:"text-slate-500 mt-1",children:i.subtitle})]})},i.id))})]})},jT=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("circle",{cx:"7.5",cy:"15.5",r:"5.5"}),c.jsx("path",{d:"m21 2-9.6 9.6"}),c.jsx("path",{d:"m15.5 7.5 3 3L22 7l-3-3"})]}),FT=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),c.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),OT=({user:t,onLogout:e,onNavigate:n})=>c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in",children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-8",children:"Profilo Utente"}),c.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg max-w-md mx-auto",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"w-24 h-24 rounded-full bg-sky-100 mx-auto flex items-center justify-center mb-4",children:c.jsx(Ny,{className:"w-12 h-12 text-sky-600"})}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:t.name}),c.jsx("p",{className:"text-slate-500",children:t.email})]}),c.jsxs("div",{className:"border-t border-slate-200 pt-6 space-y-4",children:[c.jsxs("button",{onClick:()=>n("adminSettings"),className:"w-full bg-slate-600 text-white font-semibold py-3 rounded-lg hover:bg-slate-700 transition-colors shadow-md flex items-center justify-center gap-2",children:[c.jsx(FT,{className:"w-5 h-5"}),c.jsx("span",{children:"Impostazioni Punteggi"})]}),c.jsxs("button",{onClick:()=>n("manualUnlock"),className:"w-full bg-sky-600 text-white font-semibold py-3 rounded-lg hover:bg-sky-700 transition-colors shadow-md flex items-center justify-center gap-2",children:[c.jsx(jT,{className:"w-5 h-5"}),c.jsx("span",{children:"Sblocco Manuale Livelli"})]}),c.jsx("button",{onClick:e,className:"w-full bg-red-500 text-white font-semibold py-3 rounded-lg hover:bg-red-600 transition-colors shadow-md",children:"Logout"})]})]})]}),UT=({data:t,width:e=400,height:n=200,color:i="#0ea5e9"})=>{if(!t||t.length<2)return c.jsx("div",{className:"flex items-center justify-center h-full text-slate-500 text-sm italic",children:"Dati insufficienti per il grafico."});const o=20,s=e-o*2,r=n-o*2,a=80,l=20,u=m=>m/(t.length-1)*s+o,d=m=>r-(m-l)/(a-l)*r+o,h=t.map((m,g)=>`${g===0?"M":"L"} ${u(g)} ${d(m.score)}`).join(" ");return c.jsxs("svg",{viewBox:`0 0 ${e} ${n}`,className:"w-full h-full overflow-visible","aria-label":"Grafico dell'andamento dei punteggi",children:[c.jsx("path",{d:h,fill:"none",stroke:i,strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),t.map((m,g)=>c.jsxs("g",{className:"group",children:[c.jsx("circle",{cx:u(g),cy:d(m.score),r:"5",fill:"white",stroke:i,strokeWidth:"2",className:"transition-all duration-300 group-hover:r-7"}),c.jsx("rect",{x:u(g)-40,y:d(m.score)-35,width:"80",height:"25",rx:"4",fill:"#1e293b",opacity:"0",className:"group-hover:opacity-90 transition-opacity duration-200 pointer-events-none"}),c.jsxs("text",{x:u(g),y:d(m.score)-20,textAnchor:"middle",fill:"white",fontSize:"10",opacity:"0",className:"group-hover:opacity-100 transition-opacity duration-200 pointer-events-none font-bold",children:[m.score," (",new Date(m.date).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit"}),")"]})]},g)),c.jsx("text",{x:o-5,y:d(l),textAnchor:"end",dominantBaseline:"middle",className:"text-xs fill-slate-400 font-medium",children:l}),c.jsx("text",{x:o-5,y:d(a),textAnchor:"end",dominantBaseline:"middle",className:"text-xs fill-slate-400 font-medium",children:a})]})},Ml=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),c.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),bm=({user:t,onNavigate:e,onStartAssessment:n})=>{const[i,o]=z.useState({}),s=15;z.useEffect(()=>{if(t){const d={};Object.keys(un).forEach(h=>{const m=Ee(`assessmentHistory_${t.email}_${h}`,[]);m.length>0&&(d[h]=m)}),o(d)}},[t]);const r=Object.keys(i).length>0,l=(i.fitness||[]).length>0,u=d=>{const h=i[d];if(!h||h.length===0)return{status:"new",daysRemaining:0};const m=new Date(h[h.length-1].date),v=Math.abs(new Date().getTime()-m.getTime()),_=Math.ceil(v/(1e3*60*60*24));return _<s?{status:"locked",daysRemaining:s-_}:{status:"ready",daysRemaining:0}};return c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-32",children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Test di Autovalutazione"}),c.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Misura il tuo benessere. Ripeti i test ogni 15 giorni per monitorare i progressi."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.values(un).map(d=>{const{status:h,daysRemaining:m}=u(d.id),g=h==="locked";return c.jsxs("div",{className:`rounded-xl shadow-md p-6 flex flex-col items-start transition-all duration-300 relative overflow-hidden ${g?"bg-slate-50 border border-slate-200":"bg-white hover:shadow-xl hover:scale-105 cursor-pointer"}`,onClick:()=>!g&&n(d.id),children:[c.jsxs("div",{className:"flex justify-between w-full mb-4",children:[c.jsx("div",{className:`p-3 rounded-full ${g?"bg-slate-200":"bg-sky-100"}`,children:c.jsx(d.Icon,{className:`w-8 h-8 ${g?"text-slate-500":"text-sky-600"}`})}),g&&c.jsxs("div",{className:"flex items-center gap-1 bg-green-100 text-green-700 px-2 py-1 rounded-lg h-fit",children:[c.jsx(Tn,{className:"w-4 h-4"}),c.jsx("span",{className:"text-xs font-bold",children:"Completato"})]})]}),c.jsx("h2",{className:`text-xl font-bold ${g?"text-slate-500":"text-slate-800"}`,children:d.title}),c.jsx("p",{className:"text-slate-500 mt-2 text-sm",children:g?"Test completato di recente. Attendi per vedere reali miglioramenti.":"Valuta la tua situazione attuale in quest'area."}),d.id==="sleep"&&!g&&c.jsx("button",{onClick:v=>{v.stopPropagation(),e("testSonoroSonno")},className:"mt-3 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg shadow text-sm",children:"Personalizza il trattamento sonoro"}),d.id==="microbiome"&&c.jsx("button",{onClick:v=>{v.stopPropagation();const _=Ee(`assessmentHistory_${t.email}_microbiome`,[]);if(_.length>0){const x=_[_.length-1];e("microbiomaResult",{score:x.score,profileId:x.profileId,profileName:x.profileName})}else alert("Nessun risultato disponibile. Completa prima il test.")},className:"mt-3 bg-sky-600 hover:bg-sky-500 text-white px-4 py-2 rounded-lg shadow text-sm",children:"Analisi del Microbioma"}),d.id==="fitness"&&l&&c.jsx("button",{onClick:v=>{v.stopPropagation(),e("fitness")},className:"mt-3 bg-sky-600 hover:bg-sky-500 text-white px-4 py-2 rounded-lg shadow text-sm",children:"Avvia la tua routine Fitness"}),g&&c.jsxs("div",{className:"mt-4 w-full pt-4 border-t border-slate-200",children:[c.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-3",children:[c.jsx(Ml,{className:"w-4 h-4"}),c.jsxs("span",{className:"text-sm font-semibold",children:["Disponibile tra ",m," ",m===1?"giorno":"giorni"]})]}),c.jsx("button",{onClick:v=>{v.stopPropagation(),confirm("Rifare il test prima dei 15 giorni potrebbe non mostrare cambiamenti significativi. Vuoi procedere comunque?")&&n(d.id)},className:"text-xs text-sky-600 hover:text-sky-800 underline font-medium",children:"Vuoi ripeterlo subito?"})]})]},d.id)})}),r&&c.jsxs("div",{className:"mt-16 pt-8 border-t border-slate-200 animate-fade-in",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-6",children:"I tuoi progressi nel tempo"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.keys(i).map(d=>{const h=un[d],m=i[d],g=m.length>0?m[m.length-1].score:0;return c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-100",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-sky-50 rounded-lg",children:c.jsx(h.Icon,{className:"w-6 h-6 text-sky-600"})}),c.jsx("h3",{className:"font-bold text-slate-700",children:h.title})]}),c.jsx("span",{className:"text-2xl font-bold text-slate-800 bg-slate-100 px-3 py-1 rounded-md min-w-[3rem] text-center",children:g})]}),c.jsx("div",{className:"w-full h-48",children:c.jsx(UT,{data:m,width:400,height:200})})]},d)})})]})]})},BT=({assessment:t,onComplete:e})=>{const[n,i]=z.useState({}),[o,s]=z.useState(0),[r,a]=z.useState(t.id==="fitness"),l=(g,v)=>{i(_=>({..._,[g]:v}))},u=g=>{g?a(!1):e(20)};if(z.useEffect(()=>{if(r)return;if(Object.keys(n).length>0&&Object.keys(n).length===t.questions.length){const v=Object.values(n).reduce((x,y)=>x+y,0),_=setTimeout(()=>e(v,n),350);return()=>clearTimeout(_)}},[n,t.questions.length,e,r]),z.useEffect(()=>{if(!r&&n[o]!==void 0&&!(o===t.questions.length-1)){const v=setTimeout(()=>{s(_=>_+1)},300);return()=>clearTimeout(v)}},[n,o,t.questions.length,r]),r)return c.jsx("div",{className:"p-4 md:p-8 animate-fade-in flex flex-col items-center justify-center min-h-[50vh]",children:c.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[c.jsx("div",{className:"p-4 bg-sky-100 rounded-full inline-block mb-4",children:c.jsx(t.Icon,{className:"w-12 h-12 text-sky-600"})}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Analisi Fitness"}),c.jsxs("p",{className:"text-lg text-slate-600 mb-8",children:["Prima di iniziare, una domanda veloce: ",c.jsx("br",{}),c.jsx("strong",{children:"Pratichi regolarmente attivit fisica?"})]}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("button",{onClick:()=>u(!0),className:"w-full py-3 bg-sky-600 text-white font-bold rounded-xl hover:bg-sky-700 transition-colors shadow-md",children:"S, mi alleno"}),c.jsx("button",{onClick:()=>u(!1),className:"w-full py-3 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition-colors border border-slate-200",children:"No, sono sedentario"})]})]})});if(Object.keys(n).length===t.questions.length)return c.jsx("div",{className:"p-4 md:p-8 text-center animate-fade-in",children:c.jsx("h2",{className:"text-2xl font-bold text-slate-700",children:"Calcolo dei risultati..."})});const h=t.questions[o],m=o/t.questions.length*100;return c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:t.title}),c.jsxs("p",{className:"text-slate-600 mb-6",children:["Domanda ",o+1," di ",t.questions.length]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-8",children:c.jsx("div",{className:"bg-sky-500 h-2.5 rounded-full",style:{width:`${m}%`,transition:"width 0.5s ease-in-out"}})}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-slide-in-up",children:[c.jsx("h3",{className:"text-xl font-semibold text-slate-700 mb-6",children:h.text}),c.jsx("div",{className:"space-y-3",children:h.options.map((g,v)=>c.jsx("button",{onClick:()=>l(o,g.value),className:`w-full text-left p-4 rounded-lg border-2 transition-all duration-200 text-slate-700 ${n[o]===g.value?"bg-sky-100 border-sky-500 font-semibold ring-2 ring-sky-300":"bg-slate-50 border-slate-200 hover:bg-sky-50 hover:border-sky-400"}`,children:g.text},v))})]},o)]})};function yf(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Oi=yf();function Dy(t){Oi=t}const zy=/[&<>"']/,VT=new RegExp(zy.source,"g"),jy=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,HT=new RegExp(jy.source,"g"),$T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wm=t=>$T[t];function bt(t,e){if(e){if(zy.test(t))return t.replace(VT,wm)}else if(jy.test(t))return t.replace(HT,wm);return t}const GT=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function qT(t){return t.replace(GT,(e,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const WT=/(^|[^\[])\^/g;function xe(t,e){let n=typeof t=="string"?t:t.source;e=e||"";const i={replace:(o,s)=>{let r=typeof s=="string"?s:s.source;return r=r.replace(WT,"$1"),n=n.replace(o,r),i},getRegex:()=>new RegExp(n,e)};return i}function Sm(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const Rs={exec:()=>null};function Cm(t,e){const n=t.replace(/\|/g,(s,r,a)=>{let l=!1,u=r;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),i=n.split(/ \|/);let o=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(/\\\|/g,"|");return i}function is(t,e,n){const i=t.length;if(i===0)return"";let o=0;for(;o<i&&t.charAt(i-o-1)===e;)o++;return t.slice(0,i-o)}function JT(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return-1}function km(t,e,n,i){const o=e.href,s=e.title?bt(e.title):null,r=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:n,href:o,title:s,text:r,tokens:i.inlineTokens(r)};return i.state.inLink=!1,a}return{type:"image",raw:n,href:o,title:s,text:bt(r)}}function YT(t,e){const n=t.match(/^(\s+)(?:```)/);if(n===null)return e;const i=n[1];return e.split(`
`).map(o=>{const s=o.match(/^\s+/);if(s===null)return o;const[r]=s;return r.length>=i.length?o.slice(i.length):o}).join(`
`)}class el{constructor(e){H(this,"options");H(this,"rules");H(this,"lexer");this.options=e||Oi}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:is(i,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const i=n[0],o=YT(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:o}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let i=n[2].trim();if(/#$/.test(i)){const o=is(i,"#");(this.options.pedantic||!o||/ $/.test(o))&&(i=o.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:is(n[0],`
`)}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){let i=is(n[0],`
`).split(`
`),o="",s="";const r=[];for(;i.length>0;){let a=!1;const l=[];let u;for(u=0;u<i.length;u++)if(/^ {0,3}>/.test(i[u]))l.push(i[u]),a=!0;else if(!a)l.push(i[u]);else break;i=i.slice(u);const d=l.join(`
`),h=d.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");o=o?`${o}
${d}`:d,s=s?`${s}
${h}`:h;const m=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,r,!0),this.lexer.state.top=m,i.length===0)break;const g=r[r.length-1];if((g==null?void 0:g.type)==="code")break;if((g==null?void 0:g.type)==="blockquote"){const v=g,_=v.raw+`
`+i.join(`
`),x=this.blockquote(_);r[r.length-1]=x,o=o.substring(0,o.length-v.raw.length)+x.raw,s=s.substring(0,s.length-v.text.length)+x.text;break}else if((g==null?void 0:g.type)==="list"){const v=g,_=v.raw+`
`+i.join(`
`),x=this.list(_);r[r.length-1]=x,o=o.substring(0,o.length-g.raw.length)+x.raw,s=s.substring(0,s.length-v.raw.length)+x.raw,i=_.substring(r[r.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:o,tokens:r,text:s}}}list(e){let n=this.rules.block.list.exec(e);if(n){let i=n[1].trim();const o=i.length>1,s={type:"list",raw:"",ordered:o,start:o?+i.slice(0,-1):"",loose:!1,items:[]};i=o?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=o?i:"[*+-]");const r=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a=!1;for(;e;){let l=!1,u="",d="";if(!(n=r.exec(e))||this.rules.block.hr.test(e))break;u=n[0],e=e.substring(u.length);let h=n[2].split(`
`,1)[0].replace(/^\t+/,y=>" ".repeat(3*y.length)),m=e.split(`
`,1)[0],g=!h.trim(),v=0;if(this.options.pedantic?(v=2,d=h.trimStart()):g?v=n[1].length+1:(v=n[2].search(/[^ ]/),v=v>4?1:v,d=h.slice(v),v+=n[1].length),g&&/^ *$/.test(m)&&(u+=m+`
`,e=e.substring(m.length+1),l=!0),!l){const y=new RegExp(`^ {0,${Math.min(3,v-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),b=new RegExp(`^ {0,${Math.min(3,v-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),w=new RegExp(`^ {0,${Math.min(3,v-1)}}(?:\`\`\`|~~~)`),C=new RegExp(`^ {0,${Math.min(3,v-1)}}#`);for(;e;){const E=e.split(`
`,1)[0];if(m=E,this.options.pedantic&&(m=m.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),w.test(m)||C.test(m)||y.test(m)||b.test(e))break;if(m.search(/[^ ]/)>=v||!m.trim())d+=`
`+m.slice(v);else{if(g||h.search(/[^ ]/)>=4||w.test(h)||C.test(h)||b.test(h))break;d+=`
`+m}!g&&!m.trim()&&(g=!0),u+=E+`
`,e=e.substring(E.length+1),h=m.slice(v)}}s.loose||(a?s.loose=!0:/\n *\n *$/.test(u)&&(a=!0));let _=null,x;this.options.gfm&&(_=/^\[[ xX]\] /.exec(d),_&&(x=_[0]!=="[ ] ",d=d.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:u,task:!!_,checked:x,loose:!1,text:d,tokens:[]}),s.raw+=u}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let l=0;l<s.items.length;l++)if(this.lexer.state.top=!1,s.items[l].tokens=this.lexer.blockTokens(s.items[l].text,[]),!s.loose){const u=s.items[l].tokens.filter(h=>h.type==="space"),d=u.length>0&&u.some(h=>/\n.*\n/.test(h.raw));s.loose=d}if(s.loose)for(let l=0;l<s.items.length;l++)s.items[l].loose=!0;return s}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),o=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:o,title:s}}}table(e){const n=this.rules.block.table.exec(e);if(!n||!/[:|]/.test(n[2]))return;const i=Cm(n[1]),o=n[2].replace(/^\||\| *$/g,"").split("|"),s=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],r={type:"table",raw:n[0],header:[],align:[],rows:[]};if(i.length===o.length){for(const a of o)/^ *-+: *$/.test(a)?r.align.push("right"):/^ *:-+: *$/.test(a)?r.align.push("center"):/^ *:-+ *$/.test(a)?r.align.push("left"):r.align.push(null);for(let a=0;a<i.length;a++)r.header.push({text:i[a],tokens:this.lexer.inline(i[a]),header:!0,align:r.align[a]});for(const a of s)r.rows.push(Cm(a,r.header.length).map((l,u)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:r.align[u]})));return r}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const i=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:bt(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const r=is(i.slice(0,-1),"\\");if((i.length-r.length)%2===0)return}else{const r=JT(n[2],"()");if(r>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+r;n[2]=n[2].substring(0,r),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let o=n[2],s="";if(this.options.pedantic){const r=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);r&&(o=r[1],s=r[3])}else s=n[3]?n[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(i)?o=o.slice(1):o=o.slice(1,-1)),km(n,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(e,n){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const o=(i[2]||i[1]).replace(/\s+/g," "),s=n[o.toLowerCase()];if(!s){const r=i[0].charAt(0);return{type:"text",raw:r,text:r}}return km(i,s,i[0],this.lexer)}}emStrong(e,n,i=""){let o=this.rules.inline.emStrongLDelim.exec(e);if(!o||o[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(o[1]||o[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const r=[...o[0]].length-1;let a,l,u=r,d=0;const h=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+r);(o=h.exec(n))!=null;){if(a=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!a)continue;if(l=[...a].length,o[3]||o[4]){u+=l;continue}else if((o[5]||o[6])&&r%3&&!((r+l)%3)){d+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+d);const m=[...o[0]][0].length,g=e.slice(0,r+o.index+m+l);if(Math.min(r,l)%2){const _=g.slice(1,-1);return{type:"em",raw:g,text:_,tokens:this.lexer.inlineTokens(_)}}const v=g.slice(2,-2);return{type:"strong",raw:g,text:v,tokens:this.lexer.inlineTokens(v)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let i=n[2].replace(/\n/g," ");const o=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return o&&s&&(i=i.substring(1,i.length-1)),i=bt(i,!0),{type:"codespan",raw:n[0],text:i}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let i,o;return n[2]==="@"?(i=bt(n[1]),o="mailto:"+i):(i=bt(n[1]),o=i),{type:"link",raw:n[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}url(e){var i;let n;if(n=this.rules.inline.url.exec(e)){let o,s;if(n[2]==="@")o=bt(n[0]),s="mailto:"+o;else{let r;do r=n[0],n[0]=((i=this.rules.inline._backpedal.exec(n[0]))==null?void 0:i[0])??"";while(r!==n[0]);o=bt(n[0]),n[1]==="www."?s="http://"+n[0]:s=n[0]}return{type:"link",raw:n[0],text:o,href:s,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){let i;return this.lexer.state.inRawBlock?i=n[0]:i=bt(n[0]),{type:"text",raw:n[0],text:i}}}}const KT=/^(?: *(?:\n|$))+/,QT=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,XT=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,fr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,ZT=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Fy=/(?:[*+-]|\d{1,9}[.)])/,Oy=xe(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Fy).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),_f=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,eI=/^[^\n]+/,bf=/(?!\s*\])(?:\\.|[^\[\]\\])+/,tI=xe(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",bf).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),nI=xe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Fy).getRegex(),Ll="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",wf=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,iI=xe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",wf).replace("tag",Ll).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Uy=xe(_f).replace("hr",fr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ll).getRegex(),oI=xe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Uy).getRegex(),Sf={blockquote:oI,code:QT,def:tI,fences:XT,heading:ZT,hr:fr,html:iI,lheading:Oy,list:nI,newline:KT,paragraph:Uy,table:Rs,text:eI},Em=xe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",fr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ll).getRegex(),sI={...Sf,table:Em,paragraph:xe(_f).replace("hr",fr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Em).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ll).getRegex()},rI={...Sf,html:xe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",wf).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Rs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:xe(_f).replace("hr",fr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Oy).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},By=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,aI=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Vy=/^( {2,}|\\)\n(?!\s*$)/,lI=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,pr="\\p{P}\\p{S}",cI=xe(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,pr).getRegex(),uI=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,dI=xe(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,pr).getRegex(),fI=xe("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,pr).getRegex(),pI=xe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,pr).getRegex(),hI=xe(/\\([punct])/,"gu").replace(/punct/g,pr).getRegex(),mI=xe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),gI=xe(wf).replace("(?:-->|$)","-->").getRegex(),xI=xe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",gI).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),tl=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,vI=xe(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",tl).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Hy=xe(/^!?\[(label)\]\[(ref)\]/).replace("label",tl).replace("ref",bf).getRegex(),$y=xe(/^!?\[(ref)\](?:\[\])?/).replace("ref",bf).getRegex(),yI=xe("reflink|nolink(?!\\()","g").replace("reflink",Hy).replace("nolink",$y).getRegex(),Cf={_backpedal:Rs,anyPunctuation:hI,autolink:mI,blockSkip:uI,br:Vy,code:aI,del:Rs,emStrongLDelim:dI,emStrongRDelimAst:fI,emStrongRDelimUnd:pI,escape:By,link:vI,nolink:$y,punctuation:cI,reflink:Hy,reflinkSearch:yI,tag:xI,text:lI,url:Rs},_I={...Cf,link:xe(/^!?\[(label)\]\((.*?)\)/).replace("label",tl).getRegex(),reflink:xe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",tl).getRegex()},ju={...Cf,escape:xe(By).replace("])","~|])").getRegex(),url:xe(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},bI={...ju,br:xe(Vy).replace("{2,}","*").getRegex(),text:xe(ju.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Gr={normal:Sf,gfm:sI,pedantic:rI},os={normal:Cf,gfm:ju,breaks:bI,pedantic:_I};class rn{constructor(e){H(this,"tokens");H(this,"options");H(this,"state");H(this,"tokenizer");H(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Oi,this.options.tokenizer=this.options.tokenizer||new el,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Gr.normal,inline:os.normal};this.options.pedantic?(n.block=Gr.pedantic,n.inline=os.pedantic):this.options.gfm&&(n.block=Gr.gfm,this.options.breaks?n.inline=os.breaks:n.inline=os.gfm),this.tokenizer.rules=n}static get rules(){return{block:Gr,inline:os}}static lex(e,n){return new rn(n).lex(e)}static lexInline(e,n){return new rn(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],i=!1){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,u)=>l+"    ".repeat(u.length));let o,s,r;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(o=a.call({lexer:this},e,n))?(e=e.substring(o.raw.length),n.push(o),!0):!1))){if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length),o.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length),s=n[n.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+o.raw,s.text+=`
`+o.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length),s=n[n.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+o.raw,s.text+=`
`+o.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),n.push(o);continue}if(r=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let u;this.options.extensions.startBlock.forEach(d=>{u=d.call({lexer:this},l),typeof u=="number"&&u>=0&&(a=Math.min(a,u))}),a<1/0&&a>=0&&(r=e.substring(0,a+1))}if(this.state.top&&(o=this.tokenizer.paragraph(r))){s=n[n.length-1],i&&(s==null?void 0:s.type)==="paragraph"?(s.raw+=`
`+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(o),i=r.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length),s=n[n.length-1],s&&s.type==="text"?(s.raw+=`
`+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(o);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i,o,s,r=e,a,l,u;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,a.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(i=d.call({lexer:this},e,n))?(e=e.substring(i.raw.length),n.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),o=n[n.length-1],o&&i.type==="text"&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),o=n[n.length-1],o&&i.type==="text"&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(e,r,u)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),n.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0;const h=e.slice(1);let m;this.options.extensions.startInline.forEach(g=>{m=g.call({lexer:this},h),typeof m=="number"&&m>=0&&(d=Math.min(d,m))}),d<1/0&&d>=0&&(s=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(s)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(u=i.raw.slice(-1)),l=!0,o=n[n.length-1],o&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):n.push(i);continue}if(e){const d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return n}}class nl{constructor(e){H(this,"options");H(this,"parser");this.options=e||Oi}space(e){return""}code({text:e,lang:n,escaped:i}){var r;const o=(r=(n||"").match(/^\S*/))==null?void 0:r[0],s=e.replace(/\n$/,"")+`
`;return o?'<pre><code class="language-'+bt(o)+'">'+(i?s:bt(s,!0))+`</code></pre>
`:"<pre><code>"+(i?s:bt(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){const n=e.ordered,i=e.start;let o="";for(let a=0;a<e.items.length;a++){const l=e.items[a];o+=this.listitem(l)}const s=n?"ol":"ul",r=n&&i!==1?' start="'+i+'"':"";return"<"+s+r+`>
`+o+"</"+s+`>
`}listitem(e){let n="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):n+=i+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",i="";for(let s=0;s<e.header.length;s++)i+=this.tablecell(e.header[s]);n+=this.tablerow({text:i});let o="";for(let s=0;s<e.rows.length;s++){const r=e.rows[s];i="";for(let a=0;a<r.length;a++)i+=this.tablecell(r[a]);o+=this.tablerow({text:i})}return o&&(o=`<tbody>${o}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+o+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const n=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+n+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:i}){const o=this.parser.parseInline(i),s=Sm(e);if(s===null)return o;e=s;let r='<a href="'+e+'"';return n&&(r+=' title="'+n+'"'),r+=">"+o+"</a>",r}image({href:e,title:n,text:i}){const o=Sm(e);if(o===null)return i;e=o;let s=`<img src="${e}" alt="${i}"`;return n&&(s+=` title="${n}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class kf{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class an{constructor(e){H(this,"options");H(this,"renderer");H(this,"textRenderer");this.options=e||Oi,this.options.renderer=this.options.renderer||new nl,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new kf}static parse(e,n){return new an(n).parse(e)}static parseInline(e,n){return new an(n).parseInline(e)}parse(e,n=!0){let i="";for(let o=0;o<e.length;o++){const s=e[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const a=s,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){i+=l||"";continue}}const r=s;switch(r.type){case"space":{i+=this.renderer.space(r);continue}case"hr":{i+=this.renderer.hr(r);continue}case"heading":{i+=this.renderer.heading(r);continue}case"code":{i+=this.renderer.code(r);continue}case"table":{i+=this.renderer.table(r);continue}case"blockquote":{i+=this.renderer.blockquote(r);continue}case"list":{i+=this.renderer.list(r);continue}case"html":{i+=this.renderer.html(r);continue}case"paragraph":{i+=this.renderer.paragraph(r);continue}case"text":{let a=r,l=this.renderer.text(a);for(;o+1<e.length&&e[o+1].type==="text";)a=e[++o],l+=`
`+this.renderer.text(a);n?i+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):i+=l;continue}default:{const a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(e,n){n=n||this.renderer;let i="";for(let o=0;o<e.length;o++){const s=e[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=a||"";continue}}const r=s;switch(r.type){case"escape":{i+=n.text(r);break}case"html":{i+=n.html(r);break}case"link":{i+=n.link(r);break}case"image":{i+=n.image(r);break}case"strong":{i+=n.strong(r);break}case"em":{i+=n.em(r);break}case"codespan":{i+=n.codespan(r);break}case"br":{i+=n.br(r);break}case"del":{i+=n.del(r);break}case"text":{i+=n.text(r);break}default:{const a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}}class Ms{constructor(e){H(this,"options");this.options=e||Oi}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}H(Ms,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Nn,Gy,Fu,qy;class wI{constructor(...e){$f(this,Nn);H(this,"defaults",yf());H(this,"options",this.setOptions);H(this,"parse",Ho(this,Nn,Fu).call(this,rn.lex,an.parse));H(this,"parseInline",Ho(this,Nn,Fu).call(this,rn.lexInline,an.parseInline));H(this,"Parser",an);H(this,"Renderer",nl);H(this,"TextRenderer",kf);H(this,"Lexer",rn);H(this,"Tokenizer",el);H(this,"Hooks",Ms);this.use(...e)}walkTokens(e,n){var o,s;let i=[];for(const r of e)switch(i=i.concat(n.call(this,r)),r.type){case"table":{const a=r;for(const l of a.header)i=i.concat(this.walkTokens(l.tokens,n));for(const l of a.rows)for(const u of l)i=i.concat(this.walkTokens(u.tokens,n));break}case"list":{const a=r;i=i.concat(this.walkTokens(a.items,n));break}default:{const a=r;(s=(o=this.defaults.extensions)==null?void 0:o.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const u=a[l].flat(1/0);i=i.concat(this.walkTokens(u,n))}):a.tokens&&(i=i.concat(this.walkTokens(a.tokens,n)))}}return i}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const o={...i};if(o.async=this.defaults.async||o.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const r=n.renderers[s.name];r?n.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=r.apply(this,a)),l}:n.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const r=n[s.level];r?r.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),o.extensions=n),i.renderer){const s=this.defaults.renderer||new nl(this.defaults);for(const r in i.renderer){if(!(r in s))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;const a=r;let l=i.renderer[a];i.useNewRenderer||(l=Ho(this,Nn,Gy).call(this,l,a,s));const u=s[a];s[a]=(...d)=>{let h=l.apply(s,d);return h===!1&&(h=u.apply(s,d)),h||""}}o.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new el(this.defaults);for(const r in i.tokenizer){if(!(r in s))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;const a=r,l=i.tokenizer[a],u=s[a];s[a]=(...d)=>{let h=l.apply(s,d);return h===!1&&(h=u.apply(s,d)),h}}o.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new Ms;for(const r in i.hooks){if(!(r in s))throw new Error(`hook '${r}' does not exist`);if(r==="options")continue;const a=r,l=i.hooks[a],u=s[a];Ms.passThroughHooks.has(r)?s[a]=d=>{if(this.defaults.async)return Promise.resolve(l.call(s,d)).then(m=>u.call(s,m));const h=l.call(s,d);return u.call(s,h)}:s[a]=(...d)=>{let h=l.apply(s,d);return h===!1&&(h=u.apply(s,d)),h}}o.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,r=i.walkTokens;o.walkTokens=function(a){let l=[];return l.push(r.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...o}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return rn.lex(e,n??this.defaults)}parser(e,n){return an.parse(e,n??this.defaults)}}Nn=new WeakSet,Gy=function(e,n,i){switch(n){case"heading":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,i.parser.parseInline(o.tokens),o.depth,qT(i.parser.parseInline(o.tokens,i.parser.textRenderer)))};case"code":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text,o.lang,!!o.escaped)};case"table":return function(o){if(!o.type||o.type!==n)return e.apply(this,arguments);let s="",r="";for(let l=0;l<o.header.length;l++)r+=this.tablecell({text:o.header[l].text,tokens:o.header[l].tokens,header:!0,align:o.align[l]});s+=this.tablerow({text:r});let a="";for(let l=0;l<o.rows.length;l++){const u=o.rows[l];r="";for(let d=0;d<u.length;d++)r+=this.tablecell({text:u[d].text,tokens:u[d].tokens,header:!1,align:o.align[d]});a+=this.tablerow({text:r})}return e.call(this,s,a)};case"blockquote":return function(o){if(!o.type||o.type!==n)return e.apply(this,arguments);const s=this.parser.parse(o.tokens);return e.call(this,s)};case"list":return function(o){if(!o.type||o.type!==n)return e.apply(this,arguments);const s=o.ordered,r=o.start,a=o.loose;let l="";for(let u=0;u<o.items.length;u++){const d=o.items[u],h=d.checked,m=d.task;let g="";if(d.task){const v=this.checkbox({checked:!!h});a?d.tokens.length>0&&d.tokens[0].type==="paragraph"?(d.tokens[0].text=v+" "+d.tokens[0].text,d.tokens[0].tokens&&d.tokens[0].tokens.length>0&&d.tokens[0].tokens[0].type==="text"&&(d.tokens[0].tokens[0].text=v+" "+d.tokens[0].tokens[0].text)):d.tokens.unshift({type:"text",text:v+" "}):g+=v+" "}g+=this.parser.parse(d.tokens,a),l+=this.listitem({type:"list_item",raw:g,text:g,task:m,checked:!!h,loose:a,tokens:d.tokens})}return e.call(this,l,s,r)};case"html":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text,o.block)};case"paragraph":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(o.tokens))};case"escape":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text)};case"link":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.href,o.title,this.parser.parseInline(o.tokens))};case"image":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.href,o.title,o.text)};case"strong":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(o.tokens))};case"em":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(o.tokens))};case"codespan":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text)};case"del":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,this.parser.parseInline(o.tokens))};case"text":return function(o){return!o.type||o.type!==n?e.apply(this,arguments):e.call(this,o.text)}}return e},Fu=function(e,n){return(i,o)=>{const s={...o},r={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(r.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),r.async=!0);const a=Ho(this,Nn,qy).call(this,!!r.silent,!!r.async);if(typeof i>"u"||i===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(r.hooks&&(r.hooks.options=r),r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(i):i).then(l=>e(l,r)).then(l=>r.hooks?r.hooks.processAllTokens(l):l).then(l=>r.walkTokens?Promise.all(this.walkTokens(l,r.walkTokens)).then(()=>l):l).then(l=>n(l,r)).then(l=>r.hooks?r.hooks.postprocess(l):l).catch(a);try{r.hooks&&(i=r.hooks.preprocess(i));let l=e(i,r);r.hooks&&(l=r.hooks.processAllTokens(l)),r.walkTokens&&this.walkTokens(l,r.walkTokens);let u=n(l,r);return r.hooks&&(u=r.hooks.postprocess(u)),u}catch(l){return a(l)}}},qy=function(e,n){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const o="<p>An error occurred:</p><pre>"+bt(i.message+"",!0)+"</pre>";return n?Promise.resolve(o):o}if(n)return Promise.reject(i);throw i}};const zi=new wI;function pe(t,e){return zi.parse(t,e)}pe.options=pe.setOptions=function(t){return zi.setOptions(t),pe.defaults=zi.defaults,Dy(pe.defaults),pe};pe.getDefaults=yf;pe.defaults=Oi;pe.use=function(...t){return zi.use(...t),pe.defaults=zi.defaults,Dy(pe.defaults),pe};pe.walkTokens=function(t,e){return zi.walkTokens(t,e)};pe.parseInline=zi.parseInline;pe.Parser=an;pe.parser=an.parse;pe.Renderer=nl;pe.TextRenderer=kf;pe.Lexer=rn;pe.lexer=rn.lex;pe.Tokenizer=el;pe.Hooks=Ms;pe.parse=pe;pe.options;pe.setOptions;pe.use;pe.walkTokens;pe.parseInline;an.parse;rn.lex;const Ef=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),c.jsx("polyline",{points:"7 10 12 15 17 10"}),c.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),SI=({assessment:t,score:e,answers:n,onRetake:i,onBackToHome:o})=>{const s=t.results.find(m=>e>=m.scoreMin&&e<=m.scoreMax)||t.results.sort((m,g)=>m.scoreMin-g.scoreMin)[0],r=t.id==="sleep"&&n,[a,l]=z.useState(null),[u,d]=z.useState(null);z.useEffect(()=>{if(r){const m={"Fase 1":0,"Fase 2":0,"Fase 3-4":0,REM:0},g={"Fase 1":0,"Fase 2":0,"Fase 3-4":0,REM:0};t.questions.forEach((x,y)=>{const b=n[y]||0;(x.phase?x.phase.split(" / ").map(C=>C.trim()):[]).forEach(C=>{m[C]!==void 0&&(m[C]+=b,g[C]+=4)})});const v=Object.keys(m).map(x=>{const y=g[x]>0?Math.round(m[x]/g[x]*100):100;return{name:x,percentage:y,status:y<60?"Critico":y<75?"Lieve":"Ottimale"}});l(v);const _=[...v].sort((x,y)=>x.percentage-y.percentage).filter(x=>x.percentage<75).slice(0,2);if(_.length>0){const x=new Set;_.forEach(y=>{var b,w,C;return(C=(w=(b=t.phaseRemedies)==null?void 0:b[y.name])==null?void 0:w.remedies)==null?void 0:C.forEach(E=>x.add(E))}),d({ingredients:Array.from(x),phases:_.map(y=>y.name)})}}},[r,n,t]);const h=()=>{const m=s.summary.replace(/<[^>]*>?/gm,"").replace(/\s+/g," ").trim();let g=`=================================================
`;g+=`   CLINICAL WELLNESS SPA - REPORT DI VALUTAZIONE
`,g+=`=================================================

`,g+=`TEST: ${t.title.toUpperCase()}
`,g+=`DATA: ${new Date().toLocaleDateString("it-IT")}
`,g+=`PUNTEGGIO: ${e} / 80

`,g+=`RISULTATO: ${s.title}
`,g+=`-------------------------------------------------
`,g+=`${m}

`,a&&(g+=`DETTAGLIO ARCHITETTURA DEL SONNO:
`,a.forEach(x=>{g+=`- ${x.name.padEnd(10)}: ${x.percentage}% (${x.status})
`}),u&&(g+=`
-------------------------------------------------
`,g+=`   PIANO GALENICO PERSONALIZZATO
`,g+=`-------------------------------------------------
`,g+=`OBIETTIVO: Supporto ${u.phases.join(" e ")}
`,g+=`COMPOSIZIONE: ${u.ingredients.join(" + ")}
`,g+=`POSOLOGIA: 1-2 capsule 30 min prima di coricarsi.

`,g+=`Porta questo report in Farmacia Centrale Montesilvano.
`)),g+=`
=================================================
`,g+="Disclaimer: Autovalutazione AI. Non sostituisce il medico.";const v=new Blob(["\uFEFF"+g],{type:"text/plain;charset=utf-8"}),_=document.createElement("a");_.href=URL.createObjectURL(v),_.download=`Report_${t.id}_${Date.now()}.txt`,_.click()};return c.jsx("div",{className:"p-4 md:p-8 animate-fade-in pb-32",children:c.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl max-w-3xl mx-auto border border-slate-100",children:[c.jsx("h2",{className:"text-3xl font-extrabold text-slate-800 mb-2",children:s.title}),c.jsxs("p",{className:"text-sky-600 font-bold text-xl mb-6",children:["Punteggio: ",e]}),c.jsx("div",{className:"prose prose-slate text-left bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-100",dangerouslySetInnerHTML:{__html:pe.parse(s.summary)}}),a&&c.jsxs("div",{className:"text-left mb-8 space-y-4",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 border-b pb-2",children:"Analisi del Sonno"}),a.map(m=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-sm font-bold mb-1",children:[c.jsx("span",{className:"text-slate-700",children:m.name}),c.jsxs("span",{className:m.percentage<60?"text-red-500":"text-emerald-600",children:[m.percentage,"% - ",m.status]})]}),c.jsx("div",{className:"w-full bg-slate-100 h-2 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full transition-all duration-1000 ${m.percentage<60?"bg-red-500":"bg-emerald-500"}`,style:{width:`${m.percentage}%`}})})]},m.name))]}),u&&c.jsxs("div",{className:"bg-indigo-600 text-white p-6 rounded-2xl shadow-lg mb-8 text-left relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:c.jsx(nr,{className:"w-24 h-24 text-white"})}),c.jsxs("div",{className:"relative z-10",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx(nr,{className:"w-6 h-6"}),c.jsx("h3",{className:"text-lg font-bold",children:"Formula Personalizzata"})]}),c.jsx("div",{className:"bg-white/10 p-4 rounded-xl font-mono text-sm mb-4 border border-white/20",children:u.ingredients.join(" + ")}),c.jsx("p",{className:"text-xs opacity-90 italic",children:"Preparazione esclusiva in Farmacia Centrale Montesilvano."})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[c.jsx("button",{onClick:i,className:"px-6 py-3 bg-slate-100 text-slate-700 font-bold rounded-xl hover:bg-slate-200 transition-all",children:"Ripeti Test"}),c.jsxs("button",{onClick:h,className:"px-6 py-3 bg-emerald-500 text-white font-bold rounded-xl shadow-lg flex items-center justify-center gap-2 hover:bg-emerald-600 transition-all transform active:scale-95",children:[c.jsx(Ef,{className:"w-5 h-5"})," Scarica Report (.txt)"]}),c.jsx("button",{onClick:o,className:"px-6 py-3 bg-sky-600 text-white font-bold rounded-xl hover:bg-sky-700 transition-all",children:"Home"})]})]})})},ss=(t,e)=>{if(t===0)return null;const n=un[e];if(!n)return null;const i=n.questions.length*4;return Math.min(100,Math.round(t/i*100))},CI=t=>{const e=(n,i,o,s,r,a)=>n===null||o===null||r===null?null:Math.round(n*i+o*s+r*a);return{body:e(t.fitness,.5,t.sleep,.3,t.diet,.2),mind:e(t.sleep,.4,t.stress,.5,t.microbiome,.1),emotions:e(t.sleep,.4,t.stress,.5,t.diet,.1)}},hi={DEPRESSION_HAPPINESS:`
    <h4 class="font-bold text-sky-700 mb-2">ESERCIZI PER LA SALUTE E FELICITA' - Decalogo per la Gestione della Depressione</h4>
    <ol class="list-decimal list-inside space-y-1 text-sm">
        <li><strong>Mindfulness:</strong> Pratica la meditazione mindfulness per 20-30 minuti al giorno.</li>
        <li><strong>Esercizio Fisico:</strong> Fai esercizio fisico regolarmente, almeno 30 minuti al giorno.</li>
        <li><strong>Connettersi con gli Altri:</strong> Trascorri tempo con amici e familiari.</li>
        <li><strong>Pianificazione delle Attivit:</strong> Organizza attivit piacevoli e gratificanti.</li>
        <li><strong>Alimentazione Sana:</strong> Mantieni una dieta equilibrata e nutriente.</li>
        <li><strong>Routine del Sonno:</strong> Segui una routine regolare per il sonno.</li>
        <li><strong>Limitare l'Alcool:</strong> Evita il consumo eccessivo di alcool.</li>
        <li><strong>Diario delle Emozioni:</strong> Scrivi i tuoi pensieri e le tue emozioni ogni giorno.</li>
        <li><strong>Terapia e Supporto:</strong> Se necessario chiedi il supporto di un terapeuta.</li>
        <li><strong>Tecniche di Gestione dello Stress:</strong> Respirazione profonda e rilassamento muscolare.</li>
    </ol>
    <p class="mt-2 text-xs font-semibold">Durata degli Esercizi: 20 gg poi eseguire nuovamente i test.</p>
    `,MINDFULNESS_INSOMNIA:`
    <h4 class="font-bold text-sky-700 mb-2">MINDFULNESS PER GESTIRE L'INSONNIA</h4>
    <p class="text-sm mb-2">La pratica della Mindfulness pu migliorare la qualit del sonno aiutando a calmare la mente prima di dormire. Attraverso la pratica regolare, si impara a osservare i propri pensieri senza esserne travolti.</p>
    <p class="text-sm mb-2">Si consiglia di meditare regolarmente <strong>15-20 minuti al giorno</strong> prima di andare a letto.</p>
    <p class="mt-2 text-xs font-semibold">Durata degli esercizi: 20 gg poi eseguire nuovamente i test.</p>
    `,OSTEOPATHY:`
    <h4 class="font-bold text-sky-700 mb-2">Postura, Stress e Longevit: Osteopatia Strutturale</h4>
    <p class="text-sm mb-2">L'Osteopatia interviene sulle disfunzioni strutturali, migliorando l'allineamento corporeo e prevenendo problemi legati a una postura scorretta. Il trattamento pu agire sulla componente neurovegetativa e sullo stress.</p>
    <ul class="list-disc list-inside space-y-1 text-sm">
        <li>Miglioramento mobilit e respirazione</li>
        <li>Riduzione tensioni muscolari da stress</li>
        <li>Massaggi terapeutici per rilascio endorfine</li>
    </ul>
    <p class="mt-2 text-xs font-semibold">Durata del trattamento: 10 sedute poi eseguire nuovamente i test.</p>
    `,BINAURAL:`
    <h4 class="font-bold text-sky-700 mb-2">Terapia Binaurale per l'Ansia</h4>
    <p class="text-sm mb-2">Si consiglia terapia 20-30 minuti con <strong>Onde Alpha () + Onde Delta ()</strong>.</p>
    <ul class="list-disc list-inside space-y-1 text-sm">
        <li><strong>396 Hz:</strong> Libera dal senso di colpa e ansia</li>
        <li><strong>417 Hz:</strong> Cambiamento, lasciare andare il passato</li>
        <li><strong>528 Hz:</strong> Riparazione e armonizzazione del DNA</li>
    </ul>
    <p class="mt-2 text-xs font-semibold">Durata della terapia: 20 gg poi eseguire nuovamente i test.</p>
    `,SAUNA:`
    <h4 class="font-bold text-sky-700 mb-2">SAUNA INFRAROSSI</h4>
    <p class="text-sm mb-2">La sauna infrarossi produce un effettivo e localizzato dimagrimento (sino a 900 Kcal a seduta) ed elimina tossine e metalli pesanti.</p>
    <ul class="list-disc list-inside space-y-1 text-sm">
        <li>Migliora la pelle (pi luminosa ed elastica)</li>
        <li>Favorisce il sonno e la circolazione</li>
        <li>Ottimo prima di massaggi e trattamenti estetici</li>
    </ul>
    <p class="mt-2 text-xs font-semibold">Durata: 10 sedute poi eseguire nuovamente i test.</p>
    `,DETOX:`
    <h4 class="font-bold text-sky-700 mb-2">TERAPIA DETOX - Tisane Naturali</h4>
    <ul class="list-disc list-inside space-y-1 text-sm">
        <li><strong>Tarassaco:</strong> azione depurativa (radice secca, scorza limone, zenzero).</li>
        <li><strong>T Verde e Ortica:</strong> azione antiossidante.</li>
        <li><strong>Finocchio e Zenzero:</strong> azione digestiva.</li>
        <li><strong>Zenzero e Curcuma:</strong> azione antinfiammatoria.</li>
    </ul>
    <p class="mt-2 text-xs font-semibold">Durata della terapia Detox: 4 settimane poi eseguire nuovamente i test.</p>
    `,BIOFEEDBACK:`
    <h4 class="font-bold text-sky-700 mb-2">COERENZA CARDIACA E HRV</h4>
    <p class="text-sm mb-2">Per combattere stress, ansia e insonnia,  fondamentale monitorare e migliorare la variabilit della frequenza cardiaca (HRV).</p>
    <ul class="list-disc list-inside space-y-1 text-sm">
        <li>Utilizza lo strumento di <strong>Coerenza Cardiaca</strong> in app quotidianamente.</li>
        <li>Valuta esami clinici specifici come <strong>Holter Cardiaco/Pressorio</strong> o <strong>ECG</strong> disponibili in farmacia.</li>
    </ul>
    `},kI=(t,e)=>{const n=[];e.stress!==null&&e.stress<50&&n.push({title:"Gestione Ansia & Stress",status:"critical",description:"Livelli di stress elevati. Consigliamo di agire subito monitorando il cuore (HRV) e praticando il rilassamento.",detailedContent:hi.BIOFEEDBACK+"<br/>"+hi.BINAURAL,therapies:["Coerenza Cardiaca (vedi app)","Holter Cardiaco/Pressorio","Test Cortisolo Salivare"],actionLink:"breathing",iconKey:"stress"}),e.sleep!==null&&e.sleep<50&&n.push({title:"Qualit del Sonno",status:"critical",description:"Il riposo notturno non  rigenerante. Oltre alla mindfulness, valuta l'impatto fisiologico dello stress.",detailedContent:hi.MINDFULNESS_INSOMNIA+"<br/><p class='text-sm mt-2'>Consigliato anche check <strong>HRV e Coerenza Cardiaca</strong>.</p>",therapies:["Polisonnografia (prenota in analisi)","Mindfulness serale","Coerenza Cardiaca"],actionLink:"analysisQuote",iconKey:"sleep"}),(e.diet!==null&&e.diet<50||e.microbiome!==null&&e.microbiome<50)&&n.push({title:"Detox & Nutrizione",status:"moderate",description:"Il sistema digerente necessita di depurazione. Utile indagare intolleranze.",detailedContent:hi.DETOX,therapies:["Test Intolleranze/Microbioma","Tisane depurative","Piano nutrizionale"],actionLink:"analysisQuote",iconKey:"diet"}),e.fitness!==null&&e.fitness<40&&n.push({title:"Struttura & Postura",status:"moderate",description:"Possibili tensioni muscolari. Un check-up posturale pu prevenire dolori cronici.",detailedContent:hi.OSTEOPATHY,therapies:["Valutazione Osteopatica","Massaggi decontratturanti","Esercizi posturali"],actionLink:"spaBookings",iconKey:"structure"}),t.mind!==null&&t.mind<50&&n.push({title:"Riequilibrio Emozionale",status:"critical",description:"Strategie per ritrovare la serenit. La sauna infrarossi pu aiutare il rilascio di tensioni profonde.",detailedContent:hi.DEPRESSION_HAPPINESS+"<br/>"+hi.SAUNA,therapies:["Supporto psicologico","Sauna Infrarossi","Percorsi SPA Relax"],actionLink:"spaBookings",iconKey:"emotion"});const i=t.body!==null&&t.mind!==null?(t.body+t.mind)/2:null;return i!==null&&i>=60&&n.length===0&&n.push({title:"Mantenimento Benessere",status:"optimal",description:"Il tuo stato di salute  buono. Continua con protocolli di mantenimento per la longevit.",therapies:["Massaggi di mantenimento","Check-up annuale (Analisi sangue)","Trattamenti viso/corpo prevenzione"],actionLink:"spaBookings",iconKey:"maintenance"}),n};zo.register(gs,xo,sn,my,ff,df);const EI=({scores:t,composites:e})=>{const n={labels:["Fitness","Sonno","Dietetica","Stress","Microbioma","ENERGIA","MENTE","EMOZIONI"],datasets:[{label:"Il Tuo Profilo Benessere",data:[t.fitness,t.sleep,t.diet,t.stress,t.microbiome,e.body,e.mind,e.emotions],backgroundColor:"rgba(14, 165, 233, 0.2)",borderColor:"rgba(14, 165, 233, 1)",borderWidth:2,pointBackgroundColor:"rgba(255, 255, 255, 1)",pointBorderColor:"rgba(14, 165, 233, 1)",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(14, 165, 233)",spanGaps:!0},{label:"Obiettivo Ottimale",data:[80,80,80,80,80,80,80,80],backgroundColor:"rgba(16, 185, 129, 0.05)",borderColor:"rgba(16, 185, 129, 0.4)",borderWidth:1,pointRadius:0,borderDash:[5,5]}]},i=s=>s===null?"#94a3b8":s<40?"#ef4444":s<70?"#f59e0b":"#10b981",o={scales:{r:{angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)"},suggestedMin:0,suggestedMax:100,ticks:{stepSize:20,backdropColor:"transparent",font:{size:10}},pointLabels:{font:{size:13,weight:"bold",family:"'Inter', sans-serif"},color:s=>{const r=s.label;let a=null;switch(r){case"Fitness":a=t.fitness;break;case"Sonno":a=t.sleep;break;case"Dietetica":a=t.diet;break;case"Stress":a=t.stress;break;case"Microbioma":a=t.microbiome;break;case"ENERGIA":a=e.body;break;case"MENTE":a=e.mind;break;case"EMOZIONI":a=e.emotions;break}return r==="ENERGIA"&&a!==null?"#059669":r==="MENTE"&&a!==null?"#0284c7":r==="EMOZIONI"&&a!==null?"#ea580c":i(a)}}}},plugins:{legend:{position:"bottom",labels:{font:{family:"'Inter', sans-serif",size:12}}},tooltip:{callbacks:{label:function(s){let r=s.dataset.label||"";return r&&(r+=": "),s.parsed.r!==null?r+=s.parsed.r+"%":r+="Dati mancanti",r}}}},maintainAspectRatio:!1};return c.jsx("div",{className:"w-full h-[400px] flex justify-center items-center",children:c.jsx(eT,{data:n,options:o})})},Wy=({className:t})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:t||"w-10 h-10 text-white drop-shadow-md",children:[c.jsx("path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"}),c.jsx("path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"})]}),Jy=({className:t})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:t||"w-10 h-10 text-white drop-shadow-md",children:[c.jsx("circle",{cx:"12",cy:"5",r:"2"}),c.jsx("path",{d:"M12 7v5"}),c.jsx("path",{d:"M8 9l4-2 4 2"}),c.jsx("path",{d:"M8 14l4 2 4-2"}),c.jsx("path",{d:"M9 22l3-6 3 6"}),c.jsx("path",{d:"M12 12v3"})]}),Yy=({className:t})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:t||"w-10 h-10 text-white drop-shadow-md",children:[c.jsx("circle",{cx:"12",cy:"12",r:"10",className:"opacity-50"}),c.jsx("path",{d:"M12 8a4 4 0 1 0 0 8 4 4 0 1 0 0-8z"}),c.jsx("path",{d:"M12 2v2"}),c.jsx("path",{d:"M12 20v2"}),c.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),c.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),c.jsx("path",{d:"M2 12h2"}),c.jsx("path",{d:"M20 12h2"}),c.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),c.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),TI=({scores:t,composites:e,gender:n})=>{const i="body_female.png",o="body_male.png",s=v=>v===null?"#94a3b8":v<40?"#ef4444":v<70?"#f59e0b":"#10b981",a=Object.values(t).filter(v=>v!==null),l=a.length,u=Math.round(l/5*100),d=a.reduce((v,_)=>v+_,0),h=l>0?Math.round(d/l):null,m=v=>v===null?"text-slate-400":v<=50?"text-red-500":v<=60?"text-amber-500":v<=80?"text-emerald-500":"text-sky-500",g=({x:v,y:_,align:x,label:y,value:b,targetY:w})=>{const C=s(b),E=x==="end"?180:220;return c.jsxs("g",{className:"transition-all duration-300 hover:opacity-100 opacity-90 cursor-default group",children:[c.jsx("line",{x1:v,y1:_,x2:E,y2:w,stroke:C,strokeWidth:"2",strokeDasharray:"4,2",opacity:"0.4",className:"group-hover:opacity-100 transition-opacity"}),c.jsx("rect",{x:x==="end"?v-52:v,y:_-16,width:"54",height:"34",rx:"12",fill:"white",stroke:C,strokeWidth:"2.5",filter:"drop-shadow(0px 3px 3px rgba(0,0,0,0.15))"}),c.jsx("text",{x:x==="end"?v-25:v+27,y:_+1,textAnchor:"middle",dominantBaseline:"middle",fill:C,fontWeight:"800",fontSize:"15",fontFamily:"sans-serif",children:b!==null?`${b}%`:"-"}),c.jsx("text",{x:x==="end"?v-60:v+62,y:_,textAnchor:x,dominantBaseline:"middle",fill:"#475569",fontSize:"11",fontWeight:"800",fontFamily:"sans-serif",style:{textTransform:"uppercase",letterSpacing:"0.5px"},children:y}),c.jsx("circle",{cx:E,cy:w,r:"4",fill:C,stroke:"white",strokeWidth:"2"})]})};return c.jsxs("div",{className:"flex flex-col w-full bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm h-full relative",children:[c.jsx("div",{className:"px-6 py-4 bg-white border-b border-slate-100 z-10",children:c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Wellness Index"}),c.jsx("span",{className:`text-3xl font-extrabold ${m(h)} leading-none`,children:h!==null?`${h}%`:"-"})]}),c.jsxs("div",{className:"flex flex-col items-end w-1/2",children:[c.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1",children:["Profilo ",u,"%"]}),c.jsx("div",{className:"w-full bg-slate-100 rounded-full h-1.5 overflow-hidden",children:c.jsx("div",{className:"bg-gradient-to-r from-sky-400 to-sky-600 h-1.5 rounded-full transition-all duration-1000 ease-out",style:{width:`${u}%`}})})]})]})}),c.jsxs("div",{className:"relative flex-grow flex flex-col items-center justify-center p-2 bg-gradient-to-b from-white via-sky-50/30 to-slate-100/50 min-h-[400px]",children:[c.jsxs("svg",{viewBox:"0 0 400 480",className:"w-full h-auto max-h-[480px] drop-shadow-xl select-none",children:[c.jsx("defs",{children:c.jsxs("filter",{id:"bodyGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),c.jsx("image",{href:n==="male"?o:i,x:"50",y:"-20",width:"300",height:"400",preserveAspectRatio:"xMidYMid meet",filter:"url(#bodyGlow)",opacity:"0.9"}),c.jsx(g,{x:110,y:60,align:"end",label:"SONNO",value:t.sleep,targetY:60}),c.jsx(g,{x:290,y:60,align:"start",label:"STRESS",value:t.stress,targetY:60}),c.jsx(g,{x:290,y:160,align:"start",label:"FITNESS",value:t.fitness,targetY:160}),c.jsx(g,{x:110,y:260,align:"end",label:"DIETA",value:t.diet,targetY:260}),c.jsx(g,{x:290,y:260,align:"start",label:"MICROBIOMA",value:t.microbiome,targetY:280})]}),c.jsx("div",{className:"w-full px-4 pb-6",children:c.jsxs("div",{className:"flex flex-wrap justify-center items-start gap-4 sm:gap-8",children:[c.jsxs("div",{className:"flex flex-col items-center group cursor-default w-20 sm:w-24",children:[c.jsx("div",{className:`w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center border-4 ${e.body!==null?"border-emerald-500 text-emerald-800 bg-emerald-50":"border-slate-200 text-slate-400 bg-white"} shadow-xl shadow-emerald-100/50 group-hover:scale-105 transition-transform duration-300 relative z-10`,children:c.jsx("span",{className:"text-sm sm:text-lg font-extrabold",children:e.body!==null?`${e.body}%`:"-"})}),c.jsx("span",{className:"text-[10px] sm:text-xs font-bold text-slate-600 mt-2 mb-1 uppercase tracking-wide group-hover:text-emerald-700 transition-colors",children:"Energia"}),c.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-2xl overflow-hidden shadow-md bg-gradient-to-br from-emerald-400 to-teal-600 flex items-center justify-center group-hover:shadow-lg transition-all",children:c.jsx(Jy,{className:"w-6 h-6 sm:w-10 sm:h-10 text-white"})})]}),c.jsxs("div",{className:"flex flex-col items-center group cursor-default w-20 sm:w-24",children:[c.jsx("div",{className:`w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center border-4 ${e.mind!==null?"border-sky-500 text-sky-700 bg-sky-50":"border-slate-200 text-slate-400 bg-white"} shadow-lg group-hover:scale-105 transition-transform duration-300 relative z-10`,children:c.jsx("span",{className:"text-sm sm:text-lg font-extrabold",children:e.mind!==null?`${e.mind}%`:"-"})}),c.jsx("span",{className:"text-[10px] sm:text-xs font-bold text-slate-500 mt-2 mb-1 uppercase tracking-wide group-hover:text-sky-600 transition-colors",children:"Mente"}),c.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-2xl overflow-hidden shadow-md bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center group-hover:shadow-lg transition-all",children:c.jsx(Wy,{className:"w-6 h-6 sm:w-10 sm:h-10 text-white"})})]}),c.jsxs("div",{className:"flex flex-col items-center group cursor-default w-20 sm:w-24",children:[c.jsx("div",{className:`w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center border-4 ${e.emotions!==null?"border-orange-500 text-orange-700 bg-orange-50":"border-slate-200 text-slate-400 bg-white"} shadow-lg group-hover:scale-105 transition-transform duration-300 relative z-10`,children:c.jsx("span",{className:"text-sm sm:text-lg font-extrabold",children:e.emotions!==null?`${e.emotions}%`:"-"})}),c.jsx("span",{className:"text-[10px] sm:text-xs font-bold text-slate-500 mt-2 mb-1 uppercase tracking-wide group-hover:text-orange-600 transition-colors",children:"Emozioni"}),c.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-2xl overflow-hidden shadow-md bg-gradient-to-br from-orange-500 to-amber-500 flex items-center justify-center group-hover:shadow-lg transition-all",children:c.jsx(Yy,{className:"w-6 h-6 sm:w-10 sm:h-10 text-white"})})]})]})})]})]})};zo.register(Lu,Qa,xo,sn,_E,ff,df,my);const vo=(t,e,n)=>{const o=(e.getTime()-t.getTime())/(1e3*3600*24);return Math.sin(2*Math.PI*o/n)*100},II=({birthDate:t,targetDate:e})=>{const n=[],i=[],o=[],s=[];for(let l=-2;l<=12;l++){const u=new Date(e);u.setDate(u.getDate()+l);const d=l===0?"Oggi":u.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit"});n.push(d),i.push(vo(t,u,23)),o.push(vo(t,u,28)),s.push(vo(t,u,33))}const r={labels:n,datasets:[{label:"Fisico (Energia)",data:i,borderColor:"rgb(22, 163, 74)",backgroundColor:"rgba(22, 163, 74, 0.1)",tension:.4,pointRadius:l=>l.dataIndex===2?6:0,pointHoverRadius:6},{label:"Emozionale",data:o,borderColor:"rgb(249, 115, 22)",backgroundColor:"rgba(249, 115, 22, 0.1)",tension:.4,pointRadius:l=>l.dataIndex===2?6:0,pointHoverRadius:6},{label:"Intellettuale (Mente)",data:s,borderColor:"rgb(14, 165, 233)",backgroundColor:"rgba(14, 165, 233, 0.1)",tension:.4,pointRadius:l=>l.dataIndex===2?6:0,pointHoverRadius:6}]},a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1}},scales:{y:{min:-100,max:100,grid:{color:l=>l.tick.value===0?"rgba(0,0,0,0.3)":"rgba(0,0,0,0.05)",lineWidth:l=>l.tick.value===0?2:1},ticks:{display:!1}},x:{grid:{display:!1}}}};return c.jsx("div",{className:"w-full h-64",children:c.jsx(Sy,{data:r,options:a})})},Ou=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"m12 19-7-7 7-7"}),c.jsx("path",{d:"M19 12H5"})]}),Tm=[{day:1,message:"Il segreto per migliorarsi  non sprecare la vita in distrazioni.",quote:"Ogni passo  un investimento sulla tua forza futura.",category:"Attivit fisica"},{day:2,message:"Inizia osservando le tue giornate: cosa ti porta davvero avanti?",quote:"La qualit del sonno decide la qualit della tua giornata.",category:"Sonno"},{day:3,message:"Riconosci le attivit che ti allontanano dai tuoi obiettivi.",quote:"Il silenzio interiore  la tua vera forza.",category:"Ansia e stress"},{day:4,message:"Prima di tutto, definisci gli obiettivi che temi di affrontare.",quote:"Mangiare bene  il primo allenamento del corpo.",category:"Alimentazione"},{day:5,message:"Non lasciare che la paura del fallimento ti blocchi.",quote:"Il corpo si allena, la mente si libera.",category:"Attivit fisica"},{day:6,message:"Scrivi nero su bianco ci che vuoi cambiare.",quote:"Un intestino sano  un alleato silenzioso.",category:"Microbioma"},{day:7,message:"Elimina le distrazioni che non ti aiutano a realizzare il tuo obiettivo.",quote:"Dormire bene  il primo atto di cura verso te stesso.",category:"Sonno"},{day:8,message:"Ogni giorno togli un piccolo ostacolo dalla tua routine.",quote:"Trasforma la tensione in energia creativa.",category:"Ansia e stress"},{day:9,message:"Scegli con coraggio ci che ti fa crescere.",quote:"La semplicit nel piatto  ricchezza per la vita.",category:"Alimentazione"},{day:10,message:"Ricorda: il cambiamento richiede energia emotiva.",quote:"Respira: ogni respiro  un ritorno alla calma.",category:"Ansia e stress"},{day:11,message:"Preparati con azioni precise che diventeranno abitudini.",quote:"La diversit nel piatto crea armonia dentro di te.",category:"Microbioma"},{day:12,message:"Ogni nuova abitudine  un mattone della tua nuova vita.",quote:"Il sudore di oggi  la fiducia di domani.",category:"Attivit fisica"},{day:13,message:"Segna sul calendario la data: tra due settimane inizia il tuo cambiamento.",quote:"Unora di sonno persa  un giorno di energia rubata.",category:"Sonno"},{day:14,message:"Mancano pochi giorni: il tuo nuovo inizio  vicino.",quote:"Il microbioma  il giardino segreto della tua salute.",category:"Microbioma"}],Im=[{category:"Attivit fisica",text:"Ogni passo  un investimento sulla tua forza futura."},{category:"Attivit fisica",text:"La costanza batte la velocit: muoviti ogni giorno."},{category:"Attivit fisica",text:"Il corpo si allena, la mente si libera."},{category:"Attivit fisica",text:"Non serve essere perfetti, basta essere presenti."},{category:"Attivit fisica",text:"Il sudore di oggi  la fiducia di domani."},{category:"Attivit fisica",text:"Allenati per la versione migliore di te stesso, non per gli altri."},{category:"Sonno",text:"Il riposo  carburante: senza di lui non c energia."},{category:"Sonno",text:"Dormire bene  il primo atto di cura verso te stesso."},{category:"Sonno",text:"Il sonno ricarica la mente come la batteria di un telefono."},{category:"Sonno",text:"Chiudere gli occhi  aprire la porta alla rigenerazione."},{category:"Sonno",text:"Unora di sonno persa  un giorno di energia rubata."},{category:"Sonno",text:"La qualit del sonno decide la qualit della tua giornata."},{category:"Ansia e stress",text:"Respira: ogni respiro  un ritorno alla calma."},{category:"Ansia e stress",text:"Il controllo non  fuori,  dentro di te."},{category:"Ansia e stress",text:"La serenit nasce da piccoli gesti quotidiani."},{category:"Ansia e stress",text:"Non puoi fermare le onde, ma puoi imparare a surfare."},{category:"Ansia e stress",text:"Trasforma la tensione in energia creativa."},{category:"Ansia e stress",text:"Il silenzio interiore  la tua vera forza."},{category:"Alimentazione",text:"Mangiare bene  il primo allenamento del corpo."},{category:"Alimentazione",text:"Ogni scelta a tavola  un passo verso la salute."},{category:"Alimentazione",text:"Il cibo  medicina quotidiana."},{category:"Alimentazione",text:"Nutri il corpo, illumina la mente."},{category:"Alimentazione",text:"La semplicit nel piatto  ricchezza per la vita."},{category:"Alimentazione",text:"Mangiare consapevole  vivere consapevole."},{category:"Microbioma",text:"Il tuo benessere inizia dallequilibrio invisibile dentro di te."},{category:"Microbioma",text:"Prenditi cura del microbioma, e lui si prender cura di te."},{category:"Microbioma",text:"Un intestino sano  un alleato silenzioso."},{category:"Microbioma",text:"La diversit nel piatto crea armonia dentro di te."},{category:"Microbioma",text:"Il microbioma  il giardino segreto della tua salute."},{category:"Microbioma",text:"Piccoli cambiamenti alimentano grandi trasformazioni interiori."}];var NI={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let AI,PI;function RI(){return{geminiUrl:AI,vertexUrl:PI}}function MI(t,e,n,i){var o,s;if(!(t!=null&&t.baseUrl)){const r=RI();return e?(o=r.vertexUrl)!==null&&o!==void 0?o:n:(s=r.geminiUrl)!==null&&s!==void 0?s:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pn{}function $(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const s=e[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function p(t,e,n){for(let s=0;s<e.length-1;s++){const r=e[s];if(r.endsWith("[]")){const a=r.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${r}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){const d=l[u];p(d,e.slice(s+1),n[u])}else for(const u of l)p(u,e.slice(s+1),n)}return}else if(r.endsWith("[0]")){const a=r.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];p(l[0],e.slice(s+1),n);return}(!t[r]||typeof t[r]!="object")&&(t[r]={}),t=t[r]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const o=e[i];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in t){const r=t[s];return Array.isArray(r)?r.map(a=>f(a,e.slice(i+1),n)):n}else return n}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function LI(t,e){for(const[n,i]of Object.entries(e)){const o=n.split("."),s=i.split("."),r=new Set;let a=-1;for(let l=0;l<o.length;l++)if(o[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const u=s[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&r.add(u)}Uu(t,o,s,0,r)}}function Uu(t,e,n,i,o){if(i>=e.length||typeof t!="object"||t===null)return;const s=e[i];if(s.endsWith("[]")){const r=s.slice(0,-2),a=t;if(r in a&&Array.isArray(a[r]))for(const l of a[r])Uu(l,e,n,i+1,o)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const r=t,a=Object.keys(r).filter(u=>!u.startsWith("_")&&!o.has(u)),l={};for(const u of a)l[u]=r[u];for(const[u,d]of Object.entries(l)){const h=[];for(const m of n.slice(i))m==="*"?h.push(u):h.push(m);p(r,h,d)}for(const u of a)delete r[u]}}else{const r=t;s in r&&Uu(r[s],e,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DI(t){const e={},n=f(t,["operationName"]);n!=null&&p(e,["operationName"],n);const i=f(t,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function zI(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(t,["done"]);o!=null&&p(e,["done"],o);const s=f(t,["error"]);s!=null&&p(e,["error"],s);const r=f(t,["response","generateVideoResponse"]);return r!=null&&p(e,["response"],FI(r)),e}function jI(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(t,["done"]);o!=null&&p(e,["done"],o);const s=f(t,["error"]);s!=null&&p(e,["error"],s);const r=f(t,["response"]);return r!=null&&p(e,["response"],OI(r)),e}function FI(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>UI(r))),p(e,["generatedVideos"],s)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(t,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function OI(t){const e={},n=f(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>BI(r))),p(e,["generatedVideos"],s)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(t,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function UI(t){const e={},n=f(t,["video"]);return n!=null&&p(e,["video"],WI(n)),e}function BI(t){const e={},n=f(t,["_self"]);return n!=null&&p(e,["video"],JI(n)),e}function VI(t){const e={},n=f(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function HI(t){const e={},n=f(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function $I(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(t,["done"]);o!=null&&p(e,["done"],o);const s=f(t,["error"]);s!=null&&p(e,["error"],s);const r=f(t,["response"]);return r!=null&&p(e,["response"],GI(r)),e}function GI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&p(e,["parent"],i);const o=f(t,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function Ky(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(t,["done"]);o!=null&&p(e,["done"],o);const s=f(t,["error"]);s!=null&&p(e,["error"],s);const r=f(t,["response"]);return r!=null&&p(e,["response"],qI(r)),e}function qI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&p(e,["parent"],i);const o=f(t,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function WI(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["uri"],n);const i=f(t,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Tf(i));const o=f(t,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function JI(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Tf(i));const o=f(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Nm;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Nm||(Nm={}));var Am;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Am||(Am={}));var Pm;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Pm||(Pm={}));var qn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(qn||(qn={}));var Rm;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Rm||(Rm={}));var Mm;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Mm||(Mm={}));var Lm;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Lm||(Lm={}));var Dm;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Dm||(Dm={}));var zm;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(zm||(zm={}));var jm;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(jm||(jm={}));var Fm;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Fm||(Fm={}));var Om;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Om||(Om={}));var Um;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Um||(Um={}));var Bm;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Bm||(Bm={}));var Vm;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Vm||(Vm={}));var Hm;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Hm||(Hm={}));var $m;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})($m||($m={}));var Gm;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Gm||(Gm={}));var qm;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(qm||(qm={}));var ir;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ir||(ir={}));var Wm;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Wm||(Wm={}));var Jm;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Jm||(Jm={}));var Ym;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ym||(Ym={}));var Bu;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Bu||(Bu={}));var Km;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Km||(Km={}));var Qm;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Qm||(Qm={}));var Xm;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Xm||(Xm={}));var Zm;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Zm||(Zm={}));var eg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(eg||(eg={}));var tg;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tg||(tg={}));var ng;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(ng||(ng={}));var ig;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(ig||(ig={}));var og;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(og||(og={}));var sg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(sg||(sg={}));var rg;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(rg||(rg={}));var ag;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ag||(ag={}));var lg;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lg||(lg={}));var cg;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(cg||(cg={}));var ug;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(ug||(ug={}));var dg;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(dg||(dg={}));var fg;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(fg||(fg={}));var pg;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(pg||(pg={}));var hg;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(hg||(hg={}));var mg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(mg||(mg={}));var gg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(gg||(gg={}));var xg;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(xg||(xg={}));var vg;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(vg||(vg={}));var yg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(yg||(yg={}));var _g;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(_g||(_g={}));var bg;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(bg||(bg={}));var wg;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(wg||(wg={}));var Sg;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Sg||(Sg={}));var Cg;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Cg||(Cg={}));var kg;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(kg||(kg={}));var Eg;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Eg||(Eg={}));var ro;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ro||(ro={}));class Vu{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class rs{get text(){var e,n,i,o,s,r,a,l;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const h=[];for(const m of(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,v]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(v!==null||v!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,u+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,n,i,o,s,r,a,l;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const h of(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(u+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,i,o,s,r,a,l;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,i,o,s,r,a,l,u;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,i,o,s,r,a,l,u;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class Tg{}class Ig{}class YI{}class KI{}class QI{}class XI{}class Ng{}class Ag{}class Pg{}class ZI{}class il{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new il;let o;const s=e;return n?o=jI(s):o=zI(s),Object.assign(i,o),i}}class Rg{}class Mg{}class Lg{}class Dg{}class e2{}class t2{}class n2{}class If{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new If,s=$I(e);return Object.assign(i,s),i}}class i2{}class o2{}class s2{}class zg{}class r2{get text(){var e,n,i;let o="",s=!1;const r=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&r.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,o+=a.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var e,n,i;let o="";const s=[];for(const r of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[a,l]of Object.entries(r))a!=="inlineData"&&l!==null&&s.push(a);r.inlineData&&typeof r.inlineData.data=="string"&&(o+=atob(r.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class a2{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Nf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Nf,s=Ky(e);return Object.assign(i,s),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ue(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Qy(t,e){const n=ue(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Xy(t){return Array.isArray(t)?t.map(e=>ol(e)):[ol(t)]}function ol(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Zy(t){const e=ol(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function e_(t){const e=ol(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jg(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function t_(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>jg(e)):[jg(t)]}function Hu(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Fg(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Og(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function et(t){if(t==null)throw new Error("ContentUnion is required");return Hu(t)?t:{role:"user",parts:t_(t)}}function Af(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=et(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=et(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>et(n)):[et(e)]}function zt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Fg(t)||Og(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[et(t)]}const e=[],n=[],i=Hu(t[0]);for(const o of t){const s=Hu(o);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(o);else{if(Fg(o)||Og(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:t_(n)}),e}function l2(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(qn).includes(n[0].toUpperCase())?n[0].toUpperCase():qn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(qn).includes(i.toUpperCase())?i.toUpperCase():qn.TYPE_UNSPECIFIED})}}function yo(t){const e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&l2(t.type,e);for(const[r,a]of Object.entries(t))if(a!=null)if(r=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(qn).includes(a.toUpperCase())?a.toUpperCase():qn.TYPE_UNSPECIFIED}else if(n.includes(r))e[r]=yo(a);else if(i.includes(r)){const l=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(yo(u))}e[r]=l}else if(o.includes(r)){const l={};for(const[u,d]of Object.entries(a))l[u]=yo(d);e[r]=l}else{if(r==="additionalProperties")continue;e[r]=a}return e}function Pf(t){return yo(t)}function Rf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Mf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Fo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=yo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=yo(e.response));return t}function Oo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function c2(t,e,n,i=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function Rn(t,e){if(typeof e!="string")throw new Error("name must be a string");return c2(t,e,"cachedContents")}function n_(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ci(t){return Tf(t)}function u2(t){return t!=null&&typeof t=="object"&&"name"in t}function d2(t){return t!=null&&typeof t=="object"&&"video"in t}function f2(t){return t!=null&&typeof t=="object"&&"uri"in t}function i_(t){var e;let n;if(u2(t)&&(n=t.name),!(f2(t)&&(n=t.uri,n===void 0))&&!(d2(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function o_(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function s_(t){for(const e of["models","tunedModels","publisherModels"])if(p2(t,e))return t[e];return[]}function p2(t,e){return t!==null&&typeof t=="object"&&e in t}function h2(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function m2(t,e={}){const n=[],i=new Set;for(const o of t){const s=o.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const r=h2(o,e);r.functionDeclarations&&n.push(...r.functionDeclarations)}return{functionDeclarations:n}}function r_(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function g2(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function a_(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let s=!1;for(const r of o){if(typeof r!="object"||r===null)continue;const l=r.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Uo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function l_(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x2(t){const e={},n=f(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const i=f(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Q2(r))),p(e,["inlinedResponses"],s)}const o=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["inlinedEmbedContentResponses"],s)}return e}function v2(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const i=f(t,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const o=f(t,["bigqueryDestination","outputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function y2(t){const e={},n=f(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const i=f(t,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const o=f(t,["bigqueryUri"]);if(o!=null&&p(e,["bigqueryDestination","outputUri"],o),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function pa(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const o=f(t,["metadata","state"]);o!=null&&p(e,["state"],l_(o));const s=f(t,["metadata","createTime"]);s!=null&&p(e,["createTime"],s);const r=f(t,["metadata","endTime"]);r!=null&&p(e,["endTime"],r);const a=f(t,["metadata","updateTime"]);a!=null&&p(e,["updateTime"],a);const l=f(t,["metadata","model"]);l!=null&&p(e,["model"],l);const u=f(t,["metadata","output"]);return u!=null&&p(e,["dest"],x2(a_(u))),e}function $u(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["displayName"]);i!=null&&p(e,["displayName"],i);const o=f(t,["state"]);o!=null&&p(e,["state"],l_(o));const s=f(t,["error"]);s!=null&&p(e,["error"],s);const r=f(t,["createTime"]);r!=null&&p(e,["createTime"],r);const a=f(t,["startTime"]);a!=null&&p(e,["startTime"],a);const l=f(t,["endTime"]);l!=null&&p(e,["endTime"],l);const u=f(t,["updateTime"]);u!=null&&p(e,["updateTime"],u);const d=f(t,["model"]);d!=null&&p(e,["model"],d);const h=f(t,["inputConfig"]);h!=null&&p(e,["src"],_2(h));const m=f(t,["outputConfig"]);m!=null&&p(e,["dest"],v2(a_(m)));const g=f(t,["completionStats"]);return g!=null&&p(e,["completionStats"],g),e}function _2(t){const e={},n=f(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const i=f(t,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const o=f(t,["bigquerySource","inputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function b2(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&p(n,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>K2(t,r))),p(n,["requests","requests"],s)}return n}function w2(t){const e={},n=f(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const i=f(t,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const o=f(t,["bigqueryUri"]);if(o!=null&&p(e,["bigquerySource","inputUri"],o),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function S2(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function C2(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],Uo(t,i)),n}function k2(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],Uo(t,i)),n}function E2(t){const e={},n=f(t,["content"]);n!=null&&p(e,["content"],n);const i=f(t,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],T2(i));const o=f(t,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const s=f(t,["finishReason"]);s!=null&&p(e,["finishReason"],s);const r=f(t,["avgLogprobs"]);r!=null&&p(e,["avgLogprobs"],r);const a=f(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const l=f(t,["index"]);l!=null&&p(e,["index"],l);const u=f(t,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const d=f(t,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),p(e,["safetyRatings"],m)}const h=f(t,["urlContextMetadata"]);return h!=null&&p(e,["urlContextMetadata"],h),e}function T2(t){const e={},n=f(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function c_(t){const e={},n=f(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>oN(s))),p(e,["parts"],o)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function I2(t,e){const n={},i=f(t,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function N2(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(t,["dest"]);return e!==void 0&&o!=null&&p(e,["outputConfig"],y2(g2(o))),n}function Ug(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["src"]);o!=null&&p(n,["batch","inputConfig"],b2(t,r_(t,o)));const s=f(e,["config"]);return s!=null&&I2(s,n),n}function A2(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["model"],ue(t,i));const o=f(e,["src"]);o!=null&&p(n,["inputConfig"],w2(r_(t,o)));const s=f(e,["config"]);return s!=null&&N2(s,n),n}function P2(t,e){const n={},i=f(t,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),n}function R2(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["src"]);o!=null&&p(n,["batch","inputConfig"],O2(t,o));const s=f(e,["config"]);return s!=null&&P2(s,n),n}function M2(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],Uo(t,i)),n}function L2(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],Uo(t,i)),n}function D2(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const o=f(t,["done"]);o!=null&&p(e,["done"],o);const s=f(t,["error"]);return s!=null&&p(e,["error"],s),e}function z2(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const o=f(t,["done"]);o!=null&&p(e,["done"],o);const s=f(t,["error"]);return s!=null&&p(e,["error"],s),e}function j2(t,e){const n={},i=f(e,["contents"]);if(i!=null){let s=Af(t,i);Array.isArray(s)&&(s=s.map(r=>r)),p(n,["requests[]","request","content"],s)}const o=f(e,["config"]);return o!=null&&(p(n,["_self"],F2(o,n)),LI(n,{"requests[].*":"requests[].request.*"})),n}function F2(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=f(t,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const s=f(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&p(e,["requests[]","outputDimensionality"],s),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function O2(t,e){const n={},i=f(e,["fileName"]);i!=null&&p(n,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&p(n,["requests"],j2(t,o)),n}function U2(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function B2(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const o=f(t,["name"]);if(o!=null&&p(e,["name"],o),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function V2(t){const e={},n=f(t,["mode"]);n!=null&&p(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function H2(t,e,n){const i={},o=f(e,["systemInstruction"]);n!==void 0&&o!=null&&p(n,["systemInstruction"],c_(et(o)));const s=f(e,["temperature"]);s!=null&&p(i,["temperature"],s);const r=f(e,["topP"]);r!=null&&p(i,["topP"],r);const a=f(e,["topK"]);a!=null&&p(i,["topK"],a);const l=f(e,["candidateCount"]);l!=null&&p(i,["candidateCount"],l);const u=f(e,["maxOutputTokens"]);u!=null&&p(i,["maxOutputTokens"],u);const d=f(e,["stopSequences"]);d!=null&&p(i,["stopSequences"],d);const h=f(e,["responseLogprobs"]);h!=null&&p(i,["responseLogprobs"],h);const m=f(e,["logprobs"]);m!=null&&p(i,["logprobs"],m);const g=f(e,["presencePenalty"]);g!=null&&p(i,["presencePenalty"],g);const v=f(e,["frequencyPenalty"]);v!=null&&p(i,["frequencyPenalty"],v);const _=f(e,["seed"]);_!=null&&p(i,["seed"],_);const x=f(e,["responseMimeType"]);x!=null&&p(i,["responseMimeType"],x);const y=f(e,["responseSchema"]);y!=null&&p(i,["responseSchema"],Pf(y));const b=f(e,["responseJsonSchema"]);if(b!=null&&p(i,["responseJsonSchema"],b),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=f(e,["safetySettings"]);if(n!==void 0&&w!=null){let M=w;Array.isArray(M)&&(M=M.map(V=>sN(V))),p(n,["safetySettings"],M)}const C=f(e,["tools"]);if(n!==void 0&&C!=null){let M=Oo(C);Array.isArray(M)&&(M=M.map(V=>aN(Fo(V)))),p(n,["tools"],M)}const E=f(e,["toolConfig"]);if(n!==void 0&&E!=null&&p(n,["toolConfig"],rN(E)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=f(e,["cachedContent"]);n!==void 0&&N!=null&&p(n,["cachedContent"],Rn(t,N));const T=f(e,["responseModalities"]);T!=null&&p(i,["responseModalities"],T);const S=f(e,["mediaResolution"]);S!=null&&p(i,["mediaResolution"],S);const k=f(e,["speechConfig"]);if(k!=null&&p(i,["speechConfig"],Rf(k)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=f(e,["thinkingConfig"]);I!=null&&p(i,["thinkingConfig"],I);const P=f(e,["imageConfig"]);P!=null&&p(i,["imageConfig"],Y2(P));const L=f(e,["enableEnhancedCivicAnswers"]);return L!=null&&p(i,["enableEnhancedCivicAnswers"],L),i}function $2(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>E2(u))),p(e,["candidates"],l)}const o=f(t,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const s=f(t,["promptFeedback"]);s!=null&&p(e,["promptFeedback"],s);const r=f(t,["responseId"]);r!=null&&p(e,["responseId"],r);const a=f(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function G2(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],Uo(t,i)),n}function q2(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],Uo(t,i)),n}function W2(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function J2(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function Y2(t){const e={},n=f(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=f(t,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function K2(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["request","model"],ue(t,i));const o=f(e,["contents"]);if(o!=null){let a=zt(o);Array.isArray(a)&&(a=a.map(l=>c_(l))),p(n,["request","contents"],a)}const s=f(e,["metadata"]);s!=null&&p(n,["metadata"],s);const r=f(e,["config"]);return r!=null&&p(n,["request","generationConfig"],H2(t,r,f(n,["request"],{}))),n}function Q2(t){const e={},n=f(t,["response"]);n!=null&&p(e,["response"],$2(n));const i=f(t,["error"]);return i!=null&&p(e,["error"],i),e}function X2(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);if(e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Z2(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const s=f(t,["filter"]);return e!==void 0&&s!=null&&p(e,["_query","filter"],s),n}function eN(t){const e={},n=f(t,["config"]);return n!=null&&X2(n,e),e}function tN(t){const e={},n=f(t,["config"]);return n!=null&&Z2(n,e),e}function nN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(t,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>pa(r))),p(e,["batchJobs"],s)}return e}function iN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(t,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>$u(r))),p(e,["batchJobs"],s)}return e}function oN(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const s=f(t,["fileData"]);s!=null&&p(e,["fileData"],U2(s));const r=f(t,["functionCall"]);r!=null&&p(e,["functionCall"],B2(r));const a=f(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=f(t,["inlineData"]);l!=null&&p(e,["inlineData"],S2(l));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const d=f(t,["thought"]);d!=null&&p(e,["thought"],d);const h=f(t,["thoughtSignature"]);h!=null&&p(e,["thoughtSignature"],h);const m=f(t,["videoMetadata"]);return m!=null&&p(e,["videoMetadata"],m),e}function sN(t){const e={},n=f(t,["category"]);if(n!=null&&p(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(t,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function rN(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],V2(n));const i=f(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function aN(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),p(e,["functionDeclarations"],d)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(t,["computerUse"]);o!=null&&p(e,["computerUse"],o);const s=f(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],W2(a));const l=f(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],J2(l));const u=f(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var In;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(In||(In={}));class Ui{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let r={config:{}};!i||Object.keys(i).length===0?r={config:{}}:typeof i=="object"?r=Object.assign({},i):r=i,r.config&&(r.config.pageToken=n.nextPageToken),this.paramsInternal=r,this.pageInternalSize=(s=(o=r.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lN extends Pn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ui(In.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Ug(this.apiClient,e),i=n._url,o=$("{model}:batchGenerateContent",i),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(const d of l){const h=Object.assign({},d);if(h.systemInstruction){const m=h.systemInstruction;delete h.systemInstruction;const g=h.request;g.systemInstruction=m,h.request=g}u.push(h)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const s=this.getGcsUri(e),r=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${o}`;else if(r)i.dest=`${r}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=A2(this.apiClient,e);return a=$("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>$u(d))}else{const u=Ug(this.apiClient,e);return a=$("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>pa(d))}}async createEmbeddingsInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=R2(this.apiClient,e);return s=$("{model}:asyncBatchEmbedContent",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>pa(l))}}async get(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=q2(this.apiClient,e);return a=$("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>$u(d))}else{const u=G2(this.apiClient,e);return a=$("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>pa(d))}}async cancel(e){var n,i,o,s;let r="",a={};if(this.apiClient.isVertexAI()){const l=k2(this.apiClient,e);r=$("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=C2(this.apiClient,e);r=$("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=tN(e);return a=$("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=iN(d),m=new zg;return Object.assign(m,h),m})}else{const u=eN(e);return a=$("batches",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=nN(d),m=new zg;return Object.assign(m,h),m})}}async delete(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=L2(this.apiClient,e);return a=$("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>z2(d))}else{const u=M2(this.apiClient,e);return a=$("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>D2(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cN(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Bg(t){const e={},n=f(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>RN(s))),p(e,["parts"],o)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function uN(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(t,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const s=f(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=f(t,["contents"]);if(e!==void 0&&r!=null){let d=zt(r);Array.isArray(d)&&(d=d.map(h=>Bg(h))),p(e,["contents"],d)}const a=f(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],Bg(et(a)));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>LN(h))),p(e,["tools"],d)}const u=f(t,["toolConfig"]);if(e!==void 0&&u!=null&&p(e,["toolConfig"],MN(u)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function dN(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(t,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const s=f(t,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=f(t,["contents"]);if(e!==void 0&&r!=null){let h=zt(r);Array.isArray(h)&&(h=h.map(m=>m)),p(e,["contents"],h)}const a=f(t,["systemInstruction"]);e!==void 0&&a!=null&&p(e,["systemInstruction"],et(a));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>DN(m))),p(e,["tools"],h)}const u=f(t,["toolConfig"]);e!==void 0&&u!=null&&p(e,["toolConfig"],u);const d=f(t,["kmsKeyName"]);return e!==void 0&&d!=null&&p(e,["encryption_spec","kmsKeyName"],d),n}function fN(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["model"],Qy(t,i));const o=f(e,["config"]);return o!=null&&uN(o,n),n}function pN(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["model"],Qy(t,i));const o=f(e,["config"]);return o!=null&&dN(o,n),n}function hN(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],Rn(t,i)),n}function mN(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],Rn(t,i)),n}function gN(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function xN(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function vN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function yN(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const o=f(t,["name"]);if(o!=null&&p(e,["name"],o),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _N(t){const e={},n=f(t,["mode"]);n!=null&&p(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function bN(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&p(e,["description"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const o=f(t,["parameters"]);o!=null&&p(e,["parameters"],o);const s=f(t,["parametersJsonSchema"]);s!=null&&p(e,["parametersJsonSchema"],s);const r=f(t,["response"]);r!=null&&p(e,["response"],r);const a=f(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function wN(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],Rn(t,i)),n}function SN(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],Rn(t,i)),n}function CN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function kN(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function EN(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),n}function TN(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),n}function IN(t){const e={},n=f(t,["config"]);return n!=null&&EN(n,e),e}function NN(t){const e={},n=f(t,["config"]);return n!=null&&TN(n,e),e}function AN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["cachedContents"],s)}return e}function PN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["cachedContents"],s)}return e}function RN(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const s=f(t,["fileData"]);s!=null&&p(e,["fileData"],vN(s));const r=f(t,["functionCall"]);r!=null&&p(e,["functionCall"],yN(r));const a=f(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=f(t,["inlineData"]);l!=null&&p(e,["inlineData"],cN(l));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const d=f(t,["thought"]);d!=null&&p(e,["thought"],d);const h=f(t,["thoughtSignature"]);h!=null&&p(e,["thoughtSignature"],h);const m=f(t,["videoMetadata"]);return m!=null&&p(e,["videoMetadata"],m),e}function MN(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],_N(n));const i=f(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function LN(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),p(e,["functionDeclarations"],d)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(t,["computerUse"]);o!=null&&p(e,["computerUse"],o);const s=f(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],CN(a));const l=f(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],kN(l));const u=f(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function DN(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>bN(m))),p(e,["functionDeclarations"],h)}const i=f(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=f(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const s=f(t,["computerUse"]);if(s!=null&&p(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(t,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const a=f(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=f(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const u=f(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],u);const d=f(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function zN(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(t,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),n}function jN(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(t,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),n}function FN(t,e){const n={},i=f(e,["name"]);i!=null&&p(n,["_url","name"],Rn(t,i));const o=f(e,["config"]);return o!=null&&zN(o,n),n}function ON(t,e){const n={},i=f(e,["name"]);i!=null&&p(n,["_url","name"],Rn(t,i));const o=f(e,["config"]);return o!=null&&jN(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UN extends Pn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ui(In.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=pN(this.apiClient,e);return a=$("cachedContents",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}else{const u=fN(this.apiClient,e);return a=$("cachedContents",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=SN(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}else{const u=wN(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=mN(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=xN(d),m=new Lg;return Object.assign(m,h),m})}else{const u=hN(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=gN(d),m=new Lg;return Object.assign(m,h),m})}}async update(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=ON(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}else{const u=FN(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async listInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=NN(e);return a=$("cachedContents",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=PN(d),m=new Dg;return Object.assign(m,h),m})}else{const u=IN(e);return a=$("cachedContents",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=AN(d),m=new Dg;return Object.assign(m,h),m})}}}function sl(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function Vg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(t){return this instanceof Z?(this.v=t,this):new Z(t)}function qt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",r),o[Symbol.asyncIterator]=function(){return this},o;function r(g){return function(v){return Promise.resolve(v).then(g,h)}}function a(g,v){i[g]&&(o[g]=function(_){return new Promise(function(x,y){s.push([g,_,x,y])>1||l(g,_)})},v&&(o[g]=v(o[g])))}function l(g,v){try{u(i[g](v))}catch(_){m(s[0][3],_)}}function u(g){g.value instanceof Z?Promise.resolve(g.value.v).then(d,h):m(s[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function m(g,v){g(v),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Wt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Vg=="function"?Vg(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(r){return new Promise(function(a,l){r=t[s](r),o(a,l,r.done,r.value)})}}function o(s,r,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BN(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:u_(n)}function u_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function VN(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Hg(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let s=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),s&&!u_(t[i])&&(s=!1),i++;s?e.push(...o):e.pop()}return e}class HN{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new $N(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class $N{constructor(e,n,i,o={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),VN(s)}async sendMessage(e){var n;await this.sendPromise;const i=et(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,r,a;const l=await o,u=(r=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];d!=null&&(m=(a=d.slice(h))!==null&&a!==void 0?a:[]);const g=u?[u]:[];this.recordHistory(i,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const i=et(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const s=await o;return this.processStreamResponse(s,i)}getHistory(e=!1){const n=e?Hg(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return qt(this,arguments,function*(){var o,s,r,a,l,u;const d=[];try{for(var h=!0,m=Wt(e),g;g=yield Z(m.next()),o=g.done,!o;h=!0){a=g.value,h=!1;const v=a;if(BN(v)){const _=(u=(l=v.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;_!==void 0&&d.push(_)}yield yield Z(v)}}catch(v){s={error:v}}finally{try{!h&&!o&&(r=m.return)&&(yield Z(r.call(m)))}finally{if(s)throw s.error}}this.recordHistory(n,d)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Hg(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Dl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GN(t){const e={},n=f(t,["file"]);return n!=null&&p(e,["file"],n),e}function qN(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function WN(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","file"],i_(n)),e}function JN(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function YN(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","file"],i_(n)),e}function KN(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),n}function QN(t){const e={},n=f(t,["config"]);return n!=null&&KN(n,e),e}function XN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(t,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZN extends Pn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ui(In.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=QN(e);return s=$("files",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{const u=XN(l),d=new i2;return Object.assign(d,u),d})}}async createInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=GN(e);return s=$("upload/v1beta/files",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const u=qN(l),d=new o2;return Object.assign(d,u),d})}}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=YN(e);return s=$("files/{file}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=WN(e);return s=$("files/{file}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{const u=JN(l),d=new s2;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ha(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function eA(t){const e={},n=f(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>gA(s))),p(e,["parts"],o)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function tA(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function nA(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const o=f(t,["name"]);if(o!=null&&p(e,["name"],o),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iA(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&p(e,["description"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const o=f(t,["parameters"]);o!=null&&p(e,["parameters"],o);const s=f(t,["parametersJsonSchema"]);s!=null&&p(e,["parametersJsonSchema"],s);const r=f(t,["response"]);r!=null&&p(e,["response"],r);const a=f(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function oA(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const i=f(t,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=f(t,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const s=f(t,["candidateCount"]);s!=null&&p(e,["candidateCount"],s);const r=f(t,["enableAffectiveDialog"]);r!=null&&p(e,["enableAffectiveDialog"],r);const a=f(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const l=f(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const u=f(t,["maxOutputTokens"]);u!=null&&p(e,["maxOutputTokens"],u);const d=f(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const h=f(t,["presencePenalty"]);h!=null&&p(e,["presencePenalty"],h);const m=f(t,["responseLogprobs"]);m!=null&&p(e,["responseLogprobs"],m);const g=f(t,["responseMimeType"]);g!=null&&p(e,["responseMimeType"],g);const v=f(t,["responseModalities"]);v!=null&&p(e,["responseModalities"],v);const _=f(t,["responseSchema"]);_!=null&&p(e,["responseSchema"],_);const x=f(t,["routingConfig"]);x!=null&&p(e,["routingConfig"],x);const y=f(t,["seed"]);y!=null&&p(e,["seed"],y);const b=f(t,["speechConfig"]);b!=null&&p(e,["speechConfig"],b);const w=f(t,["stopSequences"]);w!=null&&p(e,["stopSequences"],w);const C=f(t,["temperature"]);C!=null&&p(e,["temperature"],C);const E=f(t,["thinkingConfig"]);E!=null&&p(e,["thinkingConfig"],E);const N=f(t,["topK"]);N!=null&&p(e,["topK"],N);const T=f(t,["topP"]);if(T!=null&&p(e,["topP"],T),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function sA(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function rA(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function aA(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=f(t,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const s=f(t,["temperature"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","temperature"],s);const r=f(t,["topP"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","topP"],r);const a=f(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const u=f(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const d=f(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const h=f(t,["speechConfig"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","speechConfig"],Mf(h));const m=f(t,["thinkingConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","thinkingConfig"],m);const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=f(t,["systemInstruction"]);e!==void 0&&v!=null&&p(e,["setup","systemInstruction"],eA(et(v)));const _=f(t,["tools"]);if(e!==void 0&&_!=null){let N=Oo(_);Array.isArray(N)&&(N=N.map(T=>vA(Fo(T)))),p(e,["setup","tools"],N)}const x=f(t,["sessionResumption"]);e!==void 0&&x!=null&&p(e,["setup","sessionResumption"],xA(x));const y=f(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&p(e,["setup","inputAudioTranscription"],y);const b=f(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","outputAudioTranscription"],b);const w=f(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&p(e,["setup","realtimeInputConfig"],w);const C=f(t,["contextWindowCompression"]);e!==void 0&&C!=null&&p(e,["setup","contextWindowCompression"],C);const E=f(t,["proactivity"]);if(e!==void 0&&E!=null&&p(e,["setup","proactivity"],E),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function lA(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],oA(i));const o=f(t,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const s=f(t,["temperature"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","temperature"],s);const r=f(t,["topP"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","topP"],r);const a=f(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const u=f(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const d=f(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const h=f(t,["speechConfig"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","speechConfig"],Mf(h));const m=f(t,["thinkingConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","thinkingConfig"],m);const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=f(t,["systemInstruction"]);e!==void 0&&v!=null&&p(e,["setup","systemInstruction"],et(v));const _=f(t,["tools"]);if(e!==void 0&&_!=null){let T=Oo(_);Array.isArray(T)&&(T=T.map(S=>yA(Fo(S)))),p(e,["setup","tools"],T)}const x=f(t,["sessionResumption"]);e!==void 0&&x!=null&&p(e,["setup","sessionResumption"],x);const y=f(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&p(e,["setup","inputAudioTranscription"],y);const b=f(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","outputAudioTranscription"],b);const w=f(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&p(e,["setup","realtimeInputConfig"],w);const C=f(t,["contextWindowCompression"]);e!==void 0&&C!=null&&p(e,["setup","contextWindowCompression"],C);const E=f(t,["proactivity"]);e!==void 0&&E!=null&&p(e,["setup","proactivity"],E);const N=f(t,["explicitVadSignal"]);return e!==void 0&&N!=null&&p(e,["setup","explicitVadSignal"],N),n}function cA(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["setup","model"],ue(t,i));const o=f(e,["config"]);return o!=null&&p(n,["config"],aA(o,n)),n}function uA(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["setup","model"],ue(t,i));const o=f(e,["config"]);return o!=null&&p(n,["config"],lA(o,n)),n}function dA(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function fA(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["weightedPrompts"],i)}return e}function pA(t){const e={},n=f(t,["media"]);if(n!=null){let u=Xy(n);Array.isArray(u)&&(u=u.map(d=>ha(d))),p(e,["mediaChunks"],u)}const i=f(t,["audio"]);i!=null&&p(e,["audio"],ha(e_(i)));const o=f(t,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const s=f(t,["video"]);s!=null&&p(e,["video"],ha(Zy(s)));const r=f(t,["text"]);r!=null&&p(e,["text"],r);const a=f(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const l=f(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function hA(t){const e={},n=f(t,["media"]);if(n!=null){let u=Xy(n);Array.isArray(u)&&(u=u.map(d=>d)),p(e,["mediaChunks"],u)}const i=f(t,["audio"]);i!=null&&p(e,["audio"],e_(i));const o=f(t,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const s=f(t,["video"]);s!=null&&p(e,["video"],Zy(s));const r=f(t,["text"]);r!=null&&p(e,["text"],r);const a=f(t,["activityStart"]);a!=null&&p(e,["activityStart"],a);const l=f(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function mA(t){const e={},n=f(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const i=f(t,["serverContent"]);i!=null&&p(e,["serverContent"],i);const o=f(t,["toolCall"]);o!=null&&p(e,["toolCall"],o);const s=f(t,["toolCallCancellation"]);s!=null&&p(e,["toolCallCancellation"],s);const r=f(t,["usageMetadata"]);r!=null&&p(e,["usageMetadata"],_A(r));const a=f(t,["goAway"]);a!=null&&p(e,["goAway"],a);const l=f(t,["sessionResumptionUpdate"]);l!=null&&p(e,["sessionResumptionUpdate"],l);const u=f(t,["voiceActivityDetectionSignal"]);return u!=null&&p(e,["voiceActivityDetectionSignal"],u),e}function gA(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const s=f(t,["fileData"]);s!=null&&p(e,["fileData"],tA(s));const r=f(t,["functionCall"]);r!=null&&p(e,["functionCall"],nA(r));const a=f(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=f(t,["inlineData"]);l!=null&&p(e,["inlineData"],ha(l));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const d=f(t,["thought"]);d!=null&&p(e,["thought"],d);const h=f(t,["thoughtSignature"]);h!=null&&p(e,["thoughtSignature"],h);const m=f(t,["videoMetadata"]);return m!=null&&p(e,["videoMetadata"],m),e}function xA(t){const e={},n=f(t,["handle"]);if(n!=null&&p(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function vA(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),p(e,["functionDeclarations"],d)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(t,["computerUse"]);o!=null&&p(e,["computerUse"],o);const s=f(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],sA(a));const l=f(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],rA(l));const u=f(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function yA(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>iA(m))),p(e,["functionDeclarations"],h)}const i=f(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=f(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const s=f(t,["computerUse"]);if(s!=null&&p(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(t,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const a=f(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=f(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const u=f(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],u);const d=f(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function _A(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const i=f(t,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const o=f(t,["candidatesTokenCount"]);o!=null&&p(e,["responseTokenCount"],o);const s=f(t,["toolUsePromptTokenCount"]);s!=null&&p(e,["toolUsePromptTokenCount"],s);const r=f(t,["thoughtsTokenCount"]);r!=null&&p(e,["thoughtsTokenCount"],r);const a=f(t,["totalTokenCount"]);a!=null&&p(e,["totalTokenCount"],a);const l=f(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(v=>v)),p(e,["promptTokensDetails"],g)}const u=f(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(v=>v)),p(e,["cacheTokensDetails"],g)}const d=f(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>v)),p(e,["responseTokensDetails"],g)}const h=f(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>v)),p(e,["toolUsePromptTokensDetails"],g)}const m=f(t,["trafficType"]);return m!=null&&p(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bA(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function wA(t){const e={},n=f(t,["content"]);n!=null&&p(e,["content"],n);const i=f(t,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],SA(i));const o=f(t,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const s=f(t,["finishReason"]);s!=null&&p(e,["finishReason"],s);const r=f(t,["avgLogprobs"]);r!=null&&p(e,["avgLogprobs"],r);const a=f(t,["groundingMetadata"]);a!=null&&p(e,["groundingMetadata"],a);const l=f(t,["index"]);l!=null&&p(e,["index"],l);const u=f(t,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const d=f(t,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),p(e,["safetyRatings"],m)}const h=f(t,["urlContextMetadata"]);return h!=null&&p(e,["urlContextMetadata"],h),e}function SA(t){const e={},n=f(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function CA(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["contents"]);if(o!=null){let s=zt(o);Array.isArray(s)&&(s=s.map(r=>r)),p(n,["contents"],s)}return n}function kA(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["tokensInfo"],o)}return e}function EA(t){const e={},n=f(t,["values"]);n!=null&&p(e,["values"],n);const i=f(t,["statistics"]);return i!=null&&p(e,["statistics"],TA(i)),e}function TA(t){const e={},n=f(t,["truncated"]);n!=null&&p(e,["truncated"],n);const i=f(t,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function zl(t){const e={},n=f(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>zP(s))),p(e,["parts"],o)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function IA(t){const e={},n=f(t,["controlType"]);n!=null&&p(e,["controlType"],n);const i=f(t,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function NA(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function AA(t,e){const n={},i=f(t,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],et(i));const o=f(t,["tools"]);if(e!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>h_(a))),p(e,["tools"],r)}const s=f(t,["generationConfig"]);return e!==void 0&&s!=null&&p(e,["generationConfig"],bP(s)),n}function PA(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["contents"]);if(o!=null){let r=zt(o);Array.isArray(r)&&(r=r.map(a=>zl(a))),p(n,["contents"],r)}const s=f(e,["config"]);return s!=null&&NA(s),n}function RA(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["contents"]);if(o!=null){let r=zt(o);Array.isArray(r)&&(r=r.map(a=>a)),p(n,["contents"],r)}const s=f(e,["config"]);return s!=null&&AA(s,n),n}function MA(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const o=f(t,["cachedContentTokenCount"]);return o!=null&&p(e,["cachedContentTokenCount"],o),e}function LA(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function DA(t,e){const n={},i=f(e,["model"]);return i!=null&&p(n,["_url","name"],ue(t,i)),n}function zA(t,e){const n={},i=f(e,["model"]);return i!=null&&p(n,["_url","name"],ue(t,i)),n}function jA(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function FA(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function OA(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=f(t,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const s=f(t,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const r=f(t,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const a=f(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=f(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const u=f(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=f(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const h=f(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&p(e,["parameters","includeSafetyAttributes"],h);const m=f(t,["includeRaiReason"]);e!==void 0&&m!=null&&p(e,["parameters","includeRaiReason"],m);const g=f(t,["language"]);e!==void 0&&g!=null&&p(e,["parameters","language"],g);const v=f(t,["outputMimeType"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","mimeType"],v);const _=f(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","compressionQuality"],_);const x=f(t,["addWatermark"]);e!==void 0&&x!=null&&p(e,["parameters","addWatermark"],x);const y=f(t,["labels"]);e!==void 0&&y!=null&&p(e,["labels"],y);const b=f(t,["editMode"]);e!==void 0&&b!=null&&p(e,["parameters","editMode"],b);const w=f(t,["baseSteps"]);return e!==void 0&&w!=null&&p(e,["parameters","editConfig","baseSteps"],w),n}function UA(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const s=f(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>VP(l))),p(n,["instances[0]","referenceImages"],a)}const r=f(e,["config"]);return r!=null&&OA(r,n),n}function BA(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>jl(s))),p(e,["generatedImages"],o)}return e}function VA(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=f(t,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const s=f(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&p(e,["requests[]","outputDimensionality"],s),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function HA(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const o=f(t,["title"]);e!==void 0&&o!=null&&p(e,["instances[]","title"],o);const s=f(t,["outputDimensionality"]);e!==void 0&&s!=null&&p(e,["parameters","outputDimensionality"],s);const r=f(t,["mimeType"]);e!==void 0&&r!=null&&p(e,["instances[]","mimeType"],r);const a=f(t,["autoTruncate"]);return e!==void 0&&a!=null&&p(e,["parameters","autoTruncate"],a),n}function $A(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["contents"]);if(o!=null){let a=Af(t,o);Array.isArray(a)&&(a=a.map(l=>l)),p(n,["requests[]","content"],a)}const s=f(e,["config"]);s!=null&&VA(s,n);const r=f(e,["model"]);return r!==void 0&&p(n,["requests[]","model"],ue(t,r)),n}function GA(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["contents"]);if(o!=null){let r=Af(t,o);Array.isArray(r)&&(r=r.map(a=>a)),p(n,["instances[]","content"],r)}const s=f(e,["config"]);return s!=null&&HA(s,n),n}function qA(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["embeddings"],s)}const o=f(t,["metadata"]);return o!=null&&p(e,["metadata"],o),e}function WA(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>EA(r))),p(e,["embeddings"],s)}const o=f(t,["metadata"]);return o!=null&&p(e,["metadata"],o),e}function JA(t){const e={},n=f(t,["endpoint"]);n!=null&&p(e,["name"],n);const i=f(t,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function YA(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function KA(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const o=f(t,["name"]);if(o!=null&&p(e,["name"],o),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function QA(t){const e={},n=f(t,["mode"]);n!=null&&p(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function XA(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&p(e,["description"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const o=f(t,["parameters"]);o!=null&&p(e,["parameters"],o);const s=f(t,["parametersJsonSchema"]);s!=null&&p(e,["parametersJsonSchema"],s);const r=f(t,["response"]);r!=null&&p(e,["response"],r);const a=f(t,["responseJsonSchema"]);return a!=null&&p(e,["responseJsonSchema"],a),e}function ZA(t,e,n){const i={},o=f(e,["systemInstruction"]);n!==void 0&&o!=null&&p(n,["systemInstruction"],zl(et(o)));const s=f(e,["temperature"]);s!=null&&p(i,["temperature"],s);const r=f(e,["topP"]);r!=null&&p(i,["topP"],r);const a=f(e,["topK"]);a!=null&&p(i,["topK"],a);const l=f(e,["candidateCount"]);l!=null&&p(i,["candidateCount"],l);const u=f(e,["maxOutputTokens"]);u!=null&&p(i,["maxOutputTokens"],u);const d=f(e,["stopSequences"]);d!=null&&p(i,["stopSequences"],d);const h=f(e,["responseLogprobs"]);h!=null&&p(i,["responseLogprobs"],h);const m=f(e,["logprobs"]);m!=null&&p(i,["logprobs"],m);const g=f(e,["presencePenalty"]);g!=null&&p(i,["presencePenalty"],g);const v=f(e,["frequencyPenalty"]);v!=null&&p(i,["frequencyPenalty"],v);const _=f(e,["seed"]);_!=null&&p(i,["seed"],_);const x=f(e,["responseMimeType"]);x!=null&&p(i,["responseMimeType"],x);const y=f(e,["responseSchema"]);y!=null&&p(i,["responseSchema"],Pf(y));const b=f(e,["responseJsonSchema"]);if(b!=null&&p(i,["responseJsonSchema"],b),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=f(e,["safetySettings"]);if(n!==void 0&&w!=null){let M=w;Array.isArray(M)&&(M=M.map(V=>HP(V))),p(n,["safetySettings"],M)}const C=f(e,["tools"]);if(n!==void 0&&C!=null){let M=Oo(C);Array.isArray(M)&&(M=M.map(V=>KP(Fo(V)))),p(n,["tools"],M)}const E=f(e,["toolConfig"]);if(n!==void 0&&E!=null&&p(n,["toolConfig"],YP(E)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=f(e,["cachedContent"]);n!==void 0&&N!=null&&p(n,["cachedContent"],Rn(t,N));const T=f(e,["responseModalities"]);T!=null&&p(i,["responseModalities"],T);const S=f(e,["mediaResolution"]);S!=null&&p(i,["mediaResolution"],S);const k=f(e,["speechConfig"]);if(k!=null&&p(i,["speechConfig"],Rf(k)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=f(e,["thinkingConfig"]);I!=null&&p(i,["thinkingConfig"],I);const P=f(e,["imageConfig"]);P!=null&&p(i,["imageConfig"],EP(P));const L=f(e,["enableEnhancedCivicAnswers"]);return L!=null&&p(i,["enableEnhancedCivicAnswers"],L),i}function eP(t,e,n){const i={},o=f(e,["systemInstruction"]);n!==void 0&&o!=null&&p(n,["systemInstruction"],et(o));const s=f(e,["temperature"]);s!=null&&p(i,["temperature"],s);const r=f(e,["topP"]);r!=null&&p(i,["topP"],r);const a=f(e,["topK"]);a!=null&&p(i,["topK"],a);const l=f(e,["candidateCount"]);l!=null&&p(i,["candidateCount"],l);const u=f(e,["maxOutputTokens"]);u!=null&&p(i,["maxOutputTokens"],u);const d=f(e,["stopSequences"]);d!=null&&p(i,["stopSequences"],d);const h=f(e,["responseLogprobs"]);h!=null&&p(i,["responseLogprobs"],h);const m=f(e,["logprobs"]);m!=null&&p(i,["logprobs"],m);const g=f(e,["presencePenalty"]);g!=null&&p(i,["presencePenalty"],g);const v=f(e,["frequencyPenalty"]);v!=null&&p(i,["frequencyPenalty"],v);const _=f(e,["seed"]);_!=null&&p(i,["seed"],_);const x=f(e,["responseMimeType"]);x!=null&&p(i,["responseMimeType"],x);const y=f(e,["responseSchema"]);y!=null&&p(i,["responseSchema"],Pf(y));const b=f(e,["responseJsonSchema"]);b!=null&&p(i,["responseJsonSchema"],b);const w=f(e,["routingConfig"]);w!=null&&p(i,["routingConfig"],w);const C=f(e,["modelSelectionConfig"]);C!=null&&p(i,["modelConfig"],C);const E=f(e,["safetySettings"]);if(n!==void 0&&E!=null){let q=E;Array.isArray(q)&&(q=q.map(j=>j)),p(n,["safetySettings"],q)}const N=f(e,["tools"]);if(n!==void 0&&N!=null){let q=Oo(N);Array.isArray(q)&&(q=q.map(j=>h_(Fo(j)))),p(n,["tools"],q)}const T=f(e,["toolConfig"]);n!==void 0&&T!=null&&p(n,["toolConfig"],T);const S=f(e,["labels"]);n!==void 0&&S!=null&&p(n,["labels"],S);const k=f(e,["cachedContent"]);n!==void 0&&k!=null&&p(n,["cachedContent"],Rn(t,k));const I=f(e,["responseModalities"]);I!=null&&p(i,["responseModalities"],I);const P=f(e,["mediaResolution"]);P!=null&&p(i,["mediaResolution"],P);const L=f(e,["speechConfig"]);L!=null&&p(i,["speechConfig"],Rf(L));const M=f(e,["audioTimestamp"]);M!=null&&p(i,["audioTimestamp"],M);const V=f(e,["thinkingConfig"]);V!=null&&p(i,["thinkingConfig"],V);const W=f(e,["imageConfig"]);if(W!=null&&p(i,["imageConfig"],TP(W)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function $g(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["contents"]);if(o!=null){let r=zt(o);Array.isArray(r)&&(r=r.map(a=>zl(a))),p(n,["contents"],r)}const s=f(e,["config"]);return s!=null&&p(n,["generationConfig"],ZA(t,s,n)),n}function Gg(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["contents"]);if(o!=null){let r=zt(o);Array.isArray(r)&&(r=r.map(a=>a)),p(n,["contents"],r)}const s=f(e,["config"]);return s!=null&&p(n,["generationConfig"],eP(t,s,n)),n}function qg(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>wA(u))),p(e,["candidates"],l)}const o=f(t,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const s=f(t,["promptFeedback"]);s!=null&&p(e,["promptFeedback"],s);const r=f(t,["responseId"]);r!=null&&p(e,["responseId"],r);const a=f(t,["usageMetadata"]);return a!=null&&p(e,["usageMetadata"],a),e}function Wg(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>d)),p(e,["candidates"],u)}const o=f(t,["createTime"]);o!=null&&p(e,["createTime"],o);const s=f(t,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const r=f(t,["promptFeedback"]);r!=null&&p(e,["promptFeedback"],r);const a=f(t,["responseId"]);a!=null&&p(e,["responseId"],a);const l=f(t,["usageMetadata"]);return l!=null&&p(e,["usageMetadata"],l),e}function tP(t,e){const n={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=f(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const s=f(t,["guidanceScale"]);if(e!==void 0&&s!=null&&p(e,["parameters","guidanceScale"],s),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=f(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&p(e,["parameters","safetySetting"],r);const a=f(t,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const l=f(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&p(e,["parameters","includeSafetyAttributes"],l);const u=f(t,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const d=f(t,["language"]);e!==void 0&&d!=null&&p(e,["parameters","language"],d);const h=f(t,["outputMimeType"]);e!==void 0&&h!=null&&p(e,["parameters","outputOptions","mimeType"],h);const m=f(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=f(t,["imageSize"]);if(e!==void 0&&g!=null&&p(e,["parameters","sampleImageSize"],g),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function nP(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=f(t,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const s=f(t,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const r=f(t,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const a=f(t,["guidanceScale"]);e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a);const l=f(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const u=f(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=f(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const h=f(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&p(e,["parameters","includeSafetyAttributes"],h);const m=f(t,["includeRaiReason"]);e!==void 0&&m!=null&&p(e,["parameters","includeRaiReason"],m);const g=f(t,["language"]);e!==void 0&&g!=null&&p(e,["parameters","language"],g);const v=f(t,["outputMimeType"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","mimeType"],v);const _=f(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","compressionQuality"],_);const x=f(t,["addWatermark"]);e!==void 0&&x!=null&&p(e,["parameters","addWatermark"],x);const y=f(t,["labels"]);e!==void 0&&y!=null&&p(e,["labels"],y);const b=f(t,["imageSize"]);e!==void 0&&b!=null&&p(e,["parameters","sampleImageSize"],b);const w=f(t,["enhancePrompt"]);return e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w),n}function iP(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const s=f(e,["config"]);return s!=null&&tP(s,n),n}function oP(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const s=f(e,["config"]);return s!=null&&nP(s,n),n}function sP(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>xP(r))),p(e,["generatedImages"],s)}const o=f(t,["positivePromptSafetyAttributes"]);return o!=null&&p(e,["positivePromptSafetyAttributes"],f_(o)),e}function rP(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>jl(r))),p(e,["generatedImages"],s)}const o=f(t,["positivePromptSafetyAttributes"]);return o!=null&&p(e,["positivePromptSafetyAttributes"],p_(o)),e}function aP(t,e){const n={},i=f(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(t,["durationSeconds"]);if(e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=f(t,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const r=f(t,["resolution"]);e!==void 0&&r!=null&&p(e,["parameters","resolution"],r);const a=f(t,["personGeneration"]);if(e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const u=f(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&p(e,["parameters","enhancePrompt"],u),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=f(t,["lastFrame"]);e!==void 0&&d!=null&&p(e,["instances[0]","lastFrame"],Fl(d));const h=f(t,["referenceImages"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>cR(g))),p(e,["instances[0]","referenceImages"],m)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function lP(t,e){const n={},i=f(t,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const s=f(t,["fps"]);e!==void 0&&s!=null&&p(e,["parameters","fps"],s);const r=f(t,["durationSeconds"]);e!==void 0&&r!=null&&p(e,["parameters","durationSeconds"],r);const a=f(t,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const u=f(t,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const d=f(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const h=f(t,["pubsubTopic"]);e!==void 0&&h!=null&&p(e,["parameters","pubsubTopic"],h);const m=f(t,["negativePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","negativePrompt"],m);const g=f(t,["enhancePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","enhancePrompt"],g);const v=f(t,["generateAudio"]);e!==void 0&&v!=null&&p(e,["parameters","generateAudio"],v);const _=f(t,["lastFrame"]);e!==void 0&&_!=null&&p(e,["instances[0]","lastFrame"],Yt(_));const x=f(t,["referenceImages"]);if(e!==void 0&&x!=null){let w=x;Array.isArray(w)&&(w=w.map(C=>uR(C))),p(e,["instances[0]","referenceImages"],w)}const y=f(t,["mask"]);e!==void 0&&y!=null&&p(e,["instances[0]","mask"],lR(y));const b=f(t,["compressionQuality"]);return e!==void 0&&b!=null&&p(e,["parameters","compressionQuality"],b),n}function cP(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(t,["done"]);o!=null&&p(e,["done"],o);const s=f(t,["error"]);s!=null&&p(e,["error"],s);const r=f(t,["response","generateVideoResponse"]);return r!=null&&p(e,["response"],pP(r)),e}function uP(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(t,["done"]);o!=null&&p(e,["done"],o);const s=f(t,["error"]);s!=null&&p(e,["error"],s);const r=f(t,["response"]);return r!=null&&p(e,["response"],hP(r)),e}function dP(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const s=f(e,["image"]);s!=null&&p(n,["instances[0]","image"],Fl(s));const r=f(e,["video"]);r!=null&&p(n,["instances[0]","video"],m_(r));const a=f(e,["source"]);a!=null&&mP(a,n);const l=f(e,["config"]);return l!=null&&aP(l,n),n}function fP(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["prompt"]);o!=null&&p(n,["instances[0]","prompt"],o);const s=f(e,["image"]);s!=null&&p(n,["instances[0]","image"],Yt(s));const r=f(e,["video"]);r!=null&&p(n,["instances[0]","video"],g_(r));const a=f(e,["source"]);a!=null&&gP(a,n);const l=f(e,["config"]);return l!=null&&lP(l,n),n}function pP(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>yP(r))),p(e,["generatedVideos"],s)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(t,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function hP(t){const e={},n=f(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>_P(r))),p(e,["generatedVideos"],s)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(t,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function mP(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(t,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],Fl(o));const s=f(t,["video"]);return e!==void 0&&s!=null&&p(e,["instances[0]","video"],m_(s)),n}function gP(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(t,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],Yt(o));const s=f(t,["video"]);return e!==void 0&&s!=null&&p(e,["instances[0]","video"],g_(s)),n}function xP(t){const e={},n=f(t,["_self"]);n!=null&&p(e,["image"],IP(n));const i=f(t,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const o=f(t,["_self"]);return o!=null&&p(e,["safetyAttributes"],f_(o)),e}function jl(t){const e={},n=f(t,["_self"]);n!=null&&p(e,["image"],d_(n));const i=f(t,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const o=f(t,["_self"]);o!=null&&p(e,["safetyAttributes"],p_(o));const s=f(t,["prompt"]);return s!=null&&p(e,["enhancedPrompt"],s),e}function vP(t){const e={},n=f(t,["_self"]);n!=null&&p(e,["mask"],d_(n));const i=f(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),p(e,["labels"],o)}return e}function yP(t){const e={},n=f(t,["video"]);return n!=null&&p(e,["video"],rR(n)),e}function _P(t){const e={},n=f(t,["_self"]);return n!=null&&p(e,["video"],aR(n)),e}function bP(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const i=f(t,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=f(t,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const s=f(t,["candidateCount"]);s!=null&&p(e,["candidateCount"],s);const r=f(t,["enableAffectiveDialog"]);r!=null&&p(e,["enableAffectiveDialog"],r);const a=f(t,["frequencyPenalty"]);a!=null&&p(e,["frequencyPenalty"],a);const l=f(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const u=f(t,["maxOutputTokens"]);u!=null&&p(e,["maxOutputTokens"],u);const d=f(t,["mediaResolution"]);d!=null&&p(e,["mediaResolution"],d);const h=f(t,["presencePenalty"]);h!=null&&p(e,["presencePenalty"],h);const m=f(t,["responseLogprobs"]);m!=null&&p(e,["responseLogprobs"],m);const g=f(t,["responseMimeType"]);g!=null&&p(e,["responseMimeType"],g);const v=f(t,["responseModalities"]);v!=null&&p(e,["responseModalities"],v);const _=f(t,["responseSchema"]);_!=null&&p(e,["responseSchema"],_);const x=f(t,["routingConfig"]);x!=null&&p(e,["routingConfig"],x);const y=f(t,["seed"]);y!=null&&p(e,["seed"],y);const b=f(t,["speechConfig"]);b!=null&&p(e,["speechConfig"],b);const w=f(t,["stopSequences"]);w!=null&&p(e,["stopSequences"],w);const C=f(t,["temperature"]);C!=null&&p(e,["temperature"],C);const E=f(t,["thinkingConfig"]);E!=null&&p(e,["thinkingConfig"],E);const N=f(t,["topK"]);N!=null&&p(e,["topK"],N);const T=f(t,["topP"]);if(T!=null&&p(e,["topP"],T),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function wP(t,e){const n={},i=f(e,["model"]);return i!=null&&p(n,["_url","name"],ue(t,i)),n}function SP(t,e){const n={},i=f(e,["model"]);return i!=null&&p(n,["_url","name"],ue(t,i)),n}function CP(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function kP(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function EP(t){const e={},n=f(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=f(t,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function TP(t){const e={},n=f(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=f(t,["imageSize"]);i!=null&&p(e,["imageSize"],i);const o=f(t,["outputMimeType"]);o!=null&&p(e,["imageOutputOptions","mimeType"],o);const s=f(t,["outputCompressionQuality"]);return s!=null&&p(e,["imageOutputOptions","compressionQuality"],s),e}function IP(t){const e={},n=f(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],ci(n));const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function d_(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],ci(i));const o=f(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function Fl(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],ci(n));const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Yt(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const i=f(t,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],ci(i));const o=f(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function NP(t,e,n){const i={},o=f(e,["pageSize"]);n!==void 0&&o!=null&&p(n,["_query","pageSize"],o);const s=f(e,["pageToken"]);n!==void 0&&s!=null&&p(n,["_query","pageToken"],s);const r=f(e,["filter"]);n!==void 0&&r!=null&&p(n,["_query","filter"],r);const a=f(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],o_(t,a)),i}function AP(t,e,n){const i={},o=f(e,["pageSize"]);n!==void 0&&o!=null&&p(n,["_query","pageSize"],o);const s=f(e,["pageToken"]);n!==void 0&&s!=null&&p(n,["_query","pageToken"],s);const r=f(e,["filter"]);n!==void 0&&r!=null&&p(n,["_query","filter"],r);const a=f(e,["queryBase"]);return n!==void 0&&a!=null&&p(n,["_url","models_url"],o_(t,a)),i}function PP(t,e){const n={},i=f(e,["config"]);return i!=null&&NP(t,i,n),n}function RP(t,e){const n={},i=f(e,["config"]);return i!=null&&AP(t,i,n),n}function MP(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(t,["_self"]);if(o!=null){let s=s_(o);Array.isArray(s)&&(s=s.map(r=>Gu(r))),p(e,["models"],s)}return e}function LP(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(t,["_self"]);if(o!=null){let s=s_(o);Array.isArray(s)&&(s=s.map(r=>qu(r))),p(e,["models"],s)}return e}function DP(t){const e={},n=f(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const i=f(t,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const o=f(t,["maskDilation"]);return o!=null&&p(e,["dilation"],o),e}function Gu(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["displayName"]);i!=null&&p(e,["displayName"],i);const o=f(t,["description"]);o!=null&&p(e,["description"],o);const s=f(t,["version"]);s!=null&&p(e,["version"],s);const r=f(t,["_self"]);r!=null&&p(e,["tunedModelInfo"],QP(r));const a=f(t,["inputTokenLimit"]);a!=null&&p(e,["inputTokenLimit"],a);const l=f(t,["outputTokenLimit"]);l!=null&&p(e,["outputTokenLimit"],l);const u=f(t,["supportedGenerationMethods"]);u!=null&&p(e,["supportedActions"],u);const d=f(t,["temperature"]);d!=null&&p(e,["temperature"],d);const h=f(t,["maxTemperature"]);h!=null&&p(e,["maxTemperature"],h);const m=f(t,["topP"]);m!=null&&p(e,["topP"],m);const g=f(t,["topK"]);g!=null&&p(e,["topK"],g);const v=f(t,["thinking"]);return v!=null&&p(e,["thinking"],v),e}function qu(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["displayName"]);i!=null&&p(e,["displayName"],i);const o=f(t,["description"]);o!=null&&p(e,["description"],o);const s=f(t,["versionId"]);s!=null&&p(e,["version"],s);const r=f(t,["deployedModels"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>JA(m))),p(e,["endpoints"],h)}const a=f(t,["labels"]);a!=null&&p(e,["labels"],a);const l=f(t,["_self"]);l!=null&&p(e,["tunedModelInfo"],XP(l));const u=f(t,["defaultCheckpointId"]);u!=null&&p(e,["defaultCheckpointId"],u);const d=f(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(m=>m)),p(e,["checkpoints"],h)}return e}function zP(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const s=f(t,["fileData"]);s!=null&&p(e,["fileData"],YA(s));const r=f(t,["functionCall"]);r!=null&&p(e,["functionCall"],KA(r));const a=f(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=f(t,["inlineData"]);l!=null&&p(e,["inlineData"],bA(l));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const d=f(t,["thought"]);d!=null&&p(e,["thought"],d);const h=f(t,["thoughtSignature"]);h!=null&&p(e,["thoughtSignature"],h);const m=f(t,["videoMetadata"]);return m!=null&&p(e,["videoMetadata"],m),e}function jP(t){const e={},n=f(t,["productImage"]);return n!=null&&p(e,["image"],Yt(n)),e}function FP(t,e){const n={},i=f(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=f(t,["baseSteps"]);e!==void 0&&o!=null&&p(e,["parameters","baseSteps"],o);const s=f(t,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const r=f(t,["seed"]);e!==void 0&&r!=null&&p(e,["parameters","seed"],r);const a=f(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const l=f(t,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const u=f(t,["addWatermark"]);e!==void 0&&u!=null&&p(e,["parameters","addWatermark"],u);const d=f(t,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const h=f(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&p(e,["parameters","outputOptions","compressionQuality"],h);const m=f(t,["enhancePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","enhancePrompt"],m);const g=f(t,["labels"]);return e!==void 0&&g!=null&&p(e,["labels"],g),n}function OP(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["source"]);o!=null&&BP(o,n);const s=f(e,["config"]);return s!=null&&FP(s,n),n}function UP(t){const e={},n=f(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>jl(o))),p(e,["generatedImages"],i)}return e}function BP(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(t,["personImage"]);e!==void 0&&o!=null&&p(e,["instances[0]","personImage","image"],Yt(o));const s=f(t,["productImages"]);if(e!==void 0&&s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>jP(a))),p(e,["instances[0]","productImages"],r)}return n}function VP(t){const e={},n=f(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],Yt(n));const i=f(t,["referenceId"]);i!=null&&p(e,["referenceId"],i);const o=f(t,["referenceType"]);o!=null&&p(e,["referenceType"],o);const s=f(t,["maskImageConfig"]);s!=null&&p(e,["maskImageConfig"],DP(s));const r=f(t,["controlImageConfig"]);r!=null&&p(e,["controlImageConfig"],IA(r));const a=f(t,["styleImageConfig"]);a!=null&&p(e,["styleImageConfig"],a);const l=f(t,["subjectImageConfig"]);return l!=null&&p(e,["subjectImageConfig"],l),e}function f_(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const i=f(t,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const o=f(t,["contentType"]);return o!=null&&p(e,["contentType"],o),e}function p_(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const i=f(t,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const o=f(t,["contentType"]);return o!=null&&p(e,["contentType"],o),e}function HP(t){const e={},n=f(t,["category"]);if(n!=null&&p(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(t,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function $P(t){const e={},n=f(t,["image"]);return n!=null&&p(e,["image"],Yt(n)),e}function GP(t,e){const n={},i=f(t,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const o=f(t,["maxPredictions"]);e!==void 0&&o!=null&&p(e,["parameters","maxPredictions"],o);const s=f(t,["confidenceThreshold"]);e!==void 0&&s!=null&&p(e,["parameters","confidenceThreshold"],s);const r=f(t,["maskDilation"]);e!==void 0&&r!=null&&p(e,["parameters","maskDilation"],r);const a=f(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","binaryColorThreshold"],a);const l=f(t,["labels"]);return e!==void 0&&l!=null&&p(e,["labels"],l),n}function qP(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["source"]);o!=null&&JP(o,n);const s=f(e,["config"]);return s!=null&&GP(s,n),n}function WP(t){const e={},n=f(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>vP(o))),p(e,["generatedMasks"],i)}return e}function JP(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(t,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],Yt(o));const s=f(t,["scribbleImage"]);return e!==void 0&&s!=null&&p(e,["instances[0]","scribble"],$P(s)),n}function YP(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],QA(n));const i=f(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function KP(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),p(e,["functionDeclarations"],d)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(t,["computerUse"]);o!=null&&p(e,["computerUse"],o);const s=f(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],CP(a));const l=f(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],kP(l));const u=f(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function h_(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>XA(m))),p(e,["functionDeclarations"],h)}const i=f(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=f(t,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const s=f(t,["computerUse"]);if(s!=null&&p(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(t,["codeExecution"]);r!=null&&p(e,["codeExecution"],r);const a=f(t,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const l=f(t,["googleMaps"]);l!=null&&p(e,["googleMaps"],l);const u=f(t,["googleSearch"]);u!=null&&p(e,["googleSearch"],u);const d=f(t,["urlContext"]);return d!=null&&p(e,["urlContext"],d),e}function QP(t){const e={},n=f(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const i=f(t,["createTime"]);i!=null&&p(e,["createTime"],i);const o=f(t,["updateTime"]);return o!=null&&p(e,["updateTime"],o),e}function XP(t){const e={},n=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const i=f(t,["createTime"]);i!=null&&p(e,["createTime"],i);const o=f(t,["updateTime"]);return o!=null&&p(e,["updateTime"],o),e}function ZP(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const s=f(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&p(e,["defaultCheckpointId"],s),n}function eR(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(t,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const s=f(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&p(e,["defaultCheckpointId"],s),n}function tR(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","name"],ue(t,i));const o=f(e,["config"]);return o!=null&&ZP(o,n),n}function nR(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["config"]);return o!=null&&eR(o,n),n}function iR(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=f(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const s=f(t,["personGeneration"]);e!==void 0&&s!=null&&p(e,["parameters","personGeneration"],s);const r=f(t,["includeRaiReason"]);e!==void 0&&r!=null&&p(e,["parameters","includeRaiReason"],r);const a=f(t,["outputMimeType"]);e!==void 0&&a!=null&&p(e,["parameters","outputOptions","mimeType"],a);const l=f(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&p(e,["parameters","outputOptions","compressionQuality"],l);const u=f(t,["enhanceInputImage"]);e!==void 0&&u!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],u);const d=f(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const h=f(t,["labels"]);e!==void 0&&h!=null&&p(e,["labels"],h);const m=f(t,["numberOfImages"]);e!==void 0&&m!=null&&p(e,["parameters","sampleCount"],m);const g=f(t,["mode"]);return e!==void 0&&g!=null&&p(e,["parameters","mode"],g),n}function oR(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],ue(t,i));const o=f(e,["image"]);o!=null&&p(n,["instances[0]","image"],Yt(o));const s=f(e,["upscaleFactor"]);s!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],s);const r=f(e,["config"]);return r!=null&&iR(r,n),n}function sR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>jl(s))),p(e,["generatedImages"],o)}return e}function rR(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["uri"],n);const i=f(t,["encodedVideo"]);i!=null&&p(e,["videoBytes"],ci(i));const o=f(t,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function aR(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],ci(i));const o=f(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function lR(t){const e={},n=f(t,["image"]);n!=null&&p(e,["_self"],Yt(n));const i=f(t,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function cR(t){const e={},n=f(t,["image"]);n!=null&&p(e,["image"],Fl(n));const i=f(t,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function uR(t){const e={},n=f(t,["image"]);n!=null&&p(e,["image"],Yt(n));const i=f(t,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function m_(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["uri"],n);const i=f(t,["videoBytes"]);i!=null&&p(e,["encodedVideo"],ci(i));const o=f(t,["mimeType"]);return o!=null&&p(e,["encoding"],o),e}function g_(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const i=f(t,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],ci(i));const o=f(t,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dR(t,e){const n={},i=f(t,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),n}function fR(t){const e={},n=f(t,["config"]);return n!=null&&dR(n,e),e}function pR(t,e){const n={},i=f(t,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),n}function hR(t){const e={},n=f(t,["name"]);n!=null&&p(e,["_url","name"],n);const i=f(t,["config"]);return i!=null&&pR(i,e),e}function mR(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function gR(t,e){const n={},i=f(t,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["customMetadata"],s)}const o=f(t,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),n}function xR(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(t,["done"]);o!=null&&p(e,["done"],o);const s=f(t,["error"]);s!=null&&p(e,["error"],s);const r=f(t,["response"]);return r!=null&&p(e,["response"],yR(r)),e}function vR(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const i=f(t,["fileName"]);i!=null&&p(e,["fileName"],i);const o=f(t,["config"]);return o!=null&&gR(o,e),e}function yR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&p(e,["parent"],i);const o=f(t,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function _R(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),n}function bR(t){const e={},n=f(t,["config"]);return n!=null&&_R(n,e),e}function wR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(t,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["fileSearchStores"],s)}return e}function x_(t,e){const n={},i=f(t,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const o=f(t,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const s=f(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["customMetadata"],a)}const r=f(t,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),n}function SR(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const i=f(t,["config"]);return i!=null&&x_(i,e),e}function CR(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kR="Content-Type",ER="X-Server-Timeout",TR="User-Agent",Wu="x-goog-api-client",IR="1.34.0",NR=`google-genai-sdk/${IR}`,AR="v1beta1",PR="v1beta";class RR{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:AR,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:PR,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[r,a]of Object.entries(e.queryParams))o.searchParams.append(r,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.unaryApiCall(o,s,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[o,s]of Object.entries(n))typeof s=="object"?i[o]=Object.assign(Object.assign({},i[o]),s):s!==void 0&&(i[o]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.streamApiCall(o,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,o){if(n&&n.timeout||o){const s=new AbortController,r=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),e.signal=r}return n&&n.extraBody!==null&&MR(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Jg(o),new Vu(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Jg(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return qt(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let r="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:d}=yield Z(o.read());if(u){if(r.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=s.decode(d,{stream:!0});try{const v=JSON.parse(h);if("error"in v){const _=JSON.parse(JSON.stringify(v.error)),x=_.status,y=_.code,b=`got status: ${x}. ${JSON.stringify(v)}`;if(y>=400&&y<600)throw new Dl({message:b,status:y})}}catch(v){if(v.name==="ApiError")throw v}r+=h;let m=-1,g=0;for(;;){m=-1,g=0;for(const x of l){const y=r.indexOf(x);y!==-1&&(m===-1||y<m)&&(m=y,g=x.length)}if(m===-1)break;const v=r.substring(0,m);r=r.substring(m+g);const _=v.trim();if(_.startsWith(a)){const x=_.substring(a.length).trim();try{const y=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Z(new Vu(y))}catch(y){throw new Error(`exception parsing stream chunk ${x}. ${y}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=NR+" "+this.clientOptions.userAgentExtra;return e[TR]=n,e[Wu]=n,e[kR]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[o,s]of Object.entries(e.headers))i.append(o,s);e.timeout&&e.timeout>0&&i.append(ER,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const s=this.clientOptions.uploader,r=await s.stat(e);o.sizeBytes=String(r.size);const a=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:r.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;const l={file:o},u=this.getFileName(e),d=$("upload/v1beta/files",l._url),h=await this.fetchUploadUrl(d,o.sizeBytes,o.mimeType,u,l,n==null?void 0:n.httpOptions);return s.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,i){var o;const s=this.clientOptions.uploader,r=await s.stat(n),a=String(r.size),l=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:r.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(n),h={};i!=null&&x_(i,h);const m=await this.fetchUploadUrl(u,a,l,d,h,i==null?void 0:i.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,o,s,r){var a;let l={};r?l=r:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const u=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(a=u==null?void 0:u.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function Jg(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new Dl({message:o,status:n}):new Error(o)}}function MR(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,r){const a=Object.assign({},s);for(const l in r)if(Object.prototype.hasOwnProperty.call(r,l)){const u=r[l],d=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=i(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const o=i(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LR="mcp_used/unknown";let DR=!1;function v_(t){for(const e of t)if(zR(e)||typeof e=="object"&&"inputSchema"in e)return!0;return DR}function y_(t){var e;const n=(e=t[Wu])!==null&&e!==void 0?e:"";t[Wu]=(n+` ${LR}`).trimStart()}function zR(t){return t!==null&&typeof t=="object"&&t instanceof Lf}function jR(t){return qt(this,arguments,function*(n,i=100){let o,s=0;for(;s<i;){const r=yield Z(n.listTools({cursor:o}));for(const a of r.tools)yield yield Z(a),s++;if(!r.nextCursor)break;o=r.nextCursor}})}class Lf{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Lf(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;const s={},r=[];for(const d of this.mcpClients)try{for(var a=!0,l=(n=void 0,Wt(jR(d))),u;u=await l.next(),e=u.done,!e;a=!0){o=u.value,a=!1;const h=o;r.push(h);const m=h.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=d}}catch(h){n={error:h}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}this.mcpTools=r,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),m2(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const r=await o.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:r.isError?{error:r}:r}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function FR(t,e,n){const i=new a2;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),e(i)}class OR{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),r=VR(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const d=new Promise(w=>{u=w}),h=e.callbacks,m=function(){u({})},g=this.apiClient,v={onopen:m,onmessage:w=>{FR(g,h.onmessage,w)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(w){},onclose:(i=h==null?void 0:h.onclose)!==null&&i!==void 0?i:function(w){}},_=this.webSocketFactory.create(l,BR(r),v);_.connect(),await d;const b={setup:{model:ue(this.apiClient,e.model)}};return _.send(JSON.stringify(b)),new UR(_,this.apiClient)}}class UR{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=fA(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=dA(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ro.PLAY)}pause(){this.sendPlaybackControl(ro.PAUSE)}stop(){this.sendPlaybackControl(ro.STOP)}resetContext(){this.sendPlaybackControl(ro.RESET_CONTEXT)}close(){this.conn.close()}}function BR(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function VR(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HR="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function $R(t,e,n){const i=new r2;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const s=JSON.parse(o);if(t.isVertexAI()){const r=mA(s);Object.assign(i,r)}else Object.assign(i,s);e(i)}class GR{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new OR(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,s,r,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&v_(e.config.tools)&&y_(h);const m=YR(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,d);else{const k=this.apiClient.getApiKey();let I="BidiGenerateContent",P="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),I="BidiGenerateContentConstrained",P="access_token"),d=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${I}?${P}=${k}`}let g=()=>{};const v=new Promise(k=>{g=k}),_=e.callbacks,x=function(){var k;(k=_==null?void 0:_.onopen)===null||k===void 0||k.call(_),g({})},y=this.apiClient,b={onopen:x,onmessage:k=>{$R(y,_.onmessage,k)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function(k){},onclose:(i=_==null?void 0:_.onclose)!==null&&i!==void 0?i:function(k){}},w=this.webSocketFactory.create(d,JR(m),b);w.connect(),await v;let C=ue(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&C.startsWith("publishers/")){const k=this.apiClient.getProject(),I=this.apiClient.getLocation();C=`projects/${k}/locations/${I}/`+C}let E={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ir.AUDIO]}:e.config.responseModalities=[ir.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const N=(a=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[],T=[];for(const k of N)if(this.isCallableTool(k)){const I=k;T.push(await I.tool())}else T.push(k);T.length>0&&(e.config.tools=T);const S={model:C,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?E=uA(this.apiClient,S):E=cA(this.apiClient,S),delete E.config,w.send(JSON.stringify(E)),new WR(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const qR={turnComplete:!0};class WR{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=zt(n.turns),e.isVertexAI()||(i=i.map(o=>zl(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(HR)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},qR),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:hA(e)}:n={realtimeInput:pA(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function JR(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function YR(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yg=10;function Kg(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const r of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(_o(r)){o=!0;break}if(!o)return!0;const s=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function _o(t){return"callTool"in t&&typeof t.callTool=="function"}function KR(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>_o(o)))!==null&&i!==void 0?i:!1}function Qg(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,o)=>{if(_o(i))return;const s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(o)}),n}function Xg(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QR extends Pn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,s,r,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!KR(n)||Kg(n.config))return await this.generateContentInternal(l);const u=Qg(n);if(u.length>0){const _=u.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${_}.`)}let d,h;const m=zt(l.contents),g=(s=(o=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Yg;let v=0;for(;v<g&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){const _=d.candidates[0].content,x=[];for(const y of(a=(r=n.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[])if(_o(y)){const w=await y.callTool(d.functionCalls);x.push(...w)}v++,h={role:"user",parts:x},l.contents=zt(l.contents),l.contents.push(_),l.contents.push(h),Xg(l.config)&&(m.push(_),m.push(h))}return Xg(l.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{var i,o,s,r,a;if(this.maybeMoveToResponseJsonSchem(n),Kg(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const l=Qg(n);if(l.length>0){const h=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(s=(o=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,d=(a=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let s;const r=[];if(i!=null&&i.generatedImages)for(const l of i.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((o=l==null?void 0:l.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:r.push(l);let a;return s?a={generatedImages:r,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:r,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async n=>{var i;const r={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!r.config.queryBase){if(!((i=r.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");r.config.filter="labels.tune-type:*"}return new Ui(In.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(r),r)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,s,r,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((r=(s=n.source)===null||s===void 0?void 0:s.video)===null||r===void 0)&&r.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,o;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const r=await Promise.all(s.map(async l=>_o(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:r})};if(a.config.tools=r,e.config&&e.config.tools&&v_(e.config.tools)){const l=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),y_(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,i,o;const s=new Map;for(const r of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(_o(r)){const a=r,l=await a.tool();for(const u of(o=l.functionDeclarations)!==null&&o!==void 0?o:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,a)}}return s}async processAfcStream(e){var n,i,o;const s=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Yg;let r=!1,a=0;const l=await this.initAfcToolsMap(e);return function(u,d,h){return qt(this,arguments,function*(){for(var m,g,v,_,x,y;a<s;){r&&(a++,r=!1);const E=yield Z(u.processParamsMaybeAddMcpUsage(h)),N=yield Z(u.generateContentStreamInternal(E)),T=[],S=[];try{for(var b=!0,w=(g=void 0,Wt(N)),C;C=yield Z(w.next()),m=C.done,!m;b=!0){_=C.value,b=!1;const k=_;if(yield yield Z(k),k.candidates&&(!((x=k.candidates[0])===null||x===void 0)&&x.content)){S.push(k.candidates[0].content);for(const I of(y=k.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(a<s&&I.functionCall){if(!I.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(I.functionCall.name)){const P=yield Z(d.get(I.functionCall.name).callTool([I.functionCall]));T.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${I.functionCall.name}`)}}}}catch(k){g={error:k}}finally{try{!b&&!m&&(v=w.return)&&(yield Z(v.call(w)))}finally{if(g)throw g.error}}if(T.length>0){r=!0;const k=new rs;k.candidates=[{content:{role:"user",parts:T}}],yield yield Z(k);const I=[];I.push(...S),I.push({role:"user",parts:T});const P=zt(h.contents).concat(I);h.contents=P}else break}})}(this,l,e)}async generateContentInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Gg(this.apiClient,e);return a=$("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=Wg(d),m=new rs;return Object.assign(m,h),m})}else{const u=$g(this.apiClient,e);return a=$("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=qg(d),m=new rs;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Gg(this.apiClient,e);return a=$("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),r.then(function(h){return qt(this,arguments,function*(){var m,g,v,_;try{for(var x=!0,y=Wt(h),b;b=yield Z(y.next()),m=b.done,!m;x=!0){_=b.value,x=!1;const w=_,C=Wg(yield Z(w.json()));C.sdkHttpResponse={headers:w.headers};const E=new rs;Object.assign(E,C),yield yield Z(E)}}catch(w){g={error:w}}finally{try{!x&&!m&&(v=y.return)&&(yield Z(v.call(y)))}finally{if(g)throw g.error}}})})}else{const u=$g(this.apiClient,e);return a=$("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),r.then(function(h){return qt(this,arguments,function*(){var m,g,v,_;try{for(var x=!0,y=Wt(h),b;b=yield Z(y.next()),m=b.done,!m;x=!0){_=b.value,x=!1;const w=_,C=qg(yield Z(w.json()));C.sdkHttpResponse={headers:w.headers};const E=new rs;Object.assign(E,C),yield yield Z(E)}}catch(w){g={error:w}}finally{try{!x&&!m&&(v=y.return)&&(yield Z(v.call(y)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=GA(this.apiClient,e);return a=$("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=WA(d),m=new Tg;return Object.assign(m,h),m})}else{const u=$A(this.apiClient,e);return a=$("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=qA(d),m=new Tg;return Object.assign(m,h),m})}}async generateImagesInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=oP(this.apiClient,e);return a=$("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=rP(d),m=new Ig;return Object.assign(m,h),m})}else{const u=iP(this.apiClient,e);return a=$("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=sP(d),m=new Ig;return Object.assign(m,h),m})}}async editImageInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=UA(this.apiClient,e);return s=$("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{const u=BA(l),d=new YI;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=oR(this.apiClient,e);return s=$("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{const u=sR(l),d=new KI;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=OP(this.apiClient,e);return s=$("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const u=UP(l),d=new QI;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=qP(this.apiClient,e);return s=$("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const u=WP(l),d=new XI;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=SP(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>qu(d))}else{const u=wP(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>Gu(d))}}async listInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=RP(this.apiClient,e);return a=$("{models_url}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=LP(d),m=new Ng;return Object.assign(m,h),m})}else{const u=PP(this.apiClient,e);return a=$("{models_url}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=MP(d),m=new Ng;return Object.assign(m,h),m})}}async update(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=nR(this.apiClient,e);return a=$("{model}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>qu(d))}else{const u=tR(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>Gu(d))}}async delete(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=zA(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=FA(d),m=new Ag;return Object.assign(m,h),m})}else{const u=DA(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=jA(d),m=new Ag;return Object.assign(m,h),m})}}async countTokens(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=RA(this.apiClient,e);return a=$("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=LA(d),m=new Pg;return Object.assign(m,h),m})}else{const u=PA(this.apiClient,e);return a=$("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=MA(d),m=new Pg;return Object.assign(m,h),m})}}async computeTokens(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=CA(this.apiClient,e);return s=$("{model}:computeTokens",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{const u=kA(l),d=new ZI;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=fP(this.apiClient,e);return a=$("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{const h=uP(d),m=new il;return Object.assign(m,h),m})}else{const u=dP(this.apiClient,e);return a=$("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>{const h=cP(d),m=new il;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XR extends Pn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=HI(e);return a=$("{operationName}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else{const u=VI(e);return a=$("{operationName}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r}}async fetchPredictVideosOperationInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=DI(e);return s=$("{resourceName}:fetchPredictOperation",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZR(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function eM(t){const e={},n=f(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>cM(s))),p(e,["parts"],o)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function tM(t,e,n){const i={},o=f(e,["expireTime"]);n!==void 0&&o!=null&&p(n,["expireTime"],o);const s=f(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&p(n,["newSessionExpireTime"],s);const r=f(e,["uses"]);n!==void 0&&r!=null&&p(n,["uses"],r);const a=f(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&p(n,["bidiGenerateContentSetup"],lM(t,a));const l=f(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&p(n,["fieldMask"],l),i}function nM(t,e){const n={},i=f(e,["config"]);return i!=null&&p(n,["config"],tM(t,i,n)),n}function iM(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function oM(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const o=f(t,["name"]);if(o!=null&&p(e,["name"],o),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sM(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function rM(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function aM(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=f(t,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const s=f(t,["temperature"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","temperature"],s);const r=f(t,["topP"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","topP"],r);const a=f(t,["topK"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topK"],a);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const u=f(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const d=f(t,["seed"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","seed"],d);const h=f(t,["speechConfig"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","speechConfig"],Mf(h));const m=f(t,["thinkingConfig"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","thinkingConfig"],m);const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=f(t,["systemInstruction"]);e!==void 0&&v!=null&&p(e,["setup","systemInstruction"],eM(et(v)));const _=f(t,["tools"]);if(e!==void 0&&_!=null){let N=Oo(_);Array.isArray(N)&&(N=N.map(T=>dM(Fo(T)))),p(e,["setup","tools"],N)}const x=f(t,["sessionResumption"]);e!==void 0&&x!=null&&p(e,["setup","sessionResumption"],uM(x));const y=f(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&p(e,["setup","inputAudioTranscription"],y);const b=f(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","outputAudioTranscription"],b);const w=f(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&p(e,["setup","realtimeInputConfig"],w);const C=f(t,["contextWindowCompression"]);e!==void 0&&C!=null&&p(e,["setup","contextWindowCompression"],C);const E=f(t,["proactivity"]);if(e!==void 0&&E!=null&&p(e,["setup","proactivity"],E),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function lM(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["setup","model"],ue(t,i));const o=f(e,["config"]);return o!=null&&p(n,["config"],aM(o,n)),n}function cM(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(t,["executableCode"]);o!=null&&p(e,["executableCode"],o);const s=f(t,["fileData"]);s!=null&&p(e,["fileData"],iM(s));const r=f(t,["functionCall"]);r!=null&&p(e,["functionCall"],oM(r));const a=f(t,["functionResponse"]);a!=null&&p(e,["functionResponse"],a);const l=f(t,["inlineData"]);l!=null&&p(e,["inlineData"],ZR(l));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const d=f(t,["thought"]);d!=null&&p(e,["thought"],d);const h=f(t,["thoughtSignature"]);h!=null&&p(e,["thoughtSignature"],h);const m=f(t,["videoMetadata"]);return m!=null&&p(e,["videoMetadata"],m),e}function uM(t){const e={},n=f(t,["handle"]);if(n!=null&&p(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function dM(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),p(e,["functionDeclarations"],d)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(t,["computerUse"]);o!=null&&p(e,["computerUse"],o);const s=f(t,["fileSearch"]);s!=null&&p(e,["fileSearch"],s);const r=f(t,["codeExecution"]);if(r!=null&&p(e,["codeExecution"],r),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],sM(a));const l=f(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],rM(l));const u=f(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fM(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(s=>`${n}.${s}`);e.push(...o)}else e.push(n)}return e.join(",")}function pM(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const s=fM(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const r=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];o.length>0&&(a=o.map(u=>r.includes(u)?`generationConfig.${u}`:u));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class hM extends Pn{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=nM(this.apiClient,e);s=$("auth_tokens",a._url),r=a._query,delete a.config,delete a._url,delete a._query;const l=pM(a,e.config);return o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mM(t,e){const n={},i=f(t,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),n}function gM(t){const e={},n=f(t,["name"]);n!=null&&p(e,["_url","name"],n);const i=f(t,["config"]);return i!=null&&mM(i,e),e}function xM(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function vM(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),n}function yM(t){const e={},n=f(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const i=f(t,["config"]);return i!=null&&vM(i,e),e}function _M(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(t,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bM extends Pn{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ui(In.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xM(e);return s=$("{name}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=gM(e);o=$("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=yM(e);return s=$("{parent}/documents",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const u=_M(l),d=new e2;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wM extends Pn{constructor(e,n=new bM(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Ui(In.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=fR(e);return s=$("fileSearchStores",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=mR(e);return s=$("{name}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=hR(e);o=$("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=bR(e);return s=$("fileSearchStores",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const u=wR(l),d=new t2;return Object.assign(d,u),d})}}async uploadToFileSearchStoreInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=SR(e);return s=$("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const u=CR(l),d=new n2;return Object.assign(d,u),d})}}async importFile(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=vR(e);return s=$("{file_search_store_name}:importFile",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const u=xR(l),d=new If;return Object.assign(d,u),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let __=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return __=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const SM=()=>__();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ju(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Yu=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ot extends Error{}class at extends Ot{constructor(e,n,i,o){super(`${at.makeMessage(e,n,i)}`),this.status=e,this.headers=o,this.error=n}static makeMessage(e,n,i){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,i,o){if(!e||!o)return new Ol({message:i,cause:Yu(n)});const s=n;return e===400?new w_(e,s,i,o):e===401?new S_(e,s,i,o):e===403?new C_(e,s,i,o):e===404?new k_(e,s,i,o):e===409?new E_(e,s,i,o):e===422?new T_(e,s,i,o):e===429?new I_(e,s,i,o):e>=500?new N_(e,s,i,o):new at(e,s,i,o)}}class Ku extends at{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ol extends at{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class b_ extends Ol{constructor({message:e}={}){super({message:e??"Request timed out."})}}class w_ extends at{}class S_ extends at{}class C_ extends at{}class k_ extends at{}class E_ extends at{}class T_ extends at{}class I_ extends at{}class N_ extends at{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CM=/^[a-z][a-z0-9+.-]*:/i,kM=t=>CM.test(t);let Qu=t=>(Qu=Array.isArray,Qu(t));const EM=Qu;let TM=EM;const Zg=TM;function IM(t){if(!t)return!0;for(const e in t)return!1;return!0}function NM(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const AM=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ot(`${t} must be an integer`);if(e<0)throw new Ot(`${t} must be a positive integer`);return e},PM=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RM=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qi="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MM(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const LM=()=>{var t,e,n,i,o;const s=MM();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qi,"X-Stainless-OS":t0(Deno.build.os),"X-Stainless-Arch":e0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qi,"X-Stainless-OS":t0((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":e0((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const r=DM();return r?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${r.browser}`,"X-Stainless-Runtime-Version":r.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function DM(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const o=i[1]||0,s=i[2]||0,r=i[3]||0;return{browser:e,version:`${o}.${s}.${r}`}}}return null}const e0=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",t0=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let qr;const zM=()=>qr??(qr=LM());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function A_(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function FM(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return A_({start(){},async pull(n){const{done:i,value:o}=await e.next();i?n.close():n.enqueue(o)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function P_(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function OM(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UM=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R_=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ic(t,e,n){return R_(),new File(t,e??"unknown_file",n)}function BM(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const VM=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const M_=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",HM=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&M_(t),$M=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function GM(t,e,n){if(R_(),t=await t,HM(t))return t instanceof File?t:Ic([await t.arrayBuffer()],t.name);if($M(t)){const o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ic(await Xu(o),e,n)}const i=await Xu(t);if(e||(e=BM(t)),!(n!=null&&n.type)){const o=i.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return Ic(i,e,n)}async function Xu(t){var e,n,i,o,s;let r=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)r.push(t);else if(M_(t))r.push(t instanceof Blob?t:await t.arrayBuffer());else if(VM(t))try{for(var a=!0,l=Wt(t),u;u=await l.next(),e=u.done,!e;a=!0){o=u.value,a=!1;const d=o;r.push(...await Xu(d))}}catch(d){n={error:d}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}else{const d=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${qM(t)}`)}return r}function qM(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L_{constructor(e){this._client=e}}L_._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D_(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const n0=Object.freeze(Object.create(null)),WM=(t=D_)=>function(n,...i){if(n.length===1)return n[0];let o=!1;const s=[],r=n.reduce((d,h,m)=>{var g,v,_;/[?#]/.test(h)&&(o=!0);const x=i[m];let y=(o?encodeURIComponent:t)(""+x);return m!==i.length&&(x==null||typeof x=="object"&&x.toString===((_=Object.getPrototypeOf((v=Object.getPrototypeOf((g=x.hasOwnProperty)!==null&&g!==void 0?g:n0))!==null&&v!==void 0?v:n0))===null||_===void 0?void 0:_.toString))&&(y=x+"",s.push({start:d.length+h.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),d+h+(m===i.length?"":y)},""),a=r.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((d,h)=>d.start-h.start),s.length>0){let d=0;const h=s.reduce((m,g)=>{const v=" ".repeat(g.start-d),_="^".repeat(g.length);return d=g.start+g.length,m+v+_},"");throw new Ot(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${r}
${h}`)}return r},Wr=WM(D_);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z_ extends L_{create(e,n){var i;const{api_version:o=this._client.apiVersion}=e,s=sl(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new Ot("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new Ot("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Wr`/${o}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(Wr`/${o}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.post(Wr`/${o}/interactions/${e}/cancel`,i)}get(e,n={},i){var o;const s=n??{},{api_version:r=this._client.apiVersion}=s,a=sl(s,["api_version"]);return this._client.get(Wr`/${r}/interactions/${e}`,Object.assign(Object.assign({query:a},i),{stream:(o=n==null?void 0:n.stream)!==null&&o!==void 0?o:!1}))}}z_._key=Object.freeze(["interactions"]);class j_ extends z_{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JM(t){let e=0;for(const o of t)e+=o.length;const n=new Uint8Array(e);let i=0;for(const o of t)n.set(o,i),i+=o.length;return n}let Jr;function Df(t){let e;return(Jr??(e=new globalThis.TextEncoder,Jr=e.encode.bind(e)))(t)}let Yr;function i0(t){let e;return(Yr??(e=new globalThis.TextDecoder,Yr=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ul{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Df(e):e;this.buffer=JM([this.buffer,n]);const i=[];let o;for(;(o=YM(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(i0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,r=i0(this.buffer.subarray(0,s));i.push(r),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Ul.NEWLINE_CHARS=new Set([`
`,"\r"]);Ul.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function YM(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function KM(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rl={off:0,error:200,warn:300,info:400,debug:500},o0=(t,e,n)=>{if(t){if(NM(rl,t))return t;it(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(rl))}`)}};function xs(){}function Kr(t,e,n){return!e||rl[t]>rl[n]?xs:e[t].bind(e)}const QM={error:xs,warn:xs,info:xs,debug:xs};let s0=new WeakMap;function it(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return QM;const o=s0.get(n);if(o&&o[0]===i)return o[1];const s={error:Kr("error",n,i),warn:Kr("warn",n,i),info:Kr("info",n,i),debug:Kr("debug",n,i)};return s0.set(n,[i,s]),s}const yi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ao{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let o=!1;const s=i?it(i):console;function r(){return qt(this,arguments,function*(){var l,u,d,h;if(o)throw new Ot("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var g=!0,v=Wt(XM(e,n)),_;_=yield Z(v.next()),l=_.done,!l;g=!0){h=_.value,g=!1;const x=h;if(!m)if(x.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield Z(JSON.parse(x.data))}catch(y){throw s.error("Could not parse message into JSON:",x.data),s.error("From chunk:",x.raw),y}}}catch(x){u={error:x}}finally{try{!g&&!l&&(d=v.return)&&(yield Z(d.call(v)))}finally{if(u)throw u.error}}m=!0}catch(x){if(Ju(x))return yield Z(void 0);throw x}finally{m||n.abort()}})}return new ao(r,n,i)}static fromReadableStream(e,n,i){let o=!1;function s(){return qt(this,arguments,function*(){var l,u,d,h;const m=new Ul,g=P_(e);try{for(var v=!0,_=Wt(g),x;x=yield Z(_.next()),l=x.done,!l;v=!0){h=x.value,v=!1;const y=h;for(const b of m.decode(y))yield yield Z(b)}}catch(y){u={error:y}}finally{try{!v&&!l&&(d=_.return)&&(yield Z(d.call(_)))}finally{if(u)throw u.error}}for(const y of m.flush())yield yield Z(y)})}function r(){return qt(this,arguments,function*(){var l,u,d,h;if(o)throw new Ot("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var g=!0,v=Wt(s()),_;_=yield Z(v.next()),l=_.done,!l;g=!0){h=_.value,g=!1;const x=h;m||x&&(yield yield Z(JSON.parse(x)))}}catch(x){u={error:x}}finally{try{!g&&!l&&(d=v.return)&&(yield Z(d.call(v)))}finally{if(u)throw u.error}}m=!0}catch(x){if(Ju(x))return yield Z(void 0);throw x}finally{m||n.abort()}})}return new ao(r,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),o=s=>({next:()=>{if(s.length===0){const r=i.next();e.push(r),n.push(r)}return s.shift()}});return[new ao(()=>o(e),this.controller,this.client),new ao(()=>o(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return A_({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:s}=await n.next();if(s)return i.close();const r=Df(JSON.stringify(o)+`
`);i.enqueue(r)}catch(o){i.error(o)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function XM(t,e){return qt(this,arguments,function*(){var i,o,s,r;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ot("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ot("Attempted to iterate over a response with no body");const a=new eL,l=new Ul,u=P_(t.body);try{for(var d=!0,h=Wt(ZM(u)),m;m=yield Z(h.next()),i=m.done,!i;d=!0){r=m.value,d=!1;const g=r;for(const v of l.decode(g)){const _=a.decode(v);_&&(yield yield Z(_))}}}catch(g){o={error:g}}finally{try{!d&&!i&&(s=h.return)&&(yield Z(s.call(h)))}finally{if(o)throw o.error}}for(const g of l.flush()){const v=a.decode(g);v&&(yield yield Z(v))}})}function ZM(t){return qt(this,arguments,function*(){var n,i,o,s;let r=new Uint8Array;try{for(var a=!0,l=Wt(t),u;u=yield Z(l.next()),n=u.done,!n;a=!0){s=u.value,a=!1;const d=s;if(d==null)continue;const h=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?Df(d):d;let m=new Uint8Array(r.length+h.length);m.set(r),m.set(h,r.length),r=m;let g;for(;(g=KM(r))!==-1;)yield yield Z(r.slice(0,g)),r=r.slice(g)}}catch(d){i={error:d}}finally{try{!a&&!n&&(o=l.return)&&(yield Z(o.call(l)))}finally{if(i)throw i.error}}r.length>0&&(yield yield Z(r))})}class eL{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,o]=tL(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function tL(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function nL(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:s}=e,r=await(async()=>{var a;if(e.options.stream)return it(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ao.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),u=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return it(t).debug(`[${i}] response parsed`,yi({retryOfRequestLogID:o,url:n.url,status:n.status,body:r,durationMs:Date.now()-s})),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zf extends Promise{constructor(e,n,i=nL){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new zf(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F_=Symbol("brand.privateNullableHeaders");function*iL(t){if(!t)return;if(F_ in t){const{values:i,nulls:o}=t;yield*i.entries();for(const s of o)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Zg(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const s=Zg(i[1])?i[1]:[i[1]];let r=!1;for(const a of s)a!==void 0&&(e&&!r&&(r=!0,yield[o,null]),yield[o,a])}}const as=t=>{const e=new Headers,n=new Set;for(const i of t){const o=new Set;for(const[s,r]of iL(i)){const a=s.toLowerCase();o.has(a)||(e.delete(s),o.add(a)),r===null?(e.delete(s),n.add(a)):(e.append(s,r),n.delete(a))}}return{[F_]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nc=t=>{var e,n,i,o,s,r;if(typeof globalThis.process<"u")return(i=(n=(e=NI)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(r=(s=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||s===void 0?void 0:s.call(o,t))===null||r===void 0?void 0:r.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var O_;class Bl{constructor(e){var n,i,o,s,r,a,l,{baseURL:u=Nc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=Nc("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=e,m=sl(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:d,apiVersion:h},m),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(i=g.timeout)!==null&&i!==void 0?i:Bl.DEFAULT_TIMEOUT,this.logger=(o=g.logger)!==null&&o!==void 0?o:console;const v="warn";this.logLevel=v,this.logLevel=(r=(s=o0(g.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:o0(Nc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&r!==void 0?r:v,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:jM(),this.encoder=UM,this._options=g,this.apiKey=d,this.apiVersion=h,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=as([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return as([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return as([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Ot(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${qi}`}defaultIdempotencyKey(){return`stainless-node-retry-${SM()}`}makeStatusError(e,n,i,o){return at.generate(e,n,i,o)}buildURL(e,n,i){const o=!this.baseURLOverridden()&&i||this.baseURL,s=kM(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return IM(r)||(n=Object.assign(Object.assign({},r),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:n},o)))}request(e,n=null){return new zf(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var o,s,r;const a=await e,l=(o=a.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:u,url:d,timeout:h}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(u,{url:d,options:a});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=i===void 0?"":`, retryOf: ${i}`,v=Date.now();if(it(this).debug(`[${m}] sending request`,yi({retryOfRequestLogID:i,method:a.method,url:d,options:a,headers:u.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Ku;const _=new AbortController,x=await this.fetchWithTimeout(d,u,h,_).catch(Yu),y=Date.now();if(x instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if(!((r=a.signal)===null||r===void 0)&&r.aborted)throw new Ku;const C=Ju(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(n)return it(this).info(`[${m}] connection ${C?"timed out":"failed"} - ${w}`),it(this).debug(`[${m}] connection ${C?"timed out":"failed"} (${w})`,yi({retryOfRequestLogID:i,url:d,durationMs:y-v,message:x.message})),this.retryRequest(a,n,i??m);throw it(this).info(`[${m}] connection ${C?"timed out":"failed"} - error; no more retries left`),it(this).debug(`[${m}] connection ${C?"timed out":"failed"} (error; no more retries left)`,yi({retryOfRequestLogID:i,url:d,durationMs:y-v,message:x.message})),C?new b_:new Ol({cause:x})}const b=`[${m}${g}] ${u.method} ${d} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${y-v}ms`;if(!x.ok){const w=await this.shouldRetry(x);if(n&&w){const k=`retrying, ${n} attempts remaining`;return await OM(x.body),it(this).info(`${b} - ${k}`),it(this).debug(`[${m}] response error (${k})`,yi({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,durationMs:y-v})),this.retryRequest(a,n,i??m,x.headers)}const C=w?"error; no more retries left":"error; not retryable";it(this).info(`${b} - ${C}`);const E=await x.text().catch(k=>Yu(k).message),N=PM(E),T=N?void 0:E;throw it(this).debug(`[${m}] response error (${C})`,yi({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,message:T,durationMs:Date.now()-v})),this.makeStatusError(x.status,N,T,x.headers)}return it(this).info(b),it(this).debug(`[${m}] response start`,yi({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,durationMs:y-v})),{response:x,options:a,controller:_,requestLogID:m,retryOfRequestLogID:i,startTime:v}}async fetchWithTimeout(e,n,i,o){const s=n||{},{signal:r,method:a}=s,l=sl(s,["signal","method"]);r&&r.addEventListener("abort",()=>o.abort());const u=setTimeout(()=>o.abort(),i),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,h=Object.assign(Object.assign(Object.assign({signal:o.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);a&&(h.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,o){var s;let r;const a=o==null?void 0:o.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(r=u)}const l=o==null?void 0:o.get("retry-after");if(l&&!r){const u=parseFloat(l);Number.isNaN(u)?r=Date.parse(l)-Date.now():r=u*1e3}if(!(r&&0<=r&&r<60*1e3)){const u=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(n,u)}return await RM(r),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,r=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return r*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,o,s;const r=Object.assign({},e),{method:a,path:l,query:u,defaultBaseURL:d}=r,h=this.buildURL(l,u,d);"timeout"in r&&AM("timeout",r.timeout),r.timeout=(i=r.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:m,body:g}=this.buildBody({options:r}),v=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:v},r.signal&&{signal:r.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(s=r.fetchOptions)!==null&&s!==void 0?s:{}),url:h,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:o}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const r=await this.authHeaders(e);let a=as([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),zM()),this._options.defaultHeaders,i,e.headers,r]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=as([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:FM(e)}:this.encoder({body:e,headers:i})}}Bl.DEFAULT_TIMEOUT=6e4;class $e extends Bl{constructor(){super(...arguments),this.interactions=new j_(this)}}O_=$e;$e.GeminiNextGenAPIClient=O_;$e.GeminiNextGenAPIClientError=Ot;$e.APIError=at;$e.APIConnectionError=Ol;$e.APIConnectionTimeoutError=b_;$e.APIUserAbortError=Ku;$e.NotFoundError=k_;$e.ConflictError=E_;$e.RateLimitError=I_;$e.BadRequestError=w_;$e.AuthenticationError=S_;$e.InternalServerError=N_;$e.PermissionDeniedError=C_;$e.UnprocessableEntityError=T_;$e.toFile=GM;$e.Interactions=j_;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oL(t,e){const n={},i=f(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function sL(t,e){const n={},i=f(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function rL(t,e){const n={},i=f(t,["sdkHttpResponse"]);return i!=null&&p(n,["sdkHttpResponse"],i),n}function aL(t,e){const n={},i=f(t,["sdkHttpResponse"]);return i!=null&&p(n,["sdkHttpResponse"],i),n}function lL(t,e,n){const i={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&p(e,["displayName"],o),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=f(t,["epochCount"]);e!==void 0&&s!=null&&p(e,["tuningTask","hyperparameters","epochCount"],s);const r=f(t,["learningRateMultiplier"]);if(r!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],r),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=f(t,["batchSize"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","batchSize"],a);const l=f(t,["learningRate"]);if(e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","learningRate"],l),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function cL(t,e,n){const i={};let o=f(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const g=f(t,["validationDataset"]);e!==void 0&&g!=null&&p(e,["supervisedTuningSpec"],r0(g))}else if(o==="PREFERENCE_TUNING"){const g=f(t,["validationDataset"]);e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec"],r0(g))}const s=f(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&p(e,["tunedModelDisplayName"],s);const r=f(t,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);let a=f(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=f(t,["epochCount"]);e!==void 0&&g!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=f(t,["epochCount"]);e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=f(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=f(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=f(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let u=f(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=f(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(u==="PREFERENCE_TUNING"){const g=f(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let d=f(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=f(t,["adapterSize"]);e!==void 0&&g!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(d==="PREFERENCE_TUNING"){const g=f(t,["adapterSize"]);e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=f(t,["labels"]);e!==void 0&&h!=null&&p(e,["labels"],h);const m=f(t,["beta"]);return e!==void 0&&m!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),i}function uL(t,e){const n={},i=f(t,["baseModel"]);i!=null&&p(n,["baseModel"],i);const o=f(t,["preTunedModel"]);o!=null&&p(n,["preTunedModel"],o);const s=f(t,["trainingDataset"]);s!=null&&bL(s);const r=f(t,["config"]);return r!=null&&lL(r,n),n}function dL(t,e){const n={},i=f(t,["baseModel"]);i!=null&&p(n,["baseModel"],i);const o=f(t,["preTunedModel"]);o!=null&&p(n,["preTunedModel"],o);const s=f(t,["trainingDataset"]);s!=null&&wL(s,n,e);const r=f(t,["config"]);return r!=null&&cL(r,n,e),n}function fL(t,e){const n={},i=f(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function pL(t,e){const n={},i=f(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function hL(t,e,n){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const r=f(t,["filter"]);return e!==void 0&&r!=null&&p(e,["_query","filter"],r),i}function mL(t,e,n){const i={},o=f(t,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const s=f(t,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const r=f(t,["filter"]);return e!==void 0&&r!=null&&p(e,["_query","filter"],r),i}function gL(t,e){const n={},i=f(t,["config"]);return i!=null&&hL(i,n),n}function xL(t,e){const n={},i=f(t,["config"]);return i!=null&&mL(i,n),n}function vL(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&p(n,["nextPageToken"],o);const s=f(t,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>U_(a))),p(n,["tuningJobs"],r)}return n}function yL(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const o=f(t,["nextPageToken"]);o!=null&&p(n,["nextPageToken"],o);const s=f(t,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>Zu(a))),p(n,["tuningJobs"],r)}return n}function _L(t,e){const n={},i=f(t,["name"]);i!=null&&p(n,["model"],i);const o=f(t,["name"]);return o!=null&&p(n,["endpoint"],o),n}function bL(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),p(n,["examples","examples"],o)}return n}function wL(t,e,n){const i={};let o=f(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const r=f(t,["gcsUri"]);e!==void 0&&r!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(o==="PREFERENCE_TUNING"){const r=f(t,["gcsUri"]);e!==void 0&&r!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],r)}let s=f(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const r=f(t,["vertexDatasetResource"]);e!==void 0&&r!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(s==="PREFERENCE_TUNING"){const r=f(t,["vertexDatasetResource"]);e!==void 0&&r!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],r)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function U_(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const o=f(t,["name"]);o!=null&&p(n,["name"],o);const s=f(t,["state"]);s!=null&&p(n,["state"],n_(s));const r=f(t,["createTime"]);r!=null&&p(n,["createTime"],r);const a=f(t,["tuningTask","startTime"]);a!=null&&p(n,["startTime"],a);const l=f(t,["tuningTask","completeTime"]);l!=null&&p(n,["endTime"],l);const u=f(t,["updateTime"]);u!=null&&p(n,["updateTime"],u);const d=f(t,["description"]);d!=null&&p(n,["description"],d);const h=f(t,["baseModel"]);h!=null&&p(n,["baseModel"],h);const m=f(t,["_self"]);return m!=null&&p(n,["tunedModel"],_L(m)),n}function Zu(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const o=f(t,["name"]);o!=null&&p(n,["name"],o);const s=f(t,["state"]);s!=null&&p(n,["state"],n_(s));const r=f(t,["createTime"]);r!=null&&p(n,["createTime"],r);const a=f(t,["startTime"]);a!=null&&p(n,["startTime"],a);const l=f(t,["endTime"]);l!=null&&p(n,["endTime"],l);const u=f(t,["updateTime"]);u!=null&&p(n,["updateTime"],u);const d=f(t,["error"]);d!=null&&p(n,["error"],d);const h=f(t,["description"]);h!=null&&p(n,["description"],h);const m=f(t,["baseModel"]);m!=null&&p(n,["baseModel"],m);const g=f(t,["tunedModel"]);g!=null&&p(n,["tunedModel"],g);const v=f(t,["preTunedModel"]);v!=null&&p(n,["preTunedModel"],v);const _=f(t,["supervisedTuningSpec"]);_!=null&&p(n,["supervisedTuningSpec"],_);const x=f(t,["preferenceOptimizationSpec"]);x!=null&&p(n,["preferenceOptimizationSpec"],x);const y=f(t,["tuningDataStats"]);y!=null&&p(n,["tuningDataStats"],y);const b=f(t,["encryptionSpec"]);b!=null&&p(n,["encryptionSpec"],b);const w=f(t,["partnerModelTuningSpec"]);w!=null&&p(n,["partnerModelTuningSpec"],w);const C=f(t,["customBaseModel"]);C!=null&&p(n,["customBaseModel"],C);const E=f(t,["experiment"]);E!=null&&p(n,["experiment"],E);const N=f(t,["labels"]);N!=null&&p(n,["labels"],N);const T=f(t,["outputUri"]);T!=null&&p(n,["outputUri"],T);const S=f(t,["pipelineJob"]);S!=null&&p(n,["pipelineJob"],S);const k=f(t,["serviceAccount"]);k!=null&&p(n,["serviceAccount"],k);const I=f(t,["tunedModelDisplayName"]);I!=null&&p(n,["tunedModelDisplayName"],I);const P=f(t,["veoTuningSpec"]);return P!=null&&p(n,["veoTuningSpec"],P),n}function SL(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const o=f(t,["name"]);o!=null&&p(n,["name"],o);const s=f(t,["metadata"]);s!=null&&p(n,["metadata"],s);const r=f(t,["done"]);r!=null&&p(n,["done"],r);const a=f(t,["error"]);return a!=null&&p(n,["error"],a),n}function r0(t,e){const n={},i=f(t,["gcsUri"]);i!=null&&p(n,["validationDatasetUri"],i);const o=f(t,["vertexDatasetResource"]);return o!=null&&p(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CL extends Pn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ui(In.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:Bu.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=pL(e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>Zu(d))}else{const u=fL(e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>U_(d))}}async listInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=xL(e);return a=$("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=yL(d),m=new Rg;return Object.assign(m,h),m})}else{const u=gL(e);return a=$("tunedModels",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=vL(d),m=new Rg;return Object.assign(m,h),m})}}async cancel(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=sL(e);return a=$("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=aL(d),m=new Mg;return Object.assign(m,h),m})}else{const u=oL(e);return a=$("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{const h=rL(d),m=new Mg;return Object.assign(m,h),m})}}async tuneInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=dL(e,e);return s=$("tuningJobs",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>Zu(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=uL(e);return s=$("tunedModels",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>SL(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kL{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const EL=1024*1024*8,TL=3,IL=1e3,NL=2,al="x-goog-upload-status";async function AL(t,e,n){var i;const o=await B_(t,e,n),s=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[al])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function PL(t,e,n){var i;const o=await B_(t,e,n),s=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[al])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const r=Ky(s),a=new Nf;return Object.assign(a,r),a}async function B_(t,e,n){var i,o;let s=0,r=0,a=new Vu(new Response),l="upload";for(s=t.size;r<s;){const u=Math.min(EL,s-r),d=t.slice(r,r+u);r+u>=s&&(l+=", finalize");let h=0,m=IL;for(;h<TL&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(r),"Content-Length":String(u)}}}),!(!((i=a==null?void 0:a.headers)===null||i===void 0)&&i[al]));)h++,await ML(m),m=m*NL;if(r+=u,((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[al])!=="active")break;if(s<=r)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function RL(t){return{size:t.size,type:t.type}}function ML(t){return new Promise(e=>setTimeout(e,t))}class LL{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await AL(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await PL(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RL(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DL{create(e,n,i){return new zL(e,n,i)}}class zL{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a0="x-goog-api-key";class jL{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(a0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(a0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FL="gl-node/";class V_{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new $e({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=MI(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new jL(this.apiKey);this.apiClient=new RR({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:FL+"web",uploader:new LL,downloader:new kL}),this.models=new QR(this.apiClient),this.live=new GR(this.apiClient,o,new DL),this.batches=new lN(this.apiClient),this.chats=new HN(this.models,this.apiClient),this.caches=new UN(this.apiClient),this.files=new ZN(this.apiClient),this.operations=new XR(this.apiClient),this.authTokens=new hM(this.apiClient),this.tunings=new CL(this.apiClient),this.fileSearchStores=new wM(this.apiClient)}}const jf=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),c.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),or=t=>c.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M16.75 13.96c.25.13.42.2.55.32.13.13.2.27.2.42s-.07.28-.2.42c-.13.13-.27.2-.42.2h-.13c-.32 0-.68-.07-1.1-.2-1.25-.42-2.25-1.18-2.97-2.18-.72-1-1.1-2.13-1.1-3.36 0-.2.07-.37.2-.5.13-.13.27-.2.42-.2h.13c.13 0 .25.03.35.1.1.07.17.15.22.25.1.13.17.3.22.5s.1.42.13.65c.03.23.03.45.03.63 0 .2-.03.4-.1.55-.07.15-.15.28-.25.4-.1.1-.18.18-.25.25-.07.07-.13.12-.17.15-.04.03-.07.07-.07.13s0 .1.03.13c.03.03.07.07.1.13.17.2.38.45.65.7.27.28.5.5.75.7s.48.37.7.5c.07.03.12.06.15.08.03.02.06.03.08.03s.04.02.06.03c.02.01.05.02.08.03.03.01.07.02.1.03.1.03.2.07.3.13.03.03.06.05.08.06.02.01.05.03.08.04.03.01.07.02.1.03l.03.01h.02c.03 0 .07-.02.1-.03.17-.07.32-.15.45-.25s.22-.2.3-.3c.08-.1.13-.2.15-.28.02-.08.03-.17.03-.25 0-.1-.02-.2-.05-.3-.03-.1-.08-.2-.13-.3s-.12-.18-.2-.28c-.08-.1-.15-.18-.2-.25-.05-.07-.1-.13-.13-.18s-.05-.1-.05-.13a.14.14 0 0 1 .03-.1c.01-.02.03-.03.05-.04.1-.05.2-.1.3-.15s.18-.1.25-.13c.07-.03.13-.05.17-.05.04 0 .08.02.1.03s.05.03.06.05c.01.02.03.03.03.05.01.02.02.05.02.08s-.02.07-.03.1c-.01.03-.03.06-.05.08l-.05.08c-.03.03-.05.06-.06.08a.2.2 0 0 0-.02.1c0 .03.01.06.03.1.02.03.05.06.1.1l.4.45c.1.13.2.25.3.37.1.12.2.23.3.32.1.1.2.18.3.25.1.07.2.13.28.17.08.04.17.07.25.1.08.03.17.04.25.04.13 0 .25-.02.37-.05.12-.03.24-.08.36-.15.12-.07.23-.15.33-.25.1-.1.18-.2.25-.32.07-.12.12-.24.15-.37.03-.13.05-.25.05-.38 0-.2-.07-.38-.2-.53-.13-.15-.3-.28-.5-.38-.2-.1-.42-.16-.65-.18-.23-.02-.48-.03-.7-.03-.23 0-.45.01-.65.03-.2.02-.4.06-.55.13-.15.07-.3.15-.42.25-.12.1-.23.2-.3.3s-.15.2-.2.3c-.05.1-.1.2-.13.3s-.05.2-.05.3v.1c0 .07.02.13.05.18.03.05.08.1.13.15l.35.35c.05.05.1.1.13.15l.13.15c.03.03.05.06.06.1a.24.24 0 0 1 0 .2c-.01.04-.03.08-.06.1-.03.03-.06.05-.1.06-.04.01-.08.02-.1.02-.03 0-.06,0-.08-.01s-.05-.02-.08-.03a.55.55 0 0 1-.13-.06c-.05-.03-.1-.06-.15-.1-.2-.13-.4-.28-.6-.45-.2-.17-.38-.35-.55-.52-.17-.17-.33-.35-.48-.52s-.28-.33-.4-.48c-.05-.07-.1-.13-.15-.2s-.1-.13-.13-.2c-.03-.07-.05-.13-.05-.2v-.12c0-.04.01-.08.03-.1.02-.03.05-.05.08-.06.03-.01.07-.02.1-.02h.1c.07 0 .13.02.18.05.05.03.1.08.15.13.1.13.2.25.3.37.1.12.18.23.25.32.07.1.13.18.17.25.04.07.08.13.1.18.02.05.03.1.03.13s-.01.07-.03.1a.1.1 0 0 1-.08.05c-.03.01-.07.01-.1 0-.03 0-.06-.01-.08-.02s-.05-.02-.08-.03c-.07-.03-.15-.07-.22-.1-.07-.03-.15-.07-.22-.1s-.15-.07-.22-.1c-.07-.03-.15-.05-.22-.07-.2-.05-.4-.08-.6-.08-.17 0-.33.02-.5.05-.17.03-.32.08-.47.15-.15.07-.28.16-.4.27-.12.11-.22.23-.3.37zM12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2z"})}),Vl="farmaciacentrale.montesilvano@gmail.com",Ro="393400600600",OL={food_level_2:"energiaCucina",food_level_3:"gourmetMaster",anxiety_stress_level_2:"oasiTranquilla",anxiety_stress_level_3:"superZen",sleep_level_2:"sognoCalmo",sleep_level_3:"notteMagica",sleep_level_4:"sonnoProfondo",activity_sprint_2:"energiaMovimento",activity_sprint_3:"eccellenzaAtletica"},UL=[{program:"Alimentazione",level:"Livello 2  Energia in Cucina",password:"energiaCucina"},{program:"Alimentazione",level:"Livello 3  Sfida del Gourmet",password:"gourmetMaster"},{program:"Ansia-Stress",level:"Livello 2  Oasi della Tranquillit",password:"oasiTranquilla"},{program:"Ansia-Stress",level:"Livello 3  Super Zen",password:"superZen"},{program:"Sonno",level:"Livello 2  Sogno Calmo",password:"sognoCalmo"},{program:"Sonno",level:"Livello 3  Notte Magica",password:"notteMagica"},{program:"Sonno",level:"Livello 4  Sonno Profondo",password:"sonnoProfondo"},{program:"Movimento",level:"Livello 2  Energia in Movimento",password:"energiaMovimento"},{program:"Movimento",level:"Livello 3  Eccellenza Atletica",password:"eccellenzaAtletica"}],BL=[{day:0,title:"Risotto all'Ortica e Noci",benefits:["Depurativo","Ricco di Ferro","Energizzante"],content:`
### Ingredienti
*   320g Riso Carnaroli o Integrale
*   200g Punte di Ortica fresca (solo le cime tenere)
*   50g Noci tritate
*   Brodo vegetale q.b.
*   Olio EVO e Parmigiano (facoltativo)

### Procedimento
1.  Lavare le ortiche (usando guanti) e sbollentarle per 2 minuti. Scolarle e frullarle grossolanamente.
2.  Tostare il riso con un filo d'olio, sfumare con brodo vegetale.
3.  A met cottura aggiungere la crema di ortiche.
4.  Mantecare a fuoco spento con olio EVO e guarnire con le noci tritate per dare croccantezza e Omega-3.
        `},{day:1,title:"Insalata di Tarassaco e Uova in Camicia",benefits:["Drenante epatico","Proteico","Digestivo"],content:`
### Ingredienti
*   Mazzetto di Tarassaco fresco (foglie giovani)
*   2 Uova fresche
*   Aceto di mele
*   Semi di girasole
*   Olio EVO, sale, pepe

### Procedimento
1.  Lavare accuratamente il tarassaco e asciugarlo. Spezzettarlo in una ciotola.
2.  Preparare le uova in camicia in acqua bollente acidulata con aceto (3-4 minuti).
3.  Condire il tarassaco con olio, sale e una spruzzata di aceto di mele.
4.  Adagiare le uova sull'insalata e cospargere con semi di girasole tostati.
        `},{day:2,title:"Frittata di Borragine al Forno",benefits:["Antinfiammatorio","Ricco di acidi grassi","Leggero"],content:`
### Ingredienti
*   4 Uova
*   150g Foglie di Borragine
*   1 Cipollotto
*   Curcuma in polvere
*   Olio EVO

### Procedimento
1.  Lessare la borragine per pochi minuti, strizzarla bene e tritarla.
2.  Sbattere le uova con un pizzico di sale e mezzo cucchiaino di curcuma.
3.  Unire la borragine e il cipollotto tritato fine.
4.  Versare in una teglia foderata di carta forno. Cuocere a 180C per 20 minuti circa.
        `},{day:3,title:"Pesto di Portulaca e Mandorle su Farro",benefits:["Ricchissimo di Omega-3","Rinfrescante","Energia a lento rilascio"],content:`
### Ingredienti
*   200g Farro perlato o decorticato
*   Mazzetto abbondante di Portulaca (foglie e gambi teneri)
*   50g Mandorle pelate
*   Aglio (facoltativo), Olio EVO
*   Scorza di limone

### Procedimento
1.  Cuocere il farro in acqua salata e lasciarlo raffreddare.
2.  Nel mortaio o mixer, pestare la portulaca cruda con le mandorle, olio e poco aglio fino a ottenere una crema grezza.
3.  Condire il farro con il pesto e grattugiare scorza di limone fresco sopra.
        `},{day:4,title:"Zuppa di Malva e Patate Dolci",benefits:["Lenitivo per l'intestino","Emolliente","Carboidrati complessi"],content:`
### Ingredienti
*   Foglie e fiori di Malva
*   2 Patate dolci medie
*   1 Porro
*   Zenzero fresco
*   Olio EVO

### Procedimento
1.  Stufare il porro affettato con un filo d'olio e zenzero grattugiato.
2.  Aggiungere le patate dolci a cubetti e coprire con acqua/brodo. Cuocere 15 min.
3.  Aggiungere la malva lavata e cuocere altri 5 minuti.
4.  Frullare parzialmente per ottenere una consistenza cremosa ma con pezzi.
        `},{day:5,title:"Filetto di Sgombro con Finocchietto Selvatico",benefits:["Omega-3","Digestivo","Depurativo"],content:`
### Ingredienti
*   Filetti di Sgombro fresco
*   Mazzetto di Finocchietto selvatico
*   Arancia biologica
*   Olive taggiasche

### Procedimento
1.  Disporre i filetti in una pirofila.
2.  Preparare un'emulsione con olio, succo d'arancia e finocchietto tritato.
3.  Spennellare il pesce, aggiungere le olive e fettine d'arancia.
4.  Cuocere in forno a 180C per 10-15 minuti.
        `},{day:6,title:"Cicoria Ripassata con Peperoncino e Aglio",benefits:["Amaro digestivo","Stimolante metabolico","Detox"],content:`
### Ingredienti
*   Cicoria di campo o catalogna
*   Aglio, Peperoncino
*   Olio EVO
*   Pane integrale tostato

### Procedimento
1.  Sbollentare la cicoria in acqua salata, scolarla e strizzarla bene (conservare un po' d'acqua di cottura se piace l'amaro).
2.  In padella, rosolare aglio e peperoncino in olio EVO.
3.  Aggiungere la cicoria e farla insaporire a fuoco vivace per 5 minuti.
4.  Servire su fette di pane integrale tostato strofinato con aglio.
        `}],VL=({customSleepFormulation:t})=>{const[e,n]=z.useState(null),[i,o]=z.useState(!1),[s,r]=z.useState(!1),a=[{id:"sleep",title:"Sonno",icon:hf,color:"text-indigo-600",bg:"bg-indigo-50",border:"border-indigo-100",foods:[{name:"Kiwi",desc:"Serotonina"},{name:"Mandorle",desc:"Magnesio"},{name:"Yogurt",desc:"Triptofano"}],supplements:"Melatonina, Magnesio, L-teanina",emoji:""},{id:"stress",title:"Ansia & Stress",icon:mf,color:"text-orange-600",bg:"bg-orange-50",border:"border-orange-100",foods:[{name:"T Verde",desc:"EGCG calmante"},{name:"Cioccolato 70%",desc:"Flavonoidi"},{name:"Semi di Zucca",desc:"Zinco"}],supplements:"Ashwagandha, Rhodiola, Magnesio",emoji:""},{id:"microbiome",title:"Microbioma",icon:Ty,color:"text-emerald-600",bg:"bg-emerald-50",border:"border-emerald-100",foods:[{name:"Kefir/Yogurt",desc:"Probiotici"},{name:"Legumi",desc:"Prebiotici"},{name:"Verdure Ferm.",desc:"Diversit"}],supplements:"Probiotici multiceppo, Inulina",emoji:""},{id:"activity",title:"Attivit Fisica",icon:Za,color:"text-red-600",bg:"bg-red-50",border:"border-red-100",foods:[{name:"Banane",desc:"Potassio rapido"},{name:"Uova",desc:"Proteine nobili"},{name:"Pesce Azzurro",desc:"Recupero"}],supplements:"Proteine Whey, Creatina, BCAA",emoji:""},{id:"diet",title:"Nutrizione Base",icon:gf,color:"text-sky-600",bg:"bg-sky-50",border:"border-sky-100",foods:[{name:"Frutta/Verdura",desc:"Polifenoli"},{name:"Cereali Int.",desc:"Energia stabile"},{name:"Olio EVO",desc:"Grassi sani"}],supplements:"Multivitaminico, Vitamina D",emoji:""}],u=[...[{name:"Formulazione Zen Night",target:"Sonno & Stress",ingredients:"Melatonina, Escolzia, Magnesio Bisglicinato",desc:"Indicata per chi ha difficolt ad addormentarsi a causa di pensieri ricorrenti.",isCustom:!1},{name:"Formulazione Gut Repair",target:"Microbioma & Digestione",ingredients:"L-Glutammina, Boswellia, Curcuma Fitosoma",desc:"Supporto mirato per la permeabilit intestinale e stati infiammatori.",isCustom:!1},{name:"Formulazione Energy React",target:"Stanchezza Fisica & Mentale",ingredients:"Rodiola Rosea, Vitamine B Coenzimate, Coenzima Q10",desc:"Sostegno energetico senza caffeina per periodi di forte carico lavorativo o sportivo.",isCustom:!1}]];t&&(u[0]={name:"Formulazione Galenica Personalizzata",target:`Sonno (Target: ${t.phases.join(", ")})`,ingredients:t.ingredients.join(", "),desc:`Basata sul tuo test. Posologia: ${t.dosage}`,isCustom:!0});const d=async()=>{o(!0),n(null);const m=new Date().getDay(),g=BL[m];try{const w=((await new V_({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:`Crea una ricetta del giorno sana, bilanciata e gustosa, ideale per migliorare il benessere generale. 
            Includi obbligatoriamente un'erba spontanea commestibile (es. tarassaco, ortica, borragine, malva, portulaca) tipica della tradizione.
            La ricetta deve essere facile da preparare.
            
            IMPORTANTE: Rispondi SOLO con un oggetto JSON valido (senza markdown \`\`\`json) con questa struttura:
            {
                "title": "Nome Ricetta",
                "benefits": ["beneficio 1", "beneficio 2"],
                "content": "Testo completo in markdown con Ingredienti e Procedimento"
            }`}]},config:{responseMimeType:"application/json"}})).text||"").trim().replace(/^```json/,"").replace(/```$/,""),C=JSON.parse(w);n(C),r(!0)}catch(v){console.warn("AI generation failed, falling back to static recipe:",v),n({title:g.title,benefits:g.benefits,content:g.content}),r(!0)}finally{o(!1)}},h=(m,g)=>{const v=g?`Buongiorno, vorrei richiedere informazioni sulla preparazione della: ${g}.`:"Buongiorno, vorrei richiedere una consulenza per una formulazione galenica personalizzata.";m==="email"?window.open(`mailto:${Vl}?subject=Richiesta Galenica: ${g||"Consulenza"}&body=${v}`,"_blank"):window.open(`https://wa.me/${Ro}?text=${encodeURIComponent(v)}`,"_blank")};return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:c.jsx(st,{className:"w-6 h-6 text-yellow-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Mappa Alimentare Funzionale"}),c.jsx("p",{className:"text-slate-500 text-sm",children:"Nutrizione strategica e integrazione mirata per i 5 Pilastri della salute."})]})]}),c.jsxs("button",{onClick:d,disabled:i,className:"bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-bold py-2 px-4 rounded-lg shadow-md transition-all flex items-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[c.jsx(st,{className:"w-4 h-4"}),i?"Elaborazione Chef AI...":"Genera Ricetta del Giorno"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 divide-y md:divide-y-0 md:divide-x divide-slate-100",children:a.map(m=>c.jsxs("div",{className:"p-4 hover:bg-slate-50 transition-colors flex flex-col h-full group",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("span",{className:"text-2xl filter drop-shadow-sm group-hover:scale-110 transition-transform",children:m.emoji}),c.jsx("h3",{className:`font-bold ${m.color}`,children:m.title})]}),c.jsxs("div",{className:"mb-4 flex-grow",children:[c.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Nel piatto"}),c.jsx("ul",{className:"space-y-2",children:m.foods.map((g,v)=>c.jsxs("li",{className:"flex flex-col text-sm",children:[c.jsx("span",{className:"font-semibold text-slate-700",children:g.name}),c.jsx("span",{className:"text-xs text-slate-500",children:g.desc})]},v))})]}),c.jsxs("div",{className:`mt-auto p-3 rounded-xl ${m.bg} border ${m.border}`,children:[c.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Integrazione"}),c.jsx("p",{className:`text-xs font-medium ${m.color} leading-snug`,children:m.supplements})]})]},m.id))})]}),c.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[c.jsx("div",{className:"p-6 border-b border-slate-200",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:c.jsx(nr,{className:"w-6 h-6 text-indigo-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Laboratorio Galenico & Integrazione Personalizzata"}),c.jsx("p",{className:"text-slate-500 text-sm",children:"Formulazioni su misura preparate dai nostri farmacisti specializzati."})]})]})}),c.jsxs("div",{className:"p-6",children:[c.jsxs("p",{className:"text-slate-600 mb-6 text-sm",children:["Ogni persona  unica. Presso la Farmacia Centrale Montesilvano, possiamo creare integratori dosati sulle tue specifiche necessit analizzando i tuoi test. ",c.jsx("br",{}),c.jsx("span",{className:"italic text-xs text-slate-400",children:"*Nota: Le formulazioni qui proposte sono esempi di preparati officinali o integratori personalizzabili. Le quantit saranno definite dal farmacista in base alle normative vigenti."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:u.map((m,g)=>c.jsxs("div",{className:`p-4 rounded-xl border shadow-sm transition-all hover:shadow-md cursor-pointer relative overflow-hidden ${m.isCustom?"bg-indigo-50 border-indigo-200 ring-2 ring-indigo-100":"bg-white border-slate-200"}`,onClick:()=>h("whatsapp",m.name),children:[m.isCustom&&c.jsx("div",{className:"absolute top-0 right-0 bg-indigo-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg",children:"SU MISURA"}),c.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full mb-2 inline-block ${m.isCustom?"text-indigo-700 bg-white":"text-indigo-600 bg-indigo-50"}`,children:m.target}),c.jsxs("h3",{className:"font-bold text-slate-800 mb-1 flex items-center gap-2",children:[m.name,m.isCustom&&c.jsx(st,{className:"w-4 h-4 text-indigo-500"})]}),c.jsx("p",{className:"text-xs text-slate-500 italic mb-3",children:m.ingredients}),c.jsx("p",{className:"text-sm text-slate-600",children:m.desc}),c.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100/50 flex justify-end",children:c.jsxs("span",{className:"text-xs font-bold text-emerald-600 flex items-center gap-1 hover:underline",children:["Richiedi info ",c.jsx(or,{className:"w-3 h-3"})]})})]},g))}),c.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4 border-t border-slate-100 pt-6",children:[c.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Non trovi quello che cerchi?"}),c.jsxs("button",{onClick:()=>h("email"),className:"flex items-center gap-2 px-4 py-2 bg-sky-100 text-sky-700 rounded-lg font-bold hover:bg-sky-200 transition-colors text-sm",children:[c.jsx(jf,{className:"w-4 h-4"})," Consulenza Email"]})]})]})]}),s&&e&&c.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"p-6 bg-emerald-600 text-white flex justify-between items-start sticky top-0 z-10",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold",children:e.title}),c.jsx("div",{className:"flex gap-2 mt-2",children:e.benefits.map((m,g)=>c.jsx("span",{className:"text-xs bg-emerald-700 px-2 py-1 rounded-full font-medium border border-emerald-500",children:m},g))})]}),c.jsx("button",{onClick:()=>r(!1),className:"text-white/80 hover:text-white p-1",children:c.jsx(Rl,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"p-6",children:c.jsx("div",{className:"prose prose-sm max-w-none text-slate-700",dangerouslySetInnerHTML:{__html:pe.parse(e.content)}})}),c.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-100 text-center",children:c.jsx("button",{onClick:()=>r(!1),className:"px-6 py-2 bg-slate-200 text-slate-700 font-bold rounded-lg hover:bg-slate-300 transition-colors",children:"Chiudi Ricetta"})})]})})]})};function HL({badge:t,badgeClass:e}){const i={green:"#2ecc71",blue:"#3498db",yellow:"#f1c40f",orange:"#e67e22",red:"#e74c3c"}[e.color]||"#bdc3c7";return c.jsxs("div",{style:{borderRadius:"12px",padding:"16px",backgroundColor:i,color:"white",display:"flex",flexDirection:"column",gap:"6px",boxShadow:"0 4px 10px rgba(0,0,0,0.15)"},children:[c.jsx("div",{style:{fontSize:"22px",fontWeight:"bold"},children:e.label}),c.jsx("div",{style:{fontSize:"40px",fontWeight:"800",lineHeight:"1"},children:t}),c.jsx("div",{style:{fontSize:"14px",opacity:.9},children:e.description}),c.jsxs("div",{style:{fontSize:"12px",opacity:.8},children:["Livello autonomico: ",e.level,"/5"]})]})}function $L({user:t}){const[e,n]=z.useState(null);return z.useEffect(()=>{const i=Ee(`oura_daily_${t.email}`,[]);if(i&&i.length>0){const o=i[i.length-1],s=Cy(o);n(s)}},[t.email]),e?c.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-white shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-700 mb-3",children:"Stato Autonomico"}),c.jsx(HL,{badge:e.badge,badgeClass:e.badgeClass}),c.jsxs("div",{className:"mt-4 text-sm text-slate-600",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Stress:"})," ",e.clusters.stress.toFixed(1)]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Sonno:"})," ",e.clusters.sleep.toFixed(1)]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Recupero:"})," ",e.clusters.recovery.toFixed(1)]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Infiammazione:"})," ",e.clusters.inflammation.toFixed(1)]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Attivit:"})," ",e.clusters.activity.toFixed(1)]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Circadiano:"})," ",e.clusters.circadian.toFixed(1)]})]})]}):c.jsx("div",{className:"mt-6 p-4 rounded-lg bg-slate-100 text-slate-500 text-sm",children:"Nessun dato Oura disponibile."})}console.log(">>> WellnessDashboard CARICATO: src/screens (48 KB)");const GL={sleep:{focus:"Migliorare il Riposo",missions:["start_d_new_7","start_d_new_2","start_d_new_6","start_d_new_9"]},fitness:{focus:"Attivazione Metabolica",missions:["start_d_new_3","start_d_new_16","start_d_new_1"]},diet:{focus:"Nutrizione Pulita",missions:["start_d_new_13","start_d_new_22","start_d_new_5","start_d_new_21"]},stress:{focus:"Gestione Stress",missions:["start_d_new_0","start_d_new_17","start_d_new_18","start_d_new_15"]},microbiome:{focus:"Equilibrio Intestinale",missions:["start_d_new_22","start_d_new_4","start_d_new_13"]}},qL={sleep:{rhythm:"4-7-8 Sonno",frequency:"Relax (Healing)",description:"Favorisci il sonno profondo rallentando il respiro e usando frequenze rigenerative."},fitness:{rhythm:"6-6 Allenamento",frequency:"Mind (Attivazione)",description:"Attiva la mente e il corpo con un ritmo energizzante."},diet:{rhythm:"Coerenza Cardiaca",frequency:"Relax (Healing)",description:"Riduci lo stress digestivo riportando equilibrio tra cuore e cervello."},stress:{rhythm:"Vagotonia",frequency:"Introspection (Profondit)",description:"Stimola il nervo vago per una calma profonda e gestione emotiva."},microbiome:{rhythm:"Vagotonia",frequency:"Introspection (Profondit)",description:"L'asse intestino-cervello beneficia di stati di profonda quiete interiore."}},WL=({user:t,onNavigate:e})=>{const[n,i]=z.useState({fitness:null,sleep:null,diet:null,stress:null,microbiome:null}),[o,s]=z.useState(!1),[r,a]=z.useState(""),[l,u]=z.useState(!1),[d,h]=z.useState(null),[m,g]=z.useState(null),[v,_]=z.useState(null);z.useEffect(()=>{const j=Q=>{const ve=Ee(`assessmentHistory_${t.email}_${Q}`,[]);return ve.length>0?ve[ve.length-1].score:0},A={fitness:j("fitness"),sleep:j("sleep"),diet:j("diet"),stress:j("stress"),microbiome:j("microbiome")},D=Object.values(A).some(Q=>Q>0);s(D),D&&i({fitness:ss(A.fitness,"fitness"),sleep:ss(A.sleep,"sleep"),diet:ss(A.diet,"diet"),stress:ss(A.stress,"stress"),microbiome:ss(A.microbiome,"microbiome")});const U=Ee(`assessmentHistory_${t.email}_sleep`,[]);if(U.length>0){const Q=U[U.length-1];if(Q&&Q.answers){const ve={"Fase 1":{current:0,max:0},"Fase 2":{current:0,max:0},"Fase 3-4":{current:0,max:0},REM:{current:0,max:0}},te=un.sleep;te.questions.forEach((K,oe)=>{const ge=Q.answers[oe]||0;(K.phase?K.phase.split(" / ").map(ne=>ne.trim()):[]).forEach(ne=>{ve[ne]&&(ve[ne].current+=ge,ve[ne].max+=4)})});const re=[];Object.keys(ve).forEach(K=>{const oe=ve[K],ge=oe.max>0?Math.round(oe.current/oe.max*100):100;let le="Adeguato";ge<60?le="Insufficienza rilevata":ge<75&&(le="Insufficienza lieve"),re.push({name:K,percentage:ge,status:le})}),re.sort((K,oe)=>K.percentage-oe.percentage);const be=re.filter(K=>K.status!=="Adeguato");if(be.length>0){const K=be.slice(0,2),oe=new Set;K.forEach(ge=>{var ne;const le=(ne=te.phaseRemedies)==null?void 0:ne[ge.name];le&&le.remedies&&le.remedies.forEach(ee=>oe.add(ee))}),oe.size>0&&_({ingredients:Array.from(oe),dosage:"1-2 capsule la sera prima di dormire",phases:K.map(ge=>ge.name)})}else _(null)}else Q.score<48?_({ingredients:["Melatonina Complex","Valeriana","Passiflora"],dosage:"1 capsula 30min prima di dormire",phases:["Generale (Rifai il test per dettagli)"]}):_(null)}const R=localStorage.getItem(`birthDate_${t.email}`);R&&(a(R),u(!0));const O=localStorage.getItem(`motivationalPathStartDate_${t.email}`);h(O);const F=new Date,X=Math.floor((F.getTime()-new Date(F.getFullYear(),0,0).getTime())/1e3/60/60/24)%Im.length;g(Im[X])},[t.email]);const x=j=>{j.preventDefault(),r&&(localStorage.setItem(`birthDate_${t.email}`,r),u(!0))},y=()=>{const j=new Date().toISOString();localStorage.setItem(`motivationalPathStartDate_${t.email}`,j),h(j)},b=()=>{if(confirm("Vuoi ricominciare il percorso guidato dal primo passo?")){const j=new Date().toISOString();localStorage.setItem(`motivationalPathStartDate_${t.email}`,j),h(j)}},w=()=>{localStorage.removeItem(`motivationalPathStartDate_${t.email}`),h(null)},C=z.useMemo(()=>{if(!d)return 0;const j=new Date(d),D=Math.abs(new Date().getTime()-j.getTime());return Math.floor(D/(1e3*60*60*24))+1},[d]),E=z.useMemo(()=>C>0&&C<=Tm.length?Tm[C-1]:null,[C]),N=j=>{switch(j){case"sleep":return c.jsx(hf,{className:"w-6 h-6 text-indigo-600"});case"stress":return c.jsx(mf,{className:"w-6 h-6 text-orange-600"});case"diet":return c.jsx(gf,{className:"w-6 h-6 text-emerald-600"});case"fitness":return c.jsx(Za,{className:"w-6 h-6 text-red-600"});case"structure":return c.jsx(Za,{className:"w-6 h-6 text-blue-600"});case"emotion":return c.jsx(st,{className:"w-6 h-6 text-purple-600"});case"maintenance":return c.jsx(Tn,{className:"w-6 h-6 text-green-600"});case"beaker":return c.jsx(nr,{className:"w-6 h-6 text-indigo-600"});default:return c.jsx(st,{className:"w-6 h-6 text-sky-600"})}},T=CI(n);let S=kI(T,n);if(v){S=S.filter(A=>A.title!=="Qualit del Sonno"&&A.title!=="Gestione Ansia & Stress");const j={title:"Formulazione Galenica Personalizzata",status:"critical",description:`Dall'analisi del tuo sonno, abbiamo individuato carenze specifiche nelle fasi: ${v.phases.join(", ")}. Questa formulazione  studiata per agire in modo mirato.`,detailedContent:`
                <h4 class="font-bold text-indigo-700 mb-2">Composizione su Misura</h4>
                <p class="text-sm mb-3">Ingredienti selezionati per le tue fasi critiche:</p>
                <div class="flex flex-wrap gap-2 mb-4">
                    ${v.ingredients.map(A=>`<span class="px-2 py-1 bg-indigo-100 text-indigo-800 rounded-md text-xs font-bold">${A}</span>`).join("")}
                </div>
                <p class="text-sm font-bold text-slate-700">Posologia consigliata:</p>
                <p class="text-sm text-slate-600 mb-3">${v.dosage}</p>
                <p class="text-xs italic text-slate-500">Puoi richiedere la preparazione di questa formula direttamente al nostro laboratorio.</p>
                ${v.phases[0].includes("Generale")?'<p class="text-xs font-bold text-red-500 mt-2">NOTA: Per una formula pi precisa, rifai il Test del Sonno.</p>':""}
            `,therapies:["Richiedi preparazione in Farmacia","Monitora il sonno dopo 30gg"],actionLink:"prescriptions",iconKey:"beaker"};S.unshift(j)}const k=new Date,I=l&&r?{physical:Math.round(vo(new Date(r),k,23)),emotional:Math.round(vo(new Date(r),k,28)),intellectual:Math.round(vo(new Date(r),k,33))}:null,P=()=>{const j=new Date().toLocaleDateString("it-IT");let A=`CLINICAL WELLNESS SPA - REPORT OLISTICO
Data: ${j}
Utente: ${t.name}

`;A+=`--- PUNTEGGI BASE ---
`,A+=`Fitness: ${n.fitness??"-"}%
`,A+=`Sonno: ${n.sleep??"-"}%
`,A+=`Dietetica: ${n.diet??"-"}%
`,A+=`Stress: ${n.stress??"-"}%
`,A+=`Microbioma: ${n.microbiome??"-"}%

`,A+=`--- INDICI SINERGICI ---
`,A+=`Mente: ${T.mind??"-"}%
`,A+=`Energia: ${T.body??"-"}%
`,A+=`Emozioni: ${T.emotions??"-"}%

`,I&&(A+=`--- BIORITMI (Oggi) ---
`,A+=`Fisico: ${I.physical>0?"+":""}${I.physical}%
`,A+=`Emozionale: ${I.emotional>0?"+":""}${I.emotional}%
`,A+=`Intellettuale: ${I.intellectual>0?"+":""}${I.intellectual}%

`),M&&(A+=`--- FOCUS CONSIGLIATO ---
`,A+=`Area: ${M.area.toUpperCase()}
`,A+=`Obiettivo: ${M.focus}

`),v&&(A+=`--- FORMULAZIONE GALENICA ---
`,A+=`Target: ${v.phases.join(", ")}
`,A+=`Ingredienti: ${v.ingredients.join(", ")}
`,A+=`Posologia: ${v.dosage}

`),S.length>0&&(A+=`--- PIANO TERAPEUTICO ---
`,S.forEach(O=>{A+=`
[${O.title}] - ${O.status.toUpperCase()}
`,A+=`${O.description}
`,A+=`Terapie consigliate:
`,O.therapies.forEach(F=>A+=` - ${F}
`)}));const D=new Blob(["\uFEFF"+A],{type:"text/plain;charset=utf-8"}),U=URL.createObjectURL(D),R=document.createElement("a");R.href=U,R.download=`Wellness_Report_${j.replace(/\//g,"-")}.txt`,document.body.appendChild(R),R.click(),document.body.removeChild(R)},M=(()=>{const j=Object.entries(n).filter(([F,Y])=>Y!==null);if(j.length===0)return null;const D=j.sort((F,Y)=>F[1]-Y[1])[0];if(D[1]>70)return null;const U=GL[D[0]],R=qL[D[0]];if(!U)return null;const O=U.missions.map(F=>{var Y;return(Y=Ii.start.daily)==null?void 0:Y.find(X=>X.id===F)}).filter(Boolean);return{area:D[0],score:D[1],focus:U.focus,missions:O.slice(0,2),meditation:R}})(),V=()=>{const j=[{name:"Fitness",val:n.fitness},{name:"Sonno",val:n.sleep},{name:"Dietetica",val:n.diet},{name:"Stress",val:n.stress},{name:"Microbioma",val:n.microbiome}].filter(O=>O.val!==null);if(j.length===0)return c.jsx("p",{className:"text-slate-500 italic",children:"Completa i test per vedere l'analisi."});const A=[...j].sort((O,F)=>F.val-O.val),D=A[0],U=A[A.length-1],R=Math.round(j.reduce((O,F)=>O+F.val,0)/j.length);return c.jsxs("p",{className:"text-slate-600 text-sm leading-relaxed",children:["Il tuo ",c.jsx("strong",{children:"Wellness Index"})," attuale  ",c.jsxs("strong",{children:[R,"%"]}),". Il tuo punto di forza  l'area ",c.jsx("strong",{children:D.name})," (",D.val,"%), continua cos!",D.name!==U.name&&c.jsxs(c.Fragment,{children:["L'area che richiede pi attenzione  ",c.jsx("strong",{children:U.name})," (",U.val,"%), che potrebbe influenzare negativamente il tuo equilibrio. Consulta il Piano Terapeutico qui sotto per strategie mirate."]})]})},W=(j,A,D)=>{const U=A>20?"high":A<-20?"low":"critical",R=D===null?"unknown":D>60?"strong":"weak";let O="",F="";return j==="physical"?U==="high"&&R==="strong"?(O="Performance Ottimale",F="Oggi  il giorno giusto per allenamenti intensi o sfide fisiche."):U==="high"&&R==="weak"?(O="Spinta Energetica",F="Il bioritmo ti sostiene nonostante la stanchezza di fondo. Buon momento per riprendere l'attivit."):U==="low"&&R==="strong"?(O="Mantenimento",F="Hai buone riserve, ma il ciclo  basso. Non esagerare con gli sforzi."):U==="low"&&R==="weak"?(O="Riposo Necessario",F="Doppia criticit. Dedicati al recupero, stretching o sonno extra."):(O="Fase di Transizione",F="Attenzione agli infortuni, evita sforzi improvvisi."):j==="emotional"?U==="high"&&R==="strong"?(O="Carisma e Socialit",F="Ottimo momento per relazioni e creativit."):U==="high"&&R==="weak"?(O="Resilienza",F="Il bioritmo ti aiuta a gestire lo stress accumulato. Giornata buona per risolvere conflitti."):U==="low"?(O="Introspezione",F="Potresti sentirti pi sensibile. Evita discussioni importanti oggi."):(O="Equilibrio Instabile",F="Umore variabile, pratica la coerenza cardiaca."):j==="intellectual"&&(U==="high"?(O="Focus Mentale",F="Capacit di apprendimento e concentrazione al massimo."):U==="low"?(O="Routine",F="Evita decisioni complesse o studio intenso. Meglio attivit ripetitive."):(O="Criticit",F="Possibili distrazioni. Rivedi due volte il tuo lavoro.")),{title:O,body:F}},q=({type:j,label:A,compositeValue:D,bioValue:U,borderClass:R,bgClass:O,iconColorClass:F})=>{const Y=I?W(j,U,D):null;return c.jsxs("div",{className:`p-4 rounded-xl border-2 ${R} ${O} shadow-md h-full flex flex-col justify-between`,children:[c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold text-sm uppercase tracking-wider mb-4 ${F}`,children:A}),c.jsxs("div",{className:"space-y-3 mb-4",children:[c.jsxs("div",{className:"flex justify-between items-center border-b border-slate-200/50 pb-2",children:[c.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Livello Base"}),c.jsx("span",{className:"text-xl font-black text-slate-700",children:D!==null?`${D}%`:"-"})]}),I&&c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Bioritmo Oggi"}),c.jsxs("span",{className:`text-xl font-black ${U>=0?"text-green-600":"text-red-500"}`,children:[U>0?"+":"",U,"%"]})]})]})]}),c.jsx("div",{className:"mt-auto pt-3 border-t border-slate-200/60",children:Y?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:`font-bold text-xs mb-1 ${F}`,children:Y.title}),c.jsx("p",{className:"text-xs text-slate-600 leading-relaxed font-medium",children:Y.body})]}):c.jsx("p",{className:"text-xs text-slate-400 italic",children:"Inserisci la data di nascita per i consigli giornalieri."})})]})};return o?c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-32 max-w-7xl mx-auto",children:[c.jsxs("header",{className:"mb-8 flex flex-col md:flex-row md:items-end justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800",children:"Wellness Dashboard"}),c.jsx("p",{className:"text-xl text-slate-600",children:"Analisi olistica del tuo stato di salute e longevit."})]}),c.jsxs("div",{className:"text-right hidden md:block",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Ultimo aggiornamento"}),c.jsx("p",{className:"font-mono font-semibold text-slate-700",children:new Date().toLocaleDateString()}),c.jsxs("button",{onClick:P,className:"mt-2 text-xs flex items-center justify-end gap-1 text-sky-600 hover:text-sky-800 font-bold w-full",children:[c.jsx(Ef,{className:"w-4 h-4"})," Scarica Report (.txt)"]})]})]}),c.jsx($L,{user:t}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-slate-100",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-6 bg-sky-500 rounded-full"}),"Radar Benessere"]}),c.jsx("div",{className:"flex justify-center relative",children:c.jsx(EI,{scores:n,composites:T})}),c.jsxs("div",{className:"mt-6 bg-slate-50 rounded-xl p-4 border border-slate-200",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(st,{className:"w-4 h-4 text-sky-600"}),c.jsx("h3",{className:"font-bold text-sm text-slate-700 uppercase tracking-wide",children:"Analisi Sintetica"})]}),V()]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsx(q,{type:"physical",label:"Energia & Fisico",compositeValue:T.body,bioValue:I==null?void 0:I.physical,bgClass:"bg-emerald-50",borderClass:"border-emerald-500",iconColorClass:"text-emerald-800"}),c.jsx(q,{type:"intellectual",label:"Mente & Intelletto",compositeValue:T.mind,bioValue:I==null?void 0:I.intellectual,bgClass:"bg-sky-50",borderClass:"border-sky-500",iconColorClass:"text-sky-800"}),c.jsx(q,{type:"emotional",label:"Cuore & Emozioni",compositeValue:T.emotions,bioValue:I==null?void 0:I.emotional,bgClass:"bg-orange-50",borderClass:"border-orange-500",iconColorClass:"text-orange-800"})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-slate-100 h-full flex flex-col",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-6 bg-emerald-500 rounded-full"}),"Mappa del Benessere"]}),c.jsx("div",{className:"flex-grow",children:c.jsx(TI,{scores:n,composites:T,gender:t.gender||"female"})})]})]}),M&&c.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-2xl shadow-lg border border-indigo-100 mb-12 animate-fade-in",children:c.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-6",children:[c.jsx("div",{className:"flex-shrink-0 p-4 bg-white rounded-full shadow-sm",children:c.jsx(st,{className:"w-8 h-8 text-purple-600"})}),c.jsxs("div",{className:"flex-grow w-full",children:[c.jsxs("h2",{className:"text-lg font-bold text-slate-800 mb-1",children:["Focus Consigliato: ",c.jsx("span",{className:"text-purple-700 uppercase",children:M.focus})]}),c.jsxs("p",{className:"text-slate-600 mb-4 text-sm leading-relaxed",children:["Il tuo punteggio in ",c.jsx("strong",{children:M.area.toUpperCase()}),"  basso (",M.score,'%). Questo influenza negativamente la tua energia "Base".']}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:M.missions.map(j=>c.jsx("div",{className:"bg-white p-3 rounded-xl border border-indigo-100 shadow-sm flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-2xl",children:j.Icon}),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-700 text-sm",children:j.title}),c.jsx("p",{className:"text-xs text-slate-500",children:j.description})]})]})},j.id))}),M.meditation&&c.jsxs("div",{className:"mt-4 bg-white/60 p-4 rounded-xl border border-indigo-200",children:[c.jsxs("h3",{className:"font-bold text-indigo-800 text-sm flex items-center gap-2 mb-2",children:[c.jsx(Pl,{className:"w-4 h-4"})," Protocollo Meditativo Consigliato"]}),c.jsx("p",{className:"text-sm text-slate-700 mb-2",children:M.meditation.description}),c.jsxs("div",{className:"flex flex-wrap gap-2 text-xs font-semibold",children:[c.jsxs("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full",children:["Ritmo: ",M.meditation.rhythm]}),c.jsxs("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full",children:["Frequenza: ",M.meditation.frequency]})]}),c.jsx("button",{onClick:()=>e("breathing"),className:"mt-3 text-xs font-bold text-indigo-600 hover:text-indigo-800 underline",children:"Vai alla Meditazione Guidata "})]}),c.jsx("div",{className:"mt-4 text-right",children:c.jsx("button",{onClick:()=>e("wellnessRoutine"),className:"text-sm font-bold text-purple-600 hover:text-purple-800 underline",children:"Vai alla Routine Completa "})})]})]})}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-8 mb-12 border border-purple-100",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:c.jsx(xf,{className:"w-6 h-6 text-purple-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"BioPulse: Onda Temporale"}),c.jsx("p",{className:"text-slate-500 text-sm",children:"Visualizza l'andamento dei tuoi cicli nei prossimi giorni."})]})]}),l?c.jsxs("div",{children:[c.jsx(II,{birthDate:new Date(r),targetDate:new Date}),c.jsxs("div",{className:"mt-6 flex flex-wrap justify-center gap-4 md:gap-8",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-green-50 px-3 py-1.5 rounded-lg border border-green-200",children:[c.jsx(Jy,{className:"w-5 h-5 text-green-600"}),c.jsx("span",{className:"text-xs font-bold text-green-800",children:"Fisico (23gg)"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-orange-50 px-3 py-1.5 rounded-lg border border-orange-200",children:[c.jsx(Yy,{className:"w-5 h-5 text-orange-500"}),c.jsx("span",{className:"text-xs font-bold text-orange-800",children:"Emotivo (28gg)"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-sky-50 px-3 py-1.5 rounded-lg border border-sky-200",children:[c.jsx(Wy,{className:"w-5 h-5 text-sky-600"}),c.jsx("span",{className:"text-xs font-bold text-sky-800",children:"Intellettuale (33gg)"})]})]})]}):c.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl text-center",children:[c.jsx("p",{className:"text-slate-600 mb-4",children:"Per calcolare i tuoi bioritmi, abbiamo bisogno della tua data di nascita."}),c.jsxs("form",{onSubmit:x,className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[c.jsx("input",{type:"date",required:!0,value:r,onChange:j=>a(j.target.value),className:"p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-white"}),c.jsx("button",{type:"submit",className:"px-6 py-3 bg-purple-600 text-white font-bold rounded-lg hover:bg-purple-700 transition-colors",children:"Calcola Bioritmi"})]})]})]}),c.jsx("div",{className:"mb-12",children:c.jsx(VL,{customSleepFormulation:v})}),c.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl shadow-xl p-8 mb-12 text-white overflow-hidden relative",children:[c.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:c.jsx(st,{className:"w-32 h-32 text-white"})}),d?c.jsxs("div",{className:"relative z-10",children:[c.jsx("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:" Percorso Guidato al Cambiamento"}),C>14?c.jsxs("div",{className:"text-center py-6",children:[c.jsx("h3",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-600 mb-4",children:" Missione Compiuta!"}),c.jsx("p",{className:"text-slate-300 mb-2",children:"Hai completato i 14 giorni di attivazione. Queste nuove abitudini sono ora parte di te."}),c.jsx("p",{className:"text-slate-400 mb-8 text-sm",children:"Ora puoi scegliere se mantenere queste abitudini con l'ispirazione quotidiana o ricominciare il ciclo per rafforzarle."}),m&&c.jsxs("div",{className:"bg-white/10 p-4 rounded-xl mb-8 max-w-lg mx-auto",children:[c.jsx("p",{className:"text-sm text-sky-200 mb-2",children:"La tua ispirazione finale:"}),c.jsxs("p",{className:"italic",children:['"',m.text,'"']})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[c.jsx("button",{onClick:w,className:"bg-white text-slate-900 font-bold py-3 px-6 rounded-full shadow-lg hover:bg-slate-100 transition-colors",children:"Vai al Mantenimento (Ispirazione Quotidiana)"}),c.jsx("button",{onClick:b,className:"text-slate-400 hover:text-white underline text-sm",children:"Ricomincia il ciclo dal Giorno 1"})]})]}):c.jsxs("div",{children:[E&&c.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/10",children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center",children:[c.jsxs("div",{className:"flex-grow text-center md:text-left",children:[c.jsx("h3",{className:"text-lg font-medium text-sky-200 mb-2 uppercase tracking-wider",children:"Messaggio del Giorno"}),c.jsxs("p",{className:"text-xl md:text-2xl font-bold text-white mb-4 leading-relaxed",children:['"',E.message,'"']}),c.jsxs("div",{className:"inline-block bg-slate-800 px-4 py-2 rounded-lg border border-slate-600",children:[c.jsx("p",{className:"text-sm text-slate-400 italic mb-1",children:E.category}),c.jsx("p",{className:"text-md text-sky-100 font-serif",children:E.quote})]})]}),c.jsxs("div",{className:"flex-shrink-0 text-center",children:[c.jsx("div",{className:"w-20 h-20 rounded-full bg-sky-500/20 border-2 border-sky-500 flex items-center justify-center text-2xl font-bold text-white mb-2 mx-auto",children:C}),c.jsx("span",{className:"text-xs uppercase text-slate-400 font-bold tracking-widest",children:"Passo"})]})]})}),c.jsx("div",{className:"mt-4 text-right",children:c.jsx("button",{onClick:b,className:"text-xs text-slate-500 hover:text-slate-300",children:"Reset Percorso"})})]})]}):c.jsxs("div",{className:"relative z-10 text-center",children:[c.jsx("h2",{className:"text-xl font-bold text-sky-200 mb-2 uppercase tracking-wide",children:" Ispirazione Quotidiana"}),m?c.jsxs("div",{className:"py-6",children:[c.jsxs("p",{className:"text-2xl md:text-3xl font-bold text-white mb-6 leading-relaxed font-serif italic",children:['"',m.text,'"']}),c.jsx("span",{className:"inline-block bg-white/20 px-4 py-1 rounded-full text-sm text-sky-100 font-semibold",children:m.category})]}):c.jsx("p",{children:"Caricamento..."}),c.jsxs("div",{className:"mt-8 border-t border-white/10 pt-6",children:[c.jsx("p",{className:"text-lg text-slate-300 mb-4",children:"Vuoi un cambiamento radicale? Inizia il percorso guidato."}),c.jsx("button",{onClick:y,className:"bg-sky-500 hover:bg-sky-400 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-transform hover:scale-105",children:"Inizia il Percorso di Trasformazione"})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-slate-100 to-slate-200 rounded-2xl shadow-xl p-8 mb-12 text-slate-800 flex flex-col md:flex-row items-center justify-between gap-6 border border-slate-300",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold mb-2 flex items-center gap-3",children:[c.jsx(vf,{className:"w-8 h-8 text-sky-600"}),"Analisi Cliniche Consigliate"]}),c.jsx("p",{className:"text-slate-600 max-w-2xl",children:"Hai completato i test di autovalutazione. Per ottenere un quadro clinico completo e personalizzato, prenota le analisi specifiche consigliate per i tuoi obiettivi di salute in CLINICAL WELLNESS SPA presso Farmacia Centrale Montesilvano."})]}),c.jsxs("button",{onClick:()=>e("analysisQuote"),className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-3 px-8 rounded-lg transition-colors shadow-lg whitespace-nowrap flex items-center gap-2",children:[c.jsx("span",{children:"Scegli i tuoi obiettivi"}),c.jsx(Ou,{className:"w-5 h-5 rotate-180"})]})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 border-b border-slate-200 pb-4",children:"Piano Terapeutico Integrato"}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:S.map((j,A)=>c.jsx("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden border-t-4 ${j.status==="critical"?"border-red-500":j.status==="moderate"?"border-yellow-500":"border-green-500"}`,children:c.jsxs("div",{className:"p-6 flex flex-col h-full",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${j.status==="critical"?"bg-red-50":j.status==="moderate"?"bg-yellow-50":"bg-green-50"}`,children:N(j.iconKey)}),c.jsx("h3",{className:"text-xl font-bold text-slate-800",children:j.title})]}),j.status==="critical"&&c.jsxs("div",{className:"flex items-center gap-1 text-red-600 font-bold bg-red-50 px-2 py-1 rounded text-sm",children:[c.jsx(jo,{className:"w-4 h-4"})," ",c.jsx("span",{children:"Critico"})]}),j.status==="moderate"&&c.jsxs("div",{className:"flex items-center gap-1 text-yellow-600 font-bold bg-yellow-50 px-2 py-1 rounded text-sm",children:[c.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500"})," ",c.jsx("span",{children:"Moderato"})]}),j.status==="optimal"&&c.jsxs("div",{className:"flex items-center gap-1 text-green-600 font-bold bg-green-50 px-2 py-1 rounded text-sm",children:[c.jsx(Tn,{className:"w-4 h-4"})," ",c.jsx("span",{children:"Ottimale"})]})]}),c.jsx("p",{className:"text-slate-600 mb-6 text-sm leading-relaxed",children:j.description}),c.jsx("div",{className:"flex-grow",children:j.detailedContent?c.jsx("div",{className:"bg-slate-50 rounded-xl p-5 border border-slate-100 prose prose-sm max-w-none mb-4",dangerouslySetInnerHTML:{__html:j.detailedContent}}):c.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 mb-4",children:[c.jsx("h4",{className:"font-bold text-xs text-slate-500 uppercase tracking-wider mb-3",children:"Protocollo Consigliato"}),c.jsx("ul",{className:"space-y-2",children:j.therapies.map((D,U)=>c.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-700",children:[c.jsx("span",{className:"w-1.5 h-1.5 bg-sky-500 rounded-full mt-1.5 flex-shrink-0"}),D]},U))})]})}),j.actionLink&&c.jsxs("button",{onClick:()=>e(j.actionLink),className:"w-full mt-auto py-2 px-4 bg-sky-100 text-sky-700 font-semibold rounded-lg hover:bg-sky-200 transition-colors text-sm flex items-center justify-center gap-2",children:["Vai alla risorsa consigliata ",c.jsx(Ou,{className:"w-4 h-4 rotate-180"})]})]})},A))})]}),c.jsx("div",{className:"mt-12 text-center text-slate-400 text-sm",children:c.jsx("p",{children:"Analisi basata su algoritmi di intelligenza artificiale clinica. I risultati non sostituiscono il parere medico."})})]}):c.jsx("div",{className:"p-8 animate-fade-in text-center",children:c.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow-xl p-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-4",children:"Wellness Dashboard"}),c.jsx("p",{className:"text-slate-600 mb-8",children:"Non hai ancora dati sufficienti per generare la tua mappa della longevit. Completa i test di autovalutazione per sbloccare questa funzione."}),c.jsx("button",{onClick:()=>e("assessments"),className:"bg-sky-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-sky-700 transition-colors shadow-lg",children:"Vai ai Test"})]})})},JL=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),c.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),H_=t=>c.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"m6 9 6 6 6-6"})}),YL=({user:t,showNotification:e,wellnessData:n})=>{const[i,o]=z.useState({}),[s,r]=z.useState([]),[a,l]=z.useState(new Set),[u,d]=z.useState(null),h=z.useMemo(()=>({missionStates:`missionStates_${t.email}`,manualUnlocks:`manualUnlocks_${t.email}`,reminders:`activeReminders_${t.email}`}),[t.email]);z.useEffect(()=>{const w=Ee(h.missionStates,{}),C=Ee(h.manualUnlocks,[]),E=Ee(h.reminders,[]);o(w),r(C),l(new Set(E))},[h]);const m=z.useMemo(()=>{var E;let w=0;const C={};for(const N of Object.values(n)){let T=0;const S=[...N.daily||[],...N.weekly||[]];for(const k of S)(E=i[k.id])!=null&&E.completed&&(T+=k.points);N.id&&(C[N.id]={name:N.name,points:T,dependsOn:N.dependsOn,unlocksAt:N.unlocksAt},w+=T)}return{total:w,byProgram:C}},[i,n]),g=(w,C)=>{o(E=>{var k;const N={...E},T=((k=N[w])==null?void 0:k.completed)||!1;N[w]={...N[w],completed:!T},localStorage.setItem(h.missionStates,JSON.stringify(N));const S=T?"Missione annullata.":`Missione completata! +${C} punti!`;return e(S,"success"),N})},v=w=>{var V,W;const C=new Date;let E=8,N=0;if((V=w.reminderConfig)!=null&&V.time){const q=w.reminderConfig.time.split(":");q.length===2&&(E=parseInt(q[0],10),N=parseInt(q[1],10))}else(W=w.reminderConfig)!=null&&W.startHour&&(E=w.reminderConfig.startHour);const T=new Date(C);T.setDate(T.getDate()+1),T.setHours(E,N,0,0);const S=q=>q.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",k=`Wellness: ${w.title}`,I=`Promemoria benessere: ${w.description}`,P=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//ClinicalWellnessSpa//Benessere//IT
BEGIN:VEVENT
UID:${new Date().getTime()}@clinicalwellness.com
DTSTAMP:${S(new Date)}
DTSTART:${S(T)}
RRULE:FREQ=DAILY
SUMMARY:${k}
DESCRIPTION:${I}
BEGIN:VALARM
TRIGGER:-PT15M
ACTION:DISPLAY
DESCRIPTION:Reminder
END:VALARM
END:VEVENT
END:VCALENDAR`,L=new Blob([P],{type:"text/calendar;charset=utf-8"}),M=document.createElement("a");M.href=window.URL.createObjectURL(L),M.setAttribute("download",`${w.title.replace(/\s+/g,"_")}.ics`),document.body.appendChild(M),M.click(),document.body.removeChild(M)},_=w=>{window.confirm(`Vuoi aggiungere questo promemoria ("${w.title}") al tuo Calendario (Google/Apple)?`)&&(v(w),e("Evento calendario scaricato. Aprilo per salvarlo.","success")),l(E=>{const N=new Set(E);return N.has(w.id)?N.delete(w.id):N.add(w.id),localStorage.setItem(h.reminders,JSON.stringify(Array.from(N))),N})},x=z.useMemo(()=>{const w={start:{title:" Routine Base del Benessere",programs:[]},food:{title:" Alimentazione",programs:[]},sleep:{title:" Sonno",programs:[]},anxiety_stress:{title:" Ansia & Stress",programs:[]},activity:{title:" Movimento",programs:[]},smart:{title:" Programmi Smart",programs:[]}};Object.values(n).forEach(C=>{C.id==="start"?w.start.programs.push(C):C.id.startsWith("food")?w.food.programs.push(C):C.id.startsWith("sleep")?w.sleep.programs.push(C):C.id.startsWith("anxiety_stress")?w.anxiety_stress.programs.push(C):C.id.startsWith("activity")?w.activity.programs.push(C):C.isSmart&&w.smart.programs.push(C)});for(const C in w)w[C].programs.sort((E,N)=>{var k,I;const T=parseInt(((k=E.id.match(/\d+$/))==null?void 0:k[0])||"1"),S=parseInt(((I=N.id.match(/\d+$/))==null?void 0:I[0])||"1");return E.id.includes("gold")?-1:N.id.includes("gold")?1:T-S});return w},[n]),y=({program:w})=>{var I,P,L;const C=((I=m.byProgram[w.id])==null?void 0:I.points)||0,E=s.includes(w.id);let N=!1,T=0;const S=w.dependsOn?m.byProgram[w.dependsOn]:null;if(S&&typeof w.unlocksAt=="number"&&!E){const M=S.points||0;M<w.unlocksAt&&(N=!0,T=w.unlocksAt-M)}const k=u===w.id;return N&&S?c.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 opacity-60",children:c.jsxs("div",{className:"flex items-center justify-center gap-4 text-center",children:[c.jsx(Ml,{className:"w-8 h-8 text-slate-400"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-600",children:w.name}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Richiede ",w.unlocksAt,' punti in "',S.name,'". Mancano ',T," punti."]})]})]})}):c.jsxs("div",{className:"bg-white rounded-xl shadow-lg",children:[c.jsxs("button",{className:"w-full text-left p-4 flex justify-between items-center",onClick:()=>d(k?null:w.id),"aria-expanded":k,children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-3xl",children:w.Icon}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800",children:w.name}),c.jsx("p",{className:"text-slate-500",children:w.subtitle})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{className:"font-bold text-sky-600 text-lg",children:[C," Punti"]}),c.jsx(H_,{className:`w-6 h-6 text-slate-500 transition-transform ${k?"rotate-180":""}`})]})]}),k&&c.jsxs("div",{className:"p-4 border-t border-slate-200 animate-fade-in",children:[c.jsx("p",{className:"text-slate-600 mb-4",children:w.description}),w.daily&&w.daily.length>0&&c.jsx("h4",{className:"font-bold text-slate-700 mb-2 mt-4",children:"Missioni Giornaliere"}),c.jsx("ul",{className:"space-y-3",children:(P=w.daily)==null?void 0:P.map(M=>{var V,W,q;return c.jsxs("li",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-xl",children:M.Icon}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-700",children:M.title}),c.jsx("p",{className:"text-sm text-slate-500",children:M.description})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[M.remindable&&c.jsx("button",{onClick:()=>_(M),className:`p-2 rounded-full transition-colors ${a.has(M.id)?"bg-sky-100 text-sky-600":"text-slate-400 hover:bg-slate-200"}`,"aria-label":a.has(M.id)?"Disattiva promemoria":"Attiva promemoria",title:"Aggiungi al calendario",children:c.jsx(JL,{className:"w-5 h-5"})}),c.jsxs("button",{onClick:()=>g(M.id,M.points),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-bold rounded-full transition-colors bg-white border-2",style:{borderColor:(V=i[M.id])!=null&&V.completed?"#22c55e":"#e2e8f0",color:(W=i[M.id])!=null&&W.completed?"#166534":"#334155"},children:[((q=i[M.id])==null?void 0:q.completed)&&c.jsx(Tn,{className:"w-5 h-5 text-green-600"}),c.jsxs("span",{children:[M.points," Punti"]})]})]})]},M.id)})}),w.weekly&&w.weekly.length>0&&c.jsx("h4",{className:"font-bold text-slate-700 mb-2 mt-4",children:"Missioni Settimanali"}),c.jsx("ul",{className:"space-y-3",children:(L=w.weekly)==null?void 0:L.map(M=>{var V,W,q;return c.jsxs("li",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-xl",children:M.Icon}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-700",children:M.title}),c.jsx("p",{className:"text-sm text-slate-500",children:M.description})]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("button",{onClick:()=>g(M.id,M.points),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-bold rounded-full transition-colors bg-white border-2",style:{borderColor:(V=i[M.id])!=null&&V.completed?"#22c55e":"#e2e8f0",color:(W=i[M.id])!=null&&W.completed?"#166534":"#334155"},children:[((q=i[M.id])==null?void 0:q.completed)&&c.jsx(Tn,{className:"w-5 h-5 text-green-600"}),c.jsxs("span",{children:[M.points," Punti"]})]})})]},M.id)})})]})]})},b=["start","food","sleep","anxiety_stress","activity","smart"];return c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in",children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"La Tua Routine di Benessere"}),c.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Completa le missioni, accumula punti e sblocca nuovi livelli!"}),c.jsxs("div",{className:"bg-sky-600 text-white p-6 rounded-2xl shadow-lg mb-8 text-center",children:[c.jsx("p",{className:"text-lg text-sky-200",children:"Punti Benessere Totali"}),c.jsx("p",{className:"text-5xl font-bold",children:m.total})]}),b.map(w=>{const C=x[w];return!C||C.programs.length===0?null:c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:C.title}),c.jsx("div",{className:"space-y-4",children:C.programs.map(E=>c.jsx(y,{program:E},E.id))})]},w)})]})},KL=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),c.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),QL=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}),c.jsx("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}),c.jsx("path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"}),c.jsx("line",{x1:"2",x2:"22",y1:"2",y2:"22"})]}),XL="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",ls={coherence:{name:"5-5 Coerenza Cardiaca",inhale:5,hold:0,exhale:5},vagotonia:{name:"4-6 Vagotonia",inhale:4,hold:0,exhale:6},sleep:{name:"4-7-8 Sonno",inhale:4,hold:7,exhale:8},training:{name:"6-6 Allenamento",inhale:6,hold:0,exhale:6}},l0=[{label:" Solo Ding (Silenzio)",value:XL},{label:" Relax (Healing)",value:"/CLINICAL-WELLNESS-SPA/audio/432hz_healing.mp3"},{label:" 7 Chakra",value:"/CLINICAL-WELLNESS-SPA/audio/7-chackra.mp3"},{label:" Mind",value:"/CLINICAL-WELLNESS-SPA/audio/Comunicativita.mp3"},{label:" Introspezione",value:"/CLINICAL-WELLNESS-SPA/audio/Perdono.mp3"}];let ma=null;const ZL=async()=>{try{"wakeLock"in navigator&&(ma=await navigator.wakeLock.request("screen"))}catch(t){console.warn("WakeLock non disponibile:",t)}},eD=async()=>{try{ma&&(await ma.release(),ma=null)}catch{}},tD=()=>{const[t,e]=z.useState(300),[n,i]=z.useState("coherence"),[o,s]=z.useState(l0[1].value),[r,a]=z.useState(!1),[l,u]=z.useState(""),[d,h]=z.useState("Pronto"),[m,g]=z.useState(.6),[v,_]=z.useState(300),[x,y]=z.useState(0),[b,w]=z.useState("closed"),[C,E]=z.useState(.5),[N,T]=z.useState(.7),S=z.useRef(null),k=z.useRef(null),I=z.useRef(null),P=z.useRef([]),L=z.useRef(null),M=z.useRef(null),V=z.useRef(!1),W=z.useRef(null);z.useEffect(()=>{_(t)},[t]),z.useEffect(()=>{const R=W.current;if(!R)return;(async()=>{try{await R.play()}catch{console.warn("Keep-alive video requires user interaction")}})()},[]),z.useEffect(()=>{V.current=r},[r]),z.useEffect(()=>{I.current&&(I.current.src=o,I.current.load())},[o]);const q=(R,O,F,Y)=>{try{const X=R.createOscillator(),Q=R.createGain();X.type="sine",X.frequency.value=Y,X.connect(Q),Q.connect(O),Q.gain.setValueAtTime(0,F),Q.gain.linearRampToValueAtTime(1,F+.05),Q.gain.exponentialRampToValueAtTime(.001,F+2),X.start(F),X.stop(F+2.5),P.current.push(X)}catch(X){console.warn("Errore scheduleDing:",X)}},j=R=>{const O=R.currentTime;let F=O+.1;const Y=O+t,X=ls[n];for(;F<Y;)q(R,k.current,F,432),F+=X.inhale+(X.hold||0),F<Y&&q(R,k.current,F,216),F+=X.exhale},A=()=>{L.current&&(window.clearTimeout(L.current),L.current=null),M.current&&(window.clearInterval(M.current),M.current=null),P.current.forEach(R=>{var O;try{R.stop(),(O=R.disconnect)==null||O.call(R)}catch{}}),P.current=[]},D=async()=>{if(u(""),A(),I.current&&(I.current.volume=C),I.current)try{await I.current.play()}catch(R){console.warn("Errore play bgAudio:",R),u("Errore nella riproduzione audio. Controlla connessione o file.");return}if(!S.current){const R=window.AudioContext||window.webkitAudioContext;S.current=new R,k.current=S.current.createGain(),k.current.connect(S.current.destination)}if(S.current.state==="suspended")try{await S.current.resume()}catch(R){console.warn("Errore resume AudioContext:",R)}k.current&&(k.current.gain.value=N),b==="closed"&&S.current&&j(S.current),a(!0),_(t),y(0),h("Inspira"),g(1),M.current=window.setInterval(()=>{_(R=>R<=1?(U(),0):R-1)},1e3),ZL()},U=()=>{a(!1),A(),I.current&&(I.current.pause(),I.current.currentTime=0),h("Pronto"),g(.6),eD()};return z.useEffect(()=>{I.current&&(I.current.volume=C),k.current&&(k.current.gain.value=N)},[C,N]),z.useEffect(()=>()=>{if(U(),S.current)try{S.current.close()}catch{}},[]),z.useEffect(()=>{if(!V.current)return;const R=ls[n],O=()=>{V.current&&(h("Inspira"),g(1),L.current=window.setTimeout(()=>{R.hold>0?(h("Trattieni"),L.current=window.setTimeout(()=>{h("Espira"),g(.6),L.current=window.setTimeout(()=>{y(F=>F+1),O()},R.exhale*1e3)},R.hold*1e3)):(h("Espira"),g(.6),L.current=window.setTimeout(()=>{y(F=>F+1),O()},R.exhale*1e3))},R.inhale*1e3))};O()},[r,n]),c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in flex flex-col items-center justify-center min-h-full pb-32 text-center",children:[c.jsxs("div",{className:"w-full max-w-lg bg-white p-6 rounded-3xl shadow-xl border border-slate-100",children:[c.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[c.jsx(Pl,{className:"w-8 h-8 text-sky-600"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Meditazione Guidata"})]}),c.jsxs("div",{className:"space-y-4 mb-6",children:[c.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[c.jsxs("button",{onClick:()=>w("open"),className:`flex-1 py-2 rounded-lg font-bold flex justify-center items-center gap-2 ${b==="open"?"bg-white shadow-sm text-sky-600":"text-slate-500"}`,children:[c.jsx(KL,{className:"w-4 h-4"}),"Visiva"]}),c.jsxs("button",{onClick:()=>w("closed"),className:`flex-1 py-2 rounded-lg font-bold flex justify-center items-center gap-2 ${b==="closed"?"bg-white shadow-sm text-emerald-600":"text-slate-500"}`,children:[c.jsx(QL,{className:"w-4 h-4"}),"Sonora"]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-3 text-left",children:[c.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-2 mt-2",children:"Durata"}),c.jsxs("select",{value:t,onChange:R=>e(parseInt(R.target.value)),disabled:r,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-semibold",children:[c.jsx("option",{value:300,children:"5 Minuti"}),c.jsx("option",{value:600,children:"10 Minuti"}),c.jsx("option",{value:900,children:"15 Minuti"}),c.jsx("option",{value:1800,children:"30 Minuti"})]}),c.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase ml-2",children:"Protocollo e Musica"}),c.jsx("select",{value:n,onChange:R=>i(R.target.value),disabled:r,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-semibold",children:Object.entries(ls).map(([R,O])=>c.jsx("option",{value:R,children:O.name},R))}),c.jsx("select",{value:o,onChange:R=>s(R.target.value),disabled:r,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-semibold",children:l0.map(R=>c.jsx("option",{value:R.value,children:R.label},R.label))})]}),c.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl space-y-3 border border-slate-100",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-[10px] font-black text-slate-400 w-16 uppercase text-left",children:"Musica"}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:C,onChange:R=>E(parseFloat(R.target.value)),className:"flex-grow h-1.5 bg-slate-200 rounded-lg accent-sky-500 cursor-pointer"}),c.jsxs("span",{className:"text-[10px] font-bold text-slate-500 w-8",children:[Math.round(C*100),"%"]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-[10px] font-black text-slate-400 w-16 uppercase text-left",children:"Ding"}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:N,onChange:R=>T(parseFloat(R.target.value)),className:"flex-grow h-1.5 bg-slate-200 rounded-lg accent-emerald-500 cursor-pointer"}),c.jsxs("span",{className:"text-[10px] font-bold text-slate-500 w-8",children:[Math.round(N*100),"%"]})]})]})]}),l&&c.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-600 rounded-xl text-xs font-bold animate-pulse",children:[" ",l]}),c.jsxs("div",{className:"relative w-64 h-64 mx-auto mb-8 flex items-center justify-center",children:[c.jsx("div",{className:`absolute inset-0 bg-sky-200 rounded-full blur-2xl opacity-20 transition-transform duration-[4000ms] ${r?"scale-125":"scale-100"}`}),c.jsx("div",{className:"w-full h-full bg-gradient-to-br from-sky-400 to-blue-600 rounded-full shadow-2xl transition-all ease-in-out",style:{transform:`scale(${m})`,transitionDuration:r?d==="Inspira"?`${ls[n].inhale}s`:`${ls[n].exhale}s`:"0.5s"}}),c.jsx("div",{className:"absolute font-black text-3xl text-slate-800 uppercase tracking-tighter drop-shadow-sm pointer-events-none",children:d})]}),c.jsxs("div",{className:"flex justify-around mb-8 bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Cicli"}),c.jsx("p",{className:"text-2xl font-bold text-slate-700",children:x})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Tempo"}),c.jsxs("p",{className:"text-2xl font-mono font-bold text-slate-700",children:[Math.floor(v/60),":",String(v%60).padStart(2,"0")]})]})]}),c.jsx("button",{onClick:r?U:D,className:`w-full py-4 rounded-2xl text-white font-bold text-lg shadow-lg transform active:scale-95 transition-all ${r?"bg-slate-700":"bg-gradient-to-r from-sky-500 to-blue-600 hover:from-sky-600 hover:to-blue-700"}`,children:r?"Termina Sessione":"Inizia Respirazione"})]}),c.jsx("audio",{ref:I,loop:!0,playsInline:!0,preload:"auto",style:{display:"none"}}),c.jsx("video",{ref:W,playsInline:!0,muted:!0,loop:!0,preload:"auto",style:{position:"absolute",opacity:0,width:1,height:1,pointerEvents:"none"},children:c.jsx("source",{src:"/CLINICAL-WELLNESS-SPA/silent.mp4",type:"video/mp4"})})]})},c0={programs:[{name:"Stress Management",duration:"60 min",price:60,package4:215,description:"Programma integrato per la gestione dello stress e il riequilibrio psicofisico."},{name:"Sleep Program",duration:"60 min",price:60,package4:215,description:"Un percorso mirato a migliorare la qualit del sonno e favorire il rilassamento profondo."},{name:"Performance Program",duration:"60 min",price:60,package4:215,description:"Ideato per ottimizzare le energie e migliorare le capacit fisiche e mentali."},{name:"Longevity Program",duration:"1h 15 min",price:80,package4:290,description:"Percorso orientato alla prevenzione e al mantenimento della vitalit nel tempo."},{name:"Wellness Program",duration:"60 min",price:60,package4:215,description:"Programma completo per raggiungere uno stato di benessere generale e rigenerazione."}],treatments:[{category:"Massaggi",items:[{name:"Massaggio Linfodrenante",duration:"50 min",price:50,package4:180},{name:"Massaggio Connettivale",duration:"50 min",price:50,package4:180,package6:270,package10:450},{name:"Massaggio Tuina",duration:"50 min",price:50,package4:180},{name:"Massaggio Antistress",duration:"1h 15 min",price:80,package4:290},{name:"Massaggio Bioenergetico",duration:"1h 15 min",price:80,package4:290},{name:"Riflessologia Plantare",duration:"50 min",price:50,package4:180},{name:"Massaggio con Coppettazione",duration:"50 min",price:50,package4:180},{name:"Massaggio Relax",duration:"60 min",price:60,package4:215}]},{category:"Trattamenti Anti-Cellulite",items:[{name:"Connettivale base",duration:"50 min",price:50,package6:270,package10:450},{name:"Connettivale con prodotti specifici",duration:"50 min",price:55,package6:300,package10:490},{name:"Sauna Infrarossi + Connettivale",duration:"60 min",price:55,package6:300,package10:490},{name:"Connettivale + Termosauna",duration:"60 min",price:60,package6:330,package10:540},{name:"Ionoforesi + Connettivale",duration:"60 min",price:60,package6:330,package10:540}]},{category:"Trattamenti Corpo",items:[{name:"Termosauna",duration:"30 min",price:30},{name:"Peeling corpo (Sauna + Peeling)",duration:"60 min",price:50}]},{category:"Trattamenti Viso RENOPHASE",items:[{name:"Igiene Viso 1",duration:"50 min",price:90},{name:"Igiene Viso 2 (pelle grassa)",duration:"50 min",price:120},{name:"Anti-Age base",duration:"50 min",price:60},{name:"Anti-Age RENOPHASE",duration:"50 min",price:120},{name:"Pelli Sensibili base",duration:"50 min",price:60},{name:"Pelli Sensibili RENOPHASE",duration:"50 min",price:90},{name:"Pelli Secche base",duration:"50 min",price:60},{name:"Soft RENOPHASE",duration:"50 min",price:90},{name:"Intensivo RENOPHASE",duration:"50 min",price:150},{name:"Macchie RENOPHASE",duration:"50 min",price:150},{name:"Acne RENOPHASE",duration:"50 min",price:150},{name:"Pre/Post Iniettivi RENOPHASE",duration:"50 min",price:150}]},{category:"Trattamenti Microaree RENOPHASE",items:[{name:"Occhi",baseDuration:"45 min",basePrice:60,photoDuration:"60 min",photoPrice:80},{name:"Collo",baseDuration:"45 min",basePrice:60,photoDuration:"60 min",photoPrice:80},{name:"Labbra",baseDuration:"45 min",basePrice:60,photoDuration:"60 min",photoPrice:80}]},{category:"Mantenimento e Prevenzione",items:[{name:"Fotostimolazione LED",duration:"30 min",price:40,package6:219}]},{category:"Trattamenti Specifici",items:[{name:"Gambe Pesanti: Linfodrenante + Impedenzometria",duration:"60 min",package10:470},{name:"Gambe Pesanti: Linfodrenante + Bendaggi Freddi",duration:"60 min",price:60,package6:330},{name:"Gonfiore Addominale: Sauna Finlandese + Udara",duration:"60 min",price:60,package6:330}]}]},Ff=({selection:t,onProceed:e,total:n})=>{const i=l=>{if(!l)return 0;let u=0;const d=l.split(" ");for(let h=0;h<d.length;h++)d[h].includes("h")?u+=parseInt(d[h],10)*60:d[h].includes("min")&&(u+=parseInt(d[h],10));return u},o=l=>{if(l===0)return"N/A";const u=Math.floor(l/60),d=l%60;let h="";return u>0&&(h+=`${u}h `),d>0&&(h+=`${d}min`),h.trim()},s=n!==void 0?n:t.reduce((l,u)=>l+u.price,0),r=t.reduce((l,u)=>l+i(u.duration),0),a=o(r);return c.jsx("div",{className:"fixed bottom-0 left-0 right-0 md:left-64 bg-slate-800 text-white p-4 shadow-[0_-4px_15px_-5px_rgba(0,0,0,0.2)] z-20 animate-slide-in-bottom",children:c.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col sm:flex-row justify-between items-center gap-4",children:[c.jsxs("div",{className:"flex-grow text-center sm:text-left",children:[c.jsxs("h3",{className:"font-bold text-lg",children:[t.length," Servizi Selezionati"]}),c.jsxs("div",{className:"flex gap-4 text-sky-200 text-sm",children:[r>0&&c.jsxs("span",{children:["Durata Totale: ",c.jsx("span",{className:"font-semibold text-white",children:a})]}),c.jsxs("span",{children:["Costo Totale: ",c.jsxs("span",{className:"font-semibold text-white",children:[s,""]})]})]})]}),c.jsx("button",{onClick:e,className:"bg-sky-500 font-semibold py-2 px-6 rounded-lg hover:bg-sky-600 transition-colors flex items-center justify-center gap-2",children:c.jsx("span",{children:"Richiedi Appuntamento"})})]})})},Of=({isOpen:t,onClose:e,selection:n,user:i,onConfirmByEmail:o,onConfirmByWhatsApp:s})=>{if(!t)return null;const[r,a]=z.useState(""),[l,u]=z.useState(""),[d,h]=z.useState(""),m=new Date().toISOString().split("T")[0],g=_=>{if(h(""),!r||!l){h("Per favore, seleziona sia una data che un orario.");return}if(r<m){h("La data selezionata non pu essere nel passato.");return}_==="email"?o(r,l):_==="whatsapp"&&s(r,l)},v=n.reduce((_,x)=>_+(x.price||0),0);return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 animate-fade-in",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg transform transition-transform animate-slide-in-up",children:[c.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-slate-200",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Completa la tua Richiesta"}),c.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600",children:c.jsx(Rl,{className:"w-6 h-6"})})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-slate-700 mb-2",children:"Riepilogo Servizi:"}),c.jsx("ul",{className:"space-y-1 text-slate-600 max-h-32 overflow-y-auto bg-slate-50 p-3 rounded-md",children:n.map(_=>c.jsxs("li",{children:["- ",_.name]},_.id))}),c.jsxs("p",{className:"text-right font-bold text-slate-800 mt-2",children:["Totale: ",v,""]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 mb-3",children:"Scegli la tua preferenza di appuntamento:"}),d&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 mb-4 rounded-md",role:"alert",children:c.jsx("p",{children:d})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"booking-date",className:"block text-sm font-medium text-slate-600 mb-1",children:"Data"}),c.jsx("input",{type:"date",id:"booking-date",min:m,value:r,onChange:_=>a(_.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"booking-time",className:"block text-sm font-medium text-slate-600 mb-1",children:"Orario"}),c.jsx("input",{type:"time",id:"booking-time",value:l,onChange:_=>u(_.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500"})]})]})]})]}),c.jsxs("div",{className:"bg-slate-50 p-5 rounded-b-2xl flex flex-col sm:flex-row justify-end items-center gap-3",children:[c.jsxs("button",{onClick:()=>g("email"),className:"w-full sm:w-auto px-5 py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition-colors flex items-center justify-center gap-2",children:[c.jsx(jf,{className:"w-5 h-5"})," Invia via Email"]}),c.jsxs("button",{onClick:()=>g("whatsapp"),className:"w-full sm:w-auto px-5 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center gap-2",children:[c.jsx(or,{className:"w-5 h-5"})," Invia via WhatsApp"]})]})]})})},nD=({user:t,showNotification:e})=>{const[n,i]=z.useState([]),[o,s]=z.useState(!1),[r,a]=z.useState([]),l=z.useCallback(()=>{const y=Ee("spaBookings",[]).filter(b=>b.userEmail===t.email&&b.type==="spa").sort((b,w)=>new Date(w.dateSubmitted).getTime()-new Date(b.dateSubmitted).getTime());a(y)},[t.email]);z.useEffect(()=>{l()},[l]);const u=(x,y)=>{i(b=>{const w=`${y}-${x.name}`;return b.some(E=>E.id===w)?b.filter(E=>E.id!==w):[...b,{...x,id:w}]})},d=(x,y)=>{const w=Ee("spaBookings",[]).map(C=>C.id===x?{...C,status:y}:C);localStorage.setItem("spaBookings",JSON.stringify(w)),l(),e("Stato appuntamento aggiornato!","success")},h=x=>{if(window.confirm("Sei sicuro di voler annullare questa richiesta?")){const b=Ee("spaBookings",[]).filter(w=>w.id!==x);localStorage.setItem("spaBookings",JSON.stringify(b)),l(),e("Richiesta annullata.","success")}},m=(x,y,b)=>{const w={id:new Date().getTime(),userEmail:t.email,userName:t.name,services:n,requestedDate:x,requestedTime:y,totalPrice:n.reduce((T,S)=>T+(S.price||0),0),status:"pending",dateSubmitted:new Date().toISOString(),type:"spa"},C=Ee("spaBookings",[]);localStorage.setItem("spaBookings",JSON.stringify([...C,w])),l();const E=n.map(T=>`- ${T.name} (${T.duration} - ${T.price})`).join(`
`),N=`Richiesta prenotazione SPA da: ${t.name} (${t.email})
Data: ${new Date(x).toLocaleDateString("it-IT")}
Ora: ${y}

Servizi:
${E}

Totale: ${w.totalPrice}`.trim();b==="email"?window.open(`mailto:${Vl}?subject=${encodeURIComponent(`Richiesta Prenotazione SPA - ${t.name}`)}&body=${encodeURIComponent(N)}`,"_blank"):b==="whatsapp"&&window.open(`https://wa.me/${Ro}?text=${encodeURIComponent(N)}`,"_blank"),s(!1),i([]),e("La tua richiesta  pronta per essere inviata!")},g=({status:x})=>{const y={pending:"bg-amber-100 text-amber-800",confirmed:"bg-emerald-100 text-emerald-800",rejected:"bg-red-100 text-red-800"},b={pending:"In attesa",confirmed:"Confermata",rejected:"Rifiutata"};return c.jsx("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${y[x]||y.pending}`,children:b[x]||b.pending})},v=[{category:"Programmi Benessere",items:c0.programs},...c0.treatments],_=n.reduce((x,y)=>x+(y.price||0),0);return c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-32",children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Percorsi & Trattamenti SPA"}),c.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Seleziona i trattamenti per richiedere un appuntamento."}),c.jsx("div",{className:"space-y-8",children:v.map(({category:x,items:y})=>c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:x}),c.jsx("div",{className:"divide-y divide-slate-200",children:y.map(b=>x==="Trattamenti Microaree RENOPHASE"?c.jsxs("div",{className:"py-3",children:[c.jsx("p",{className:"font-bold text-slate-800 mb-2",children:b.name}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[c.jsxs("button",{onClick:()=>u({...b,name:`${b.name} Base`,duration:b.baseDuration,price:b.basePrice},x),className:`flex-1 text-left p-2 rounded-md transition-colors ${n.some(w=>w.id===`${x}-${b.name} Base`)?"bg-sky-100":"hover:bg-slate-50"}`,children:["Base: ",c.jsxs("span",{className:"font-semibold",children:[b.baseDuration," - ",b.basePrice,""]})]}),c.jsxs("button",{onClick:()=>u({...b,name:`${b.name} con Foto-stimolazione`,duration:b.photoDuration,price:b.photoPrice},x),className:`flex-1 text-left p-2 rounded-md transition-colors ${n.some(w=>w.id===`${x}-${b.name} con Foto-stimolazione`)?"bg-sky-100":"hover:bg-slate-50"}`,children:["+ Foto-stimolazione: ",c.jsxs("span",{className:"font-semibold",children:[b.photoDuration," - ",b.photoPrice,""]})]})]})]},b.name):c.jsxs("div",{onClick:()=>u(b,x),className:`py-3 flex justify-between items-center cursor-pointer transition-colors ${n.some(w=>w.id===`${x}-${b.name}`)?"bg-sky-50":"hover:bg-slate-50"}`,children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800",children:b.name}),c.jsx("p",{className:"text-sm text-slate-500",children:b.duration})]}),c.jsx("p",{className:"font-semibold text-sky-700",children:b.price?`${b.price}`:"Pacchetto"})]},b.name))})]},x))}),c.jsxs("div",{className:"mt-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-6",children:"Le Tue Prenotazioni SPA"}),c.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:r.length>0?c.jsx("ul",{className:"space-y-4",children:r.map(x=>c.jsxs("li",{className:"bg-slate-50 p-4 rounded-lg border border-slate-100",children:[c.jsxs("div",{className:"flex justify-between items-start gap-4",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:["Richiesta del ",new Date(x.dateSubmitted).toLocaleDateString("it-IT")]}),c.jsxs("p",{className:"text-sm text-slate-600",children:["Appuntamento per: ",new Date(x.requestedDate).toLocaleDateString("it-IT")," ore ",x.requestedTime]})]}),c.jsx(g,{status:x.status})]}),c.jsx("ul",{className:"mt-2 text-sm text-slate-700 list-disc list-inside",children:x.services.map(y=>c.jsx("li",{children:y.name},y.id))}),x.status==="pending"&&c.jsxs("div",{className:"mt-4 border-t border-slate-200 pt-3 flex items-center justify-end gap-3",children:[c.jsxs("button",{onClick:()=>d(x.id,"confirmed"),className:"flex items-center gap-1.5 text-sm font-semibold text-emerald-600 hover:text-emerald-800 p-2 rounded-lg hover:bg-emerald-50 transition-colors",children:[c.jsx(Tn,{className:"w-5 h-5"}),c.jsx("span",{children:"Conferma Appuntamento"})]}),c.jsxs("button",{onClick:()=>h(x.id),className:"flex items-center gap-1.5 text-sm font-semibold text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:[c.jsx(jo,{className:"w-5 h-5"}),c.jsx("span",{children:"Elimina Richiesta"})]})]})]},x.id))}):c.jsx("p",{className:"text-center text-slate-500 py-8",children:"Non hai prenotazioni SPA attive."})})]}),n.length>0&&c.jsx(Ff,{selection:n,total:_,onProceed:()=>s(!0)}),c.jsx(Of,{isOpen:o,onClose:()=>s(!1),selection:n,user:t,onConfirmByEmail:(x,y)=>m(x,y,"email"),onConfirmByWhatsApp:(x,y)=>m(x,y,"whatsapp")})]})},u0={category:"Servizi Diagnostici",items:[{name:"Holter Pressorio 24h",duration:"20 min",price:60,description:"Monitoraggio della pressione arteriosa per 24 ore."},{name:"Holter Cardiaco 24h",duration:"20 min",price:70,description:"Registrazione dell'attivit elettrica del cuore per 24 ore."},{name:"Elettrocardiogramma (ECG)",duration:"15 min",price:35,description:"Test rapido per controllare il ritmo e l'attivit elettrica del cuore."},{name:"Tampone Covid-19 Rapido",duration:"10 min",price:15,description:"Test antigenico rapido per la rilevazione del SARS-CoV-2."},{name:"Tampone Streptococco",duration:"10 min",price:20,description:"Test rapido per la diagnosi di faringite da Streptococco."},{name:"Foratura Lobi",duration:"15 min",price:25,description:"Servizio di foratura lobi sterile e sicuro."},{name:"Foratura Naso",duration:"20 min",price:30,description:"Servizio di foratura del naso con tecnica sterile."},{name:"Teledermatologia",duration:"20 min",price:80,description:"Valutazione dermatologica a distanza con invio di immagini."},{name:"BIA - Bioimpedenziometria",duration:"30 min",price:40,description:"Analisi della composizione corporea (massa magra, massa grassa, idratazione)."}]},iD=({user:t,showNotification:e})=>{const[n,i]=z.useState([]),[o,s]=z.useState(!1),[r,a]=z.useState([]),l=z.useCallback(()=>{const x=Ee("spaBookings",[]).filter(y=>y.userEmail===t.email&&y.type==="pharmacy").sort((y,b)=>new Date(b.dateSubmitted).getTime()-new Date(y.dateSubmitted).getTime());a(x)},[t.email]);z.useEffect(()=>{l()},[l]);const u=_=>{i(x=>{const y=_.name;return x.some(w=>w.id===y)?x.filter(w=>w.id!==y):[...x,{..._,id:y}]})},d=(_,x)=>{const b=Ee("spaBookings",[]).map(w=>w.id===_?{...w,status:x}:w);localStorage.setItem("spaBookings",JSON.stringify(b)),l(),e("Stato appuntamento aggiornato!","success")},h=_=>{if(window.confirm("Sei sicuro di voler annullare questa richiesta?")){const y=Ee("spaBookings",[]).filter(b=>b.id!==_);localStorage.setItem("spaBookings",JSON.stringify(y)),l(),e("Richiesta annullata.","success")}},m=(_,x,y)=>{const b={id:new Date().getTime(),userEmail:t.email,userName:t.name,services:n,requestedDate:_,requestedTime:x,totalPrice:n.reduce((N,T)=>N+T.price,0),status:"pending",dateSubmitted:new Date().toISOString(),type:"pharmacy"},w=Ee("spaBookings",[]);localStorage.setItem("spaBookings",JSON.stringify([...w,b])),l();const C=n.map(N=>`- ${N.name} (${N.duration} - ${N.price})`).join(`
`),E=`Richiesta Servizi Farmacia da: ${t.name} (${t.email})
Data: ${new Date(_).toLocaleDateString("it-IT")}
Ora: ${x}

Servizi:
${C}

Totale: ${b.totalPrice}`.trim();y==="email"?window.open(`mailto:${Vl}?subject=${encodeURIComponent(`Richiesta Servizi Farmacia - ${t.name}`)}&body=${encodeURIComponent(E)}`,"_blank"):y==="whatsapp"&&window.open(`https://wa.me/${Ro}?text=${encodeURIComponent(E)}`,"_blank"),s(!1),i([]),e("La tua richiesta  pronta per essere inviata!")},g=({status:_})=>{const x={pending:"bg-amber-100 text-amber-800",confirmed:"bg-emerald-100 text-emerald-800",rejected:"bg-red-100 text-red-800"},y={pending:"In attesa",confirmed:"Confermata",rejected:"Rifiutata"};return c.jsx("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${x[_]||x.pending}`,children:y[_]||y.pending})},v=n.reduce((_,x)=>_+(x.price||0),0);return c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-32",children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Servizi della Farmacia"}),c.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Scegli i servizi di cui hai bisogno e prenota un appuntamento."}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:u0.category}),c.jsx("div",{className:"divide-y divide-slate-200",children:u0.items.map(_=>c.jsxs("div",{onClick:()=>u(_),className:`py-4 flex justify-between items-start cursor-pointer transition-colors ${n.some(x=>x.id===_.name)?"bg-sky-50":"hover:bg-slate-50"}`,children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800",children:_.name}),c.jsx("p",{className:"text-sm text-slate-600 mt-1",children:_.description}),c.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Durata: ",_.duration]})]}),c.jsxs("p",{className:"font-semibold text-sky-700 flex-shrink-0 ml-4",children:[_.price,""]})]},_.name))})]}),c.jsxs("div",{className:"mt-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-6",children:"Le Tue Richieste di Servizi"}),c.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:r.length>0?c.jsx("ul",{className:"space-y-4",children:r.map(_=>c.jsxs("li",{className:"bg-slate-50 p-4 rounded-lg border border-slate-100",children:[c.jsxs("div",{className:"flex justify-between items-start gap-4",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:["Richiesta del ",new Date(_.dateSubmitted).toLocaleDateString("it-IT")]}),c.jsxs("p",{className:"text-sm text-slate-600",children:["Appuntamento per: ",new Date(_.requestedDate).toLocaleDateString("it-IT")," ore ",_.requestedTime]})]}),c.jsx(g,{status:_.status})]}),c.jsx("ul",{className:"mt-2 text-sm text-slate-700 list-disc list-inside",children:_.services.map(x=>c.jsx("li",{children:x.name},x.id))}),_.status==="pending"&&c.jsxs("div",{className:"mt-4 border-t border-slate-200 pt-3 flex items-center justify-end gap-3",children:[c.jsxs("button",{onClick:()=>d(_.id,"confirmed"),className:"flex items-center gap-1.5 text-sm font-semibold text-emerald-600 hover:text-emerald-800 p-2 rounded-lg hover:bg-emerald-50 transition-colors",children:[c.jsx(Tn,{className:"w-5 h-5"}),c.jsx("span",{children:"Conferma Richiesta"})]}),c.jsxs("button",{onClick:()=>h(_.id),className:"flex items-center gap-1.5 text-sm font-semibold text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:[c.jsx(jo,{className:"w-5 h-5"}),c.jsx("span",{children:"Elimina"})]})]})]},_.id))}):c.jsx("p",{className:"text-center text-slate-500 py-8",children:"Non hai richieste di servizi in corso."})})]}),n.length>0&&c.jsx(Ff,{selection:n,total:v,onProceed:()=>s(!0)}),c.jsx(Of,{isOpen:o,onClose:()=>s(!1),selection:n,user:t,onConfirmByEmail:(_,x)=>m(_,x,"email"),onConfirmByWhatsApp:(_,x)=>m(_,x,"whatsapp")})]})},oD=["Rughe ed invecchiamento cutaneo","Cellulite e ritenzione idrica","Analisi","Invecchiamento","Salute cardiovascolare","Insonnia","Disturbi dell'intestino","Intolleranze alimentari ed allergie","Migliorare la performance sportiva","Gambe pesanti e varici","Dimagrimento","Attivita' fisica","Ansia e Stress","Ipertensione","Malattie della pelle","Algie e Dolori","Stanchezza","Benessere e felicita'","Problemi posturali","Cistiti ricorrenti"],$_=[{name:"Colesterolo Totale",price:7},{name:"Trigliceridi",price:6},{name:"Profilo Lipidico Completo",price:20},{name:"Profilo Glucidico Completo",price:20},{name:"Vitamina D",price:20},{name:"Proteina C Reattiva",price:6},{name:"Esame Urine",price:10}],G_=[{name:"Skin Analysis",price:10},{name:"Skin Check (Dermatology)",price:30},{name:"Valutazione Training",price:0,label:"da concordare"},{name:"Analisi DNA e Genomiche",price:130},{name:"Cortisolo Salivare",price:15},{name:"Test ed Analisi del Sonno",price:0,label:"compresa nel pacchetto"},{name:"Test dello Stress",price:0,label:"compreso nel pacchetto"},{name:"Polisonnografia",price:0,label:"da concordare"},{name:"Pletismografia",price:0,label:"da concordare"},{name:"Metabolica (func. tiroide, ecc)",price:0,label:"da concordare"},{name:"Body Composition",price:40},{name:"HRV",price:0,label:"compresa nel pacchetto"},{name:"Intestino e Microbioma",price:199},{name:"Valutazione Osteopatica",price:50},{name:"Dietetica Intolleranze",price:150},{name:"ECG",price:35},{name:"Holter Pressorio",price:60},{name:"Holter ECG",price:70}],sD={"Rughe ed invecchiamento cutaneo":["Skin Analysis","Skin Check (Dermatology)","Analisi DNA e Genomiche"],"Cellulite e ritenzione idrica":["Esame Urine","Body Composition"],Invecchiamento:["Analisi DNA e Genomiche","Vitamina D","Profilo Lipidico Completo"],"Salute cardiovascolare":["Profilo Lipidico Completo","ECG","Holter Pressorio","Holter ECG","Proteina C Reattiva"],Insonnia:["Test ed Analisi del Sonno","Cortisolo Salivare","Polisonnografia"],"Disturbi dell'intestino":["Intestino e Microbioma","Dietetica Intolleranze"],"Intolleranze alimentari ed allergie":["Dietetica Intolleranze","Intestino e Microbioma"],"Migliorare la performance sportiva":["Valutazione Training","Body Composition","HRV"],"Gambe pesanti e varici":["Pletismografia","Esame Urine"],Dimagrimento:["Body Composition","Profilo Glucidico Completo","Metabolica (func. tiroide, ecc)"],"Attivita' fisica":["Valutazione Training","Body Composition","HRV","ECG"],"Ansia e Stress":["Test dello Stress","Cortisolo Salivare","HRV"],Ipertensione:["Holter Pressorio","Profilo Lipidico Completo","ECG"],"Malattie della pelle":["Skin Analysis","Skin Check (Dermatology)","Teledermatologia"],"Algie e Dolori":["Valutazione Osteopatica","Proteina C Reattiva"],Stanchezza:["Vitamina D","Metabolica (func. tiroide, ecc)","Cortisolo Salivare"],"Benessere e felicita'":["Profilo Lipidico Completo","Vitamina D"],"Problemi posturali":["Valutazione Osteopatica"],"Cistiti ricorrenti":["Esame Urine"]},q_=new Map;[...$_,...G_].forEach(t=>q_.set(t.name,t));const rD=({user:t,showNotification:e,onNavigate:n})=>{const[i,o]=z.useState([]),[s,r]=z.useState(new Set),[a,l]=z.useState(!1),[u,d]=z.useState(!1),h=()=>{if(i.length===0)return;const x=i.reduce((C,E)=>C+(E.price||0),0);let y=`=================================================
`;y+=`   CLINICAL WELLNESS SPA - PIANO ANALISI
`,y+=`=================================================

`,y+=`UTENTE: ${t.name}
`,y+=`DATA: ${new Date().toLocaleDateString("it-IT")}

`,y+=`OBIETTIVI SELEZIONATI:
`,Array.from(s).forEach(C=>y+=`- ${C}
`),y+=`
ANALISI CONSIGLIATE:
`,i.forEach(C=>y+=`- ${C.name} (${C.price>0?C.price+"":C.label||"da definire"})
`),y+=`
TOTALE STIMATO: ${x}
`,y+=`
-------------------------------------------------
`,y+=`Presenta questo elenco in Farmacia Centrale
per pianificare l'esecuzione dei test.
`,y+=`=================================================
`;const b=new Blob(["\uFEFF"+y],{type:"text/plain;charset=utf-8"}),w=document.createElement("a");w.href=URL.createObjectURL(b),w.download=`Piano_Analisi_${Date.now()}.txt`,w.click()},m=x=>{const y=new Set(s);y.has(x)?y.delete(x):y.add(x),r(y)},g=x=>{o(y=>y.some(w=>w.id===x.name)?y.filter(w=>w.id!==x.name):[...y,{id:x.name,name:x.name,price:x.price,label:x.label}])},v=()=>{const x=new Set;s.forEach(b=>(sD[b]||[]).forEach(w=>x.add(w)));const y=Array.from(x).map(b=>{const w=q_.get(b);return w?{id:w.name,name:w.name,price:w.price,label:w.label}:null}).filter(Boolean);o(y),d(!0)},_=i.reduce((x,y)=>x+(y.price||0),0);return c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-32",children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Analisi & Preventivi"}),c.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Definisci i tuoi obiettivi per un piano personalizzato."}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:"1. Scegli i tuoi obiettivi"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:oD.map(x=>c.jsx("button",{onClick:()=>m(x),className:`px-3 py-3 text-sm font-semibold rounded-lg border-2 transition-all ${s.has(x)?"bg-sky-600 text-white border-sky-600":"bg-white text-slate-700 border-slate-300 hover:border-sky-500"}`,children:x},x))}),c.jsx("div",{className:"mt-6 flex justify-center",children:c.jsx("button",{onClick:v,disabled:s.size===0,className:"px-8 py-3 bg-red-600 text-white font-bold rounded-xl shadow-md hover:bg-red-700 disabled:bg-slate-400",children:"Genera Piano Analisi"})})]}),u&&c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg animate-fade-in",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-700",children:"2. Esami Consigliati"}),c.jsxs("button",{onClick:h,className:"flex items-center gap-2 text-emerald-600 font-bold hover:underline",children:[c.jsx(Ef,{className:"w-5 h-5"})," Scarica Elenco (.txt)"]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-800 mb-3 border-b pb-2",children:"Analisi Sangue"}),c.jsx("div",{className:"space-y-1",children:$_.map(x=>c.jsxs("div",{onClick:()=>g(x),className:`flex justify-between items-center p-2 rounded-lg cursor-pointer transition-colors ${i.some(y=>y.id===x.name)?"bg-sky-100":"hover:bg-slate-50"}`,children:[c.jsx("span",{className:"text-sm",children:x.name}),c.jsxs("span",{className:"font-semibold",children:[x.price,""]})]},x.name))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-800 mb-3 border-b pb-2",children:"Altre Analisi"}),c.jsx("div",{className:"space-y-1",children:G_.map(x=>c.jsxs("div",{onClick:()=>g(x),className:`flex justify-between items-center p-2 rounded-lg cursor-pointer transition-colors ${i.some(y=>y.id===x.name)?"bg-sky-100":"hover:bg-slate-50"}`,children:[c.jsx("span",{className:"text-sm",children:x.name}),c.jsx("span",{className:"font-semibold",children:x.label||`${x.price}`})]},x.name))})]})]})]}),i.length>0&&c.jsx(Ff,{selection:i,total:_,onProceed:()=>l(!0)}),c.jsx(Of,{isOpen:a,onClose:()=>l(!1),selection:i,user:t,onConfirmByEmail:()=>{},onConfirmByWhatsApp:()=>{}})]})},aD=({user:t,onNavigate:e,showNotification:n,wellnessData:i})=>{const[o,s]=z.useState({}),[r,a]=z.useState(!1),[l,u]=z.useState(""),d="CWSPA",h=v=>{const _=o[v],x=OL[v];if(_===x){const y=`manualUnlocks_${t.email}`,b=Ee(y,[]),w=[...new Set([...b,v])];localStorage.setItem(y,JSON.stringify(w)),n("Livello sbloccato con successo!","success")}else n("Password errata. Riprova.","error")},m=()=>{l.trim()===d?a(!0):(n("Password per il riepilogo errata.","error"),u(""))},g=Object.values(i).filter(v=>v.unlocksAt);return c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in",children:[c.jsxs("button",{onClick:()=>e("profile"),className:"flex items-center gap-2 text-sky-600 font-semibold mb-6 hover:text-sky-800 transition-colors",children:[c.jsx(Ou,{className:"w-5 h-5"}),c.jsx("span",{children:"Torna al Profilo"})]}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Sblocco Manuale Livelli"}),c.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Inserisci la password per accedere direttamente a un livello."}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx("div",{children:c.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg space-y-6",children:g.map(v=>c.jsxs("div",{children:[c.jsxs("h3",{className:"font-bold text-slate-700",children:[v.name," - ",v.subtitle]}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsx("input",{type:"password",placeholder:"Inserisci la password",value:o[v.id]||"",onChange:_=>s({...o,[v.id]:_.target.value}),className:"flex-grow p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-sky-500"}),c.jsx("button",{onClick:()=>h(v.id),className:"px-4 py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition-colors",children:"Sblocca"})]})]},v.id))})}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:" Riepilogo Password"}),r?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm text-left text-slate-600",children:[c.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-100",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"px-4 py-3",children:"Programma"}),c.jsx("th",{scope:"col",className:"px-4 py-3",children:"Livello"}),c.jsx("th",{scope:"col",className:"px-4 py-3",children:"Password"})]})}),c.jsx("tbody",{children:UL.map(v=>c.jsxs("tr",{className:"bg-white border-b hover:bg-slate-50",children:[c.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:v.program}),c.jsx("td",{className:"px-4 py-3",children:v.level}),c.jsx("td",{className:"px-4 py-3",children:c.jsx("code",{className:"bg-slate-100 p-1 rounded-md text-sky-700 font-mono",children:v.password})})]},v.level))})]})}),c.jsx("button",{onClick:()=>{a(!1),u("")},className:"mt-4 w-full px-4 py-2 bg-slate-200 text-slate-800 font-semibold rounded-lg hover:bg-slate-300 transition-colors",children:"Nascondi Riepilogo"})]}):c.jsxs("div",{className:"p-4 text-center",children:[c.jsx(Ml,{className:"w-10 h-10 mx-auto text-slate-400 mb-4"}),c.jsx("p",{className:"text-slate-600 mb-4",children:"Questa sezione  protetta da password."}),c.jsxs("div",{className:"flex items-center gap-2 max-w-sm mx-auto",children:[c.jsx("input",{type:"password",placeholder:"Password riepilogo",value:l,onChange:v=>u(v.target.value),onKeyPress:v=>v.key==="Enter"&&m(),className:"flex-grow p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-sky-500"}),c.jsx("button",{onClick:m,className:"px-4 py-2 bg-sky-600 text-white font-semibold rounded-lg hover:bg-sky-700 transition-colors",children:"Mostra"})]})]})]})]})]})},Uf=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),c.jsx("path",{d:"M12 12v9"}),c.jsx("path",{d:"m16 16-4-4-4 4"})]}),ga=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),c.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),c.jsx("path",{d:"M10 9H8"}),c.jsx("path",{d:"M16 13H8"}),c.jsx("path",{d:"M16 17H8"})]}),lD=({user:t,showNotification:e})=>{const[n,i]=z.useState([]),[o,s]=z.useState([]),r=`prescriptionHistory_${t.email}`;z.useEffect(()=>{const d=Ee(r,[]);s(d.sort((h,m)=>m.id-h.id))},[r]),z.useEffect(()=>()=>{n.forEach(d=>URL.revokeObjectURL(d.previewUrl))},[n]);const a=async d=>{if(d.target.files){const h=Array.from(d.target.files).map(async g=>{let v;if(g.type==="text/plain")try{v=await g.text()}catch(_){console.error("Error reading text file",_)}return{file:g,previewUrl:URL.createObjectURL(g),textContent:v}}),m=await Promise.all(h);i(g=>[...g,...m]),d.target.value=""}},l=d=>{i(h=>{const m=h[d];return m&&URL.revokeObjectURL(m.previewUrl),h.filter((g,v)=>v!==d)})},u=d=>{if(n.length===0){e("Nessuna ricetta da inviare.","error");return}const h=n.map(y=>`- ${y.file.name}`).join(`
`),m=n.filter(y=>y.textContent).map(y=>`--- CONTENUTO DI ${y.file.name} ---
${y.textContent}`).join(`

`);let g=`Buongiorno,

Si richiede la preparazione delle seguenti ricette/note per ${t.name}:
${h}

`;m&&(g+=`NOTE TESTUALI ALLEGATE:
${m}

`),g+=`(Per file immagini/PDF, sono stati allegati a questa comunicazione)

Grazie,
${t.name}`;const v=`Buongiorno,

In allegato le seguenti ricette mediche per ${t.name}:
${h}

`+(m?`NOTE TESTUALI:
${m}

`:"")+`(Ricorda di allegare manualmente i file PDF/Immagini prima di inviare)

Grazie,
${t.name}`;if(d==="email"){const y=`mailto:${Vl}?subject=${encodeURIComponent(`Invio Ricette Mediche - ${t.name}`)}&body=${encodeURIComponent(v)}`;window.open(y,"_blank")}else{const y=`https://wa.me/${Ro}?text=${encodeURIComponent(g)}`;window.open(y,"_blank")}const x=[{id:Date.now(),date:new Date().toISOString(),files:n.map(y=>y.file.name)},...o];localStorage.setItem(r,JSON.stringify(x)),s(x),i([]),e("La tua richiesta  pronta per essere inviata!","success")};return c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in",children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Invio Ricette & Note"}),c.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Carica ricette (PDF, Foto) o note di testo (.txt) da inviare alla farmacia."}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:"1. Carica file"}),c.jsxs("div",{className:"relative border-2 border-dashed border-slate-300 rounded-lg p-10 text-center hover:bg-slate-50 transition-colors",children:[c.jsx("input",{type:"file",accept:"image/*,.pdf,.txt",multiple:!0,onChange:a,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer","aria-label":"Carica file"}),c.jsxs("div",{className:"flex flex-col items-center text-slate-500 pointer-events-none",children:[c.jsx(Uf,{className:"w-12 h-12 mb-2 text-sky-500"}),c.jsx("p",{className:"font-semibold text-slate-700",children:"Trascina i file qui o clicca per caricare"}),c.jsx("p",{className:"text-sm mt-1",children:"Accettati: PDF, Foto (JPG, PNG), Testo (.txt)"})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:"2. Riepilogo Invio"}),n.length>0?c.jsxs("div",{className:"space-y-4",children:[c.jsx("ul",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:n.map((d,h)=>c.jsxs("li",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100 animate-fade-in",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[d.file.type.startsWith("image/")?c.jsx("img",{src:d.previewUrl,alt:d.file.name,className:"w-12 h-12 rounded-md object-cover flex-shrink-0"}):d.file.type==="text/plain"?c.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-emerald-100 rounded-md flex-shrink-0 text-emerald-600",children:c.jsx(ga,{className:"w-6 h-6"})}):c.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-red-100 rounded-md flex-shrink-0 text-red-600",children:c.jsx(ga,{className:"w-6 h-6"})}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("span",{className:"font-medium text-slate-700 truncate block",title:d.file.name,children:d.file.name}),c.jsxs("span",{className:"text-xs text-slate-500",children:[Math.round(d.file.size/1024)," KB",d.textContent&&c.jsx("span",{className:"text-emerald-600 font-semibold ml-2",children:" Testo Letto"})]})]})]}),c.jsx("button",{onClick:()=>l(h),className:"text-slate-400 hover:text-red-500 p-2 rounded-full hover:bg-red-50 transition-colors flex-shrink-0",children:c.jsx(jo,{className:"w-5 h-5"})})]},`${d.file.name}-${h}`))}),c.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[c.jsx("p",{className:"text-xs text-slate-500 mb-3 text-center",children:"Nota: I file PDF e Immagini dovranno essere allegati manualmente nel client di posta/WhatsApp. Il contenuto dei file .txt verr copiato automaticamente nel messaggio."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[c.jsxs("button",{onClick:()=>u("email"),className:"w-full flex items-center justify-center gap-2 px-5 py-3 bg-sky-600 text-white font-semibold rounded-xl hover:bg-sky-700 transition-colors shadow-md",children:[c.jsx(jf,{className:"w-5 h-5"})," Invia via Email"]}),c.jsxs("button",{onClick:()=>u("whatsapp"),className:"w-full flex items-center justify-center gap-2 px-5 py-3 bg-green-500 text-white font-semibold rounded-xl hover:bg-green-600 transition-colors shadow-md",children:[c.jsx(or,{className:"w-5 h-5"})," Invia via WhatsApp"]})]})]})]}):c.jsxs("div",{className:"text-center py-12 text-slate-400",children:[c.jsx(ga,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),c.jsx("p",{children:"Non hai ancora aggiunto nessuna ricetta."})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:"Storico Invii"}),o.length>0?c.jsx("ul",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:o.map(d=>c.jsxs("li",{className:"bg-slate-50 p-4 rounded-xl border border-slate-100",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"bg-sky-100 text-sky-800 text-xs font-bold px-2 py-1 rounded",children:"Inviato"}),c.jsx("span",{className:"text-xs text-slate-500",children:new Date(d.date).toLocaleString("it-IT")})]}),c.jsx("ul",{className:"text-sm text-slate-600 space-y-1",children:d.files.map((h,m)=>c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-400"}),h]},m))})]},d.id))}):c.jsx("div",{className:"text-center py-16 text-slate-400",children:c.jsx("p",{children:"Nessuno storico disponibile."})})]})]})]})},cD=({onSettingsSaved:t,showNotification:e})=>{const[n,i]=z.useState(!1),[o,s]=z.useState(""),[r,a]=z.useState(null),[l,u]=z.useState(null),d="CWSPA";z.useEffect(()=>{const x=Ee("customWellnessProgramsData",Ii);try{a(structuredClone(x))}catch(y){console.error("Deep copy failed, falling back to default",y),a(structuredClone(Ii))}},[]);const h=()=>{o.trim()===d?i(!0):(e("Password errata","error"),s(""))},m=(x,y,b,w)=>{if(r)try{const C=structuredClone(r);C[x][y][b].points=w,a(C)}catch(C){console.error("Error updating points",C)}},g=(x,y)=>{if(r)try{const b=structuredClone(r);b[x].unlocksAt=y,a(b)}catch(b){console.error("Error updating threshold",b)}},v=()=>{if(r)try{localStorage.setItem("customWellnessProgramsData",JSON.stringify(r)),e("Impostazioni salvate con successo!","success"),t()}catch(x){console.error("Save failed",x),e("Errore nel salvataggio delle impostazioni.","error")}},_=()=>{if(window.confirm("Sei sicuro di voler ripristinare tutte le impostazioni ai valori predefiniti? Le modifiche andranno perse."))try{const x=structuredClone(Ii);a(x),localStorage.setItem("customWellnessProgramsData",JSON.stringify(x)),e("Impostazioni ripristinate ai valori predefiniti.","success"),t()}catch(x){console.error("Reset failed",x),e("Errore nel ripristino delle impostazioni.","error")}};return n?r?c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800",children:"Impostazioni Punteggi e Soglie"}),c.jsx("p",{className:"text-xl text-slate-600",children:"Modifica i punti per ogni missione e le soglie per sbloccare i livelli."})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:_,className:"px-4 py-2 bg-slate-200 text-slate-800 font-semibold rounded-lg hover:bg-slate-300 transition-colors",children:"Ripristina"}),c.jsx("button",{onClick:v,className:"px-6 py-2 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition-colors shadow-md",children:"Salva Modifiche"})]})]}),c.jsx("div",{className:"space-y-4",children:Object.values(r).map(x=>{var y,b;return c.jsxs("div",{className:"bg-white rounded-xl shadow-lg",children:[c.jsxs("button",{className:"w-full text-left p-4 flex justify-between items-center",onClick:()=>u(l===x.id?null:x.id),children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-3xl",children:x.Icon}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800",children:x.name}),c.jsx("p",{className:"text-slate-500",children:x.subtitle})]})]}),c.jsx(H_,{className:`w-6 h-6 text-slate-500 transition-transform ${l===x.id?"rotate-180":""}`})]}),l===x.id&&c.jsxs("div",{className:"p-4 border-t border-slate-200",children:[typeof x.unlocksAt=="number"&&c.jsxs("div",{className:"mb-6 bg-sky-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Impostazioni Livello"}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("label",{htmlFor:`threshold-${x.id}`,className:"font-semibold text-slate-700",children:"Punti necessari per sbloccare:"}),c.jsx("input",{id:`threshold-${x.id}`,type:"number",value:x.unlocksAt,onChange:w=>g(x.id,parseInt(w.target.value,10)||0),className:"w-24 p-1 text-center border border-slate-300 rounded-md"})]})]}),x.daily&&x.daily.length>0&&c.jsx("h4",{className:"font-bold text-slate-700 mb-2 mt-2",children:"Missioni Giornaliere"}),c.jsx("div",{className:"space-y-2",children:(y=x.daily)==null?void 0:y.map((w,C)=>c.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded-md",children:[c.jsxs("p",{className:"text-slate-700",children:[w.Icon," ",w.title]}),c.jsx("input",{type:"number",value:w.points,onChange:E=>m(x.id,"daily",C,parseInt(E.target.value,10)||0),className:"w-20 p-1 text-center border border-slate-300 rounded-md"})]},w.id))}),x.weekly&&x.weekly.length>0&&c.jsx("h4",{className:"font-bold text-slate-700 mb-2 mt-4",children:"Missioni Settimanali"}),c.jsx("div",{className:"space-y-2",children:(b=x.weekly)==null?void 0:b.map((w,C)=>c.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded-md",children:[c.jsxs("p",{className:"text-slate-700",children:[w.Icon," ",w.title]}),c.jsx("input",{type:"number",value:w.points,onChange:E=>m(x.id,"weekly",C,parseInt(E.target.value,10)||0),className:"w-20 p-1 text-center border border-slate-300 rounded-md"})]},w.id))})]})]},x.id)})})]}):null:c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100",children:c.jsxs("div",{className:"w-full max-w-sm p-8 bg-white rounded-2xl shadow-xl",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx(Ml,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),c.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Area Riservata"}),c.jsx("p",{className:"text-slate-500",children:"Inserisci la password per continuare"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{type:"password",value:o,onChange:x=>s(x.target.value),onKeyPress:x=>x.key==="Enter"&&h(),className:"w-full px-4 py-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-sky-500",placeholder:"Password"}),c.jsx("button",{onClick:h,className:"w-full px-4 py-3 bg-sky-600 text-white font-bold rounded-lg hover:bg-sky-700 transition-colors",children:"Accedi"})]})]})})},uD=({user:t})=>c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in relative",children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Analisi Referti Sanguigni con AI"}),c.jsx("p",{className:"text-xl text-slate-600 mb-8",children:"Carica una foto del tuo referto per ottenere un'analisi dettagliata."}),c.jsx("div",{className:"absolute inset-0 z-10 bg-white/60 backdrop-blur-sm flex flex-col items-center justify-center rounded-2xl",children:c.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl border-4 border-sky-500 text-center max-w-md mx-4",children:[c.jsx(st,{className:"w-16 h-16 text-sky-500 mx-auto mb-4 animate-pulse"}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Presto Attivo!"}),c.jsx("p",{className:"text-slate-600 mb-6",children:"Stiamo perfezionando l'Intelligenza Artificiale per offrirti un'analisi clinica ancora pi precisa. Questa funzionalit sar disponibile nel prossimo aggiornamento."}),c.jsx("button",{className:"bg-slate-200 text-slate-500 font-bold py-3 px-6 rounded-lg cursor-not-allowed",children:"Coming Soon"})]})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 opacity-50 pointer-events-none",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg flex flex-col",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-4",children:"1. Carica il tuo referto"}),c.jsx("div",{className:"relative border-2 border-dashed border-slate-300 rounded-lg p-12 text-center flex-grow flex flex-col justify-center",children:c.jsxs("div",{className:"flex flex-col items-center text-slate-500",children:[c.jsx(Uf,{className:"w-12 h-12 mb-2"}),c.jsx("p",{className:"font-semibold",children:"Trascina un file qui o clicca per caricare"}),c.jsx("p",{className:"text-sm",children:"Immagini (PNG, JPG) o PDF"})]})})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg flex flex-col",children:[c.jsx("div",{className:"flex justify-between items-center mb-4",children:c.jsx("h2",{className:"text-2xl font-bold text-slate-700",children:"2. Risultati dell'Analisi"})}),c.jsxs("div",{className:"text-center text-slate-500 py-16",children:[c.jsx(ga,{className:"w-16 h-16 mx-auto mb-4 text-slate-400"}),c.jsx("p",{children:"I risultati della tua analisi appariranno qui."})]})]})]})]}),dD=()=>{const t=`https://wa.me/${Ro}?text=Vorrei%20unirmi%20al%20gruppo%20benessere!`,e=()=>{window.open(t,"_blank")},n=()=>{window.open(`https://wa.me/${Ro}?text=Ciao,%20vorrei%20parlare%20con%20il%20Coach%20per%20una%20consulenza.`,"_blank")};return c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-32 max-w-5xl mx-auto",children:[c.jsxs("div",{className:"mb-10 text-center",children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-3",children:"Community & Coaching"}),c.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Non sei solo nel tuo percorso. Unisciti alla nostra community per condividere esperienze o parla direttamente con i nostri esperti."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl shadow-xl p-8 text-white relative overflow-hidden group",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white opacity-10 rounded-full group-hover:scale-150 transition-transform duration-700"}),c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsx("div",{className:"bg-white/20 w-16 h-16 rounded-full flex items-center justify-center mb-6 backdrop-blur-sm",children:c.jsx(Ly,{className:"w-8 h-8 text-white"})}),c.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Gruppo Condivisione"}),c.jsx("p",{className:"text-emerald-100 mb-8 flex-grow",children:"Entra nel nostro gruppo esclusivo. Condividi i tuoi traguardi, scambia ricette e consigli sui livelli del percorso benessere. La motivazione nasce dalla condivisione!"}),c.jsxs("button",{onClick:e,className:"w-full bg-white text-emerald-600 font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-emerald-50 transition-colors flex items-center justify-center gap-2",children:[c.jsx(or,{className:"w-5 h-5"}),"Unisciti al Gruppo"]})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-slate-200 relative overflow-hidden group",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-sky-100 opacity-50 rounded-full group-hover:scale-150 transition-transform duration-700"}),c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsx("div",{className:"bg-sky-100 w-16 h-16 rounded-full flex items-center justify-center mb-6",children:c.jsx(st,{className:"w-8 h-8 text-sky-600"})}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Il tuo Coach"}),c.jsx("p",{className:"text-slate-600 mb-8 flex-grow",children:"Hai dubbi su un esercizio? Vuoi personalizzare il tuo percorso o fissare un appuntamento 1-to-1? Parla direttamente con il tuo coach dedicato."}),c.jsxs("button",{onClick:n,className:"w-full bg-sky-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:bg-sky-700 transition-colors flex items-center justify-center gap-2",children:[c.jsx(or,{className:"w-5 h-5"}),"Chatta con il Coach"]})]})]})]}),c.jsx("div",{className:"mt-12 bg-slate-100 rounded-xl p-6 text-center text-slate-500 text-sm",children:c.jsxs("p",{children:["La comunicazione avviene tramite WhatsApp per garantirti la massima semplicit e privacy.",c.jsx("br",{}),"Il gruppo  moderato da professionisti di Clinical Wellness Spa."]})})]})},d0=t=>c.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),c.jsx("circle",{cx:"9",cy:"9",r:"2"}),c.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),fD=["Un piatto sano e colorato con salmone, avocado e quinoa, fotografia professionale food","Una tranquilla spiaggia tropicale al tramonto per meditazione, vista cinematografica","Una moderna palestra luminosa con vista sulla natura, architettura d'interni","Un frullato detox verde con spinaci e mela su un tavolo di legno, luce naturale","Una persona che fa yoga in cima a una montagna serena, atmosfera ispirazionale"],pD=()=>{const[t,e]=z.useState(""),[n,i]=z.useState(null),[o,s]=z.useState(!1),[r,a]=z.useState(""),l=async()=>{var u,d,h,m,g,v;if(t.trim()){s(!0),a(""),i(null);try{const _=new V_({apiKey:void 0}),x=`${t}, photorealistic, 8k, highly detailed, professional photography, wellness aesthetic, soft lighting, cinematic composition`,y=await _.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:x}]},config:{responseModalities:[ir.IMAGE]}});let b=null;if((h=(d=(u=y.candidates)==null?void 0:u[0])==null?void 0:d.content)!=null&&h.parts){for(const w of y.candidates[0].content.parts)if(w.inlineData){b=w.inlineData.data;break}}b?i(`data:image/png;base64,${b}`):a("L'IA ha generato una risposta, ma non contiene un'immagine valida. Riprova con una descrizione diversa.")}catch(_){console.error("Generation error:",_);let x="Si  verificato un errore durante la generazione.";(m=_.message)!=null&&m.includes("403")||(g=_.message)!=null&&g.includes("permission")?x="Errore di permessi API. Verifica che la tua chiave supporti la generazione di immagini.":(v=_.message)!=null&&v.includes("429")&&(x="Limite di richieste raggiunto. Attendi qualche istante."),a(x)}finally{s(!1)}}};return c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-32 max-w-6xl mx-auto",children:[c.jsxs("div",{className:"mb-8 text-center md:text-left",children:[c.jsxs("h1",{className:"text-4xl font-bold text-slate-800 mb-2 flex items-center justify-center md:justify-start gap-3",children:[c.jsx(d0,{className:"w-10 h-10 text-purple-600"}),"Visualizzatore Obiettivi"]}),c.jsx("p",{className:"text-xl text-slate-600",children:"Materializza i tuoi obiettivi di benessere. Descrivi ci che vuoi vedere e l'IA lo creer per te."})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[c.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-purple-100",children:[c.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"La tua visione"}),c.jsx("textarea",{value:t,onChange:u=>e(u.target.value),placeholder:"Es: Una colazione sana con frutta fresca su un balcone soleggiato...",className:"w-full p-4 border border-slate-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent h-40 resize-none mb-4 text-slate-700 placeholder-slate-400"}),c.jsx("button",{onClick:l,disabled:o||!t.trim(),className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold py-4 px-6 rounded-xl shadow-lg hover:shadow-purple-500/30 hover:from-purple-700 hover:to-indigo-700 transition-all disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 transform active:scale-95",children:o?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Creazione in corso..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(st,{className:"w-5 h-5"}),c.jsx("span",{children:"Genera Immagine"})]})})]}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-md",children:[c.jsxs("h3",{className:"font-bold text-slate-700 mb-3 flex items-center gap-2",children:[c.jsx("span",{className:"text-xl",children:""})," Idee Rapide"]}),c.jsx("div",{className:"space-y-2",children:fD.map((u,d)=>c.jsxs("button",{onClick:()=>e(u),className:"w-full text-left p-3 text-xs sm:text-sm text-slate-600 bg-slate-50 hover:bg-purple-50 hover:text-purple-700 rounded-lg transition-colors border border-slate-100 truncate",title:u,children:[u.split(",")[0],"..."]},d))})]})]}),c.jsx("div",{className:"lg:col-span-8",children:c.jsxs("div",{className:"bg-slate-900 rounded-3xl shadow-2xl overflow-hidden min-h-[500px] h-full flex items-center justify-center relative border border-slate-800",children:[!n&&!o&&!r&&c.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(#6366f1 1px, transparent 1px)",backgroundSize:"30px 30px"}}),n?c.jsxs("div",{className:"relative w-full h-full animate-fade-in group flex items-center justify-center bg-black",children:[c.jsx("img",{src:n,alt:"Generated Wellness Visualization",className:"max-w-full max-h-[600px] object-contain shadow-2xl"}),c.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/80 to-transparent text-white opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:c.jsx("p",{className:"font-medium text-sm opacity-90 line-clamp-2",children:t})}),c.jsx("a",{href:n,download:`wellness-vision-${Date.now()}.png`,className:"absolute top-6 right-6 bg-white/10 hover:bg-white/20 backdrop-blur-md text-white p-3 rounded-full shadow-lg border border-white/20 transition-all transform hover:scale-110 hover:rotate-180 active:scale-95",title:"Scarica Immagine",children:c.jsx(Uf,{className:"w-6 h-6"})})]}):c.jsx("div",{className:"text-center p-8 max-w-md relative z-10",children:o?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"relative w-24 h-24 mx-auto",children:[c.jsx("div",{className:"absolute inset-0 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin"}),c.jsx("div",{className:"absolute inset-4 border-4 border-indigo-500/30 border-t-indigo-500 rounded-full animate-spin reverse"}),c.jsx(st,{className:"absolute inset-0 m-auto w-8 h-8 text-white animate-pulse"})]}),c.jsx("p",{className:"text-purple-300 font-medium animate-pulse text-lg",children:"L'Intelligenza Artificiale sta dipingendo la tua visione..."})]}):r?c.jsxs("div",{className:"text-red-400 bg-red-900/20 p-6 rounded-xl border border-red-900/50",children:[c.jsx(jo,{className:"w-12 h-12 mx-auto mb-3"}),c.jsx("p",{className:"font-bold mb-2 text-lg",children:"Impossibile Generare"}),c.jsx("p",{className:"text-sm opacity-80",children:r})]}):c.jsxs("div",{className:"text-slate-500",children:[c.jsx("div",{className:"w-32 h-32 bg-slate-800 rounded-full mx-auto mb-6 flex items-center justify-center",children:c.jsx(d0,{className:"w-16 h-16 text-slate-600"})}),c.jsx("h3",{className:"text-2xl font-bold text-slate-300 mb-3",children:"Visualizza il tuo Benessere"}),c.jsx("p",{className:"text-slate-400 leading-relaxed",children:`Inserisci una descrizione nel pannello a sinistra e premi "Genera" per vedere la magia dell'IA in azione.`})]})})]})})]})]})},hD={A:{nome:"Delta Puro",descrizione:"Suoni costanti, profondi e minimali. Favorisce rilassamento profondo e stabilizzazione del ritmo sonnoveglia.",fileTest:"audio/archetipo_A_test.mp3",fileTrattamento:"audio/archetipo_A_trattamento.mp3",nomeFileTrattamento:"archetipo_A_trattamento.mp3",durata:5,volume:40},B:{nome:"Theta  Delta",descrizione:"Transizione morbida da theta a delta con musica avvolgente. Indicato per distensione emotiva e decompressione mentale.",fileTest:"audio/archetipo_B_test.mp3",fileTrattamento:"audio/archetipo_B_trattamento.mp3",nomeFileTrattamento:"archetipo_B_trattamento.mp3",durata:5,volume:45},C:{nome:"Theta Melodico",descrizione:"Theta melodico con leggere variazioni. Stimola rilassamento creativo, immaginazione e decompressione cognitiva.",fileTest:"audio/archetipo_C_test.mp3",fileTrattamento:"audio/archetipo_C_trattamento.mp3",nomeFileTrattamento:"archetipo_C_trattamento.mp3",durata:5,volume:50},D:{nome:"Minimalista",descrizione:"Minimalismo profondo e continuo. Ideale per meditazione profonda, grounding e svuotamento mentale.",fileTest:"audio/archetipo_D_test.mp3",fileTrattamento:"audio/archetipo_D_trattamento.mp3",nomeFileTrattamento:"archetipo_D_trattamento.mp3",durata:5,volume:35}};function mD(t){const e=Object.entries(t).sort((o,s)=>s[1]-o[1]),n=e[0][0],i=e[1][0];return{dominante:n,secondario:i}}function gD(t,e){return{A:t.domanda1+t.domanda5+e.A,B:t.domanda2+t.domanda6+e.B,C:t.domanda3+t.domanda7+e.C,D:t.domanda4+t.domanda8+e.D}}function xD(t,e,n){const i=gD(e,n),{dominante:o,secondario:s}=mD(i),r=hD[o];return{utenteId:t,timestamp:new Date().toISOString(),risposteCognitive:e,punteggiArchetipi:i,archetipoDominante:o,archetipoSecondario:s,fileTrattamento:r.fileTrattamento,fileTest:r.fileTest,durataConsigliata:r.durata,volumeConsigliato:r.volume}}function vD(t){console.log("Risultato salvato:",t)}const yD=({utenteId:t,onVaiAMeditazioneGuidata:e,onNavigate:n})=>{const[i,o]=J.useState(1),[s,r]=J.useState({domanda1:3,domanda2:3,domanda3:3,domanda4:3,domanda5:3,domanda6:3,domanda7:3,domanda8:3}),[a,l]=J.useState({A:3,B:3,C:3,D:3}),[u,d]=J.useState(null),h=z.useRef(null),m=(y,b)=>{r(w=>({...w,[y]:b}))},g=(y,b)=>{l(w=>({...w,[y]:b}))},v=y=>{h.current&&(h.current.pause(),h.current.currentTime=0);const w={A:"ARCHETIPO A  Delta Puro e Costante.mp3",B:"ARCHETIPO B  Theta  Delta con musica morbida.mp3",C:"ARCHETIPO C  Theta Melodico con leggere variazioni.mp3",D:"ARCHETIPO D  Minimalista (Theta-Delta profondo).mp3"}[y],C=new Audio(`/CLINICAL-WELLNESS-SPA/audio/${w}`);h.current=C,C.volume=0,C.play();const E=setInterval(()=>{C.volume<.95?C.volume+=.05:(C.volume=1,clearInterval(E))},50)},_=()=>{if(!h.current)return;const y=h.current,b=setInterval(()=>{y.volume>.05?y.volume-=.05:(y.volume=0,y.pause(),clearInterval(b))},50)},x=()=>{_();const y=xD(t,s,a);d(y),vD(y),setTimeout(()=>o(4),800)};return z.useEffect(()=>{i===4&&u&&n("testSonoroResult",u)},[i,u]),c.jsxs("div",{className:"p-6 max-w-3xl mx-auto text-black space-y-6",children:[c.jsx("h1",{className:"text-2xl font-semibold",children:"Test Sonoro Personalizzato"}),c.jsxs("div",{className:"flex gap-2 mb-4 text-sm",children:[c.jsx("span",{className:i===1?"font-bold":"",children:"1. Introduzione"}),c.jsx("span",{children:""}),c.jsx("span",{className:i===2?"font-bold":"",children:"2. Minitest"}),c.jsx("span",{children:""}),c.jsx("span",{className:i===3?"font-bold":"",children:"3. Ascolto"}),c.jsx("span",{children:""}),c.jsx("span",{className:i===4?"font-bold":"",children:"4. Risultato"})]}),i===1&&c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow space-y-4",children:[c.jsx("p",{children:"Questo test ti aiuta a identificare il profilo sonoro pi adatto a favorire il tuo rilassamento e il sonno. Il test si compone di due parti:"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[c.jsx("li",{children:"Un breve questionario sulle tue preferenze sonore."}),c.jsx("li",{children:"Lascolto di 4 paesaggi sonori (circa 1 minuto ciascuno)."})]}),c.jsx("p",{children:"Alla fine otterrai un profilo sonoro personalizzato e un trattamento sonoro consigliato, che potrai avviare direttamente nella Meditazione Guidata."}),c.jsx("button",{onClick:()=>o(2),className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded",children:"Inizia il test"})]}),i===2&&c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow space-y-6",children:[c.jsx("p",{className:"text-sm",children:"Rispondi alle seguenti domande in base a come ti senti di solito. Scala da 1 (per niente) a 5 (molto)."}),c.jsx("div",{className:"space-y-4 text-sm",children:Object.keys(s).map((y,b)=>c.jsxs("div",{children:[c.jsxs("label",{className:"block mb-1",children:[b+1,". ",["Preferisci suoni costanti rispetto a quelli con molte variazioni?","Ti rilassi facilmente con una musica lenta in sottofondo?","I suoni naturali (acqua, vento, foresta) ti aiutano a rilassarti?","Ti piace la sensazione di 'vuoto' sonoro, senza melodia?","I toni gravi e profondi ti risultano piacevoli?","Ti distrae facilmente una musica con troppi strumenti?","Ti piace avere una melodia riconoscibile mentre ti rilassi?","Riesci a tollerare suoni continui e molto minimalisti senza annoiarti?"][b]]}),c.jsx("input",{type:"range",min:1,max:5,value:s[y],onChange:w=>m(y,Number(w.target.value)),className:"w-full"}),c.jsxs("div",{children:["Valore: ",s[y]]})]},y))}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("button",{onClick:()=>o(1),className:"bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded",children:"Indietro"}),c.jsx("button",{onClick:()=>o(3),className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded",children:"Prosegui con lascolto"})]})]}),i===3&&c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow space-y-6",children:[c.jsx("p",{className:"text-sm",children:"Ascolta i 4 paesaggi sonori e valuta quanto li trovi adatti al rilassamento."}),["A","B","C","D"].map(y=>c.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"font-semibold",children:["Archetipo ",y]}),c.jsx("button",{onClick:()=>v(y),className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-1 rounded text-sm",children:"Ascolta 1 minuto"})]}),c.jsx("p",{className:"text-xs text-gray-600",children:"Valuta quanto lo trovi adatto al rilassamento (1 = per niente, 5 = molto)."}),c.jsx("input",{type:"range",min:1,max:5,value:a[y],onChange:b=>g(y,Number(b.target.value)),className:"w-full"}),c.jsxs("div",{className:"text-sm",children:["Valore: ",a[y]]})]},y)),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("button",{onClick:()=>o(2),className:"bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded",children:"Indietro"}),c.jsx("button",{onClick:x,className:"bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded",children:"Calcola il profilo sonoro"})]})]})]})},f0={A:"Suoni costanti, profondi e minimali. Favorisce rilassamento profondo e stabilizzazione del sonno.",B:"Transizione morbida da theta a delta con musica avvolgente. Indicato per distensione emotiva.",C:"Theta melodico con leggere variazioni. Stimola rilassamento creativo e immaginazione.",D:"Minimalismo profondo e continuo. Ideale per meditazione profonda e svuotamento mentale."},_D=({risultato:t,onVaiAMeditazioneGuidata:e,onBack:n})=>{if(!t)return c.jsxs("div",{className:"p-6 text-black",children:[c.jsx("p",{children:"Errore: nessun risultato disponibile."}),c.jsx("button",{onClick:n,className:"mt-4 bg-gray-600 hover:bg-gray-500 text-black px-4 py-2 rounded",children:"Torna indietro"})]});const{archetipoDominante:i,punteggiArchetipi:o,fileTrattamento:s,durataConsigliata:r,volumeConsigliato:a}=t,l=()=>{e({musica:s,nomeFile:s==null?void 0:s.split("/").pop(),durata:r||5,volumeMusica:a??50,descrizione:f0[i],archetipoDominante:i})};return c.jsxs("div",{className:"p-6 max-w-3xl mx-auto text-black space-y-6",children:[c.jsx("h1",{className:"text-2xl font-semibold",children:"Il tuo profilo sonoro"}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow space-y-4",children:[c.jsxs("h2",{className:"text-xl font-bold",children:["Archetipo dominante: ",i]}),c.jsxs("p",{className:"text-sm text-black",children:["Profilo sonoro basato sullarchetipo ",i,"."]}),c.jsx("p",{className:"text-sm italic text-gray-700",children:f0[i]||"Descrizione non disponibile."}),c.jsxs("div",{className:"mt-4",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Punteggi"}),c.jsxs("ul",{className:"text-sm space-y-1",children:[c.jsxs("li",{children:["A: ",o.A]}),c.jsxs("li",{children:["B: ",o.B]}),c.jsxs("li",{children:["C: ",o.C]}),c.jsxs("li",{children:["D: ",o.D]})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("h3",{className:"font-semibold mb-1",children:"File consigliato"}),c.jsx("p",{className:"text-sm text-black",children:s==null?void 0:s.split("/").pop()})]})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:n,className:"bg-gray-600 hover:bg-gray-500 text-black px-4 py-2 rounded",children:"Torna indietro"}),c.jsx("button",{onClick:l,className:"bg-green-600 hover:bg-green-500 text-black px-4 py-2 rounded",children:"Avvia meditazione consigliata"})]})]})},bD=({impostazioni:t,onBack:e})=>{const{impostazioni:n,setImpostazioni:i}=kT(),[o,s]=J.useState(""),[r,a]=J.useState(""),[l,u]=J.useState(""),[d,h]=J.useState(50),[m,g]=J.useState(0),v=J.useRef(null),[_,x]=J.useState(!1),y={A:1830,B:1800,C:1800,D:1790};J.useEffect(()=>{t&&(console.log(" Impostazioni ricevute da App:",t),i(t))},[t,i]),J.useEffect(()=>{if(!n){const N=localStorage.getItem("meditazioneImpostazioni");if(N)try{const T=JSON.parse(N);console.log(" Impostazioni recuperate da localStorage:",T),i(T)}catch(T){console.warn(" Errore parsing impostazioni:",T)}}},[n,i]),J.useEffect(()=>{if(!n){console.log(" impostazioni NON ancora disponibili");return}console.log("===================================="),console.log(" AVVIO CONFIGURAZIONE MEDITAZIONE"),console.log("===================================="),console.log("IMPOSTAZIONI RICEVUTE:",n);const N=n.archetipoDominante;console.log(" Archetipo Dominante:",N);const T=n.musica||n.fileTrattamento||"";console.log(" Sorgente Audio grezza:",T);const S=T?`${window.location.origin}/CLINICAL-WELLNESS-SPA/${T}`:"";console.log(" Percorso completo costruito:",S);const k=T.split("/").pop()||"";console.log(" Nome file:",k);const I=y[N]||1800;console.log(" Durata assegnata (sec):",I);const P=n.volumeMusica??50;console.log(" Volume assegnato:",P),console.log("------------------------------------"),s(S),a(k),u(n.descrizione||""),g(I),h(P),console.log("FINE CONFIGURAZIONE"),console.log("====================================")},[n]);const b=()=>{if(console.log(" AVVIO PREMUTO"),!v.current){console.log(" ERRORE: audioRef.current  null");return}if(!o){console.log(" ERRORE: musica  vuoto, impossibile avviare"),alert("Nessun file audio selezionato");return}console.log(" File da riprodurre:",o),console.log(" Volume:",d),v.current.onerror=()=>{console.log(" ERRORE: impossibile caricare il file:",o),alert("File audio non trovato: "+o)},v.current.volume=d/100,v.current.play(),x(!0),console.log(" RIPRODUZIONE AVVIATA")},w=()=>{if(console.log(" STOP PREMUTO"),!v.current){console.log(" ERRORE: audioRef.current  null");return}v.current.pause(),v.current.currentTime=0;const N=n==null?void 0:n.archetipoDominante,T=y[N]||1800;g(T),x(!1),console.log(" RIPRODUZIONE INTERROTTA E TIMER RESETTATO")};J.useEffect(()=>{if(!_)return;console.log(" TIMER AVVIATO");const N=setInterval(()=>{g(T=>{var S;return console.log(" Timer:",T),T<=1?(console.log(" TIMER COMPLETATO  AUDIO TERMINATO"),(S=v.current)==null||S.pause(),x(!1),0):T-1})},1e3);return()=>clearInterval(N)},[_]);const C=N=>{const T=Math.floor(N/60),S=N%60;return`${T}:${S.toString().padStart(2,"0")}`},E=o!=="";return c.jsxs("div",{className:"p-6 max-w-3xl mx-auto text-black space-y-6",children:[c.jsx("h1",{className:"text-2xl font-semibold",children:"Meditazione Guidata"}),c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow space-y-6",children:[l&&c.jsx("p",{className:"text-gray-700 text-sm italic",children:l}),c.jsxs("div",{children:[c.jsx("label",{className:"block mb-1 font-semibold",children:"File Audio"}),c.jsx("div",{className:"bg-gray-100 p-3 rounded text-sm",children:r||"Nessun file selezionato"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block mb-1 font-semibold",children:"Durata"}),c.jsx("div",{className:"bg-gray-100 p-3 rounded text-sm",children:C(m)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block mb-1 font-semibold",children:"Volume Musica"}),c.jsx("input",{type:"range",min:0,max:100,value:d,onChange:N=>h(Number(N.target.value)),className:"w-full"})]}),c.jsx("button",{disabled:!E||_,className:`w-full py-3 rounded ${E&&!_?"bg-green-600 hover:bg-green-500 text-white":"bg-gray-400 cursor-not-allowed text-white"}`,onClick:b,children:"AVVIA"}),c.jsx("button",{disabled:!_,className:`w-full py-3 rounded ${_?"bg-red-600 hover:bg-red-500 text-white":"bg-gray-400 cursor-not-allowed text-white"}`,onClick:w,children:"STOP"}),o&&c.jsx("audio",{ref:v,src:o})]})]})},wD=({risultato:t,onBack:e,onNavigate:n})=>{const i="profileId"in t?t:Ey(t.score),o=ky[i.profileId],s=o.severity==="critico"?"Critico":o.severity==="moderato"?"Area da ottimizzare":"Buon equilibrio",r={fermentativo:"Il tuo intestino mostra una tendenza fermentativa: possibile eccesso di zuccheri, gonfiore e gas dopo i pasti.",putrefattivo:"La tua digestione sembra lenta, con possibile stasi intestinale e sensazione di pesantezza post-prandiale.","ipo-diverso":"La tua alimentazione appare poco varia: il microbioma potrebbe essere povero in specie diverse.","disbiotico-stress":"Il tuo intestino mostra segni di squilibrio legati allo stress neurovegetativo e alla tensione viscerale.",equilibrato:"Il tuo microbioma appare complessivamente ben supportato da stile di vita e abitudini alimentari."},a={fermentativo:["Elevato consumo di zuccheri semplici e farine raffinate","Pasti frequenti e ravvicinati","Ridotto apporto di fibre solubili"],putrefattivo:["Eccesso di proteine animali e carni processate","Scarso apporto di fibre e acqua","Transito intestinale rallentato"],"ipo-diverso":["Dieta monotona e ripetitiva","Scarso consumo di legumi, verdure e cibi fermentati","Poca esposizione a cibi freschi e di stagione"],"disbiotico-stress":["Stress emotivo e mentale cronico","Ritmo sonno-veglia irregolare","Pasti consumati in fretta o in stato di tensione"],equilibrato:["Buon apporto di fibre e cibi fermentati","Stile di vita attivo e regolare","Gestione discreta di stress e ritmo sonno-veglia"]},l={fermentativo:["Gonfiore e gas, soprattutto dopo i pasti","Sensazione di pancia gonfia a fine giornata","Possibile alternanza alvo in risposta ai carboidrati"],putrefattivo:["Pesantezza e stanchezza dopo i pasti","Alito pesante o sapore amaro in bocca","Feci maleodoranti o transito rallentato"],"ipo-diverso":["Maggiore reattivit intestinale a cambiamenti della dieta","Sensazione di intestino delicato","Ridotta tolleranza a alcuni alimenti"],"disbiotico-stress":["Nodo allo stomaco o tensione addominale","Alternanza tra stipsi e urgenza evacuativa","Sintomi viscerali che peggiorano con lo stress"],equilibrato:["Regolarit intestinale soddisfacente","Energia relativamente stabile durante la giornata","Disturbi digestivi solo occasionali"]},u={fermentativo:["Riduci zuccheri semplici e farine raffinate","Aumenta fibre solubili (avena, mele, carote)","Inserisci cibi fermentati non zuccherati (kefir, yogurt naturale)"],putrefattivo:["Riduci carni rosse/processate, aumenta legumi e pesce azzurro","Aumenta lidratazione (acqua durante la giornata)","Favorisci verdure cotte leggere a cena"],"ipo-diverso":["Introduce gradualmente nuovi alimenti ogni settimana","Aumenta variet di verdure, legumi e frutta di stagione","Inserisci cibi fermentati (yogurt, kefir, verdure fermentate)"],"disbiotico-stress":["Crea rituali di pasto lenti e senza schermi","Preferisci pasti leggeri la sera","Associa respirazione calma prima/dopo il pasto principale"],equilibrato:["Mantieni la variet di fibre e polifenoli","Limita eccessi di alcol e zuccheri di conforto","Conserva orari di pasto relativamente regolari"]},d={fermentativo:["Probiotici multiceppo con Lactobacillus plantarum e Bifidobacterium breve","Prebiotici delicati (inulina a basso dosaggio)"],putrefattivo:["Probiotici orientati alla regolarit intestinale","Fibre solubili e insolubili combinate (psyllium + verdure)"],"ipo-diverso":["Probiotici multiceppo ad ampio spettro","Prebiotici da legumi, cipolla, porro, asparagi"],"disbiotico-stress":["Ceppi con azione sul gut-brain axis (es. Lactobacillus rhamnosus)","Abbinamento con magnesio e tecniche di rilassamento"],equilibrato:["Eventuali cicli brevi di probiotici di mantenimento","Uso di fibre prebiotiche attraverso la dieta quotidiana"]},h={fermentativo:["Passeggiata digestiva di 1015 minuti dopo i pasti principali","Respirazione ritmica 55 per favorire coerenza autonomica"],putrefattivo:["Idratazione costante durante il giorno","Leggera mobilit serale per stimolare il transito"],"ipo-diverso":["Rotazione settimanale degli alimenti (non le stesse cose ogni giorno)","Esposizione regolare alla natura e allaria aperta"],"disbiotico-stress":["Respirazione 46 vagale 510 minuti al giorno","Meditazione guidata viscerale serale"],equilibrato:["Mantenimento delle abitudini attuali","Brevi pratiche di consapevolezza durante la giornata"]},m=()=>{n("wellnessRoutine")},g=()=>{n("dashboard")},v=()=>{n("breathing")};return c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in",children:[c.jsxs("div",{className:"mb-6 flex items-center justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-1",children:"Analisi del Microbioma"}),c.jsx("p",{className:"text-slate-500 text-sm",children:"Risultato personalizzato in base alle tue risposte"})]}),c.jsx("button",{onClick:e,className:"px-4 py-2 rounded-full border border-slate-200 text-slate-600 text-sm hover:bg-slate-50 transition-colors",children:" Torna ai test"})]}),c.jsxs("div",{className:"grid gap-6 md:grid-cols-3 mb-8",children:[c.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6 md:col-span-2 flex flex-col gap-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`inline-flex h-10 w-10 items-center justify-center rounded-full text-white ${o.accentColor}`,children:""}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Profilo Microbiotico"}),c.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:o.label})]})]}),c.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:r[i.profileId]}),c.jsxs("div",{className:"flex flex-wrap gap-3 mt-2",children:[c.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-600",children:["Stato: ",s]}),c.jsxs("span",{className:"inline-flex items-center rounded-full bg-sky-50 px-3 py-1 text-xs font-medium text-sky-700",children:["Punteggio: ",i.score,"/80"]})]})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6 flex flex-col justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400 mb-1",children:"Passo successivo consigliato"}),c.jsx("p",{className:"text-sm text-slate-700 mb-3",children:"Integra questo risultato nel tuo percorso globale di benessere."})]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("button",{onClick:g,className:"w-full py-2.5 text-sm font-semibold rounded-xl bg-sky-600 text-white hover:bg-sky-700 transition-colors",children:"Vai alla Wellness Dashboard"}),c.jsx("button",{onClick:m,className:"w-full py-2.5 text-sm font-semibold rounded-xl bg-slate-50 text-slate-700 border border-slate-200 hover:bg-slate-100 transition-colors",children:"Crea una Routine personalizzata"})]})]})]}),c.jsxs("div",{className:"grid gap-6 md:grid-cols-2 mb-8",children:[c.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[c.jsx("h4",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Cause probabili"}),c.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Fattori che possono aver contribuito a questo profilo."}),c.jsx("ul",{className:"space-y-2 text-sm text-slate-700",children:a[i.profileId].map((_,x)=>c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-slate-400"}),c.jsx("span",{children:_})]},x))})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[c.jsx("h4",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Sintomi associati"}),c.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Segnali che potresti riconoscere nella tua quotidianit."}),c.jsx("ul",{className:"space-y-2 text-sm text-slate-700",children:l[i.profileId].map((_,x)=>c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-slate-400"}),c.jsx("span",{children:_})]},x))})]})]}),c.jsxs("div",{className:"grid gap-6 md:grid-cols-2 mb-8",children:[c.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[c.jsx("h4",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Consigli alimentari"}),c.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Indicazioni pratiche da integrare nei tuoi pasti."}),c.jsx("ul",{className:"space-y-2 text-sm text-slate-700",children:u[i.profileId].map((_,x)=>c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-sky-400"}),c.jsx("span",{children:_})]},x))})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[c.jsx("h4",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Probiotici & integrazione"}),c.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Linee generali da discutere con il tuo professionista di fiducia."}),c.jsx("ul",{className:"space-y-2 text-sm text-slate-700",children:d[i.profileId].map((_,x)=>c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-emerald-400"}),c.jsx("span",{children:_})]},x))})]})]}),c.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[c.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[c.jsx("h4",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Routine consigliate"}),c.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Azioni semplici e ripetibili per migliorare il tuo equilibrio intestinale."}),c.jsx("ul",{className:"space-y-2 text-sm text-slate-700",children:h[i.profileId].map((_,x)=>c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-violet-400"}),c.jsx("span",{children:_})]},x))})]}),c.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6 flex flex-col justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Collega questo risultato al resto del tuo percorso"}),c.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Integra l'equilibrio del microbioma con stress, sonno e attivit fisica."}),c.jsxs("ul",{className:"space-y-2 text-sm text-slate-700 mb-4",children:[c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-sky-400"}),c.jsx("span",{children:"Area Stress: utilizza respirazione e meditazione guidata."})]}),c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-amber-400"}),c.jsx("span",{children:"Area Sonno: favorisci ritmo regolare e igiene del sonno."})]}),c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-emerald-400"}),c.jsx("span",{children:"Area Fitness: introduci movimento regolare e dolce."})]})]})]}),c.jsx("button",{onClick:v,className:"w-full py-2.5 text-sm font-semibold rounded-xl bg-sky-50 text-sky-700 border border-sky-200 hover:bg-sky-100 transition-colors",children:"Vai agli strumenti anti-stress"})]})]})]})};zo.register(Qa,xo,sn,ff,df,Ps,Du);const SD=({lf:t,hf:e})=>{const n={datasets:[{label:"Tua Posizione",data:[{x:t,y:e}],backgroundColor:"#0ea5e9",pointRadius:8,pointHoverRadius:10,zIndex:10}]},i={responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"logarithmic",min:1,max:1e4,title:{display:!0,text:"LF Power (ms)",font:{weight:"bold"}},grid:{color:"#e2e8f0"}},y:{type:"logarithmic",min:1,max:1e4,title:{display:!0,text:"HF Power (ms)",font:{weight:"bold"}},grid:{color:"#e2e8f0"}}},plugins:{legend:{display:!1},tooltip:{enabled:!0}}},o=[{id:"customCanvasBackgroundColor",beforeDraw:s=>{const{ctx:r,chartArea:{left:a,top:l,width:u,height:d},scales:{x:h,y:m}}=s,g=(v,_,x,y,b)=>{const w=h.getPixelForValue(v),C=h.getPixelForValue(_),E=m.getPixelForValue(y),N=m.getPixelForValue(x);r.fillStyle=b,r.fillRect(w,E,C-w,N-E)};g(1,100,1,100,"rgba(239, 68, 68, 0.1)"),g(100,1e3,100,1e3,"rgba(16, 185, 129, 0.1)"),g(1,100,100,1e3,"rgba(245, 158, 11, 0.1)"),g(500,1e4,1,150,"rgba(14, 165, 233, 0.1)")}}];return c.jsx("div",{className:"w-full h-full min-h-[350px]",children:c.jsx(tT,{data:n,options:i,plugins:o})})};function Ac(t){if(t<25)return"collasso_parasimpatico";if(t>=25&&t<=35)return"sovraccarico_simpatico";if(t>=36&&t<=45)return"neutro";if(t>=46&&t<=70||t>70)return"prevalenza_vagale"}const CD=({state:t})=>{const e={collasso_parasimpatico:"bg-red-600",sovraccarico_simpatico:"bg-orange-500",neutro:"bg-emerald-600",prevalenza_vagale:"bg-sky-600"},n={collasso_parasimpatico:"Collasso Parasimpatico",sovraccarico_simpatico:"Sovraccarico Simpatico",neutro:"Equilibrio Neutro",prevalenza_vagale:"Prevalenza Vagale"};return c.jsx("span",{className:`inline-block px-3 py-1 text-white text-xs font-bold rounded-full ${e[t]}`,children:n[t]})},kD=({text:t})=>c.jsxs("span",{className:"relative group cursor-pointer ml-2 text-purple-700 font-bold",children:["",c.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-56 p-2 text-xs text-white bg-purple-700 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",children:t})]}),ED=({onNavigate:t})=>{const[e,n]=z.useState(200),[i,o]=z.useState(50),[s,r]=z.useState(null),[a,l]=z.useState(!1),[u,d]=z.useState(""),{buildPlayerPayload:h}=Jd(),m=()=>{let _="Bilanciato",x="text-emerald-600",y="Il tuo sistema nervoso autonomo  in equilibrio.",b="success";e<100&&i<100?(_="Stress fisico o mentale, problemi acuti",x="text-red-600",y="I livelli di potenza sono bassi. Potresti essere in una fase di stress acuto o stanchezza cronica.",b="error"):e>1e3&&i<150?(_="Prevalenza Simpatica (Tensione)",x="text-orange-600",y="Sei in uno stato di allerta. Consigliata meditazione o coerenza cardiaca.",b="warning"):i>500&&(_="Prevalenza Vagale (Recupero)",x="text-sky-600",y="Ottimo stato di recupero parasimpatico.",b="success"),r({status:_,color:x,message:y,type:b})},g=()=>e<100&&i<100?"collasso_parasimpatico":e>1e3&&i<150?"sovraccarico_simpatico":i>500?"prevalenza_vagale":"neutro",v=()=>{const _=Number(u);if(!_||_<=0){alert("Inserisci un valore RMSSD valido");return}n(_),o(_);const x=Ac(_);r({status:`Stato autonomico (RMSSD): ${x}`,color:"text-purple-700",message:`Valore RMSSD: ${_}. Interpretazione autonoma: ${x}.`,type:"success"})};return c.jsxs("div",{className:"p-4 md:p-8 animate-fade-in max-w-6xl mx-auto pb-32",children:[c.jsx("h1",{className:"text-4xl font-bold text-slate-800 mb-2",children:"Analisi HRV (Variabilit Cardiaca)"}),c.jsx("p",{className:"text-slate-600 mb-8 font-medium italic",children:"Interpreta l'equilibrio del tuo sistema nervoso autonomo."}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[c.jsxs("div",{className:"lg:col-span-4 bg-white p-6 rounded-3xl shadow-lg border border-slate-100 h-fit",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-6",children:"Inserisci i Dati"}),c.jsxs("div",{className:"space-y-4 mb-8",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase mb-1",children:"LF Power (ms)"}),c.jsx("input",{type:"number",value:e,onChange:_=>n(Number(_.target.value)),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-700 focus:ring-2 focus:ring-sky-500 outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase mb-1",children:"HF Power (ms)"}),c.jsx("input",{type:"number",value:i,onChange:_=>o(Number(_.target.value)),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl font-bold text-slate-700 focus:ring-2 focus:ring-sky-500 outline-none"})]})]}),c.jsx("button",{onClick:m,className:"w-full py-4 bg-sky-600 text-white font-black rounded-2xl shadow-lg shadow-sky-100 hover:bg-sky-700 transition-all flex items-center justify-center gap-2 transform active:scale-95",children:"ANALIZZA ORA"}),c.jsx("button",{onClick:()=>{const _=g(),x=h(_);t("hrvPlayerPremium",{payload:x})},className:"mt-4 w-full py-4 bg-gray-800 text-white font-black rounded-2xl shadow-lg hover:bg-gray-900 transition-all",children:"Routine Specialistica HRV"}),c.jsx("button",{onClick:()=>l(!0),className:"mt-4 w-full py-4 bg-purple-600 text-white font-black rounded-2xl shadow-lg hover:bg-purple-700 transition-all",children:"HRV Oura (RMSSD)"}),a&&c.jsxs("div",{className:"mt-4 p-4 bg-purple-50 border border-purple-200 rounded-xl",children:[c.jsxs("label",{className:"block text-purple-800 font-semibold mb-2",children:["Inserisci HRV Oura (RMSSD)",c.jsx(kD,{text:"RMSSD misura la variabilit battito-battito. Valori bassi indicano stress o attivazione simpatica, valori alti indicano recupero parasimpatico."})]}),c.jsx("input",{type:"number",value:u,onChange:_=>d(_.target.value),className:"w-full px-3 py-2 border rounded-lg",placeholder:"Es. 32"}),c.jsx("button",{onClick:v,className:"mt-3 w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition",children:"Valorizza HRV Oura"})]})]}),c.jsxs("div",{className:"lg:col-span-8 bg-white p-6 rounded-3xl shadow-lg border border-slate-100",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-6",children:"Mappa del Sistema Nervoso Autonomo"}),c.jsx("div",{className:"h-[400px]",children:c.jsx(SD,{lf:e,hf:i})}),s&&c.jsx("p",{className:"mt-4 text-sm text-slate-600 italic",children:"Interpretazione clinica: questo punto rappresenta il tuo equilibrio autonomico in base ai valori LF/HF o RMSSD. Le zone colorate indicano aree di attivazione simpatica, parasimpatica o equilibrio."}),s&&c.jsxs("div",{className:`mt-8 p-6 rounded-2xl border-l-8 animate-slide-in-up ${s.type==="error"?"bg-red-50 border-red-500":s.type==="warning"?"bg-orange-50 border-orange-500":"bg-emerald-50 border-emerald-500"}`,children:[c.jsx("div",{className:"flex items-center gap-3 mb-2",children:c.jsx(CD,{state:a&&u?Ac(Number(u)):g()})}),c.jsx("p",{className:"text-slate-700 font-medium",children:s.message})]}),s&&c.jsx("button",{onClick:()=>{const _=a&&u?Ac(Number(u)):g(),x=h(_);t("hrvPlayerPremium",{payload:x})},className:"mt-6 w-full py-4 bg-emerald-600 text-white font-black rounded-2xl shadow-lg hover:bg-emerald-700 transition-all",children:"Mostra Piano Terapeutico"})]})]})]})},TD=[{id:1,label:"ANS High Performance",lf_range:[5e3,1e4],hf_range:[1101,1e4],status:"OK",zone:"ANS High Performance",routine_main:"Mindfulness avanzata",routine_secondary:"Stretching dolce",audio:"Mindfulness del corpo",duration:[10,15],goal:"Mantenere la performance autonomica"},{id:2,label:"Normotonia",lf_range:[500,1e4],hf_range:[150,1e4],status:"OK",zone:"ANS Balanced",routine_main:"Coerenza cardiaca 6s",routine_secondary:"Respirazione diaframmatica",audio:"Coerenza 6-6",duration:[5,10],goal:"Consolidare equilibrio SNS/PNS"},{id:3,label:"Profondo relax / Inibizione SNS",lf_range:[1,10],hf_range:[100,1e4],status:"OK",zone:"PNS High, SNS Low",routine_main:"Mindfulness sensoriale",routine_secondary:"Grounding",audio:"Consapevolezza del respiro",duration:[10,15],goal:"Stabilizzare il tono parasimpatico"},{id:4,label:"Relax psicofisico",lf_range:[10,500],hf_range:[1101,1e4],status:"OK",zone:"PNS High, SNS Low",routine_main:"Rilassamento muscolare progressivo",routine_secondary:"Stretching statico",audio:"Rilascio tensioni",duration:[10,20],goal:"Mantenere il recupero vagale"},{id:5,label:"ANS Balanced (zona centrale)",lf_range:[100,500],hf_range:[100,300],status:"OK",zone:"Normotonia",routine_main:"Coerenza cardiaca 6s",routine_secondary:"Mindfulness breve",audio:"Respirazione guidata",duration:[5,10],goal:"Stabilizzare l'equilibrio autonomico"},{id:6,label:"Aging / Fatica cronica / SNS debole",lf_range:[1,10],hf_range:[7,99],status:"NO",zone:"SNS Low, PNS Low",routine_main:"Attivazione dolce",routine_secondary:"Stretching dinamico",audio:"Attivazione energetica",duration:[10,15],goal:"Riattivare il tono autonomico"},{id:7,label:"Total Hypotonia",lf_range:[1,10],hf_range:[1,7],status:"NO",zone:"ANS Low Hypotonia",routine_main:"Attivazione dolce + respirazione ritmica",routine_secondary:"Camminata consapevole",audio:"Energia e centratura",duration:[15,20],goal:"Riattivare progressivamente il sistema autonomico"},{id:8,label:"Lieve ipertono vagale",lf_range:[10,500],hf_range:[300,1100],status:"NO",zone:"PNS High",routine_main:"Respirazione equilibrata 4-4",routine_secondary:"Stretching dinamico",audio:"Respirazione bilanciata",duration:[10,15],goal:"Riequilibrare il tono parasimpatico"},{id:9,label:"Impegno ortosimpatico",lf_range:[500,2e3],hf_range:[96,149],status:"NO",zone:"SNS High",routine_main:"Coerenza cardiaca 6s",routine_secondary:"Rilassamento muscolare",audio:"Coerenza 6-6",duration:[10,15],goal:"Ridurre l'attivazione simpatica"},{id:10,label:"Prevalenza simpatica",lf_range:[2e3,4e3],hf_range:[96,149],status:"NO",zone:"SNS High",routine_main:"Coerenza cardiaca profonda",routine_secondary:"Mindfulness guidata",audio:"Respirazione profonda",duration:[15,20],goal:"Abbassare il tono simpatico"},{id:11,label:"Stress ortosimpatico",lf_range:[4e3,1e4],hf_range:[96,149],status:"NO",zone:"SNS High",routine_main:"Coerenza cardiaca 6s",routine_secondary:"Rilassamento muscolare progressivo",audio:"Coerenza profonda",duration:[20,30],goal:"Intervento profondo di riequilibrio"},{id:12,label:"Stress fisico o mentale acuto",lf_range:[100,1e4],hf_range:[7,95],status:"NO",zone:"SNS High, PNS Low",routine_main:"Coerenza cardiaca + mindfulness",routine_secondary:"Grounding sensoriale",audio:"Rilascio dello stress",duration:[15,20],goal:"Ridurre SNS e ripristinare PNS"},{id:13,label:"Stress estremo",lf_range:[100,1e4],hf_range:[1,7],status:"NO",zone:"SNS High, PNS Low",routine_main:"Coerenza cardiaca 6s",routine_secondary:"Rilassamento guidato",audio:"Respirazione terapeutica",duration:[20,30],goal:"Stabilizzazione autonoma profonda"}],xa={hrv_states:TD};function ID(t,e){if(t>=5e3&&e>=1101)return 1;if(t>=500&&e>=150)return 2;if(t>=1&&t<=10&&e>=100)return 3;if(t>=10&&t<=500&&e>=1101)return 4;if(t>=100&&t<=500&&e>=100&&e<=300)return 5;if(t>=1&&t<=10&&e>=7&&e<=99)return 6;if(t>=1&&t<=10&&e>=1&&e<=7)return 7;if(t>=10&&t<=500&&e>=300&&e<=1100)return 8;if(t>=500&&t<=2e3&&e>=96&&e<=149)return 9;if(t>=2e3&&t<=4e3&&e>=96&&e<=149)return 10;if(t>=4e3&&e>=96&&e<=149)return 11;if(t>=100&&e>=7&&e<=95)return 12;if(t>=100&&e>=1&&e<=7)return 13;if(xa&&xa.hrv_states)for(const n of xa.hrv_states){const[i,o]=n.lf_range,[s,r]=n.hf_range;if(t>=i&&t<=o&&e>=s&&e<=r)return n.id}return 5}function ND(t){const n=xa.hrv_states.find(i=>i.id===t);return n?{id:n.id,label:n.label,zone:n.zone,routine_main:n.routine_main,routine_secondary:n.routine_secondary,audio:n.audio,duration:n.duration,goal:n.goal}:null}function AD(t){switch(t){case 1:return"focus_concentrazione";case 2:return"recupero_parasimpatico";case 3:return"sonno_profondo";case 4:return"rilassamento_emotivo";case 5:return"recupero_parasimpatico";case 6:return"umore_basso";case 7:return"recupero_mentale_burnout";case 8:return"somatizzazione";case 9:return"stress_iperattivazione";case 10:return"ansia";case 11:case 12:case 13:return"ansia_severa";default:return"stress_iperattivazione"}}const PD={meditazione_profonda:{label:"Meditazione profonda / Rilassamento intenso",emoji:"",tracks:["La_meditazione_epsilon","Meditazione_theta","ARCHETIPO_D_Minimalista_Theta_Delta","Il_Theta_Healing_Della_Natura"]},rilassamento_emotivo:{label:"Rilassamento emotivo / Calmante",emoji:"",tracks:["Oceano_rilassamento","Rigenerazione","Ringiovanimento","LenergiaDellamore"]},regolazione_ansia:{label:"Riduzione ansia",emoji:"",tracks:["Alleviare_l_ansia","nervosismo","Perdono","Neuromassaggi"]},neuroacustica_theta:{label:"Neuroacustica Theta",emoji:"",tracks:["archetip0_a_trattamento","archetip0_b_trattamento","archetip0_c_trattamento","ARCHETIPO_A_Theta_Data_Puro_e_Costante","ARCHETIPO_B_Theta_musica_morbida","ARCHETIPO_C_Theta_melodico"]},neuroacustica_generale:{label:"Neuroacustica generale",emoji:"",tracks:["Alfa-trance","Gamma_riavvio","Una_palestra_per_il_cervello","Neuromatrix_2_Transforming_Subconscious"]},focus_cognitivo:{label:"Focus e concentrazione",emoji:"",tracks:["Il_miglioramento_della_memoria","La_motivazione"]},borderline_richiesti:{label:"Audio emozionali / simbolici richiesti",emoji:"",tracks:["La_correzione_dellaura","La_risonanza_dei_chakra","Il_Mantra_Del_Successo","La_pulizia_del_fegato"]},sonno_profondo:{label:"Sonno profondo",emoji:"",tracks:["Il_ripristino_dell_organsimo_durante_il_sonno","La_meditazione_epsilon","ARCHETIPO_D_Minimalista_Theta_Delta"]}},RD={ansia:{label:"Ansia",categories:["regolazione_ansia","rilassamento_emotivo"],protocols:["coherence_5_5"],lifestyle:["respirazione 5 minuti","riduzione caffeina"]},ansia_severa:{label:"Ansia severa",categories:["meditazione_profonda","regolazione_ansia"],protocols:["coherence_5_5"],lifestyle:["respirazione lenta","ambiente silenzioso"]},stress_iperattivazione:{label:"Stress / Iperattivazione",categories:["rilassamento_emotivo","neuroacustica_generale"],protocols:["coherence_5_5"],lifestyle:["pausa attiva","camminata 10 minuti"]},nervosismo:{label:"Nervosismo",categories:["regolazione_ansia"],protocols:["coherence_5_5"],lifestyle:["respirazione diaframmatica"]},sonno_disturbato:{label:"Sonno disturbato",categories:["rilassamento_emotivo","sonno_profondo"],protocols:["4_7_8_sonno"],lifestyle:["no schermi 1h prima","routine serale"]},sonno_profondo:{label:"Sonno profondo",categories:["sonno_profondo","meditazione_profonda"],protocols:["4_7_8_sonno"],lifestyle:["ambiente buio","temperatura fresca"]},hrv_molto_basso:{label:"HRV molto basso",categories:["meditazione_profonda","sonno_profondo"],protocols:["coherence_5_5"],lifestyle:["idratazione","riduzione stress"]},recupero_parasimpatico:{label:"Recupero parasimpatico",categories:["meditazione_profonda","rilassamento_emotivo"],protocols:["coherence_5_5"],lifestyle:["respirazione lenta","stretching leggero"]},focus_concentrazione:{label:"Focus / Concentrazione",categories:["focus_cognitivo","neuroacustica_generale"],protocols:["6_6_allenamento"],lifestyle:["idratazione","pausa attiva"]},somatizzazione:{label:"Somatizzazione",categories:["rilassamento_emotivo","regolazione_ansia"],protocols:["coherence_5_5"],lifestyle:["respirazione lenta","movimento dolce"]},umore_basso:{label:"Umore basso",categories:["rilassamento_emotivo","focus_cognitivo"],protocols:["coherence_5_5"],lifestyle:["luce naturale","attivit piacevole"]},recupero_mentale_burnout:{label:"Recupero mentale / Burnout",categories:["meditazione_profonda","neuroacustica_generale"],protocols:["coherence_5_5"],lifestyle:["riduzione carico","pause frequenti"]}},MD={coherence_5_5:{name:"5-5 Coerenza Cardiaca",inhale:5,exhale:5},"4_7_8_sonno":{name:"4-7-8 Sonno",inhale:4,hold:7,exhale:8},"6_6_allenamento":{name:"6-6 Allenamento",inhale:6,exhale:6}},Pc={categories:PD,deficits:RD,protocols:MD},Dn={"Coerenza 4-4":"/CLINICAL-WELLNESS-SPA/audio/Alfa-trance.mp3","Coerenza 5-5":"/CLINICAL-WELLNESS-SPA/audio/Meditazione_theta.mp3","Coerenza 6-6":"/CLINICAL-WELLNESS-SPA/audio/ARCHETIPO A  Theta  Data Puro e Costante.mp3","Respirazione bilanciata":"/CLINICAL-WELLNESS-SPA/audio/Alfa-trance.mp3","Respirazione terapeutica":"/CLINICAL-WELLNESS-SPA/audio/Il_Theta-Healing_Della_Natura.mp3","Rilascio dello stress":"/CLINICAL-WELLNESS-SPA/audio/Oceano-rilassamento.mp3","Rilassamento emotivo":"/CLINICAL-WELLNESS-SPA/audio/La_risonanza_dei_chakra.mp3","Attivazione lieve":"/CLINICAL-WELLNESS-SPA/audio/Gamma_riavvio.mp3","Attivazione intensa":"/CLINICAL-WELLNESS-SPA/audio/Neuromatrix 2.0.mp3","Sovraccarico simpatico":"/CLINICAL-WELLNESS-SPA/audio/Neuromassaggi.mp3","Collasso parasimpatico":"/CLINICAL-WELLNESS-SPA/audio/ARCHETIPO D  Minimalista (Theta-Delta profondo).mp3",Neutro:"/CLINICAL-WELLNESS-SPA/audio/La_meditazione_epsilon.mp3","Meditativo profondo":"/CLINICAL-WELLNESS-SPA/audio/Il_Theta-Healing_Della_Natura.mp3",Alfa_trance:"/CLINICAL-WELLNESS-SPA/audio/Alfa-trance.mp3",Gamma_riavvio:"/CLINICAL-WELLNESS-SPA/audio/Gamma_riavvio.mp3",Meditazione_theta:"/CLINICAL-WELLNESS-SPA/audio/Meditazione_theta.mp3",La_meditazione_epsilon:"/CLINICAL-WELLNESS-SPA/audio/La_meditazione_epsilon.mp3",Il_Theta_Healing_Della_Natura:"/CLINICAL-WELLNESS-SPA/audio/Il_Theta-Healing_Della_Natura.mp3",archetip0_a_trattamento:"/CLINICAL-WELLNESS-SPA/audio/archetip0_a_trattamento.mp3",archetip0_b_trattamento:"/CLINICAL-WELLNESS-SPA/audio/archetip0_b_trattamento.mp3",archetip0_c_trattamento:"/CLINICAL-WELLNESS-SPA/audio/archetip0_c_trattamento.mp3",archetip0_d_trattamento:"/CLINICAL-WELLNESS-SPA/audio/archetip0_d_trattamento.mp3",ARCHETIPO_A_Theta_Data_Puro_e_Costante:"/CLINICAL-WELLNESS-SPA/audio/ARCHETIPO A  Theta  Data Puro e Costante.mp3",ARCHETIPO_B_Theta_musica_morbida:"/CLINICAL-WELLNESS-SPA/audio/ARCHETIPO B  Theta con musica morbida.mp3",ARCHETIPO_C_Theta_melodico:"/CLINICAL-WELLNESS-SPA/audio/ARCHETIPO C  Theta Melodico con leggere variazioni.mp3",ARCHETIPO_D_Minimalista_Theta_Delta:"/CLINICAL-WELLNESS-SPA/audio/ARCHETIPO D  Minimalista (Theta-Delta profondo).mp3",Perdono:"/CLINICAL-WELLNESS-SPA/audio/Perdono.mp3",Neuromassaggi:"/CLINICAL-WELLNESS-SPA/audio/Neuromassage.mp3",Oceano_rilassamento:"/CLINICAL-WELLNESS-SPA/audio/Oceano-rilassamento.mp3",Rigenerazione:"/CLINICAL-WELLNESS-SPA/audio/Rigenerazione.mp3",Ringiovanimento:"/CLINICAL-WELLNESS-SPA/audio/Ringiovanimento.mp3",Una_palestra_per_il_cervello:"/CLINICAL-WELLNESS-SPA/audio/Una_palestra_per_il_cervello.mp3","Neuromatrix 2.0":"/CLINICAL-WELLNESS-SPA/audio/Neuromatrix 2.0.mp3",Alleviare_l_ansia:"/CLINICAL-WELLNESS-SPA/audio/ansia.mp3",nervosismo:"/CLINICAL-WELLNESS-SPA/audio/nervosismo.mp3",La_correzione_dellaura:"/CLINICAL-WELLNESS-SPA/audio/La_correzione_dellaura.mp3",La_risonanza_dei_chakra:"/CLINICAL-WELLNESS-SPA/audio/La_risonanza_dei_chakra.mp3",Il_Mantra_Del_Successo:"/CLINICAL-WELLNESS-SPA/audio/Il_Mantra_Del_Successo.mp3",La_pulizia_del_fegato:"/CLINICAL-WELLNESS-SPA/audio/fegato.mp3",LenergiaDellamore:"/CLINICAL-WELLNESS-SPA/audio/amore.mp3"};function LD(t){const e=Pc.deficits[t];if(!e)return console.warn(`Deficit non trovato: ${t}`),null;const n=e.categories.map(o=>{const s=Pc.categories[o];if(!s)return console.warn(`Categoria non trovata: ${o}`),null;const r=s.tracks.map(a=>{const l=Dn[a];return l?{id:a,file:l}:(console.warn(`File audio non trovato: ${a}`),null)}).filter(Boolean);return{id:o,label:s.label,emoji:s.emoji,tracks:r}}).filter(Boolean),i=(e.protocols||[]).map(o=>Pc.protocols[o]);return{deficit:t,label:e.label,categories:n,protocols:i,lifestyle:e.lifestyle||[]}}const DD=({lf:t,hf:e,onNavigate:n})=>{const i=ID(t,e),o=ND(i),s=AD(i),r=LD(s),{buildPlayerPayload:a}=Jd(),l={1:"prevalenza_vagale",2:"meditativo_profondo",3:"rilassamento_emotivo",4:"rilascio_dello_stress",5:"neutro",6:"attivazione_lieve",7:"attivazione_intensa",8:"sovraccarico_simpatico",9:"collasso_parasimpatico",10:"attivazione_intensa",11:"sovraccarico_simpatico",12:"rilascio_dello_stress",13:"attivazione_lieve"};function u(){const d=l[i]||"neutro",h=a(d);console.log("STATE ID:",i),console.log("THERAPEUTIC ID:",d),console.log("PAYLOAD GENERATO:",h),n("hrvPlayerPremium",{payload:h})}return!o||!r?c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-red-600",children:"Errore"}),c.jsx("p",{children:"Impossibile trovare un piano terapeutico."}),c.jsx("button",{onClick:()=>n("hrvAnalysis"),className:"mt-4 px-4 py-2 bg-sky-600 text-white rounded-lg",children:"Torna allanalisi"})]}):c.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-sky-700 mb-6",children:"Risultato Analisi HRV"}),c.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 mb-6 border border-sky-200",children:[c.jsxs("h2",{className:"text-xl font-semibold text-sky-800",children:["Stato HRV: ",o.label]}),c.jsxs("p",{className:"text-gray-600 mt-1",children:["Zona: ",o.zone]})]}),c.jsxs("div",{className:"bg-sky-50 border border-sky-200 rounded-xl p-4 mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-sky-700",children:"Obiettivo"}),c.jsx("p",{className:"text-gray-700 mt-1",children:o.goal})]}),c.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 mb-6 border border-gray-200",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Routine consigliata (HRV)"}),c.jsxs("p",{className:"mt-2",children:[c.jsx("strong",{children:"Principale:"})," ",o.routine_main]}),c.jsxs("p",{className:"mt-1",children:[c.jsx("strong",{children:"Secondaria:"})," ",o.routine_secondary]}),c.jsxs("p",{className:"mt-3",children:[c.jsx("strong",{children:"Audio:"})," ",o.audio]}),c.jsxs("p",{className:"mt-1",children:[c.jsx("strong",{children:"Durata:"})," ",o.duration[0],"",o.duration[1]," min"]})]}),c.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 mb-6 border border-emerald-200",children:[c.jsx("h3",{className:"text-xl font-bold text-emerald-700 mb-3",children:"Piano Terapeutico Personalizzato"}),r.categories.map(d=>c.jsxs("div",{className:"mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:[d.emoji," ",d.label]}),d.tracks.map(h=>c.jsx("div",{className:"mt-2 p-3 bg-slate-100 rounded-xl",children:c.jsx("p",{className:"font-medium",children:h.id})},h.id))]},d.id)),c.jsxs("div",{className:"mt-4",children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:" Protocolli Respiratori"}),r.protocols.map((d,h)=>c.jsxs("p",{className:"text-gray-700 mt-1",children:[d.name,"  Inspira ",d.inhale,"s, Espira ",d.exhale,"s"]},h))]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:" Consigli Lifestyle"}),r.lifestyle.map((d,h)=>c.jsxs("p",{className:"text-gray-700 mt-1",children:[" ",d]},h))]})]}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("button",{onClick:()=>n("routinePlayer",{routine:o.routine_main,audio:o.audio,duration:o.duration[1]}),className:"w-full px-4 py-3 bg-sky-600 text-white rounded-xl font-semibold shadow hover:bg-sky-700 transition",children:"Avvia Routine HRV"}),c.jsx("button",{onClick:u,className:"w-full px-4 py-3 bg-emerald-600 text-white rounded-xl font-semibold shadow hover:bg-emerald-700 transition",children:"Avvia Routine HRV (Nuovo Motore)"}),c.jsx("button",{onClick:()=>n("hrvAnalysis"),className:"w-full px-4 py-3 bg-gray-200 text-gray-800 rounded-xl font-semibold shadow hover:bg-gray-300 transition",children:"Torna allanalisi"})]})]})};function zD(t){const e={requestedState:t,found:!1,fallbackUsed:!1,selectedKey:null,selectedUrl:null,categoryFallback:null};if(Dn[t])return e.found=!0,e.selectedKey=t,e.selectedUrl=Dn[t],{url:Dn[t],log:e};const n={coerenza:"Respirazione bilanciata",respirazione:"Respirazione bilanciata",rilassamento:"Rilascio dello stress",attivazione:"Gamma_riavvio",sovraccarico:"Neuromassaggi",collasso:"ARCHETIPO_D_Minimalista_Theta_Delta",neutro:"La_meditazione_epsilon",meditativo:"Il_Theta_Healing_Della_Natura"},i=Object.keys(n).find(s=>t.toLowerCase().includes(s));if(i){const s=n[i];return e.fallbackUsed=!0,e.categoryFallback=s,e.selectedKey=s,e.selectedUrl=Dn[s],{url:Dn[s],log:e}}const o="Rilascio dello stress";return e.fallbackUsed=!0,e.categoryFallback="universale",e.selectedKey=o,e.selectedUrl=Dn[o],{url:Dn[o],log:e}}const jD=({onNavigate:t,routine:e,audio:n,duration:i,description:o})=>{const s=i*60,[r,a]=J.useState(s),[l,u]=J.useState(!1),[d]=J.useState(!1),[h,m]=J.useState(null),[g,v]=J.useState([]),_=J.useRef(null),x=J.useRef(null);J.useEffect(()=>(l&&(_.current=setInterval(()=>{a(S=>S<=1?(clearInterval(_.current),u(!1),0):S-1)},1e3)),()=>clearInterval(_.current)),[l]);const y=Math.floor(r/60),b=r%60,w=()=>{u(k=>!k);const S=x.current;S&&(l?S.pause():S.play().catch(k=>{console.warn("Autoplay bloccato:",k)}))},C=()=>{u(!1),a(s);const S=x.current;S&&(S.currentTime=0,S.pause())},E=()=>{u(!1);const S=x.current;S&&(S.pause(),S.currentTime=0),t("home")},{url:N,log:T}=zD(n);return J.useEffect(()=>{m(T);const S={coerenza:"#1d4ed8",respirazione:"#0ea5e9",rilassamento:"#22c55e",attivazione:"#f97316",sovraccarico:"#dc2626",collasso:"#7c3aed",neutro:"#6b7280",meditativo:"#6366f1"},k=Object.keys(S).find(P=>n.toLowerCase().includes(P)),I=k?S[k]:"#ffffff";v(P=>[...P,{label:n,color:I}])},[n]),c.jsxs("div",{className:"p-6 max-w-xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-sky-700 mb-4",children:"Routine in corso"}),c.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 mb-6 border border-sky-200",children:[c.jsx("h2",{className:"text-xl font-semibold text-sky-800",children:e}),o&&c.jsx("p",{className:"text-gray-700 mt-3 leading-relaxed",children:o}),c.jsxs("p",{className:"text-gray-600 mt-1",children:["Audio: ",c.jsx("span",{className:"font-semibold",children:n})]}),c.jsxs("p",{className:"text-gray-600 mt-1",children:["Durata: ",c.jsxs("span",{className:"font-semibold",children:[i," minuti"]})]})]}),c.jsxs("div",{className:"mb-6",children:["//     ",c.jsx("audio",{ref:x,src:N,controls:!0,style:{width:"100%"}}),c.jsx("audio",{ref:x,src:`/CLINICAL-WELLNESS-SPA/${N.replace(/^\//,"")}`,controls:!0,style:{width:"100%"}})]}),c.jsx("div",{className:"bg-sky-50 border border-sky-200 rounded-xl p-6 text-center mb-6",children:c.jsxs("p",{className:"text-5xl font-bold text-sky-700",children:[y,":",b.toString().padStart(2,"0")]})}),c.jsxs("div",{className:"flex flex-col gap-3 mb-6",children:[c.jsx("button",{onClick:w,className:"w-full px-4 py-3 bg-sky-600 text-white rounded-xl font-semibold shadow hover:bg-sky-700 transition",children:l?"Pausa":"Avvia"}),c.jsx("button",{onClick:C,className:"w-full px-4 py-3 bg-gray-200 text-gray-800 rounded-xl font-semibold shadow hover:bg-gray-300 transition",children:"Reset"}),c.jsx("button",{onClick:E,className:"w-full px-4 py-3 bg-red-500 text-white rounded-xl font-semibold shadow hover:bg-red-600 transition",children:"Fine routine"})]}),d&&h&&c.jsxs("div",{className:"bg-gray-900 text-green-300 p-4 rounded-xl text-sm font-mono mb-6",children:[c.jsx("h3",{className:"text-yellow-300 font-bold mb-2",children:"DEBUG HRV"}),c.jsxs("p",{children:["Stato richiesto: ",h.requestedState]}),c.jsxs("p",{children:["Chiave trovata: ",h.found?"":""]}),c.jsxs("p",{children:["Chiave selezionata: ",h.selectedKey]}),c.jsxs("p",{children:["URL selezionato: ",h.selectedUrl]}),c.jsxs("p",{children:["Fallback usato: ",h.fallbackUsed?"":""]}),h.categoryFallback&&c.jsxs("p",{children:["Fallback categoria: ",h.categoryFallback]})]}),c.jsx("div",{className:"flex gap-2 overflow-x-auto p-2 bg-gray-100 rounded-xl border border-gray-300",children:g.map((S,k)=>c.jsx("div",{title:S.label,style:{width:"20px",height:"20px",backgroundColor:S.color,borderRadius:"4px"}},k))})]})},FD=()=>{const[t,e]=z.useState(null),[n,i]=z.useState("home"),[o,s]=z.useState(!1),[r,a]=z.useState(null),[l,u]=z.useState(Ii),[d,h]=z.useState(!1),[m,g]=z.useState(null),[v,_]=z.useState(null),[x,y]=z.useState(null),[b,w]=z.useState(null),C=z.useCallback(()=>{const V=Ee("customWellnessProgramsData",null);if(V&&Object.keys(V).length>0)u(V);else{try{localStorage.setItem("customWellnessProgramsData",JSON.stringify(Ii))}catch(W){console.error("Failed to save default wellness data:",W)}u(Ii)}},[]);z.useEffect(()=>{const V=Ee("user",null);V&&(e(V),(!V.age||!V.gender)&&h(!0)),C()},[C]);const E=V=>{e(V),localStorage.setItem("user",JSON.stringify(V)),(!V.age||!V.gender)&&h(!0),i("home")},N=V=>{e(V),localStorage.setItem("user",JSON.stringify(V)),h(!1),k("Profilo aggiornato con successo!","success")},T=()=>{e(null),localStorage.removeItem("user"),i("home")},S=(V,W=null)=>{_(null),y(null),w(W),i(V)},k=(V,W="success")=>{a({message:V,type:W})},I=V=>{_(V),y(null)},P=(V,W)=>{if(!v||!t)return;if(v==="microbiome"){const D=Ey(V),U={id:v,score:V,date:new Date().toISOString(),answers:W||{},profileId:D.profileId,profileName:D.profileName},R=`assessmentHistory_${t.email}_${v}`,O=Ee(R,[]);O.push(U),localStorage.setItem(R,JSON.stringify(O)),_(null),y(null),w(D),i("microbiomaResult");return}const q={id:v,score:V,date:new Date().toISOString(),answers:W},j=`assessmentHistory_${t.email}_${v}`,A=Ee(j,[]);A.push(q),localStorage.setItem(j,JSON.stringify(A)),y({id:v,score:V,answers:W}),_(null)},L=()=>{x&&(_(x.id),y(null))};if(!t)return c.jsx(MT,{onLogin:E});const M=()=>{if(v)return c.jsx(BT,{assessment:un[v],onComplete:P});if(x)return c.jsx(SI,{assessment:un[x.id],score:x.score,answers:x.answers,onRetake:L,onBackToHome:()=>S("assessments")});switch(n){case"treatment":return c.jsx(TreatmentScreen,{plan:b,onNavigate:S});case"routineTherapy":return c.jsx(RoutineTherapyScreen,{treatment:b,onExit:()=>S("hrvAnalysis")});case"home":return c.jsx(_m,{user:t,onNavigate:S});case"profile":return c.jsx(OT,{user:t,onLogout:T,onNavigate:S});case"assessments":return c.jsx(bm,{user:t,onStartAssessment:I,onNavigate:S});case"dashboard":return c.jsx(WL,{user:t,onNavigate:S});case"wellnessRoutine":return c.jsx(YL,{user:t,showNotification:k,wellnessData:l});case"breathing":return c.jsx(tD,{});case"hrvAnalysis":return c.jsx(ED,{onNavigate:S});case"ouraAnalysis":return c.jsx(xT,{onNavigate:S});case"hrvResult":return c.jsx(DD,{onNavigate:S,lf:b.lf,hf:b.hf});case"hrvPlayer":return c.jsx(yT,{payload:m});case"hrvPlayerPremium":return c.jsx(vT,{payload:b==null?void 0:b.payload,onNavigate:S});case"routinePlayer":return c.jsx(jD,{onNavigate:S,routine:b.routine,audio:b.audio,duration:b.duration});case"routinePlayerFitness":return c.jsx(ST,{onNavigate:S,pageData:b});case"autovalutazione":return c.jsx(bm,{user:t,onStartAssessment:I,onNavigate:S});case"testSonoroSonno":return c.jsx(yD,{utenteId:t.email,onNavigate:S,onVaiAMeditazioneGuidata:V=>S("meditazioneGuidata",V)});case"testSonoroResult":return c.jsx(_D,{risultato:b,onVaiAMeditazioneGuidata:V=>S("meditazioneGuidata",V),onBack:()=>S("testSonoroSonno")});case"meditazioneGuidata":return c.jsx(bD,{impostazioni:b,onBack:()=>S("home")});case"spaBookings":return c.jsx(nD,{user:t,showNotification:k});case"pharmacyServices":return c.jsx(iD,{user:t,showNotification:k});case"bloodAnalysis":return c.jsx(uD,{user:t});case"analysisQuote":return c.jsx(rD,{user:t,showNotification:k,onNavigate:S});case"prescriptions":return c.jsx(lD,{user:t,showNotification:k});case"manualUnlock":return c.jsx(aD,{user:t,onNavigate:S,showNotification:k,wellnessData:l});case"adminSettings":return c.jsx(cD,{onSettingsSaved:C,showNotification:k});case"community":return c.jsx(dD,{});case"visualizer":return c.jsx(pD,{});case"microbiomaResult":return c.jsx(wD,{risultato:b,onBack:()=>S("assessments"),onNavigate:S});case"fitness":return c.jsx(wT,{onNavigate:S});default:return c.jsx(_m,{user:t,onNavigate:S})}};return c.jsx(CT,{children:c.jsxs("div",{className:"flex h-screen bg-slate-50",children:[r&&c.jsx(NT,{notification:r,onClose:()=>a(null)}),d&&c.jsx(PT,{user:t,onSave:N}),c.jsx(IT,{user:t,currentPage:n,onNavigate:S,onLogout:T,isOpen:o,setIsOpen:s}),c.jsxs("main",{className:"flex-1 overflow-y-auto md:ml-64",children:[c.jsx("button",{onClick:()=>s(!o),className:"md:hidden fixed top-4 right-4 z-50 p-2 bg-sky-600 text-black rounded-full shadow-lg","aria-label":o?"Chiudi menu":"Apri menu",children:o?c.jsx(Rl,{className:"w-6 h-6"}):c.jsx(AT,{className:"w-6 h-6"})}),M()]})]})})},p0=document.getElementById("root");p0?Mc.createRoot(p0).render(c.jsx(FD,{})):console.error("Root container not found. The React app can't be mounted.");"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(t=>console.log("SW registrato:",t)).catch(t=>console.error("SW errore:",t))});
